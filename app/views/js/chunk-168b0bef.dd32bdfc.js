(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-168b0bef"],{"20dd":function(t,e,s){"use strict";var a=s("c427");class l{getAll(){return a["a"].get("/claims")}get(t){return a["a"].get("/claims/"+t)}create(t){return a["a"].post("/claims",t)}update(t,e){return a["a"].put("/claims/"+t,e)}updateAll(t,e){return a["a"].put("/claims/items/"+t,e)}delete(t){return a["a"].delete("/claims/"+t)}deleteAll(){return a["a"].delete("/claims")}findBySubDept(t){return a["a"].get("/claims?name="+t)}}e["a"]=new l},"39b3":function(t,e,s){},6741:function(t,e,s){"use strict";s.r(e);var a=s("a523"),l=s("71a3"),i=s("fe57"),n=function(){var t=this,e=t._self._c;return e("div",[e(a["a"],{attrs:{fluid:""}},[e(i["a"],[e(l["a"],{on:{click:function(e){t.incoming=!0,t.pending=!1,t.query=!1,t.approved=!1}}},[t._v("New")]),e(l["a"],{on:{click:function(e){t.pending=!0,t.incoming=!1,t.query=!1,t.approved=!1}}},[t._v("Pending")]),e(l["a"],{on:{click:function(e){t.query=!0,t.pending=!1,t.incoming=!1,t.approved=!1}}},[t._v("Query")]),e(l["a"],{on:{click:function(e){t.approved=!0,t.pending=!1,t.query=!1,t.incoming=!1}}},[t._v("Approved")])],1),t.incoming?e("incTab"):t._e(),t.pending?e("pendTab"):t._e(),t.query?e("cancTab"):t._e(),t.approved?e("approvedTab"):t._e()],1)],1)},r=[],c=s("c6a6"),o=s("8336"),d=s("b0af"),m=s("99d9"),u=s("62ad"),p=s("8fea"),h=s("2e4b"),C=s("169a"),b=s("4bd4"),f=s("e449"),v=s("0fd9"),y=s("2fa4"),g=s("8654"),x=s("a844"),D=function(){var t=this,e=t._self._c;return e("div",[e(p["a"],{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{dense:"",headers:t.headers,items:t.filteredClaims,search:t.search,loading:t.loadTable,"loading-text":"Working on it ......"},on:{"current-items":t.currentItems,"click:row":e=>t.showItem(e)},scopedSlots:t._u([{key:"top",fn:function(){return[e(C["a"],{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(d["a"],[e(m["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",[t._v(t._s(t.formTitle))])]),e(m["b"],[e(a["a"],[e(v["a"],[e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Travelling / Mileage"},model:{value:t.editedItem.travMileage,callback:function(e){t.$set(t.editedItem,"travMileage",e)},expression:"editedItem.travMileage"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Additional"},model:{value:t.editedItem.additional,callback:function(e){t.$set(t.editedItem,"additional",e)},expression:"editedItem.additional"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"SD & Stamps"},model:{value:t.editedItem.sdAndStamps,callback:function(e){t.$set(t.editedItem,"sdAndStamps",e)},expression:"editedItem.sdAndStamps"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Medical Report"},model:{value:t.editedItem.medicalReport,callback:function(e){t.$set(t.editedItem,"medicalReport",e)},expression:"editedItem.medicalReport"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Police Document"},model:{value:t.editedItem.policeDoc,callback:function(e){t.$set(t.editedItem,"policeDoc",e)},expression:"editedItem.policeDoc"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"JPJ Document"},model:{value:t.editedItem.jpjDoc,callback:function(e){t.$set(t.editedItem,"jpjDoc",e)},expression:"editedItem.jpjDoc"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Miscellaneous"},model:{value:t.editedItem.misc,callback:function(e){t.$set(t.editedItem,"misc",e)},expression:"editedItem.misc"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Typing"},model:{value:t.editedItem.typing,callback:function(e){t.$set(t.editedItem,"typing",e)},expression:"editedItem.typing"}})],1)],1)],1)],1),e(m["a"],[e(y["a"]),e(o["a"],{attrs:{tile:"",small:"",outlined:""},on:{click:t.close}},[t._v(" Cancel ")]),e(o["a"],{staticClass:"primary",attrs:{tile:"",small:"",disabled:t.isAddButtonDisabled},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),e(C["a"],{attrs:{"max-width":"500px",persistent:""},model:{value:t.approveDialog,callback:function(e){t.approveDialog=e},expression:"approveDialog"}},[e(d["a"],[e(m["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("Claim Details")]),e(m["b"],[e(a["a"],[e(b["a"],{attrs:{disabled:!1===t.management}},[e(v["a"],[e(u["a"],{staticClass:"display-3 text-start font-weight-bold",attrs:{cols:"12"}},[t._v(" MYR "+t._s(t.newTotal)+" ")])],1),e(v["a"],{attrs:{"no-gutters":""}},[e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Travelling ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"Travelling",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.travMileage,callback:function(e){t.$set(t.selectedClaim,"travMileage",e)},expression:"selectedClaim.travMileage"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Additional ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"Additional",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.additional,callback:function(e){t.$set(t.selectedClaim,"additional",e)},expression:"selectedClaim.additional"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("SD & Stamps ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"SD & Stamps",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.sdAndStamps,callback:function(e){t.$set(t.selectedClaim,"sdAndStamps",e)},expression:"selectedClaim.sdAndStamps"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Medical Reprot ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"Medical Reprot",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.medicalReport,callback:function(e){t.$set(t.selectedClaim,"medicalReport",e)},expression:"selectedClaim.medicalReport"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Police Document ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"Police Document",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.policeDoc,callback:function(e){t.$set(t.selectedClaim,"policeDoc",e)},expression:"selectedClaim.policeDoc"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("JPJ Document ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"JPJ Document",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.jpjDoc,callback:function(e){t.$set(t.selectedClaim,"jpjDoc",e)},expression:"selectedClaim.jpjDoc"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Miscellaneous ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"Miscellaneous",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.misc,callback:function(e){t.$set(t.selectedClaim,"misc",e)},expression:"selectedClaim.misc"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Typing ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"Typing",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.typing,callback:function(e){t.$set(t.selectedClaim,"typing",e)},expression:"selectedClaim.typing"}})],1),e(u["a"],{attrs:{cols:"12"}},[e(x["a"],{staticClass:"subtitle-1",attrs:{disabled:"",solo:"",dense:"",placeholder:"Comment"},model:{value:t.selectedClaim.isApprovedComment,callback:function(e){t.$set(t.selectedClaim,"isApprovedComment",e)},expression:"selectedClaim.isApprovedComment"}})],1),e(m["a"],[e(o["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:t.closeApproveDialog}},[t._v("CLOSE")])],1)],1)],1)],1)],1)],1)],1),e(C["a"],{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(d["a"],[e(m["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("Are you sure you want to delete "+t._s(t.editedItem.subCode)+"?")]),e(m["a"],[e(y["a"]),e(o["a"],{attrs:{tile:"",small:"",outlined:""},on:{click:t.closeDelete}},[t._v("Cancel")]),e(o["a"],{staticClass:"error",attrs:{tile:"",small:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),e(y["a"])],1)],1)],1),e(y["a"]),e(v["a"],{staticClass:"ma-1",staticStyle:{border:"1px dotted orange"},attrs:{justify:"center",align:"center"}},[e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[t.management?e(c["a"],{attrs:{clearable:"",items:t.members,"item-text":"username","item-value":"username","menu-props":{maxHeight:"400"},hint:"Filter by Adjuster","persistent-hint":"",label:"Adjuster"},model:{value:t.adjColumn,callback:function(e){t.adjColumn=e},expression:"adjColumn"}}):t._e()],1),e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[e(f["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(g["a"],t._g(t._b({attrs:{value:t.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:"",label:"Start Date"},on:{"click:clear":function(e){t.date=null}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},"v-text-field",a,!1),s))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(h["a"],{attrs:{value:t.computedDateFormattedMomentjs},on:{change:function(e){t.menu=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[e(f["a"],{ref:"menu1",attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(g["a"],t._g(t._b({attrs:{value:t.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:"",label:"End Date"},on:{"click:clear":function(e){t.date=null}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}},"v-text-field",a,!1),s))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[e(h["a"],{attrs:{value:t.computedDateFormattedMomentjs},on:{change:function(e){t.menu1=!1}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),e(u["a"],{staticClass:"text-center",attrs:{cols:"12",md:"3",sm:"12"}},[e("h3",[t._v("PENDING INVOICE")])])],1)]},proxy:!0},{key:"item.numbering",fn:function(e){return[t._v(" "+t._s(e.index+1)+" ")]}},{key:"item.caseId",fn:function({item:s}){return[e("tr",{staticClass:"d-flex"},[t._v(" AA "),t._l(t.filterCase(s.caseId),(function(s){return e("div",{key:s.id},t._l(t.filterDept(s.refType),(function(a,l){return e("div",{key:l},[t._v(" /"+t._s(a.name)),t._l(t.filterSubDept(s.subRefType),(function(s,a){return e("span",{key:a},[t._v("/"+t._s(s.subCode))])})),e("span",[t._v("/"+t._s(s.id)+"/"+t._s(t.yearOnly(s.createdAt)))]),t._l(t.filterBranches(s.branch),(function(s){return e("span",{key:s.id},[t._v("/"+t._s(s.brCode))])}))],2)})),0)}))],2)]}},{key:"item.adjId",fn:function({item:s}){return t._l(t.filterAdj(s.adjId),(function(s){return e("div",{key:s.id},[t._v(" "+t._s(s.username)+" ")])}))}},{key:"item.sumAll",fn:function({item:s}){return[e("span",[t._v("MYR "+t._s(t.total(s.id)))])]}},{key:"item.createdAt",fn:function({item:e}){return[t._v(" "+t._s(t.formatDate(e.createdAt))+" ")]}}],null,!0),model:{value:t.currentClaims,callback:function(e){t.currentClaims=e},expression:"currentClaims"}})],1)},I=[],_=(s("13d5"),s("e9f5"),s("910d"),s("ab43"),s("9485"),s("a732"),s("9df5")),A=s("f0cc"),k=s("20dd"),S=s("fde1"),M=s("5632"),j=s("cb28"),R=s("f983"),T=s("c1df"),w=s.n(T),$={name:"pendingList",data:()=>({loadTable:!0,currentClaims:[],menu:!1,menu1:!1,startDate:"",endDate:"",adjColumn:"",management:!1,dialog:!1,dialogDelete:!1,approveDialog:!1,casefiles:[],claims:[],selectedClaim:[],refType:[],subRefTypes:[],branches:[],insurers:[],members:[],allMembers:[],search:"",defaultItem:{id:null,caseId:null,adjId:null,travMileage:"",additional:"",sdAndStamps:"",medicalReport:"",policeDoc:"",jpjDoc:"",misc:"",typing:""},editedIndex:-1,editedItem:{id:null,caseId:null,adjId:null,travMileage:"",additional:"",sdAndStamps:"",medicalReport:"",policeDoc:"",jpjDoc:"",misc:"",typing:""}}),components:{},computed:{computedDateFormattedMomentjs(){return this.date?w()(this.date).format("DD/MM/YY"):""},headers(){return[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"AASB REFERENCE",align:"start",sortable:!0,value:"caseId"},{text:"ADJUSTER",align:"start",sortable:!1,value:"adjId",filter:t=>{if(!this.adjColumn)return!0;const e=this.filterAdj(t);return(e[0].username+"").toLowerCase().includes(this.adjColumn.toLowerCase())}},{text:"SUBMITTED ON",align:"start",sortable:!1,value:"createdAt",filter:t=>this.startDate&&!this.endDate?w()(t)>=w()(this.startDate):!this.startDate&&this.endDate?w()(t)<=w()(this.endDate):!this.startDate||!this.endDate||w()(t)>=w()(this.startDate)&&w()(t)<=w()(this.endDate)},{text:"CLAIMS TOTAL",align:"start",sortable:!0,value:"sumAll"}]},filteredClaims(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")?this.claims:this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")?this.claims.filter(t=>this.$store.state.auth.user.branches.includes(this.filterCase(t.caseId)[0].branch)):this.$store.state.auth.user.roles.includes("ADJUSTER")?this.claims.filter(t=>this.$store.state.auth.user.branches.includes(this.filterCase(t.caseId)[0].branch)&&this.$store.state.auth.user.id.toString().includes(t.adjId)):(this.$store.state.auth.user.roles.includes("EDITOR"),[])},newTotal(){const t=1*this.selectedClaim.travMileage+1*this.selectedClaim.additional+1*this.selectedClaim.sdAndStamps+1*this.selectedClaim.medicalReport+1*this.selectedClaim.policeDoc+1*this.selectedClaim.jpjDoc+1*this.selectedClaim.misc+1*this.selectedClaim.typing;return t.toFixed(2)},formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"},isAddButtonDisabled(){return!(this.editedItem.travMileage&&this.editedItem.additional&&this.editedItem.sdAndStamps&&this.editedItem.medicalReport&&this.editedItem.policeDoc&&this.editedItem.jpjDoc&&this.editedItem.misc&&this.editedItem.typing)}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},methods:{currentItems:function(t){return this.currentClaims=t},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},total(t){const e=this.claims.filter(e=>e.id===t),s=e.reduce((t,e)=>t+1*e.travMileage+1*e.additional+1*e.sdAndStamps+1*e.medicalReport+1*e.policeDoc+1*e.jpjDoc+1*e.misc+1*e.typing,0);return s.toFixed(2)},formatDate(t){return w()(t).format("DD/MM/YYYY LT")},yearOnly(t){return w()(t).format("YY")},filterCase(t){return this.casefiles.filter(e=>e.id===t)},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterUser(t){return this.allMembers.filter(e=>e.id===t)},filterAdj(t){return this.members.filter(e=>e.id===t)},retrieveClaims(){k["a"].getAll().then(t=>{this.claims=t.data.filter(t=>null===t.isApproved)}).catch(t=>{console.log(t)})},retrieveDept(){j["a"].getAll().then(t=>{this.refType=t.data}).catch(t=>{console.log(t)})},retrieveSubRefType(){R["a"].getAll().then(t=>{this.subRefTypes=t.data}).catch(t=>{console.log(t)})},retrieveBranches(){S["a"].getAll().then(t=>{this.branches=t.data.map(this.getDisplayBranch)}).catch(t=>{console.log(t)})},getDisplayBranch(t){return{id:t.id,name:t.name.length>30?t.name.substr(0,30)+"...":t.name,brCode:t.brCode.length>30?t.brCode.substr(0,30)+"...":t.brCode}},retrieveInsurer(){M["a"].getAll().then(t=>{this.insurers=t.data}).catch(t=>{console.log(t)})},retrieveMembers(){_["a"].getAll().then(t=>{this.members=t.data.filter(t=>t.roles.some(t=>"adjuster"===t.roleCode))}).catch(t=>{console.log(t)})},retrieveUsers(){_["a"].getAll().then(t=>{this.allMembers=t.data}).catch(t=>{console.log(t)})},retrieveCasefiles(){A["a"].getAll().then(t=>{this.casefiles=t.data,this.loadTable=!1}).catch(t=>{console.log(t)})},refreshList(){this.retrieveClaims()},showItem(t){this.selectedClaim=Object.assign({},t),this.approveDialog=!0},closeApproveDialog(){this.selectedClaim=Object.assign({}),this.approveDialog=!1},editItem(t){this.editedIndex=this.claims.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.claims.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){k["a"].delete(this.editedItem.id).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)}),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1)k["a"].update(this.editedItem.id,this.editedItem).then(t=>{this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)});else{var t={caseId:this.editedItem.caseId,adjId:this.editedItem.adjId,travMileage:this.editedItem.travMileage,additional:this.editedItem.additional,sdAndStamps:this.editedItem.sdAndStamps,medicalReport:this.editedItem.medicalReport,policeDoc:this.editedItem.policeDoc,jpjDoc:this.editedItem.jpjDoc,misc:this.editedItem.misc,typing:this.editedItem.typing};k["a"].create(t).then(t=>{this.editedItem.id=t.data.id,this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})})}this.close()}},mounted(){this.retrieveCasefiles(),this.retrieveClaims(),this.retrieveBranches(),this.retrieveInsurer(),this.retrieveDept(),this.retrieveSubRefType(),this.retrieveMembers(),this.retrieveUsers(),this.checkManagement()}},E=$,O=s("2877"),Y=Object(O["a"])(E,D,I,!1,null,null,null),B=Y.exports,N=function(){var t=this,e=t._self._c;return e("div",[e(p["a"],{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{dense:"",headers:t.headers,items:t.filteredClaims,search:t.search,loading:t.loadTable,"loading-text":"Working on it ......","show-select":""},on:{"current-items":t.currentItems,"click:row":e=>t.showItem(e)},scopedSlots:t._u([{key:"top",fn:function(){return[e(C["a"],{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(d["a"],[e(m["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",[t._v(t._s(t.formTitle))])]),e(m["b"],[e(a["a"],[e(v["a"],[e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Travelling / Mileage"},model:{value:t.editedItem.travMileage,callback:function(e){t.$set(t.editedItem,"travMileage",e)},expression:"editedItem.travMileage"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Additional"},model:{value:t.editedItem.additional,callback:function(e){t.$set(t.editedItem,"additional",e)},expression:"editedItem.additional"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"SD & Stamps"},model:{value:t.editedItem.sdAndStamps,callback:function(e){t.$set(t.editedItem,"sdAndStamps",e)},expression:"editedItem.sdAndStamps"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Medical Report"},model:{value:t.editedItem.medicalReport,callback:function(e){t.$set(t.editedItem,"medicalReport",e)},expression:"editedItem.medicalReport"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Police Document"},model:{value:t.editedItem.policeDoc,callback:function(e){t.$set(t.editedItem,"policeDoc",e)},expression:"editedItem.policeDoc"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"JPJ Document"},model:{value:t.editedItem.jpjDoc,callback:function(e){t.$set(t.editedItem,"jpjDoc",e)},expression:"editedItem.jpjDoc"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Miscellaneous"},model:{value:t.editedItem.misc,callback:function(e){t.$set(t.editedItem,"misc",e)},expression:"editedItem.misc"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Typing"},model:{value:t.editedItem.typing,callback:function(e){t.$set(t.editedItem,"typing",e)},expression:"editedItem.typing"}})],1)],1)],1)],1),e(m["a"],[e(y["a"]),e(o["a"],{attrs:{tile:"",small:"",outlined:""},on:{click:t.close}},[t._v(" Cancel ")]),e(o["a"],{staticClass:"primary",attrs:{tile:"",small:"",disabled:t.isAddButtonDisabled},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),e(C["a"],{attrs:{"max-width":"500px",persistent:""},model:{value:t.approveDialog,callback:function(e){t.approveDialog=e},expression:"approveDialog"}},[e(d["a"],[e(m["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("Claim Details")]),e(m["b"],[e(a["a"],[e(b["a"],{attrs:{disabled:!1===t.management}},[e(v["a"],[e(u["a"],{staticClass:"display-3 text-start font-weight-bold",attrs:{cols:"12"}},[t._v(" MYR "+t._s(t.newTotal)+" ")])],1),e(v["a"],{attrs:{"no-gutters":""}},[e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Travelling ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"Travelling",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.travMileage,callback:function(e){t.$set(t.selectedClaim,"travMileage",e)},expression:"selectedClaim.travMileage"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Additional ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"Additional",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.additional,callback:function(e){t.$set(t.selectedClaim,"additional",e)},expression:"selectedClaim.additional"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("SD & Stamps ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"SD & Stamps",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.sdAndStamps,callback:function(e){t.$set(t.selectedClaim,"sdAndStamps",e)},expression:"selectedClaim.sdAndStamps"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Medical Reprot ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"Medical Reprot",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.medicalReport,callback:function(e){t.$set(t.selectedClaim,"medicalReport",e)},expression:"selectedClaim.medicalReport"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Police Document ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"Police Document",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.policeDoc,callback:function(e){t.$set(t.selectedClaim,"policeDoc",e)},expression:"selectedClaim.policeDoc"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("JPJ Document ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"JPJ Document",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.jpjDoc,callback:function(e){t.$set(t.selectedClaim,"jpjDoc",e)},expression:"selectedClaim.jpjDoc"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Miscellaneous ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"Miscellaneous",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.misc,callback:function(e){t.$set(t.selectedClaim,"misc",e)},expression:"selectedClaim.misc"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Typing ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"Typing",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.typing,callback:function(e){t.$set(t.selectedClaim,"typing",e)},expression:"selectedClaim.typing"}})],1),e(u["a"],{attrs:{cols:"12"}},[e(x["a"],{staticClass:"subtitle-1",attrs:{solo:"",dense:"",placeholder:"Comment"},model:{value:t.commentData.comment,callback:function(e){t.$set(t.commentData,"comment",e)},expression:"commentData.comment"}})],1),e(m["a"],[t.management?e(o["a"],{staticClass:"success",attrs:{small:"",tile:""},on:{click:t.approveConfirm}},[t._v("APPROVE")]):t._e(),t.management?e(o["a"],{staticClass:"warning",attrs:{small:"",tile:""},on:{click:t.declineConfirm}},[t._v("QUERY")]):t._e(),e(o["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:t.closeApproveDialog}},[t._v("CLOSE")])],1)],1)],1)],1)],1)],1)],1),e(C["a"],{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(d["a"],[e(m["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("Are you sure you want to delete "+t._s(t.editedItem.subCode)+"?")]),e(m["a"],[e(y["a"]),e(o["a"],{attrs:{tile:"",small:"",outlined:""},on:{click:t.closeDelete}},[t._v("Cancel")]),e(o["a"],{staticClass:"error",attrs:{tile:"",small:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),e(y["a"])],1)],1)],1),e(y["a"]),e(v["a"],{staticClass:"ma-1 text-center justify-center align-center",staticStyle:{border:"1px dotted orange"}},[e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[t.management?e(c["a"],{attrs:{clearable:"",items:t.members,"item-text":"username","item-value":"username","menu-props":{maxHeight:"400"},hint:"Filter by Adjuster","persistent-hint":"",label:"Adjuster"},model:{value:t.adjColumn,callback:function(e){t.adjColumn=e},expression:"adjColumn"}}):t._e()],1),e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[e(f["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(g["a"],t._g(t._b({attrs:{value:t.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:"",label:"Start Date"},on:{"click:clear":function(e){t.date=null}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},"v-text-field",a,!1),s))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(h["a"],{attrs:{value:t.computedDateFormattedMomentjs},on:{change:function(e){t.menu=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[e(f["a"],{ref:"menu1",attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(g["a"],t._g(t._b({attrs:{value:t.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:"",label:"End Date"},on:{"click:clear":function(e){t.date=null}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}},"v-text-field",a,!1),s))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[e(h["a"],{attrs:{value:t.computedDateFormattedMomentjs},on:{change:function(e){t.menu1=!1}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[e("ClaimForm",{attrs:{casefiles:t.casefiles,refType:t.refType,subRefTypes:t.subRefTypes,branches:t.branches,insurers:t.insurers,members:t.members,currentClaims:t.currentClaims}})],1)],1)]},proxy:!0},{key:"item.numbering",fn:function(e){return[t._v(" "+t._s(e.index+1)+" ")]}},{key:"item.caseId",fn:function({item:s}){return[e("tr",{staticClass:"d-flex"},[t._v(" AA "),t._l(t.filterCase(s.caseId),(function(s){return e("div",{key:s.id},t._l(t.filterDept(s.refType),(function(a,l){return e("div",{key:l},[t._v(" /"+t._s(a.name)),t._l(t.filterSubDept(s.subRefType),(function(s,a){return e("span",{key:a},[t._v("/"+t._s(s.subCode))])})),e("span",[t._v("/"+t._s(s.id)+"/"+t._s(t.yearOnly(s.createdAt)))]),t._l(t.filterBranches(s.branch),(function(s){return e("span",{key:s.id},[t._v("/"+t._s(s.brCode))])}))],2)})),0)}))],2)]}},{key:"item.adjId",fn:function({item:s}){return t._l(t.filterUser(s.adjId),(function(s){return e("div",{key:s.id},[t._v(" "+t._s(s.username)+" ")])}))}},{key:"item.sumAll",fn:function({item:s}){return[e("span",[t._v("MYR "+t._s(t.total(s.id)))])]}},{key:"item.createdAt",fn:function({item:e}){return[t._v(" "+t._s(t.formatDate(e.createdAt))+" ")]}}],null,!0),model:{value:t.currentClaims,callback:function(e){t.currentClaims=e},expression:"currentClaims"}})],1)},L=[],P=s("e4ba"),F=s("132d"),U=s("3a2f"),J=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{width:"auto"},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e(u["a"],{staticClass:"d-none d-sm-none d-md-flex justify-center",attrs:{cols:"12"}},[e(U["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(o["a"],t._g({staticClass:"success",attrs:{fab:"",small:"",dark:""}},{...a,...s}),[e(F["a"],[t._v("mdi-file-pdf-box")])],1)]}}],null,!0)},[e("span",[t._v("Claim Form")])])],1),e(u["a"],{staticClass:"pb-5 d-md-none justify-center",attrs:{cols:"12"}},[e(U["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(o["a"],t._g({staticClass:"success",attrs:{tile:"",block:"",dark:""}},{...a,...s}),[t._v(" CLAIM FORM ")])]}}],null,!0)},[e("span",[t._v("Claim Form")])])],1)]}}]),model:{value:t.claimform,callback:function(e){t.claimform=e},expression:"claimform"}},[e(d["a"],{staticClass:"html",attrs:{tile:""}},[e(y["a"]),e("div",{staticClass:"pa-2",attrs:{align:"end"}},[e(o["a"],{staticClass:"mr-1",attrs:{outlined:"",small:"",tile:""},on:{click:t.closeDownloadAck}},[t._v(" Cancel ")]),e("download-button",{attrs:{dom:"#letter"}})],1),e("div",{attrs:{id:"letter"}},[e("table",{staticClass:"sheet0 gridlines",attrs:{border:"0",cellpadding:"0",cellspacing:"0",id:"sheet0"}},[e("thead",[e("tr",{staticClass:"row0"},[e("th",{staticClass:"column0 style68 s style68",attrs:{colspan:"18"}},[t._v(" ASSOCIATED ADJUSTERS SDN BHD ")])]),e("tr",{staticClass:"row1"},[e("th",{staticClass:"column0 style7 null"}),e("th",{staticClass:"column1 style7 null"}),e("th",{staticClass:"column2 style7 null"}),e("th",{staticClass:"column3 style7 null"}),e("th",{staticClass:"column4 style7 null"}),e("th",{staticClass:"column5 style7 null"}),e("th",{staticClass:"column6 style7 null"}),e("th",{staticClass:"column7 style7 null"}),e("th",{staticClass:"column8 style7 null"}),e("th",{staticClass:"column9 style7 null"}),e("th",{staticClass:"column10 style7 null"}),e("th",{staticClass:"column11 style7 null"}),e("th",{staticClass:"column12 style7 null"}),e("th",{staticClass:"column13 style7 null"}),e("th",{staticClass:"column14 style7 null"}),e("th",{staticClass:"column15 style7 null"}),e("th",{staticClass:"column16 style7 null"}),e("th",{staticClass:"column17 style7 null"})]),e("tr",{staticClass:"row2"},[e("th",{staticClass:"header"},[t._v("NAME:")]),e("th",{staticClass:"header"}),e("th",{staticClass:"headerborder",attrs:{colspan:"5"}},[t.currentClaims[0]?e("span",[t._v(" "+t._s(t.filterUser(t.currentClaims[0].adjId))+" ")]):t._e()]),e("th",{staticClass:"header",attrs:{colspan:"3"}},[t._v("MONTHLY REIMBURSEMENT CLAIMS")]),e("th",{staticClass:"header"}),e("th",{staticClass:"header"}),e("th",{staticClass:"header"},[t._v("MONTH / YEAR:")]),e("th",{staticClass:"headerborder",attrs:{colspan:"2"}},[t.currentClaims[0]?e("span",[t._v(" "+t._s(t.monthOnly(t.currentClaims[0].createdAt))+" ")]):t._e()]),e("th",{staticClass:"headerborder",attrs:{colspan:"2"}},[t.currentClaims[0]?e("span",[t._v(" "+t._s(t.yearOnly(t.currentClaims[0].createdAt))+" ")]):t._e()]),e("th",{staticClass:"column17 style1 null"})]),e("tr",{staticClass:"row3"},[e("th",{staticClass:"column0 style69 null style69",attrs:{colspan:"18"}})]),e("tr",{staticClass:"row4 grey lighten-1 text-caption text-center"},[e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" NO. ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{colspan:"2"}},[t._v(" REFERENCE ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" VEHICLE"),e("br"),t._v(" NO. ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" INSURER ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" INVOICE"),e("br"),t._v(" NO. ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" INVOICE AMOUNT ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" ADJUSTING FEES ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" PLACE OF LOSS ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" TRAVELLING / MILEAGE ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" ADD. ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" SD & STAMPS ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" MEDICAL REPORT ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" POLICE DOC. ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" JPJ DOC. ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" MISC ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" TYPING ")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"},attrs:{rowspan:"2"}},[t._v(" TOTAL ")])]),e("tr",[e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"}},[t._v("TYPE")]),e("th",{staticClass:"boxheader",staticStyle:{border:"1px solid black"}},[t._v(" FILE NO. ")])])]),t.currentClaims?e("tbody",[t._l(t.currentClaims,(function(s,a){return e("tr",{key:s.id,staticClass:"row6 text-no-wrap"},[e("td",{staticClass:"tabletext"},[t._v(t._s(a+1))]),s?e("td",{staticClass:"tabletext"},[t._v(" "+t._s(t.filterDept(t.filterCaseByReftype(s.caseId)))+" ")]):t._e(),e("td",{staticClass:"tabletext"},[t._v(" "+t._s(t.filterCaseById(s.caseId))+" ")]),e("td",{staticClass:"tabletext"},[t._v(" "+t._s(t.filterCaseByVehicleNo(s.caseId))+" ")]),e("td",{staticClass:"tabletext"},[t._v(" "+t._s(t.filterIns(t.filterCaseByInsurer(s.caseId)))+" ")]),e("td",{staticClass:"tabletext"},[t._v(" "+t._s(t.filterCaseByInvno(s.caseId))+" ")]),e("td",{staticClass:"tabletext"},[t._v(" "+t._s((1*t.filterCaseByInvtotal(s.caseId)).toFixed(2))+" ")]),e("td",{staticClass:"tabletext"},[t._v(" "+t._s((1*t.filterCaseByAdjFee(s.caseId)).toFixed(2))+" ")]),e("td",{staticClass:"tabletext"},[t._v(" "+t._s(t.filterCasePlaceofloss(s.caseId))+" ")]),e("td",{staticClass:"tabletext"},[t._v(t._s(s.travMileage))]),e("td",{staticClass:"tabletext"},[t._v(t._s(s.additional))]),e("td",{staticClass:"tabletext"},[t._v(t._s(s.sdAndStamps))]),e("td",{staticClass:"tabletext"},[t._v(t._s(s.medicalReport))]),e("td",{staticClass:"tabletext"},[t._v(t._s(s.policeDoc))]),e("td",{staticClass:"tabletext"},[t._v(t._s(s.jpjDoc))]),e("td",{staticClass:"tabletext"},[t._v(t._s(s.misc))]),e("td",{staticClass:"tabletext"},[t._v(t._s(s.typing))]),e("td",{staticClass:"tabletotalyellow"},[t._v(t._s(t.total(s.id)))])])})),e("tr",{staticClass:"row36"},[e("td",{staticClass:"column0 style15 null"}),e("td",{staticClass:"column1 style15 null"}),e("td",{staticClass:"column2 style16 null"}),e("td",{staticClass:"column3 style17 null"}),e("td",{staticClass:"column4 style15 null"}),e("td",{staticClass:"column5 style15 null"}),e("td",{staticClass:"column6 style18 null"}),e("td",{staticClass:"column7 style18 null"}),e("td",{staticClass:"column8 style17 null"}),e("td",{staticClass:"column9 style19 null"}),e("td",{staticClass:"column10 style19 null"}),e("td",{staticClass:"column11 style19 null"}),e("td",{staticClass:"column12 style19 null"}),e("td",{staticClass:"column13 style19 null"}),e("td",{staticClass:"column14 style19 null"}),e("td",{staticClass:"column15 style19 null"}),e("td",{staticClass:"column16 style19 null"}),e("td",{staticClass:"column17 style19 null"})]),e("tr",{staticClass:"row37"},[e("td",{staticClass:"column0 style36 null"}),e("td",{staticClass:"column1 style67 s style67",attrs:{colspan:"3"}},[t._v(" FOLLOW UP / SHARED FILES ")]),e("td",{staticClass:"column4 style15 null"}),e("td",{staticClass:"column5 style15 null"}),e("td",{staticClass:"column6 style18 null"}),e("td",{staticClass:"column7 style18 null"}),e("td",{staticClass:"column8 style17 null"}),e("td",{staticClass:"column9 style19 null"}),e("td",{staticClass:"column10 style19 null"}),e("td",{staticClass:"column11 style19 null"}),e("td",{staticClass:"column12 style19 null"}),e("td",{staticClass:"column13 style19 null"}),e("td",{staticClass:"column14 style19 null"}),e("td",{staticClass:"column15 style19 null"}),e("td",{staticClass:"column16 style19 null"}),e("td",{staticClass:"column17 style19 null"})]),e("tr",{staticClass:"row38"},[e("td",{staticClass:"column0 style15 n"},[t._v("1")]),e("td",{staticClass:"column1 style15 null"}),e("td",{staticClass:"column2 style20 null"}),e("td",{staticClass:"column3 style17 null"}),e("td",{staticClass:"column4 style15 null"}),e("td",{staticClass:"column5 style36 null"}),e("td",{staticClass:"column6 style37 null"}),e("td",{staticClass:"column7 style37 null"}),e("td",{staticClass:"column8 style17 null"}),e("td",{staticClass:"column9 style19 null"}),e("td",{staticClass:"column10 style19 null"}),e("td",{staticClass:"column11 style19 null"}),e("td",{staticClass:"column12 style19 null"}),e("td",{staticClass:"column13 style19 null"}),e("td",{staticClass:"column14 style19 null"}),e("td",{staticClass:"column15 style19 null"}),e("td",{staticClass:"column16 style19 null"}),e("td",{staticClass:"column17 style27 f"},[t._v("0.00")])]),e("tr",{staticClass:"row39"},[e("td",{staticClass:"column0 style15 n"},[t._v("2")]),e("td",{staticClass:"column1 style15 null"}),e("td",{staticClass:"column2 style20 null"}),e("td",{staticClass:"column3 style17 null"}),e("td",{staticClass:"column4 style15 null"}),e("td",{staticClass:"column5 style36 null"}),e("td",{staticClass:"column6 style37 null"}),e("td",{staticClass:"column7 style37 null"}),e("td",{staticClass:"column8 style17 null"}),e("td",{staticClass:"column9 style19 null"}),e("td",{staticClass:"column10 style19 null"}),e("td",{staticClass:"column11 style19 null"}),e("td",{staticClass:"column12 style19 null"}),e("td",{staticClass:"column13 style19 null"}),e("td",{staticClass:"column14 style19 null"}),e("td",{staticClass:"column15 style19 null"}),e("td",{staticClass:"column16 style19 null"}),e("td",{staticClass:"column17 style27 f"},[t._v("0.00")])]),e("tr",{staticClass:"row40"},[e("td",{staticClass:"column0 style15 n"},[t._v("3")]),e("td",{staticClass:"column1 style15 null"}),e("td",{staticClass:"column2 style20 null"}),e("td",{staticClass:"column3 style17 null"}),e("td",{staticClass:"column4 style15 null"}),e("td",{staticClass:"column5 style36 null"}),e("td",{staticClass:"column6 style37 null"}),e("td",{staticClass:"column7 style37 null"}),e("td",{staticClass:"column8 style17 null"}),e("td",{staticClass:"column9 style19 null"}),e("td",{staticClass:"column10 style19 null"}),e("td",{staticClass:"column11 style19 null"}),e("td",{staticClass:"column12 style19 null"}),e("td",{staticClass:"column13 style19 null"}),e("td",{staticClass:"column14 style19 null"}),e("td",{staticClass:"column15 style19 null"}),e("td",{staticClass:"column16 style19 null"}),e("td",{staticClass:"column17 style27 f"},[t._v("0.00")])]),e("tr",{staticClass:"row41"},[e("td",{staticClass:"column0 style21 null"}),e("td",{staticClass:"column1 style21 null"}),e("td",{staticClass:"column2 style22 null"}),e("td",{staticClass:"column3 style23 null"}),e("td",{staticClass:"column4 style21 null"}),e("td",{staticClass:"column5 style38 null"}),e("td",{staticClass:"column6 style39 null"}),e("td",{staticClass:"column7 style39 null"}),e("td",{staticClass:"column8 style23 null"}),e("td",{staticClass:"column9 style24 null"}),e("td",{staticClass:"column10 style24 null"}),e("td",{staticClass:"column11 style24 null"}),e("td",{staticClass:"column12 style24 null"}),e("td",{staticClass:"column13 style24 null"}),e("td",{staticClass:"column14 style24 null"}),e("td",{staticClass:"column15 style24 null"}),e("td",{staticClass:"column16 style24 null"}),e("td",{staticClass:"column17 style27 f"},[t._v("0.00")])]),e("tr",{staticClass:"row42"},[e("td",{staticClass:"column0 style58 s style58",attrs:{colspan:"6"}},[t._v("TOTAL")]),e("td",{staticClass:"column6 style47 f"},[t._v("0")]),e("td",{staticClass:"column7 style47 f"},[t._v("0")]),e("td",{staticClass:"column8 style48 null"}),e("td",{staticClass:"tabletotalpink"},[e("span",[t._v(" "+t._s(t.sumTravMileage)+" ")])]),e("td",{staticClass:"tabletotalpink"},[e("span",[t._v(" "+t._s(t.sumAdditional)+" ")])]),e("td",{staticClass:"tabletotalpink"},[e("span",[t._v(" "+t._s(t.sumSdAndStamps)+" ")])]),e("td",{staticClass:"tabletotalpink"},[e("span",[t._v(" "+t._s(t.sumMedicalReport)+" ")])]),e("td",{staticClass:"tabletotalpink"},[e("span",[t._v(" "+t._s(t.sumPoliceDoc)+" ")])]),e("td",{staticClass:"tabletotalpink"},[e("span",[t._v(" "+t._s(t.sumJpjDoc)+" ")])]),e("td",{staticClass:"tabletotalpink"},[e("span",[t._v(" "+t._s(t.sumMisc)+" ")])]),e("td",{staticClass:"tabletotalpink"},[e("span",[t._v(" "+t._s(t.sumTyping)+" ")])]),e("td",{staticClass:"column17 style27 f"},[t._v("0.00")])]),e("tr",{staticClass:"row43"},[e("td",{staticClass:"column0 style25 null"}),e("td",{staticClass:"column1 style25 null"}),e("td",{staticClass:"column2 style25 null"}),e("td",{staticClass:"column3 style25 null"}),e("td",{staticClass:"column4 style25 null"}),e("td",{staticClass:"column5 style25 null"}),e("td",{staticClass:"column6 style25 null"}),e("td",{staticClass:"column7 style25 null"}),e("td",{staticClass:"column8 style25 null"}),e("td",{staticClass:"column9 style25 null"}),e("td",{staticClass:"column10 style25 null"}),e("td",{staticClass:"column11 style25 null"}),e("td",{staticClass:"column12 style25 null"}),e("td",{staticClass:"column13 style25 null"}),e("td",{staticClass:"column14 style25 null"}),e("td",{staticClass:"column15 style25 null"}),e("td",{staticClass:"column16 style25 null"}),e("td",{staticClass:"column17 style25 null"})]),e("tr",{staticClass:"row44"},[e("td",{staticClass:"tablegreyborder",attrs:{colspan:"3",rowspan:"3"}},[e("br"),t._v(" CLAIMANT ")]),e("td",{staticClass:"tablegreyborder",attrs:{colspan:"5",rowspan:"3"}},[e("br"),t._v(" CHECKED & APPROVED ")]),e("td",{staticClass:"column8 style50 s style50",attrs:{colspan:"7"}},[t._v("SUB - TOTAL")]),e("td",{staticClass:"tabletotalpink",attrs:{colspan:"2"}},[t._v(" "+t._s(t.sumAll)+" ")]),e("td",{staticClass:"column17 style5 null"})]),e("tr",{staticClass:"row45"},[e("td",{staticClass:"column8 style30 s"},[t._v("@ RM")]),e("td",{staticClass:"column9 style31 n"},[t._v(t._s(t.accRate))]),e("td",{staticClass:"column10 style32 s"},[t._v("X")]),e("td",{staticClass:"column11 style31 n"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.accDays,expression:"accDays"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.accDays},on:{input:function(e){e.target.composing||(t.accDays=e.target.value)}}})]),e("td",{staticClass:"column12 style33 s"},[t._v("(DAYS)")]),e("td",{staticClass:"column13 style34 null"}),e("td",{staticClass:"column14 style29 s"},[t._v("ACCOMODATION")]),e("td",{staticClass:"column15 style60 f style60",attrs:{colspan:"2"}},[t._v(" "+t._s(t.sumAccomodation)+" ")]),e("td",{staticClass:"column17 style5 null"})]),e("tr",{staticClass:"row46"},[e("td",{staticClass:"column8 style50 s style50",attrs:{colspan:"7"}},[t._v(" HANDPHONE BILL ")]),e("td",{staticClass:"column15 style52 null style52",attrs:{colspan:"2"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.handPhoneBill,expression:"handPhoneBill"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.handPhoneBill},on:{input:function(e){e.target.composing||(t.handPhoneBill=e.target.value)}}})]),e("td",{staticClass:"column17 style5 null"})]),e("tr",{staticClass:"row47"},[e("td",{staticClass:"column0 style72 null style72",attrs:{colspan:"3",rowspan:"5"}}),e("td",{staticClass:"column3 style56 null style57",attrs:{colspan:"5",rowspan:"5"}}),e("td",{staticClass:"column8 style35 s text-no-wrap"},[t._v("PLEASE SPECIFY:")]),e("td",{staticClass:"column9 style51 s style51",attrs:{colspan:"6"}},[e("select",[e("option",{attrs:{value:""}}),t._l(t.specifySelect,(function(s,a){return e("option",{key:a,domProps:{value:s.text}},[t._v(" "+t._s(s.text)+" ")])}))],2)]),e("td",{staticClass:"column15 style52 null style52",attrs:{colspan:"2"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.parkingBill,expression:"parkingBill"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.parkingBill},on:{input:function(e){e.target.composing||(t.parkingBill=e.target.value)}}})]),e("td",{staticClass:"column17 style5 null"})]),e("tr",{staticClass:"row48"},[e("td",{staticClass:"column8 style35 s text-no-wrap"},[t._v("PLEASE SPECIFY:")]),e("td",{staticClass:"column9 style51 null style51",attrs:{colspan:"6"}},[e("select",[e("option",{attrs:{value:""}}),t._l(t.specifySelect,(function(s,a){return e("option",{key:a,domProps:{value:s.text}},[t._v(" "+t._s(s.text)+" ")])}))],2)]),e("td",{staticClass:"column15 style52 null style52",attrs:{colspan:"2"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.miscBill1,expression:"miscBill1"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.miscBill1},on:{input:function(e){e.target.composing||(t.miscBill1=e.target.value)}}})]),e("td",{staticClass:"column17 style5 null"})]),e("tr",{staticClass:"row49"},[e("td",{staticClass:"column8 style35 s text-no-wrap"},[t._v("PLEASE SPECIFY:")]),e("td",{staticClass:"column9 style51 null style51",attrs:{colspan:"6"}},[e("select",[e("option",{attrs:{value:""}}),t._l(t.specifySelect,(function(s,a){return e("option",{key:a,domProps:{value:s.text}},[t._v(" "+t._s(s.text)+" ")])}))],2)]),e("td",{staticClass:"column15 style52 null style52",attrs:{colspan:"2"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.miscBill2,expression:"miscBill2"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.miscBill2},on:{input:function(e){e.target.composing||(t.miscBill2=e.target.value)}}})]),e("td",{staticClass:"column17 style5 null"})]),e("tr",{staticClass:"row50"},[e("td",{staticClass:"column8 style35 s text-no-wrap"},[t._v("PLEASE SPECIFY:")]),e("td",{staticClass:"column9 style51 null style51",attrs:{colspan:"6"}},[e("select",[e("option",{attrs:{value:""}}),t._l(t.specifySelect,(function(s,a){return e("option",{key:a,domProps:{value:s.text}},[t._v(" "+t._s(s.text)+" ")])}))],2)]),e("td",{staticClass:"column15 style52 null style52",attrs:{colspan:"2"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.miscBill3,expression:"miscBill3"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.miscBill3},on:{input:function(e){e.target.composing||(t.miscBill3=e.target.value)}}})]),e("td",{staticClass:"column17 style5 null"})]),e("tr",{staticClass:"row51"},[e("td",{staticClass:"column8 style50 s style50",attrs:{colspan:"7"}},[t._v(" ( LESS ) TRAVELLING ADVANCE ")]),e("td",{staticClass:"column15 style52 null style52",attrs:{colspan:"2"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.travAdvance,expression:"travAdvance"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.travAdvance},on:{input:function(e){e.target.composing||(t.travAdvance=e.target.value)}}})]),e("td",{staticClass:"column17 style5 null"})]),e("tr",{staticClass:"row52"},[e("td",{staticClass:"tablegreyborder",attrs:{colspan:"3"}},[t._v("ADJUSTER")]),e("td",{staticClass:"tablegreyborder",attrs:{colspan:"5"}},[t._v("MANAGER")]),e("td",{staticClass:"column8 style50 s style50",attrs:{colspan:"7"}},[t._v(" AMOUNT PAYABLE ")]),e("td",{staticClass:"column15 style53 f style54",attrs:{colspan:"2"}},[t._v(" "+t._s(t.totalAmountPayable)+" ")]),e("td",{staticClass:"column17 style5 null"})])],2):t._e()])])],1)],1)},G=[],H=function(){var t=this,e=t._self._c;return e(o["a"],{staticClass:"success",attrs:{small:"",tile:""},on:{mousedown:t.downloadFile}},[t._v("Download")])},V=[],K=s("d67e"),q=s.n(K),W={props:["dom","name"],methods:{downloadFile(){const t=this,e=document.querySelector(t.dom);var s={margin:5,filename:t.name,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",putOnlyUsedFonts:!0,floatPrecision:"smart",orientation:"landscape"}};q()().from(e).set(s).save()}}},Q=W,X=Object(O["a"])(Q,H,V,!1,null,null,null),z=X.exports,Z={name:"claimform",props:["casefiles","refType","subRefTypes","branches","insurers","members","currentClaims","menu","menu1"],components:{DownloadButton:z},data(){return{claimform:!1,accRate:80,accDays:0,handPhoneBill:0,parkingBill:0,miscBill1:0,miscBill2:0,miscBill3:0,travAdvance:0,amountPayable:0,specifySelect:[{text:"ACCOMODATION"},{text:"CAR RENTAL"},{text:"CLEANER SERVICES"},{text:"COURRIER SERVICE"},{text:"FLIGHT TICKET"},{text:"INTERNET BILL"},{text:"MARKETING EXPENSES"},{text:"MONTHLY PARKING FEES"},{text:"STATIONERIES"},{text:"TOLL"},{text:"UP KEEP COMPUTER"},{text:"UP KEEP OFFICE"}]}},computed:{sumTravMileage(){const t=this.currentClaims.map(t=>t.travMileage);return t.reduce((t,e)=>t+1*e,0).toFixed(2)},sumAdditional(){const t=this.currentClaims.map(t=>t.additional);return t.reduce((t,e)=>t+1*e,0).toFixed(2)},sumSdAndStamps(){const t=this.currentClaims.map(t=>t.sdAndStamps);return t.reduce((t,e)=>t+1*e,0).toFixed(2)},sumMedicalReport(){const t=this.currentClaims.map(t=>t.medicalReport);return t.reduce((t,e)=>t+1*e,0).toFixed(2)},sumPoliceDoc(){const t=this.currentClaims.map(t=>t.policeDoc);return t.reduce((t,e)=>t+1*e,0).toFixed(2)},sumJpjDoc(){const t=this.currentClaims.map(t=>t.jpjDoc);return t.reduce((t,e)=>t+1*e,0).toFixed(2)},sumMisc(){const t=this.currentClaims.map(t=>t.misc);return t.reduce((t,e)=>t+1*e,0).toFixed(2)},sumTyping(){const t=this.currentClaims.map(t=>t.typing);return t.reduce((t,e)=>t+1*e,0).toFixed(2)},sumAll(){return this.currentClaims.reduce((t,e)=>t+1*e.travMileage+1*e.additional+1*e.sdAndStamps+1*e.medicalReport+1*e.policeDoc+1*e.jpjDoc+1*e.misc+1*e.typing,0).toFixed(2)},sumAccomodation(){return(this.accDays*this.accRate).toFixed(2)},totalAmountPayable(){return(1*this.sumAll+1*this.sumAccomodation+1*this.handPhoneBill+1*this.parkingBill+1*this.miscBill1+1*this.miscBill2+1*this.miscBill3-1*this.travAdvance).toFixed(2)}},methods:{getClaimStatus(t){return null==t?"(NEW)":0==t?"(QUERY)":1==t?"(APPROVED)":"green darken-3"},total(t){const e=this.currentClaims.filter(e=>e.id===t),s=e.reduce((t,e)=>t+1*e.travMileage+1*e.additional+1*e.sdAndStamps+1*e.medicalReport+1*e.policeDoc+1*e.jpjDoc+1*e.misc+1*e.typing,0);return s.toFixed(2)},monthOnly(t){return w()(t).format("MMM").toUpperCase()},yearOnly(t){return w()(t).format("YYYY")},filterUser(t){const e=this.members.filter(e=>e.id===t);let s=e.map(t=>t.username+" ("+t.usercode+")");return s[0]},filterCase(t){return this.casefiles.filter(e=>e.id===t)},filterCaseByReftype(t){const e=this.casefiles.filter(e=>e.id===t);let s=e.map(t=>t.refType);return s[0]},filterCaseById(t){const e=this.casefiles.filter(e=>e.id===t);let s=e.map(t=>t.id);return s[0]},filterCaseByVehicleNo(t){const e=this.casefiles.filter(e=>e.id===t);let s=e.map(t=>t.vehicleNo);return s[0].toUpperCase()},filterCaseByInsurer(t){const e=this.casefiles.filter(e=>e.id===t);let s=e.map(t=>t.insurer);return s[0]},filterCaseByInvno(t){const e=this.casefiles.filter(e=>e.id===t);let s=e.map(t=>t.invNo);return s[0]},filterCaseByInvtotal(t){const e=this.casefiles.filter(e=>e.id===t);let s=e.map(t=>t.invTotal);return s[0]},filterCaseByAdjFee(t){const e=this.casefiles.filter(e=>e.id===t);let s=e.map(t=>t.invFeeNote);return s[0]},filterCasePlaceofloss(t){const e=this.casefiles.filter(e=>e.id===t);let s=e.map(t=>t.placeOfLoss);return s[0]},filterDept(t){const e=this.refType.filter(e=>e.id===t);let s=e.map(t=>t.name);return s[0]},filterIns(t){const e=this.insurers.filter(e=>e.id===t);let s=e.map(t=>t.name);return s[0]},closeDownloadAck(){this.claimform=!1,this.$nextTick(()=>{})}}},tt=Z,et=(s("b53c"),Object(O["a"])(tt,J,G,!1,null,"35d58782",null)),st=et.exports,at={name:"incomingList",data:()=>({loadTable:!0,currentClaims:[],menu:!1,menu1:!1,startDate:"",endDate:"",adjColumn:"",management:!1,dialog:!1,dialogDelete:!1,approveDialog:!1,casefiles:[],claims:[],selectedClaim:[],refType:[],subRefTypes:[],branches:[],insurers:[],members:[],search:"",defaultItem:{id:null,caseId:null,adjId:null,travMileage:"",additional:"",sdAndStamps:"",medicalReport:"",policeDoc:"",jpjDoc:"",misc:"",typing:""},editedIndex:-1,editedItem:{id:null,caseId:null,adjId:null,travMileage:"",additional:"",sdAndStamps:"",medicalReport:"",policeDoc:"",jpjDoc:"",misc:"",typing:""},commentData:{id:null,caseId:null,comment:"",createdBy:""}}),components:{ClaimForm:st},computed:{computedDateFormattedMomentjs(){return this.date?w()(this.date).format("DD/MM/YY"):""},headers(){return[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"AASB REFERENCE",align:"start",sortable:!0,value:"caseId"},{text:"ADJUSTER",align:"start",sortable:!1,value:"adjId",filter:t=>{if(!this.adjColumn)return!0;const e=this.filterUser(t);return(e[0].username+"").toLowerCase().includes(this.adjColumn.toLowerCase())}},{text:"SUBMITTED ON",align:"start",sortable:!1,value:"createdAt",filter:t=>this.startDate&&!this.endDate?w()(t)>=w()(this.startDate):!this.startDate&&this.endDate?w()(t)<=w()(this.endDate):!this.startDate||!this.endDate||w()(t)>=w()(this.startDate)&&w()(t)<=w()(this.endDate)},{text:"CLAIMS TOTAL",align:"start",sortable:!0,value:"sumAll"}]},filteredClaims(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")?this.claims:this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")?this.claims.filter(t=>this.$store.state.auth.user.branches.includes(this.filterCase(t.caseId)[0].branch)):this.$store.state.auth.user.roles.includes("ADJUSTER")?this.claims.filter(t=>this.$store.state.auth.user.branches.includes(this.filterCase(t.caseId)[0].branch)&&this.$store.state.auth.user.id===t.adjId):(this.$store.state.auth.user.roles.includes("EDITOR"),[])},newTotal(){const t=1*this.selectedClaim.travMileage+1*this.selectedClaim.additional+1*this.selectedClaim.sdAndStamps+1*this.selectedClaim.medicalReport+1*this.selectedClaim.policeDoc+1*this.selectedClaim.jpjDoc+1*this.selectedClaim.misc+1*this.selectedClaim.typing;return t.toFixed(2)},formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"},isAddButtonDisabled(){return!(this.editedItem.travMileage&&this.editedItem.additional&&this.editedItem.sdAndStamps&&this.editedItem.medicalReport&&this.editedItem.policeDoc&&this.editedItem.jpjDoc&&this.editedItem.misc&&this.editedItem.typing)}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},methods:{currentItems:function(t){return this.currentClaims=t},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER"))&&(this.management=!0)},total(t){const e=this.claims.filter(e=>e.id===t),s=e.reduce((t,e)=>t+1*e.travMileage+1*e.additional+1*e.sdAndStamps+1*e.medicalReport+1*e.policeDoc+1*e.jpjDoc+1*e.misc+1*e.typing,0);return s.toFixed(2)},formatDate(t){return w()(t).format("DD/MM/YYYY LT")},yearOnly(t){return w()(t).format("YY")},filterCase(t){return this.casefiles.filter(e=>e.id===t)},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterUser(t){return this.members.filter(e=>e.id===t)},retrieveClaims(){k["a"].getAll().then(t=>{this.claims=t.data.filter(t=>0===t.isApproved)}).catch(t=>{console.log(t)})},retrieveDept(){j["a"].getAll().then(t=>{this.refType=t.data}).catch(t=>{console.log(t)})},retrieveSubRefType(){R["a"].getAll().then(t=>{this.subRefTypes=t.data}).catch(t=>{console.log(t)})},retrieveBranches(){S["a"].getAll().then(t=>{this.branches=t.data.map(this.getDisplayBranch)}).catch(t=>{console.log(t)})},getDisplayBranch(t){return{id:t.id,name:t.name.length>30?t.name.substr(0,30)+"...":t.name,brCode:t.brCode.length>30?t.brCode.substr(0,30)+"...":t.brCode}},retrieveInsurer(){M["a"].getAll().then(t=>{this.insurers=t.data}).catch(t=>{console.log(t)})},retrieveMembers(){_["a"].getAll().then(t=>{this.members=t.data.filter(t=>t.roles.some(t=>"adjuster"===t.roleCode))}).catch(t=>{console.log(t)})},retrieveCasefiles(){A["a"].getAll().then(t=>{this.casefiles=t.data,this.loadTable=!1}).catch(t=>{console.log(t)})},refreshList(){this.retrieveClaims()},showItem(t){this.selectedClaim=Object.assign({},t),this.approveDialog=!0},closeApproveDialog(){this.selectedClaim=Object.assign({}),this.approveDialog=!1,this.commentData.comment=""},editItem(t){this.editedIndex=this.claims.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.claims.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){k["a"].delete(this.editedItem.id).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)}),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1)k["a"].update(this.editedItem.id,this.editedItem).then(t=>{this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)});else{var t={caseId:this.editedItem.caseId,adjId:this.editedItem.adjId,travMileage:this.editedItem.travMileage,additional:this.editedItem.additional,sdAndStamps:this.editedItem.sdAndStamps,medicalReport:this.editedItem.medicalReport,policeDoc:this.editedItem.policeDoc,jpjDoc:this.editedItem.jpjDoc,misc:this.editedItem.misc,typing:this.editedItem.typing};k["a"].create(t).then(t=>{this.editedItem.id=t.data.id,this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})})}this.close()},approveConfirm(){k["a"].update(this.selectedClaim.id,this.selectedClaim,this.selectedClaim.isApproved=2,this.selectedClaim.isApprovedOn=w()().format(),this.selectedClaim.isApprovedBy=this.$store.state.auth.user.id).then(t=>{this.claims.id=t.data.id,this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})});var t={caseId:this.selectedClaim.caseId,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};this.commentData.comment&&setTimeout(()=>{P["a"].create(t).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t||toString()})})},2500),this.closeApproveDialog()},declineConfirm(){k["a"].update(this.selectedClaim.id,this.selectedClaim,this.selectedClaim.isApproved=1,this.selectedClaim.isRejectedOn=w()().format(),this.selectedClaim.isRejectedBy=this.$store.state.auth.user.id).then(t=>{this.claims.id=t.data.id,this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})});var t={caseId:this.selectedClaim.caseId,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};this.commentData.comment&&setTimeout(()=>{P["a"].create(t).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t||toString()})})},2500),this.closeApproveDialog()}},mounted(){this.retrieveCasefiles(),this.retrieveClaims(),this.retrieveBranches(),this.retrieveInsurer(),this.retrieveDept(),this.retrieveSubRefType(),this.retrieveMembers(),this.checkManagement()}},lt=at,it=Object(O["a"])(lt,N,L,!1,null,null,null),nt=it.exports,rt=function(){var t=this,e=t._self._c;return e("div",[e(p["a"],{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{dense:"",headers:t.headers,items:t.filteredClaims,search:t.search,loading:t.loadTable,"loading-text":"Working on it ......","show-select":""},on:{"current-items":t.currentItems,"click:row":e=>t.showItem(e)},scopedSlots:t._u([{key:"top",fn:function(){return[e(C["a"],{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(d["a"],[e(m["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",[t._v(t._s(t.formTitle))])]),e(m["b"],[e(a["a"],[e(v["a"],[e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Travelling / Mileage"},model:{value:t.editedItem.travMileage,callback:function(e){t.$set(t.editedItem,"travMileage",e)},expression:"editedItem.travMileage"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Additional"},model:{value:t.editedItem.additional,callback:function(e){t.$set(t.editedItem,"additional",e)},expression:"editedItem.additional"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"SD & Stamps"},model:{value:t.editedItem.sdAndStamps,callback:function(e){t.$set(t.editedItem,"sdAndStamps",e)},expression:"editedItem.sdAndStamps"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Medical Report"},model:{value:t.editedItem.medicalReport,callback:function(e){t.$set(t.editedItem,"medicalReport",e)},expression:"editedItem.medicalReport"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Police Document"},model:{value:t.editedItem.policeDoc,callback:function(e){t.$set(t.editedItem,"policeDoc",e)},expression:"editedItem.policeDoc"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"JPJ Document"},model:{value:t.editedItem.jpjDoc,callback:function(e){t.$set(t.editedItem,"jpjDoc",e)},expression:"editedItem.jpjDoc"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Miscellaneous"},model:{value:t.editedItem.misc,callback:function(e){t.$set(t.editedItem,"misc",e)},expression:"editedItem.misc"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Typing"},model:{value:t.editedItem.typing,callback:function(e){t.$set(t.editedItem,"typing",e)},expression:"editedItem.typing"}})],1)],1)],1)],1),e(m["a"],[e(y["a"]),e(o["a"],{attrs:{tile:"",small:"",outlined:""},on:{click:t.close}},[t._v(" Cancel ")]),e(o["a"],{staticClass:"primary",attrs:{tile:"",small:"",disabled:t.isAddButtonDisabled},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),e(C["a"],{attrs:{"max-width":"500px",persistent:""},model:{value:t.approveDialog,callback:function(e){t.approveDialog=e},expression:"approveDialog"}},[e(d["a"],[e(m["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("Claim Details")]),e(m["b"],[e(a["a"],[e(b["a"],[e(v["a"],[e(u["a"],{staticClass:"display-3 text-start font-weight-bold",attrs:{cols:"12"}},[t._v(" MYR "+t._s(t.newTotal)+" ")])],1),e(v["a"],{attrs:{"no-gutters":""}},[e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Travelling ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"Travelling",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.travMileage,callback:function(e){t.$set(t.selectedClaim,"travMileage",e)},expression:"selectedClaim.travMileage"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Additional ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"Additional",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.additional,callback:function(e){t.$set(t.selectedClaim,"additional",e)},expression:"selectedClaim.additional"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("SD & Stamps ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"SD & Stamps",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.sdAndStamps,callback:function(e){t.$set(t.selectedClaim,"sdAndStamps",e)},expression:"selectedClaim.sdAndStamps"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Medical Reprot ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"Medical Reprot",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.medicalReport,callback:function(e){t.$set(t.selectedClaim,"medicalReport",e)},expression:"selectedClaim.medicalReport"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Police Document ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"Police Document",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.policeDoc,callback:function(e){t.$set(t.selectedClaim,"policeDoc",e)},expression:"selectedClaim.policeDoc"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("JPJ Document ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"JPJ Document",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.jpjDoc,callback:function(e){t.$set(t.selectedClaim,"jpjDoc",e)},expression:"selectedClaim.jpjDoc"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Miscellaneous ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"Miscellaneous",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.misc,callback:function(e){t.$set(t.selectedClaim,"misc",e)},expression:"selectedClaim.misc"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Typing ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{dense:"",placeholder:"Typing",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.typing,callback:function(e){t.$set(t.selectedClaim,"typing",e)},expression:"selectedClaim.typing"}})],1),e(u["a"],{attrs:{cols:"12"}},[e(x["a"],{staticClass:"subtitle-1",attrs:{solo:"",dense:"",placeholder:"Comment"},model:{value:t.commentData.comment,callback:function(e){t.$set(t.commentData,"comment",e)},expression:"commentData.comment"}})],1),e(m["a"],[e(o["a"],{staticClass:"success",attrs:{small:"",tile:""},on:{click:t.submitAgain}},[t._v("SUBMIT AGAIN")]),e(o["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:t.closeApproveDialog}},[t._v("CLOSE")])],1)],1)],1)],1)],1)],1)],1),e(C["a"],{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(d["a"],[e(m["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("Are you sure you want to delete "+t._s(t.editedItem.subCode)+"?")]),e(m["a"],[e(y["a"]),e(o["a"],{attrs:{tile:"",small:"",outlined:""},on:{click:t.closeDelete}},[t._v("Cancel")]),e(o["a"],{staticClass:"error",attrs:{tile:"",small:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),e(y["a"])],1)],1)],1),e(y["a"]),e(v["a"],{staticClass:"ma-1",staticStyle:{border:"1px dotted orange"},attrs:{justify:"center",align:"center"}},[e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[t.management?e(c["a"],{attrs:{clearable:"",items:t.members,"item-text":"username","item-value":"username","menu-props":{maxHeight:"400"},hint:"Filter by Adjuster","persistent-hint":"",label:"Adjuster"},model:{value:t.adjColumn,callback:function(e){t.adjColumn=e},expression:"adjColumn"}}):t._e()],1),e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[e(f["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(g["a"],t._g(t._b({attrs:{value:t.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:"",label:"Start Date"},on:{"click:clear":function(e){t.date=null}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},"v-text-field",a,!1),s))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(h["a"],{attrs:{value:t.computedDateFormattedMomentjs},on:{change:function(e){t.menu=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[e(f["a"],{ref:"menu1",attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(g["a"],t._g(t._b({attrs:{value:t.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:"",label:"End Date"},on:{"click:clear":function(e){t.date=null}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}},"v-text-field",a,!1),s))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[e(h["a"],{attrs:{value:t.computedDateFormattedMomentjs},on:{change:function(e){t.menu1=!1}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),e(u["a"],{staticClass:"text-center",attrs:{cols:"12",md:"3",sm:"12"}},[e("ClaimForm",{attrs:{casefiles:t.casefiles,refType:t.refType,subRefTypes:t.subRefTypes,branches:t.branches,insurers:t.insurers,members:t.members,currentClaims:t.currentClaims}})],1)],1)]},proxy:!0},{key:"item.numbering",fn:function(e){return[t._v(" "+t._s(e.index+1)+" ")]}},{key:"item.caseId",fn:function({item:s}){return[e("tr",{staticClass:"d-flex"},[t._v(" AA "),t._l(t.filterCase(s.caseId),(function(s){return e("div",{key:s.id},t._l(t.filterDept(s.refType),(function(a,l){return e("div",{key:l},[t._v(" /"+t._s(a.name)),t._l(t.filterSubDept(s.subRefType),(function(s,a){return e("span",{key:a},[t._v("/"+t._s(s.subCode))])})),e("span",[t._v("/"+t._s(s.id)+"/"+t._s(t.yearOnly(s.createdAt)))]),t._l(t.filterBranches(s.branch),(function(s){return e("span",{key:s.id},[t._v("/"+t._s(s.brCode))])}))],2)})),0)}))],2)]}},{key:"item.adjId",fn:function({item:s}){return t._l(t.filterAdj(s.adjId),(function(s){return e("div",{key:s.id},[t._v(" "+t._s(s.username)+" ")])}))}},{key:"item.sumAll",fn:function({item:s}){return[e("span",[t._v("MYR "+t._s(t.total(s.id)))])]}},{key:"item.createdAt",fn:function({item:e}){return[t._v(" "+t._s(t.formatDate(e.createdAt))+" ")]}},{key:"item.isRejectedOn",fn:function({item:e}){return[t._v(" "+t._s(t.formatDate(e.isRejectedOn))+" ")]}},{key:"item.isRejectedBy",fn:function({item:s}){return t._l(t.filterUser(s.isRejectedBy),(function(s){return e("div",{key:s.id},[t._v(" "+t._s(s.email)+" ")])}))}}],null,!0),model:{value:t.currentClaims,callback:function(e){t.currentClaims=e},expression:"currentClaims"}})],1)},ct=[],ot={name:"queryList",data:()=>({loadTable:!0,currentClaims:[],menu:!1,menu1:!1,startDate:"",endDate:"",adjColumn:"",management:!1,dialog:!1,dialogDelete:!1,approveDialog:!1,casefiles:[],claims:[],selectedClaim:[],refType:[],subRefTypes:[],branches:[],insurers:[],members:[],allMembers:[],search:"",defaultItem:{id:null,caseId:null,adjId:null,travMileage:"",additional:"",sdAndStamps:"",medicalReport:"",policeDoc:"",jpjDoc:"",misc:"",typing:""},editedIndex:-1,editedItem:{id:null,caseId:null,adjId:null,travMileage:"",additional:"",sdAndStamps:"",medicalReport:"",policeDoc:"",jpjDoc:"",misc:"",typing:""},commentData:{id:null,caseId:null,comment:"",createdBy:""}}),components:{ClaimForm:st},computed:{computedDateFormattedMomentjs(){return this.date?w()(this.date).format("DD/MM/YY"):""},headers(){return[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"AASB REFERENCE",align:"start",sortable:!0,value:"caseId"},{text:"ADJUSTER",align:"start",sortable:!1,value:"adjId",filter:t=>{if(!this.adjColumn)return!0;const e=this.filterAdj(t);return(e[0].username+"").toLowerCase().includes(this.adjColumn.toLowerCase())}},{text:"SUBMITTED ON",align:"start",sortable:!1,value:"createdAt",filter:t=>this.startDate&&!this.endDate?w()(t)>=w()(this.startDate):!this.startDate&&this.endDate?w()(t)<=w()(this.endDate):!this.startDate||!this.endDate||w()(t)>=w()(this.startDate)&&w()(t)<=w()(this.endDate)},{text:"QUERIED ON",align:"start",sortable:!0,value:"isRejectedOn"},{text:"QUERIED BY",align:"start",sortable:!0,value:"isRejectedBy"},{text:"CLAIMS TOTAL",align:"start",sortable:!0,value:"sumAll"}]},filteredClaims(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")?this.claims:this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")?this.claims.filter(t=>this.$store.state.auth.user.branches.includes(this.filterCase(t.caseId)[0].branch)):this.$store.state.auth.user.roles.includes("ADJUSTER")?this.claims.filter(t=>this.$store.state.auth.user.branches.includes(this.filterCase(t.caseId)[0].branch)&&this.$store.state.auth.user.id.toString().includes(t.adjId)):(this.$store.state.auth.user.roles.includes("EDITOR"),[])},newTotal(){const t=1*this.selectedClaim.travMileage+1*this.selectedClaim.additional+1*this.selectedClaim.sdAndStamps+1*this.selectedClaim.medicalReport+1*this.selectedClaim.policeDoc+1*this.selectedClaim.jpjDoc+1*this.selectedClaim.misc+1*this.selectedClaim.typing;return t.toFixed(2)},formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"},isAddButtonDisabled(){return!(this.editedItem.travMileage&&this.editedItem.additional&&this.editedItem.sdAndStamps&&this.editedItem.medicalReport&&this.editedItem.policeDoc&&this.editedItem.jpjDoc&&this.editedItem.misc&&this.editedItem.typing)}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},methods:{currentItems:function(t){return this.currentClaims=t},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},total(t){const e=this.claims.filter(e=>e.id===t),s=e.reduce((t,e)=>t+1*e.travMileage+1*e.additional+1*e.sdAndStamps+1*e.medicalReport+1*e.policeDoc+1*e.jpjDoc+1*e.misc+1*e.typing,0);return s.toFixed(2)},formatDate(t){return w()(t).format("DD/MM/YYYY LT")},yearOnly(t){return w()(t).format("YY")},filterCase(t){return this.casefiles.filter(e=>e.id===t)},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterUser(t){return this.allMembers.filter(e=>e.id===t)},filterAdj(t){return this.members.filter(e=>e.id===t)},retrieveClaims(){k["a"].getAll().then(t=>{this.claims=t.data.filter(t=>1===t.isApproved)}).catch(t=>{console.log(t)})},retrieveDept(){j["a"].getAll().then(t=>{this.refType=t.data}).catch(t=>{console.log(t)})},retrieveSubRefType(){R["a"].getAll().then(t=>{this.subRefTypes=t.data}).catch(t=>{console.log(t)})},retrieveBranches(){S["a"].getAll().then(t=>{this.branches=t.data.map(this.getDisplayBranch)}).catch(t=>{console.log(t)})},getDisplayBranch(t){return{id:t.id,name:t.name.length>30?t.name.substr(0,30)+"...":t.name,brCode:t.brCode.length>30?t.brCode.substr(0,30)+"...":t.brCode}},retrieveInsurer(){M["a"].getAll().then(t=>{this.insurers=t.data}).catch(t=>{console.log(t)})},retrieveMembers(){_["a"].getAll().then(t=>{this.members=t.data.filter(t=>t.roles.some(t=>"adjuster"===t.roleCode))}).catch(t=>{console.log(t)})},retrieveUsers(){_["a"].getAll().then(t=>{this.allMembers=t.data}).catch(t=>{console.log(t)})},retrieveCasefiles(){A["a"].getAll().then(t=>{this.casefiles=t.data,this.loadTable=!1}).catch(t=>{console.log(t)})},refreshList(){this.retrieveClaims()},showItem(t){this.selectedClaim=Object.assign({},t),this.approveDialog=!0},closeApproveDialog(){this.selectedClaim=Object.assign({}),this.approveDialog=!1},editItem(t){this.editedIndex=this.claims.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.claims.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){k["a"].delete(this.editedItem.id).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)}),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1)k["a"].update(this.editedItem.id,this.editedItem).then(t=>{this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)});else{var t={caseId:this.editedItem.caseId,adjId:this.editedItem.adjId,travMileage:this.editedItem.travMileage,additional:this.editedItem.additional,sdAndStamps:this.editedItem.sdAndStamps,medicalReport:this.editedItem.medicalReport,policeDoc:this.editedItem.policeDoc,jpjDoc:this.editedItem.jpjDoc,misc:this.editedItem.misc,typing:this.editedItem.typing};k["a"].create(t).then(t=>{this.editedItem.id=t.data.id,this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})})}this.close()},submitAgain(){k["a"].update(this.selectedClaim.id,this.selectedClaim,this.selectedClaim.isApproved=0).then(t=>{this.claims.id=t.data.id,this.closeApproveDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})});var t={caseId:this.selectedClaim.caseId,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};this.commentData.comment&&setTimeout(()=>{P["a"].create(t).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t||toString()})})},2500),this.closeApproveDialog()}},mounted(){this.retrieveCasefiles(),this.retrieveClaims(),this.retrieveBranches(),this.retrieveInsurer(),this.retrieveDept(),this.retrieveSubRefType(),this.retrieveMembers(),this.retrieveUsers(),this.checkManagement()}},dt=ot,mt=Object(O["a"])(dt,rt,ct,!1,null,null,null),ut=mt.exports,pt=function(){var t=this,e=t._self._c;return e("div",[e(p["a"],{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{dense:"",headers:t.headers,items:t.filteredClaims,search:t.search,loading:t.loadTable,"loading-text":"Working on it ......","show-select":""},on:{"current-items":t.currentItems,"click:row":e=>t.showItem(e)},scopedSlots:t._u([{key:"top",fn:function(){return[e(C["a"],{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(d["a"],[e(m["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",[t._v(t._s(t.formTitle))])]),e(m["b"],[e(a["a"],[e(v["a"],[e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Travelling / Mileage"},model:{value:t.editedItem.travMileage,callback:function(e){t.$set(t.editedItem,"travMileage",e)},expression:"editedItem.travMileage"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Additional"},model:{value:t.editedItem.additional,callback:function(e){t.$set(t.editedItem,"additional",e)},expression:"editedItem.additional"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"SD & Stamps"},model:{value:t.editedItem.sdAndStamps,callback:function(e){t.$set(t.editedItem,"sdAndStamps",e)},expression:"editedItem.sdAndStamps"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Medical Report"},model:{value:t.editedItem.medicalReport,callback:function(e){t.$set(t.editedItem,"medicalReport",e)},expression:"editedItem.medicalReport"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Police Document"},model:{value:t.editedItem.policeDoc,callback:function(e){t.$set(t.editedItem,"policeDoc",e)},expression:"editedItem.policeDoc"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"JPJ Document"},model:{value:t.editedItem.jpjDoc,callback:function(e){t.$set(t.editedItem,"jpjDoc",e)},expression:"editedItem.jpjDoc"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Miscellaneous"},model:{value:t.editedItem.misc,callback:function(e){t.$set(t.editedItem,"misc",e)},expression:"editedItem.misc"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(g["a"],{attrs:{type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Typing"},model:{value:t.editedItem.typing,callback:function(e){t.$set(t.editedItem,"typing",e)},expression:"editedItem.typing"}})],1)],1)],1)],1),e(m["a"],[e(y["a"]),e(o["a"],{attrs:{tile:"",small:"",outlined:""},on:{click:t.close}},[t._v(" Cancel ")]),e(o["a"],{staticClass:"primary",attrs:{tile:"",small:"",disabled:t.isAddButtonDisabled},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),e(C["a"],{attrs:{"max-width":"500px",persistent:""},model:{value:t.approveDialog,callback:function(e){t.approveDialog=e},expression:"approveDialog"}},[e(d["a"],[e(m["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("Claim Details")]),e(m["b"],[e(a["a"],[e(b["a"],{attrs:{disabled:!1===t.management}},[e(v["a"],[e(u["a"],{staticClass:"display-3 text-start font-weight-bold",attrs:{cols:"12"}},[t._v(" MYR "+t._s(t.newTotal)+" ")])],1),e(v["a"],{attrs:{"no-gutters":""}},[e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Travelling ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"Travelling",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.travMileage,callback:function(e){t.$set(t.selectedClaim,"travMileage",e)},expression:"selectedClaim.travMileage"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Additional ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"Additional",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.additional,callback:function(e){t.$set(t.selectedClaim,"additional",e)},expression:"selectedClaim.additional"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("SD & Stamps ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"SD & Stamps",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.sdAndStamps,callback:function(e){t.$set(t.selectedClaim,"sdAndStamps",e)},expression:"selectedClaim.sdAndStamps"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Medical Reprot ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"Medical Reprot",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.medicalReport,callback:function(e){t.$set(t.selectedClaim,"medicalReport",e)},expression:"selectedClaim.medicalReport"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Police Document ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"Police Document",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.policeDoc,callback:function(e){t.$set(t.selectedClaim,"policeDoc",e)},expression:"selectedClaim.policeDoc"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("JPJ Document ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"JPJ Document",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.jpjDoc,callback:function(e){t.$set(t.selectedClaim,"jpjDoc",e)},expression:"selectedClaim.jpjDoc"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Miscellaneous ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"Miscellaneous",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.misc,callback:function(e){t.$set(t.selectedClaim,"misc",e)},expression:"selectedClaim.misc"}})],1),e(u["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Typing ")]),e(u["a"],{attrs:{cols:"6"}},[e(g["a"],{staticClass:"subtitle-1",attrs:{disabled:"",dense:"",placeholder:"Typing",type:"number","hide-spin-buttons":"",prefix:"MYR"},model:{value:t.selectedClaim.typing,callback:function(e){t.$set(t.selectedClaim,"typing",e)},expression:"selectedClaim.typing"}})],1),e(u["a"],{attrs:{cols:"12"}},[e(x["a"],{staticClass:"subtitle-1",attrs:{disabled:"",solo:"",dense:"",placeholder:"Comment"},model:{value:t.selectedClaim.isApprovedComment,callback:function(e){t.$set(t.selectedClaim,"isApprovedComment",e)},expression:"selectedClaim.isApprovedComment"}})],1),e(m["a"],[e(o["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:t.closeApproveDialog}},[t._v("CLOSE")])],1)],1)],1)],1)],1)],1)],1),e(C["a"],{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(d["a"],[e(m["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("Are you sure you want to delete "+t._s(t.editedItem.subCode)+"?")]),e(m["a"],[e(y["a"]),e(o["a"],{attrs:{tile:"",small:"",outlined:""},on:{click:t.closeDelete}},[t._v("Cancel")]),e(o["a"],{staticClass:"error",attrs:{tile:"",small:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),e(y["a"])],1)],1)],1),e(y["a"]),e(v["a"],{staticClass:"ma-1",staticStyle:{border:"1px dotted orange"},attrs:{justify:"center",align:"center"}},[e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[t.management?e(c["a"],{attrs:{clearable:"",items:t.members,"item-text":"username","item-value":"username","menu-props":{maxHeight:"400"},hint:"Filter by Adjuster","persistent-hint":"",label:"Adjuster"},model:{value:t.adjColumn,callback:function(e){t.adjColumn=e},expression:"adjColumn"}}):t._e()],1),e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[e(f["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(g["a"],t._g(t._b({attrs:{value:t.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:"",label:"Start Date"},on:{"click:clear":function(e){t.date=null}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},"v-text-field",a,!1),s))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(h["a"],{attrs:{value:t.computedDateFormattedMomentjs},on:{change:function(e){t.menu=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),e(u["a"],{attrs:{cols:"12",md:"3",sm:"12"}},[e(f["a"],{ref:"menu1",attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(g["a"],t._g(t._b({attrs:{value:t.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:"",label:"End Date"},on:{"click:clear":function(e){t.date=null}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}},"v-text-field",a,!1),s))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[e(h["a"],{attrs:{value:t.computedDateFormattedMomentjs},on:{change:function(e){t.menu1=!1}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),e(u["a"],{staticClass:"text-center",attrs:{cols:"12",md:"3",sm:"12"}},[e("ClaimForm",{attrs:{casefiles:t.casefiles,refType:t.refType,subRefTypes:t.subRefTypes,branches:t.branches,insurers:t.insurers,members:t.members,currentClaims:t.currentClaims}})],1)],1)]},proxy:!0},{key:"item.numbering",fn:function(e){return[t._v(" "+t._s(e.index+1)+" ")]}},{key:"item.caseId",fn:function({item:s}){return[e("tr",{staticClass:"d-flex"},[t._v(" AA "),t._l(t.filterCase(s.caseId),(function(s){return e("div",{key:s.id},t._l(t.filterDept(s.refType),(function(a,l){return e("div",{key:l},[t._v(" /"+t._s(a.name)),t._l(t.filterSubDept(s.subRefType),(function(s,a){return e("span",{key:a},[t._v("/"+t._s(s.subCode))])})),e("span",[t._v("/"+t._s(s.id)+"/"+t._s(t.yearOnly(s.createdAt)))]),t._l(t.filterBranches(s.branch),(function(s){return e("span",{key:s.id},[t._v("/"+t._s(s.brCode))])}))],2)})),0)}))],2)]}},{key:"item.adjId",fn:function({item:s}){return t._l(t.filterAdj(s.adjId),(function(s){return e("div",{key:s.id},[t._v(" "+t._s(s.username)+" ")])}))}},{key:"item.sumAll",fn:function({item:s}){return[e("span",[t._v("MYR "+t._s(t.total(s.id)))])]}},{key:"item.createdAt",fn:function({item:e}){return[t._v(" "+t._s(t.formatDate(e.createdAt))+" ")]}},{key:"item.isApprovedOn",fn:function({item:e}){return[t._v(" "+t._s(t.formatDate(e.isApprovedOn))+" ")]}},{key:"item.isApprovedBy",fn:function({item:s}){return t._l(t.filterUser(s.isApprovedBy),(function(s){return e("div",{key:s.id},[t._v(" "+t._s(s.email)+" ")])}))}}],null,!0),model:{value:t.currentClaims,callback:function(e){t.currentClaims=e},expression:"currentClaims"}})],1)},ht=[],Ct={name:"approvedList",data:()=>({loadTable:!0,currentClaims:[],menu:!1,menu1:!1,startDate:"",endDate:"",adjColumn:"",management:!1,dialog:!1,dialogDelete:!1,approveDialog:!1,casefiles:[],claims:[],selectedClaim:[],refType:[],subRefTypes:[],branches:[],insurers:[],members:[],allMembers:[],search:"",defaultItem:{id:null,caseId:null,adjId:null,travMileage:"",additional:"",sdAndStamps:"",medicalReport:"",policeDoc:"",jpjDoc:"",misc:"",typing:""},editedIndex:-1,editedItem:{id:null,caseId:null,adjId:null,travMileage:"",additional:"",sdAndStamps:"",medicalReport:"",policeDoc:"",jpjDoc:"",misc:"",typing:""}}),components:{ClaimForm:st},computed:{computedDateFormattedMomentjs(){return this.date?w()(this.date).format("DD/MM/YY"):""},headers(){return[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"AASB REFERENCE",align:"start",sortable:!0,value:"caseId"},{text:"ADJUSTER",align:"start",sortable:!1,value:"adjId",filter:t=>{if(!this.adjColumn)return!0;const e=this.filterAdj(t);return(e[0].username+"").toLowerCase().includes(this.adjColumn.toLowerCase())}},{text:"SUBMITTED ON",align:"start",sortable:!1,value:"createdAt",filter:t=>this.startDate&&!this.endDate?w()(t)>=w()(this.startDate):!this.startDate&&this.endDate?w()(t)<=w()(this.endDate):!this.startDate||!this.endDate||w()(t)>=w()(this.startDate)&&w()(t)<=w()(this.endDate)},{text:"APPROVED ON",align:"start",sortable:!0,value:"isApprovedOn"},{text:"APPROVED BY",align:"start",sortable:!0,value:"isApprovedBy"},{text:"CLAIMS TOTAL",align:"start",sortable:!0,value:"sumAll"}]},filteredClaims(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")?this.claims:this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")?this.claims.filter(t=>this.$store.state.auth.user.branches.includes(this.filterCase(t.caseId)[0].branch)):this.$store.state.auth.user.roles.includes("ADJUSTER")?this.claims.filter(t=>this.$store.state.auth.user.branches.includes(this.filterCase(t.caseId)[0].branch)&&this.$store.state.auth.user.id.toString().includes(t.adjId)):(this.$store.state.auth.user.roles.includes("EDITOR"),[])},newTotal(){const t=1*this.selectedClaim.travMileage+1*this.selectedClaim.additional+1*this.selectedClaim.sdAndStamps+1*this.selectedClaim.medicalReport+1*this.selectedClaim.policeDoc+1*this.selectedClaim.jpjDoc+1*this.selectedClaim.misc+1*this.selectedClaim.typing;return t.toFixed(2)},formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"},isAddButtonDisabled(){return!(this.editedItem.travMileage&&this.editedItem.additional&&this.editedItem.sdAndStamps&&this.editedItem.medicalReport&&this.editedItem.policeDoc&&this.editedItem.jpjDoc&&this.editedItem.misc&&this.editedItem.typing)}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},methods:{currentItems:function(t){return this.currentClaims=t},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},total(t){const e=this.claims.filter(e=>e.id===t),s=e.reduce((t,e)=>t+1*e.travMileage+1*e.additional+1*e.sdAndStamps+1*e.medicalReport+1*e.policeDoc+1*e.jpjDoc+1*e.misc+1*e.typing,0);return s.toFixed(2)},formatDate(t){return w()(t).format("DD/MM/YYYY LT")},yearOnly(t){return w()(t).format("YY")},filterCase(t){return this.casefiles.filter(e=>e.id===t)},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterUser(t){return this.allMembers.filter(e=>e.id===t)},filterAdj(t){return this.members.filter(e=>e.id===t)},retrieveClaims(){k["a"].getAll().then(t=>{this.claims=t.data.filter(t=>2===t.isApproved)}).catch(t=>{console.log(t)})},retrieveDept(){j["a"].getAll().then(t=>{this.refType=t.data}).catch(t=>{console.log(t)})},retrieveSubRefType(){R["a"].getAll().then(t=>{this.subRefTypes=t.data}).catch(t=>{console.log(t)})},retrieveBranches(){S["a"].getAll().then(t=>{this.branches=t.data.map(this.getDisplayBranch)}).catch(t=>{console.log(t)})},getDisplayBranch(t){return{id:t.id,name:t.name.length>30?t.name.substr(0,30)+"...":t.name,brCode:t.brCode.length>30?t.brCode.substr(0,30)+"...":t.brCode}},retrieveInsurer(){M["a"].getAll().then(t=>{this.insurers=t.data}).catch(t=>{console.log(t)})},retrieveMembers(){_["a"].getAll().then(t=>{this.members=t.data.filter(t=>t.roles.some(t=>"adjuster"===t.roleCode))}).catch(t=>{console.log(t)})},retrieveUsers(){_["a"].getAll().then(t=>{this.allMembers=t.data}).catch(t=>{console.log(t)})},retrieveCasefiles(){A["a"].getAll().then(t=>{this.casefiles=t.data,this.loadTable=!1}).catch(t=>{console.log(t)})},refreshList(){this.retrieveClaims()},showItem(t){this.selectedClaim=Object.assign({},t),this.approveDialog=!0},closeApproveDialog(){this.selectedClaim=Object.assign({}),this.approveDialog=!1},editItem(t){this.editedIndex=this.claims.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.claims.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){k["a"].delete(this.editedItem.id).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)}),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1)k["a"].update(this.editedItem.id,this.editedItem).then(t=>{this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)});else{var t={caseId:this.editedItem.caseId,adjId:this.editedItem.adjId,travMileage:this.editedItem.travMileage,additional:this.editedItem.additional,sdAndStamps:this.editedItem.sdAndStamps,medicalReport:this.editedItem.medicalReport,policeDoc:this.editedItem.policeDoc,jpjDoc:this.editedItem.jpjDoc,misc:this.editedItem.misc,typing:this.editedItem.typing};k["a"].create(t).then(t=>{this.editedItem.id=t.data.id,this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})})}this.close()}},mounted(){this.retrieveCasefiles(),this.retrieveClaims(),this.retrieveBranches(),this.retrieveInsurer(),this.retrieveDept(),this.retrieveSubRefType(),this.retrieveMembers(),this.retrieveUsers(),this.checkManagement()}},bt=Ct,ft=Object(O["a"])(bt,pt,ht,!1,null,null,null),vt=ft.exports,yt={name:"claimsList",components:{pendTab:B,incTab:nt,cancTab:ut,approvedTab:vt},data(){return{pending:!1,claimform:!1,incoming:!0,query:!1,approved:!1}}},gt=yt,xt=Object(O["a"])(gt,n,r,!1,null,null,null);e["default"]=xt.exports},b53c:function(t,e,s){"use strict";s("39b3")},e4ba:function(t,e,s){"use strict";var a=s("c427");class l{getAll(){return a["a"].get("/comments")}get(t){return a["a"].get("/comments/"+t)}create(t){return a["a"].post("/comments",t)}update(t,e){return a["a"].put("/comments/"+t,e)}delete(t){return a["a"].delete("/comments/"+t)}deleteAll(){return a["a"].delete("/comments")}}e["a"]=new l}}]);
//# sourceMappingURL=chunk-168b0bef.dd32bdfc.js.map