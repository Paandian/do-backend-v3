(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216263"],{c0dd:function(e,t,s){"use strict";s.r(t);var r=s("cc20"),a=s("a523"),i=s("8fea"),n=s("132d"),l=s("3a2f"),u=function(){var e=this,t=e._self._c;return t(a["a"],{staticStyle:{width:"80%"},attrs:{fluid:""}},[t(i["a"],{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{dense:"",headers:e.headers,items:e.filteredCasefiles,loading:e.loadTable,"loading-text":"Working on it ......","footer-props":{showFirstLastPage:!0,"items-per-page-options":[10,20,30,40,50,100]},"items-per-page":50},on:{"click:row":e.viewItem},scopedSlots:e._u([{key:"header.id",fn:function({header:t}){return[e._v(" "+e._s(t.text.toUpperCase())+" ")]}},{key:"item.numbering",fn:function(t){return[e._v(" "+e._s(t.index+1)+" ")]}},{key:"item.vehicleNo",fn:function({item:s}){return[s.vehicleNo?t("span",[s.vehicleNo?t("div",[e._v(" "+e._s(s.vehicleNo.toUpperCase())+" ")]):e._e()]):t("span",[e._v("TBA")])]}},{key:"item.dateOfAssign",fn:function({item:t}){return[e._v(" "+e._s(e.formatDate(t.dateOfAssign))+" ")]}},{key:"item.days",fn:function({item:t}){return[e._v(" "+e._s(e.dateDiff(e.moment(t.dateOfAssign).format(),e.moment().format()))+" Day(s) ")]}},{key:"item.adjuster",fn:function({item:s}){return[s.adjuster?t("span",e._l(e.filterUser(s.adjuster),(function(s){return t("div",{key:s.id},[e._v(" "+e._s(s.username)+" ")])})),0):t("span",[e._v("TBA")])]}},{key:"item.fileStatus",fn:function({item:s}){return[t(l["a"],{attrs:{left:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:r,attrs:a}){return[1===s.flag?t(n["a"],e._g(e._b({attrs:{small:"",color:"green lighten-1"}},"v-icon",a,!1),r),[e._v(" mdi-shield-check ")]):e._e(),2===s.flag?t(n["a"],e._g(e._b({attrs:{small:"",color:"orange lighten-1"}},"v-icon",a,!1),r),[e._v(" mdi-shield-half-full ")]):e._e(),3===s.flag?t(n["a"],e._g(e._b({attrs:{small:"",color:"red darken-5"}},"v-icon",a,!1),r),[e._v(" mdi-shield-alert-outline ")]):e._e()]}}],null,!0)},[1===s.flag?t("span",[e._v("GENUINE")]):e._e(),2===s.flag?t("span",[e._v("SUSPECTED FRAUD")]):e._e(),3===s.flag?t("span",[e._v("FRAUD")]):e._e()]),e._l(e.filterStages(s.fileStatus),(function(s){return t("span",e._b({key:s.id},"span",s.item,!1),[t(r["a"],{attrs:{label:"",outlined:"",block:"","x-small":""}},[e._v(" "+e._s(s.name)+" ")])],1)}))]}},{key:"item.id",fn:function({item:s}){return[t("tr",{staticClass:"font-weight-black d-flex"},[e._v(" AA/ "),e._l(e.filterDept(s.refType),(function(r){return t("div",{key:r.id},[e._v(" "+e._s(r.name)),e._l(e.filterSubDept(s.subRefType),(function(s,r){return t("span",{key:r},[e._v("/"+e._s(s.subCode))])}))],2)})),e._v(" /"+e._s(s.id)+"/"+e._s(e.yearOnly(s.createdAt))+" "),e._l(e.filterBranch(s.branch),(function(s,r){return t("div",{key:r},[e._v(" /"+e._s(s.brCode)+" ")])}))],2)]}},{key:"item.insurer",fn:function({item:s}){return e._l(e.filterIns(s.insurer),(function(s){return t("div",{key:s.id},[t("div",{staticClass:"text-truncate",staticStyle:{"max-width":"80px"}},[e._v(" "+e._s(s.name)+" ")])])}))}},{key:"item.dateOfLoss",fn:function({item:t}){return[e._v(" "+e._s(e.formatDate(t.dateOfLoss))+" ")]}},{key:"item.placeOfLoss",fn:function({item:s}){return[s.placeOfLoss?t("span",[e._v(" "+e._s(s.placeOfLoss)+", ")]):e._e(),e._l(e.filterStates(s.stateOfLoss),(function(s){return t("span",{key:s.id},[e._v(e._s(s.name)+" ")])}))]}}],null,!0)})],1)},o=[],f=(s("14d9"),s("e9f5"),s("910d"),s("a732"),s("f0cc")),c=s("fde1"),h=s("304b"),d=s("cb28"),p=s("f983"),m=s("5632"),v=s("d14b"),_=s("9df5"),g=s("c1df"),b=s.n(g),y={name:"detail-by-ref",components:{},data(){return{loadTable:!0,headers:[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"VEHICLE NO.",align:"center",value:"vehicleNo",sortable:!1},{text:"AA REF",align:"start",value:"id",sortable:!1},{text:"INSURER",align:"start",value:"insurer",sortable:!1},{text:"DOA",align:"start",sortable:!1,value:"dateOfAssign"},{text:"DAYS",align:"start",sortable:!1,value:"days"},{text:"ADJUSTER",align:"start",sortable:!1,value:"adjuster"},{text:"STATUS",align:"center",value:"fileStatus",sortable:!1}],casefiles:[],departments:[],subRefTypes:[],branches:[],states:[],insurer:[],members:[],stages:[]}},mounted(){this.retrieveCasefiles(this.$route.params.fileStatus&&this.$route.params.refType),this.retrieveDepts(),this.retrieveSubRefType(),this.retrieveBranches(),this.retrieveStates(),this.retrieveIns(),this.retrieveMembers(),this.retrieveStages()},computed:{filteredCasefiles(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")?this.casefiles.filter(e=>e.fileStatus===this.$route.params.fileStatus&&e.refType==this.$route.params.refType):this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")?this.casefiles.filter(e=>this.$store.state.auth.user.dept.includes(e.refType)&&this.$store.state.auth.user.branches.includes(e.branch)&&e.fileStatus===this.$route.params.fileStatus&&e.refType==this.$route.params.refType):this.$store.state.auth.user.roles.includes("ADJUSTER")?this.casefiles.filter(e=>this.$store.state.auth.user.dept.includes(e.refType)&&this.$store.state.auth.user.branches.includes(e.branch)&&this.$store.state.auth.user.id.toString().includes(e.adjuster)&&e.fileStatus===this.$route.params.fileStatus&&e.refType==this.$route.params.refType):this.$store.state.auth.user.roles.includes("EDITOR")?this.casefiles.filter(e=>this.$store.state.auth.user.dept.includes(e.refType)&&this.$store.state.auth.user.branches.includes(e.branch)&&this.$store.state.auth.user.id.toString().includes(e.editor)&&e.fileStatus===this.$route.params.fileStatus&&e.refType==this.$route.params.refType):this.casefiles.filter(e=>e.fileStatus===this.$route.params.fileStatus&&e.refType==this.$route.params.refType)}},methods:{moment:function(e){return b()(e)},filterBranch(e){return this.branches.filter(t=>t.id===e)},filterStates(e){return this.states.filter(t=>t.id===e)},filterDept(e){return this.departments.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterUser(e){return this.members.filter(t=>t.id===e)},filterStages(e){return this.stages.filter(t=>t.stageCode===e)},yearOnly(e){return b()(e).format("YY")},formatDate(e){return b()(e).format("DD/MM/YYYY")},dateDiff(e,t){let s=b()(e),r=b()(t),a=b.a.duration(r.diff(s));return Math.round(a.asDays())},retrieveCasefiles(){f["a"].getAllStatusRefType(this.$route.params.fileStatus,this.$route.params.refType).then(e=>{this.casefiles=e.data,this.loadTable=!1}).catch(e=>{console.log("Error fetching casefiles:",e),this.loadTable=!1})},retrieveDepts(){d["a"].getAll().then(e=>{this.departments=e.data}).catch(e=>{console.log(e)})},retrieveSubRefType(){p["a"].getAll().then(e=>{this.subRefTypes=e.data}).catch(e=>{console.log(e)})},retrieveBranches(){c["a"].getAll().then(e=>{this.branches=e.data}).catch(e=>{console.log(e)})},retrieveStates(){h["a"].getAll().then(e=>{this.states=e.data}).catch(e=>{console.log(e)})},retrieveIns(){m["a"].getAll().then(e=>{this.insurer=e.data}).catch(e=>{console.log(e)})},retrieveMembers(){_["a"].getAll().then(e=>{this.members=e.data.filter(e=>e.roles.some(e=>"adjuster"===e.roleCode))}).catch(e=>{console.log(e)})},retrieveStages(){v["a"].getAll().then(e=>{this.stages=e.data}).catch(e=>{console.log(e)})},viewItem(e){this.$router.push({name:"vuexFile",params:{id:e.id}})}}},S=y,T=s("2877"),A=Object(T["a"])(S,u,o,!1,null,null,null);t["default"]=A.exports}}]);
//# sourceMappingURL=chunk-2d216263.a588f554.js.map