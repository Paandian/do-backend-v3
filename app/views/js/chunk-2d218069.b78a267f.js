(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d218069"],{c8db:function(e,t,s){"use strict";s.r(t);var a=s("0798"),n=s("8336"),r=s("b0af"),l=s("62ad"),o=s("2e4b"),c=s("ce7e"),d=s("132d"),i=s("e449"),u=s("0fd9"),h=s("b974"),m=s("8654"),f=function(){var e=this,t=e._self._c;return t(r["a"],{staticClass:"pa-4"},[t("h2",[e._v("Closed Assignments by Adjuster (By Month)")]),t(u["a"],{attrs:{dense:""}},[t(l["a"],{attrs:{cols:"12",md:"4"}},[t(h["a"],{attrs:{items:e.branches,"item-text":"name","item-value":"id",label:"Branch",dense:"",required:""},model:{value:e.selectedBranch,callback:function(t){e.selectedBranch=t},expression:"selectedBranch"}})],1),t(l["a"],{attrs:{cols:"12",md:"4"}},[t(h["a"],{attrs:{items:e.filteredAdjusters,"item-text":"username","item-value":"id",label:"Adjuster",dense:"",required:"",disabled:!e.selectedBranch},model:{value:e.selectedAdjuster,callback:function(t){e.selectedAdjuster=t},expression:"selectedAdjuster"}})],1),t(l["a"],{attrs:{cols:"12",md:"4"}},[t(i["a"],{attrs:{"close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(m["a"],e._g(e._b({attrs:{label:"Month","prepend-icon":"mdi-calendar",readonly:"",dense:"",required:""},model:{value:e.selectedMonth,callback:function(t){e.selectedMonth=t},expression:"selectedMonth"}},"v-text-field",a,!1),s))]}}]),model:{value:e.menuMonth,callback:function(t){e.menuMonth=t},expression:"menuMonth"}},[t(o["a"],{attrs:{type:"month"},on:{change:function(t){e.menuMonth=!1}},model:{value:e.selectedMonth,callback:function(t){e.selectedMonth=t},expression:"selectedMonth"}})],1)],1)],1),t(c["a"],{staticClass:"my-4"}),t(n["a"],{staticClass:"mt-2",attrs:{color:"success",disabled:!e.selectedAdjuster||!e.selectedMonth,loading:e.exporting},on:{click:e.exportExcel}},[t(d["a"],{attrs:{left:""}},[e._v("mdi-file-excel")]),e._v(" Export Closed Assignments ")],1),t(a["a"],{staticClass:"mt-4",attrs:{type:"info",outlined:""}},[e._v(" The exported Excel file will contain closed assignments by adjuster for your selected branch and month. ")])],1)},p=[],b=(s("e9f5"),s("910d"),s("f665"),s("a732"),s("88a7"),s("271a"),s("5494"),s("c1df")),x=s.n(b),j=s("fde1"),A=s("9df5"),M=s("6736"),v={name:"ClosedByAdjusterMonth",data(){return{selectedBranch:null,branches:[],adjusters:[],selectedAdjuster:null,selectedMonth:null,menuMonth:!1,exporting:!1}},mounted(){this.loadBranches(),this.retrieveAdjusters()},methods:{async loadBranches(){const e=await j["a"].getAll();this.branches=(e.data||[]).sort((e,t)=>e.name.localeCompare(t.name))},retrieveAdjusters(){A["a"].getAll().then(e=>{this.adjusters=e.data.filter(e=>e.roles&&e.roles.some(e=>"adjuster"===e.roleCode)&&e.active).sort((e,t)=>e.username.localeCompare(t.username))}).catch(e=>{console.log(e)})},async exportExcel(){this.exporting=!0;try{const e={adjusterId:this.selectedAdjuster,month:x()(this.selectedMonth).format("YYYY-MM")},t=M["a"].baseURL+"/compliance/closed-by-adjuster/export?"+new URLSearchParams(e).toString();window.open(t,"_blank")}catch(e){this.$emit("error",e.message||"Failed to export Excel")}finally{this.exporting=!1}}},computed:{filteredAdjusters(){if(!this.selectedBranch)return[];const e=this.branches.find(e=>e.id===this.selectedBranch);if(!e)return[];const t=e.brCode;return this.adjusters.filter(e=>Array.isArray(e.branches)&&e.branches.some(e=>e.brCode===t)).sort((e,t)=>e.username.localeCompare(t.username))}}},y=v,g=s("2877"),C=Object(g["a"])(y,f,p,!1,null,null,null);t["default"]=C.exports}}]);
//# sourceMappingURL=chunk-2d218069.b78a267f.js.map