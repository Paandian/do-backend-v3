(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-503eee76"],{"23a7":function(e,t,s){"use strict";s("14d9"),s("13d5"),s("e9f5"),s("d866"),s("7d54"),s("ab43"),s("9485"),s("5803");var a=s("2677"),i=s("cc20"),n=s("80d2"),l=s("d9bd"),r=s("d9f7");t["a"]=a["a"].extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:e=>"boolean"===typeof e||[1e3,1024].includes(e)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:e=>Object(n["H"])(e).every(e=>null!=e&&"object"===typeof e)}},computed:{classes(){return{...a["a"].options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const e=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,e);const t=this.internalArrayValue.reduce((e,{size:t=0})=>e+t,0);return this.$vuetify.lang.t(this.counterSizeString,e,Object(n["w"])(t,1024===this.base))},internalArrayValue(){return Object(n["H"])(this.internalValue)},internalValue:{get(){return this.lazyValue},set(e){this.lazyValue=e,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map(e=>{const{name:t="",size:s=0}=e,a=this.truncateText(t);return this.showSize?`${a} (${Object(n["w"])(s,1024===this.base)})`:a}):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(e){!0===e&&Object(l["b"])("readonly is not supported on <v-file-input>",this)},immediate:!0},value(e){const t=this.multiple?e:e?[e]:[];Object(n["k"])(t,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map((e,t)=>this.$createElement(i["a"],{props:{small:this.smallChips},on:{"click:close":()=>{const e=this.internalValue;e.splice(t,1),this.internalValue=e}}},[e])):[]},genControl(){const e=a["a"].options.methods.genControl.call(this);return this.hideInput&&(e.data.style=Object(r["d"])(e.data.style,{display:"none"})),e},genInput(){const e=a["a"].options.methods.genInput.call(this);return e.data.attrs.multiple=this.multiple,delete e.data.domProps.value,delete e.data.on.input,e.data.on.change=this.onInput,[this.genSelections(),e]},genPrependSlot(){if(!this.prependIcon)return null;const e=this.genIcon("prepend",()=>{this.$refs.input.click()});return this.genSlot("prepend","outer",[e])},genSelectionText(){const e=this.text.length;return e<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,e)]},genSelections(){const e=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((t,s)=>{this.$scopedSlots.selection&&e.push(this.$scopedSlots.selection({text:this.text[s],file:t,index:s}))}):e.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},e)},genTextFieldSlot(){const e=a["a"].options.methods.genTextFieldSlot.call(this);return e.data.on={...e.data.on||{},click:e=>{e.target&&"LABEL"===e.target.nodeName||this.$refs.input.click()}},e},onInput(e){const t=[...e.target.files||[]];this.internalValue=this.multiple?t:t[0],this.initialValue=this.internalValue},onKeyDown(e){this.$emit("keydown",e)},truncateText(e){if(e.length<Number(this.truncateLength))return e;const t=Math.floor((Number(this.truncateLength)-1)/2);return`${e.slice(0,t)}â€¦${e.slice(e.length-t)}`}}})},2677:function(e,t,s){"use strict";var a=s("8654");t["a"]=a["a"]},"271a":function(e,t,s){"use strict";var a=s("cb2d"),i=s("e330"),n=s("577e"),l=s("d6d6"),r=URLSearchParams,o=r.prototype,c=i(o.getAll),d=i(o.has),u=new r("a=1");!u.has("a",2)&&u.has("a",void 0)||a(o,"has",(function(e){var t=arguments.length,s=t<2?void 0:arguments[1];if(t&&void 0===s)return d(this,e);var a=c(this,e);l(t,1);var i=n(s),r=0;while(r<a.length)if(a[r++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},5494:function(e,t,s){"use strict";var a=s("83ab"),i=s("e330"),n=s("edd0"),l=URLSearchParams.prototype,r=i(l.forEach);a&&!("size"in l)&&n(l,"size",{get:function(){var e=0;return r(this,(function(){e++})),e},configurable:!0,enumerable:!0})},5803:function(e,t,s){},"7e1b":function(e,t,s){"use strict";var a=s("c427");class i{upload(e,t){return a["a"].post("/docs/upload",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}uploadPhoto(e,t){let s=new FormData;return s.append("file",e),a["a"].post("/members/upload",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}uploadExcel(e,t){let s=new FormData;return s.append("file",e),a["a"].post("/dropboxfiles/upload",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}getFiles(){return a["a"].get("../docs")}getPhotos(){return a["a"].get("../files")}}t["a"]=new i},"835e":function(e,t,s){"use strict";s.r(t);var a=s("a523"),i=s("71a3"),n=s("fe57"),l=function(){var e=this,t=e._self._c;return t("div",[t(a["a"],{staticStyle:{width:"80%"},attrs:{fluid:""}},[t(n["a"],[t(i["a"],{on:{click:function(t){e.incoming=!0,e.cancelled=!1}}},[e._v("Incoming")]),t(i["a"],{on:{click:function(t){e.cancelled=!0,e.incoming=!1}}},[e._v("Cancelled")])],1),e.incoming?t("incTab"):e._e(),e.cancelled?t("cancTab"):e._e()],1)],1)},r=[],o=s("c6a6"),c=s("8336"),d=s("b0af"),u=s("99d9"),m=s("cc20"),h=s("62ad"),f=s("8fea"),p=s("2e4b"),g=s("169a"),b=s("ce7e"),v=s("23a7"),I=s("132d"),x=s("e449"),y=s("0fd9"),S=s("b974"),D=s("2fa4"),k=s("8654"),C=s("71d9"),_=s("3a2f"),w=function(){var e=this,t=e._self._c;return t("div",[t(y["a"],[t(h["a"],{attrs:{cols:"12"}},[t(f["a"],{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{dense:"",headers:e.headers,items:e.filteredCasefiles,search:e.search,loading:e.loadTable,"loading-text":"Working on it ......","show-select":"","footer-props":{"items-per-page-options":[10,20,30,40,50,100]},"items-per-page":100,"sort-by":"id"},on:{"click:row":t=>e.viewItem(t),"current-items":e.currentItems},scopedSlots:e._u([{key:"top",fn:function(){return[t(C["a"],{attrs:{flat:""}},[t(g["a"],{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(_["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:i}){return[t(c["a"],e._g(e._b({attrs:{fab:"",small:"",color:"primary",dark:"",disabled:e.addCasefileDisabled}},"v-btn",a,!1),{...i,...s}),[t(I["a"],[e._v("mdi-plus")])],1)]}}],null,!0)},[t("span",[e._v("ADD CASEFILE")])])]}}]),model:{value:e.addDialog,callback:function(t){e.addDialog=t},expression:"addDialog"}},[t(d["a"],{attrs:{tile:""}},[t(u["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("ADD NEW CASE")])]),t(u["c"],[t(a["a"],[t(y["a"],[t(d["a"],{staticClass:"mt-2",attrs:{width:"100%",tile:""}},[t(u["d"],[e._v("Department")]),t(h["a"],{attrs:{cols:"12"}},[t(S["a"],{attrs:{items:e.refType,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select Department","persistent-hint":"",label:"Department"},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Department ")]},proxy:!0}]),model:{value:e.newItem.refType,callback:function(t){e.$set(e.newItem,"refType",t)},expression:"newItem.refType"}})],1),t(h["a"],{attrs:{cols:"12"}},[t(S["a"],{attrs:{items:e.filtersubRefType(e.newItem.refType),"item-text":"subCode","item-value":"id","no-data-text":"There is no file-Classification option for selected department above","menu-props":{maxHeight:"400"},label:"File-Classification",hint:"Select File-Classification","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("File-Classification ")]},proxy:!0}]),model:{value:e.newItem.subRefType,callback:function(t){e.$set(e.newItem,"subRefType",t)},expression:"newItem.subRefType"}})],1)],1),t(h["a"],{attrs:{cols:"12"}},[t(o["a"],{attrs:{items:e.insurer,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile insurer","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurer ")]},proxy:!0}]),model:{value:e.newItem.insurer,callback:function(t){e.$set(e.newItem,"insurer",t)},expression:"newItem.insurer"}})],1),t(h["a"],{attrs:{cols:"12"}},[t(S["a"],{attrs:{items:e.filterHandler(e.newItem.insurer),"item-text":"name","item-value":"id","no-data-text":"There is no handler option for selected insurer above","menu-props":{maxHeight:"400"},label:"Claim Handler",hint:"Select Handler","persistent-hint":""},model:{value:e.newItem.handler,callback:function(t){e.$set(e.newItem,"handler",t)},expression:"newItem.handler"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(k["a"],{attrs:{"item-text":"Insurer's Reference",label:"Insurers Reference Number",rules:[e=>!!e||"Insurers reference is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurers Reference ")]},proxy:!0}]),model:{value:e.newItem.claimNo,callback:function(t){e.$set(e.newItem,"claimNo",t)},expression:"newItem.claimNo"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(x["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(k["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Assignment ")]},proxy:!0}],null,!0),model:{value:e.newItem.dateOfAssign,callback:function(t){e.$set(e.newItem,"dateOfAssign",t)},expression:"newItem.dateOfAssign"}},"v-text-field",a,!1),s))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(p["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu=!1}},model:{value:e.newItem.dateOfAssign,callback:function(t){e.$set(e.newItem,"dateOfAssign",t)},expression:"newItem.dateOfAssign"}})],1)],1)]],2),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(k["a"],{attrs:{label:"Vehicle Number",hint:"Vehicle Number"},model:{value:e.newItem.vehicleNo,callback:function(t){e.$set(e.newItem,"vehicleNo",t)},expression:"newItem.vehicleNo"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(x["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(k["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Loss ")]},proxy:!0}],null,!0),model:{value:e.newItem.dateOfLoss,callback:function(t){e.$set(e.newItem,"dateOfLoss",t)},expression:"newItem.dateOfLoss"}},"v-text-field",a,!1),s))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[t(p["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu1=!1}},model:{value:e.newItem.dateOfLoss,callback:function(t){e.$set(e.newItem,"dateOfLoss",t)},expression:"newItem.dateOfLoss"}})],1)],1)]],2),t(h["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[t(S["a"],{attrs:{items:e.selectItems,"item-text":"description","item-value":"code","menu-props":{maxHeight:"400"},label:"FILE STATUS",hint:"Set File Status - Will be removed on Production version","persistent-hint":"","single-line":""},model:{value:e.newItem.fileStatus,callback:function(t){e.$set(e.newItem,"fileStatus",t)},expression:"newItem.fileStatus"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(D["a"]),t(c["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeAddDialog}},[e._v(" Cancel ")]),t(c["a"],{staticClass:"mt-3 success",attrs:{disabled:e.isAddFileButtonDisabled,small:"",tile:""},on:{click:e.addCasefile}},[e._v("Submit")])],1)],1)],1)],1)],1)],1),t(g["a"],{attrs:{"max-width":"600px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[t(d["a"],{attrs:{tile:""}},[t(u["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",[e._v("EDIT CASEFILE")])]),t(u["c"],[t(a["a"],[t(y["a"],[t(d["a"],{staticClass:"mt-2",attrs:{width:"100%",tile:""}},[t(u["d"],[e._v("Department")]),t(h["a"],{attrs:{cols:"12"}},[t(S["a"],{attrs:{items:e.refType,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select Department","persistent-hint":"",label:"Department"},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Department ")]},proxy:!0}]),model:{value:e.editItem.refType,callback:function(t){e.$set(e.editItem,"refType",t)},expression:"editItem.refType"}})],1),t(h["a"],{attrs:{cols:"12"}},[t(S["a"],{attrs:{items:e.filtersubRefType(e.editItem.refType),"item-text":"subCode","item-value":"id","no-data-text":"There is no file-Classification option for selected department above","menu-props":{maxHeight:"400"},label:"File-Classification",hint:"Select File-Classification","persistent-hint":""},model:{value:e.editItem.subRefType,callback:function(t){e.$set(e.editItem,"subRefType",t)},expression:"editItem.subRefType"}})],1)],1),t(h["a"],{attrs:{cols:"12"}},[t(o["a"],{attrs:{items:e.insurer,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile insurer","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurer ")]},proxy:!0}]),model:{value:e.editItem.insurer,callback:function(t){e.$set(e.editItem,"insurer",t)},expression:"editItem.insurer"}})],1),t(h["a"],{attrs:{cols:"12"}},[t(S["a"],{attrs:{items:e.filterHandler(e.editItem.insurer),"item-text":"name","item-value":"id","no-data-text":"There is no handler option for selected insurer above","menu-props":{maxHeight:"400"},label:"Claim Handler",hint:"Select Handler","persistent-hint":""},model:{value:e.editItem.handler,callback:function(t){e.$set(e.editItem,"handler",t)},expression:"editItem.handler"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(k["a"],{attrs:{"item-text":"Insurer's Reference",label:"Insurers Reference Number",rules:[e=>!!e||"Insurers reference is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurers Reference ")]},proxy:!0}]),model:{value:e.editItem.claimNo,callback:function(t){e.$set(e.editItem,"claimNo",t)},expression:"editItem.claimNo"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(x["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(k["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Assignment ")]},proxy:!0}],null,!0),model:{value:e.editItem.dateOfAssign,callback:function(t){e.$set(e.editItem,"dateOfAssign",t)},expression:"editItem.dateOfAssign"}},"v-text-field",a,!1),s))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(p["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu=!1}},model:{value:e.editItem.dateOfAssign,callback:function(t){e.$set(e.editItem,"dateOfAssign",t)},expression:"editItem.dateOfAssign"}})],1)],1)]],2),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(k["a"],{attrs:{label:"Vehicle Number",hint:"Vehicle Number"},model:{value:e.editItem.vehicleNo,callback:function(t){e.$set(e.editItem,"vehicleNo",t)},expression:"editItem.vehicleNo"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(x["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(k["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Loss ")]},proxy:!0}],null,!0),model:{value:e.editItem.dateOfLoss,callback:function(t){e.$set(e.editItem,"dateOfLoss",t)},expression:"editItem.dateOfLoss"}},"v-text-field",a,!1),s))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[t(p["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu1=!1}},model:{value:e.editItem.dateOfLoss,callback:function(t){e.$set(e.editItem,"dateOfLoss",t)},expression:"editItem.dateOfLoss"}})],1)],1)]],2),t(h["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[t(S["a"],{attrs:{items:e.selectItems,"item-text":"description","item-value":"code","menu-props":{maxHeight:"400"},label:"FILE STATUS",hint:"Set File Status - Will be removed on Production version","persistent-hint":"","single-line":""},model:{value:e.editItem.fileStatus,callback:function(t){e.$set(e.editItem,"fileStatus",t)},expression:"editItem.fileStatus"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(D["a"]),t(c["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeEditDialog}},[e._v(" Cancel ")]),t(c["a"],{staticClass:"warning mt-3",attrs:{disabled:e.isEditFileButtonDisabled,small:"",tile:""},on:{click:e.editCasefile}},[e._v("Update")])],1)],1)],1)],1)],1)],1),t(g["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(d["a"],[t(u["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e._v("Confirm delete? ")]),t(u["a"],[t(D["a"]),t(c["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:e.closeDeleteDialog}},[e._v("No")]),t(c["a"],{staticClass:"error",attrs:{small:"",tile:""},on:{click:e.deleteItemConfirm}},[e._v("Yes")]),t(D["a"])],1)],1)],1),e.addcase?t(b["a"],{staticClass:"mx-4",attrs:{inset:"",vertical:""}}):e._e(),t(g["a"],{attrs:{disabled:0==e.currentDropboxFile.length,width:"500"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(_["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:i}){return[t(c["a"],e._g(e._b({staticClass:"error",attrs:{fab:"",small:""}},"v-btn",a,!1),{...i,...s}),[t(I["a"],[e._v("mdi-delete-alert")])],1)]}}],null,!0)},[t("span",[e._v("DELETE SELECTED")])])]}}]),model:{value:e.deleteSelectedDialog,callback:function(t){e.deleteSelectedDialog=t},expression:"deleteSelectedDialog"}},[t(d["a"],[t(u["d"],{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v(" Confirm delete?? ")]),t(u["c"],[e._v(" You won't be able to revert back. ")]),t(b["a"]),t(u["a"],[t(D["a"]),t(c["a"],{staticClass:"success",attrs:{tile:"",small:""},on:{click:e.hideDeleteDialog}},[e._v(" No ")]),t(c["a"],{staticClass:"error",attrs:{tile:"",small:""},on:{click:e.deleteSelectedItem}},[e._v(" Yes ")])],1)],1)],1),t(b["a"],{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t(v["a"],{attrs:{label:"Click here to upload",dense:"","hide-details":"",name:"file",outlined:"",clearable:""},on:{change:e.selectFile},model:{value:e.currentFile,callback:function(t){e.currentFile=t},expression:"currentFile"}}),t(c["a"],{staticClass:"success ml-2",attrs:{disabled:e.isUploadDisabled,small:"",tile:""},on:{click:e.uploadConfirm}},[e._v(" Upload ")]),t(b["a"],{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t(k["a"],{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"item.numbering",fn:function(t){return[e._v(" "+e._s(t.index+1)+" ")]}},{key:"item.insurer",fn:function({item:s}){return e._l(e.filterIns(s.insurer),(function(s){return t("div",{key:s.id},[t("div",{staticClass:"text-truncate",staticStyle:{"max-width":"150px"}},[e._v(" "+e._s(s.name)+" ")])])}))}},{key:"item.dateOfLoss",fn:function({item:t}){return[e._v(" "+e._s(e.formatDate(t.dateOfLoss))+" ")]}},{key:"item.fileStatus",fn:function({item:s}){return[t(m["a"],{attrs:{label:"",outlined:"",block:"","x-small":""}},[e._v(" "+e._s("INC"===s.fileStatus?"MERIMEN-INCOMING":"MERIMEN-CANCELLED")+" ")])]}},{key:"item.actions",fn:function({item:s}){return[t(_["a"],{attrs:{left:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[e.management?t(I["a"],e._g(e._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return t.stopPropagation(),e.updateItem(s)}}},"v-icon",i,!1),a),[e._v(" mdi-pencil ")]):e._e()]}}],null,!0)},[t("span",[e._v(" edit")])]),t(_["a"],{attrs:{right:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[e.management?t(I["a"],e._g(e._b({attrs:{small:"",color:"red darken-1"},on:{click:function(t){return t.stopPropagation(),e.deleteItem(s)}}},"v-icon",i,!1),a),[e._v(" mdi-delete ")]):e._e()]}}],null,!0)},[t("span",[e._v(" delete")])])]}}],null,!0),model:{value:e.currentDropboxFile,callback:function(t){e.currentDropboxFile=t},expression:"currentDropboxFile"}})],1),t(h["a"],[t(c["a"],{staticClass:"success",attrs:{small:""},on:{click:function(t){return e.onClick()}}},[e._v("Download Excel Template")])],1)],1)],1)},A=[],T=(s("14d9"),s("e9f5"),s("910d"),s("ab43"),s("88a7"),s("271a"),s("5494"),s("cb28")),N=s("f983"),O=s("5632"),$=s("fbde"),L=s("d14b"),R=s("8643"),E=s("7e1b"),F=s("c1df"),M=s.n(F),H=s("bc3a"),j=s.n(H),B={name:"incomingList",data:()=>({currentFile:void 0,currentDropboxFile:[],sampleExcel:{url:"../assets/Sample-Bulk-Create.xlsx",label:"Download"},addDialog:!1,editDialog:!1,dialogDelete:!1,dialogAcceptCase:!1,deleteSelectedDialog:!1,dropboxfiles:[],search:"",management:!1,addcase:!1,loadTable:!0,date:null,menu:!1,menu1:!1,selectItems:[{code:"INC",description:"MERIMEN-INCOMING"},{code:"CINC",description:"MERIMEN-CANCELLED"}],branch:[],state:[],regions:[],refType:[],subRefTypes:[],stages:[],insurer:[],handlers:[],newItem:{id:null,refType:"",subRefType:"",branch:"",insurer:"",handler:"",claimNo:"",dateOfAssign:"",vehicleNo:"",dateOfLoss:"",stateOfLoss:"",placeOfLoss:"",insuredName:"",insComment:"",createdBy:"",fileStatus:"",dateStartInv:""},editItem:{id:null,refType:"",subRefType:"",branch:"",insurer:"",handler:"",claimNo:"",dateOfAssign:"",vehicleNo:"",dateOfLoss:"",stateOfLoss:"",placeOfLoss:"",insuredName:"",insComment:"",createdBy:"",fileStatus:"",dateStartInv:""},headers:[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"INSURER",align:"center",value:"insurer",sortable:!1},{text:"VEHICLE NO.",align:"center",value:"vehicleNo",sortable:!1},{text:"CLAIM NO.",align:"start",sortable:!1,value:"claimNo"},{text:"DATE OF LOSS",align:"start",sortable:!1,value:"dateOfLoss"},{text:"STATUS",align:"center",value:"fileStatus",sortable:!1},{text:"ACTIONS",align:"center",value:"actions",sortable:!1}]}),computed:{isUploadDisabled(){return!this.currentFile},addCasefileDisabled(){return!this.addcase},currentUser(){return this.$store.state.auth.user},filteredCasefiles(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.dropboxfiles:[]},isAddFileButtonDisabled(){return!(this.newItem.refType&&this.newItem.subRefType&&this.newItem.insurer&&this.newItem.claimNo&&this.newItem.dateOfAssign&&this.newItem.dateOfLoss)},isEditFileButtonDisabled(){return!(this.editItem.refType&&this.editItem.subRefType&&this.editItem.insurer&&this.editItem.claimNo&&this.editItem.dateOfAssign&&this.editItem.dateOfLoss)},computedDateFormattedMomentjs(){return this.date?M()(this.date).format("DD/MM/YY"):""}},watch:{addDialog(e){e||this.closeAddDialog()},editDialog(e){e||this.closeEditDialog()},dialogDelete(e){e||this.closeDeleteDialog()},acceptCase(e){e||this.closeAcceptCase()}},methods:{hideDeleteDialog(){this.deleteSelectedDialog=!1},currentItems:function(e){return this.currentDropboxFile=e},onClick(){j()({url:"http://localhost:8080/docs/Sample-Bulk-Create.xlsx",method:"GET",responseType:"blob"}).then(e=>{var t=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=t,s.setAttribute("download","Sample-Bulk-Create.xlsx"),document.body.appendChild(s),s.click()})},selectFile(e){this.currentFile=e},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterStates(e){return this.branch.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},checkAddCase(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK"))&&(this.addcase=!0)},viewItem(e){this.$router.push({name:"dropboxDetail",params:{id:e.id}})},formatDate(e){return M()(e).format("DD/MM/YYYY")},yearOnly(e){return M()(e).format("YY")},retrieveCasefiles(){$["a"].getAllInc().then(e=>{this.dropboxfiles=e.data,this.loadTable=!1}).catch(e=>{console.log(e)})},refreshList(){this.retrieveCasefiles()},retrieveDept(){T["a"].getAll().then(e=>{this.refType=e.data}).catch(e=>{console.log(e)})},retrieveSubRefType(){N["a"].getAll().then(e=>{this.subRefTypes=e.data}).catch(e=>{console.log(e)})},retrieveStages(){L["a"].getAll().then(e=>{this.stages=e.data}).catch(e=>{console.log(e)})},retrieveIns(){O["a"].getAll().then(e=>{this.insurer=e.data}).catch(e=>{console.log(e)})},retrieveHandlers(){R["a"].getAll().then(e=>{this.handlers=e.data}).catch(e=>{console.log(e)})},updateItem(e){this.editItem=Object.assign({},e),this.editDialog=!0},deleteItem(e){this.editItem=Object.assign({},e),this.dialogDelete=!0},closeAddDialog(){this.addDialog=!1,this.$nextTick(()=>{this.newItem=Object.assign({})})},closeEditDialog(){this.editDialog=!1},closeDeleteDialog(){this.dialogDelete=!1},addCasefile(){var e={refType:this.newItem.refType,subRefType:this.newItem.subRefType,insurer:this.newItem.insurer,handler:this.newItem.handler,claimNo:this.newItem.claimNo,dateOfAssign:this.newItem.dateOfAssign,vehicleNo:this.newItem.vehicleNo,dateOfLoss:this.newItem.dateOfLoss,fileStatus:"INC",caseFrom:"ORGANIC"};$["a"].create(e).then(e=>{this.newItem.id=e.data.id,this.closeAddDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeAddDialog()},editCasefile(){$["a"].update(this.editItem.id,this.editItem).then(e=>{this.closeEditDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)}),this.closeEditDialog()},deleteItemConfirm(){$["a"].delete(this.editItem.id).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)}),this.closeDeleteDialog()},deleteSelectedItem(){const e=this.currentDropboxFile.map(e=>e.id);$["a"].deleteids({data:{ids:e}}).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e&&e.data&&e.data.message||toString()}),this.refreshList(),this.hideDeleteDialog()}).catch(e=>{console.error(e),this.hideDeleteDialog()})},uploadConfirm(){this.currentFile?this.currentFile&&(this.message="",E["a"].uploadExcel(this.currentFile,e=>{this.progress=Math.round(100*e.loaded/e.total)}).then(e=>(this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),this.currentFile=void 0,this.refreshList(),E["a"].getFiles())).catch(e=>{this.progress=0,this.uploadDialog=!1,this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e.response&&e.response.data&&e.response.data.message||e.message||toString()}),this.currentFile=void 0})):this.message="Please select a file!"}},mounted(){this.retrieveDept(),this.retrieveSubRefType(),this.retrieveStages(),this.retrieveIns(),this.retrieveCasefiles(),this.checkManagement(),this.checkAddCase(),this.retrieveHandlers()}},V=B,U=s("2877"),P=Object(U["a"])(V,w,A,!1,null,null,null),Y=P.exports,z=function(){var e=this,t=e._self._c;return t("div",[t(y["a"],[t(h["a"],{attrs:{cols:"12"}},[t(f["a"],{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{dense:"",headers:e.headers,items:e.filteredCasefiles,"sort-by":["id"],"sort-desc":[!0],"footer-props":{"items-per-page-options":[10,20,30,40,50,100]},"items-per-page":100,search:e.search,loading:e.loadTable,"loading-text":"Working on it ......"},on:{"click:row":t=>e.viewItem(t)},scopedSlots:e._u([{key:"top",fn:function(){return[t(C["a"],{attrs:{flat:""}},[t(g["a"],{attrs:{"max-width":"600px"},model:{value:e.addDialog,callback:function(t){e.addDialog=t},expression:"addDialog"}},[t(d["a"],[t(u["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("ADD NEW CASE")])]),t(u["c"],[t(a["a"],[t(y["a"],[t(d["a"],{attrs:{width:"100%"}},[t(u["d"],[e._v("Department")]),t(h["a"],{attrs:{cols:"12"}},[t(S["a"],{attrs:{items:e.refType,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select Department","persistent-hint":"",label:"Department"},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Department ")]},proxy:!0}]),model:{value:e.newItem.refType,callback:function(t){e.$set(e.newItem,"refType",t)},expression:"newItem.refType"}})],1),t(h["a"],{attrs:{cols:"12"}},[t(S["a"],{attrs:{items:e.filtersubRefType(e.newItem.refType),"item-text":"subCode","item-value":"id","no-data-text":"There is no file-Classification option for selected department above","menu-props":{maxHeight:"400"},label:"File-Classification",hint:"Select File-Classification","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("File-Classification ")]},proxy:!0}]),model:{value:e.newItem.subRefType,callback:function(t){e.$set(e.newItem,"subRefType",t)},expression:"newItem.subRefType"}})],1)],1),t(h["a"],{attrs:{cols:"12"}},[t(o["a"],{attrs:{items:e.insurer,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile insurer","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurer ")]},proxy:!0}]),model:{value:e.newItem.insurer,callback:function(t){e.$set(e.newItem,"insurer",t)},expression:"newItem.insurer"}})],1),t(h["a"],{attrs:{cols:"12"}},[t(S["a"],{attrs:{items:e.filterHandler(e.newItem.insurer),"item-text":"name","item-value":"id","no-data-text":"There is no handler option for selected insurer above","menu-props":{maxHeight:"400"},label:"Claim Handler",hint:"Select Handler","persistent-hint":""},model:{value:e.newItem.handler,callback:function(t){e.$set(e.newItem,"handler",t)},expression:"newItem.handler"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(k["a"],{attrs:{"item-text":"Insurer's Reference",label:"Insurers Reference Number",rules:[e=>!!e||"Insurers reference is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurers Reference ")]},proxy:!0}]),model:{value:e.newItem.claimNo,callback:function(t){e.$set(e.newItem,"claimNo",t)},expression:"newItem.claimNo"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(x["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(k["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Assignment ")]},proxy:!0}],null,!0),model:{value:e.newItem.dateOfAssign,callback:function(t){e.$set(e.newItem,"dateOfAssign",t)},expression:"newItem.dateOfAssign"}},"v-text-field",a,!1),s))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(p["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu=!1}},model:{value:e.newItem.dateOfAssign,callback:function(t){e.$set(e.newItem,"dateOfAssign",t)},expression:"newItem.dateOfAssign"}})],1)],1)]],2),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(k["a"],{attrs:{label:"Vehicle Number",hint:"Vehicle Number"},model:{value:e.newItem.vehicleNo,callback:function(t){e.$set(e.newItem,"vehicleNo",t)},expression:"newItem.vehicleNo"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(x["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(k["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Loss ")]},proxy:!0}],null,!0),model:{value:e.newItem.dateOfLoss,callback:function(t){e.$set(e.newItem,"dateOfLoss",t)},expression:"newItem.dateOfLoss"}},"v-text-field",a,!1),s))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[t(p["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu1=!1}},model:{value:e.newItem.dateOfLoss,callback:function(t){e.$set(e.newItem,"dateOfLoss",t)},expression:"newItem.dateOfLoss"}})],1)],1)]],2),t(h["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[t(S["a"],{attrs:{items:e.selectItems,"item-text":"description","item-value":"code","menu-props":{maxHeight:"400"},label:"FILE STATUS",hint:"Set File Status - Will be removed on Production version","persistent-hint":"","single-line":""},model:{value:e.newItem.fileStatus,callback:function(t){e.$set(e.newItem,"fileStatus",t)},expression:"newItem.fileStatus"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(D["a"]),t(c["a"],{staticClass:"mt-3 mr-2",attrs:{dark:"",color:"red darken-1"},on:{click:e.closeAddDialog}},[e._v(" Cancel ")]),t(c["a"],{staticClass:"mt-3",attrs:{disabled:e.isAddFileButtonDisabled,color:"primary"},on:{click:e.addCasefile}},[e._v("Submit")])],1)],1)],1)],1)],1)],1),t(g["a"],{attrs:{"max-width":"600px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[t(d["a"],{attrs:{tile:""}},[t(u["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",[e._v("EDIT CASEFILE")])]),t(u["c"],[t(a["a"],[t(y["a"],[t(d["a"],{staticClass:"mt-2",attrs:{width:"100%"}},[t(u["d"],[e._v("Department")]),t(h["a"],{attrs:{cols:"12"}},[t(S["a"],{attrs:{items:e.refType,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select Department","persistent-hint":"",label:"Department"},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Department ")]},proxy:!0}]),model:{value:e.editItem.refType,callback:function(t){e.$set(e.editItem,"refType",t)},expression:"editItem.refType"}})],1),t(h["a"],{attrs:{cols:"12"}},[t(S["a"],{attrs:{items:e.filtersubRefType(e.editItem.refType),"item-text":"subCode","item-value":"id","no-data-text":"There is no file-Classification option for selected department above","menu-props":{maxHeight:"400"},label:"File-Classification",hint:"Select File-Classification","persistent-hint":""},model:{value:e.editItem.subRefType,callback:function(t){e.$set(e.editItem,"subRefType",t)},expression:"editItem.subRefType"}})],1)],1),t(h["a"],{attrs:{cols:"12"}},[t(o["a"],{attrs:{items:e.insurer,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile insurer","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurer ")]},proxy:!0}]),model:{value:e.editItem.insurer,callback:function(t){e.$set(e.editItem,"insurer",t)},expression:"editItem.insurer"}})],1),t(h["a"],{attrs:{cols:"12"}},[t(S["a"],{attrs:{items:e.filterHandler(e.editItem.insurer),"item-text":"name","item-value":"id","no-data-text":"There is no handler option for selected insurer above","menu-props":{maxHeight:"400"},label:"Claim Handler",hint:"Select Handler","persistent-hint":""},model:{value:e.editItem.handler,callback:function(t){e.$set(e.editItem,"handler",t)},expression:"editItem.handler"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(k["a"],{attrs:{"item-text":"Insurer's Reference",label:"Insurers Reference Number",rules:[e=>!!e||"Insurers reference is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurers Reference ")]},proxy:!0}]),model:{value:e.editItem.claimNo,callback:function(t){e.$set(e.editItem,"claimNo",t)},expression:"editItem.claimNo"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(x["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(k["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Assignment ")]},proxy:!0}],null,!0),model:{value:e.editItem.dateOfAssign,callback:function(t){e.$set(e.editItem,"dateOfAssign",t)},expression:"editItem.dateOfAssign"}},"v-text-field",a,!1),s))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(p["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu=!1}},model:{value:e.editItem.dateOfAssign,callback:function(t){e.$set(e.editItem,"dateOfAssign",t)},expression:"editItem.dateOfAssign"}})],1)],1)]],2),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(k["a"],{attrs:{label:"Vehicle Number",hint:"Vehicle Number"},model:{value:e.editItem.vehicleNo,callback:function(t){e.$set(e.editItem,"vehicleNo",t)},expression:"editItem.vehicleNo"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(x["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(k["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Loss ")]},proxy:!0}],null,!0),model:{value:e.editItem.dateOfLoss,callback:function(t){e.$set(e.editItem,"dateOfLoss",t)},expression:"editItem.dateOfLoss"}},"v-text-field",a,!1),s))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[t(p["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu1=!1}},model:{value:e.editItem.dateOfLoss,callback:function(t){e.$set(e.editItem,"dateOfLoss",t)},expression:"editItem.dateOfLoss"}})],1)],1)]],2),t(h["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[t(S["a"],{attrs:{items:e.selectItems,"item-text":"description","item-value":"code","menu-props":{maxHeight:"400"},label:"FILE STATUS",hint:"Set File Status - Will be removed on Production version","persistent-hint":""},model:{value:e.editItem.fileStatus,callback:function(t){e.$set(e.editItem,"fileStatus",t)},expression:"editItem.fileStatus"}})],1),t(h["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(D["a"]),t(c["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeEditDialog}},[e._v(" Cancel ")]),t(c["a"],{staticClass:"warning mt-3",attrs:{disabled:e.isEditFileButtonDisabled,small:"",tile:""},on:{click:e.editCasefile}},[e._v("Submit")])],1)],1)],1)],1)],1)],1),t(g["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(d["a"],[t(u["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e._v("Confirm delete? ")]),t(u["a"],[t(D["a"]),t(c["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:e.closeDeleteDialog}},[e._v("No")]),t(c["a"],{staticClass:"error",attrs:{small:"",tile:""},on:{click:e.deleteItemConfirm}},[e._v("Yes")]),t(D["a"])],1)],1)],1),t(D["a"]),t(k["a"],{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"item.numbering",fn:function(t){return[e._v(" "+e._s(t.index+1)+" ")]}},{key:"item.insurer",fn:function({item:s}){return e._l(e.filterIns(s.insurer),(function(s){return t("div",{key:s.id},[t("div",{staticClass:"text-truncate",staticStyle:{"max-width":"100px"}},[e._v(" "+e._s(s.name)+" ")])])}))}},{key:"item.dateOfLoss",fn:function({item:t}){return[e._v(" "+e._s(e.formatDate(t.dateOfLoss))+" ")]}},{key:"item.fileStatus",fn:function({item:s}){return[t(m["a"],{attrs:{label:"",outlined:"",block:"","x-small":""}},[e._v(" "+e._s("INC"===s.fileStatus?"MERIMEN-INCOMING":"MERIMEN-CANCELLED")+" ")])]}},{key:"item.actions",fn:function({item:s}){return[t(_["a"],{attrs:{left:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[e.management?t(I["a"],e._g(e._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return t.stopPropagation(),e.updateItem(s)}}},"v-icon",i,!1),a),[e._v(" mdi-pencil ")]):e._e()]}}],null,!0)},[t("span",[e._v(" edit")])]),t(_["a"],{attrs:{right:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[e.management?t(I["a"],e._g(e._b({attrs:{small:"",color:"red darken-1"},on:{click:function(t){return t.stopPropagation(),e.deleteItem(s)}}},"v-icon",i,!1),a),[e._v(" mdi-delete ")]):e._e()]}}],null,!0)},[t("span",[e._v(" delete")])])]}}],null,!0)})],1)],1)],1)},G=[],W={name:"cancelledList",data:()=>({addDialog:!1,editDialog:!1,dialogDelete:!1,dialogAcceptCase:!1,dropboxfiles:[],search:"",management:!1,addcase:!1,loadTable:!0,date:null,menu:!1,menu1:!1,selectItems:[{code:"INC",description:"MERIMEN-INCOMING"},{code:"CINC",description:"MERIMEN-CANCELLED"}],branch:[],state:[],regions:[],refType:[],subRefTypes:[],stages:[],insurer:[],handlers:[],newItem:{id:null,refType:"",subRefType:"",branch:"",insurer:"",handler:"",claimNo:"",dateOfAssign:"",vehicleNo:"",dateOfLoss:"",stateOfLoss:"",placeOfLoss:"",insuredName:"",insComment:"",createdBy:"",fileStatus:"",dateStartInv:""},editItem:{id:null,refType:"",subRefType:"",branch:"",insurer:"",handler:"",claimNo:"",dateOfAssign:"",vehicleNo:"",dateOfLoss:"",stateOfLoss:"",placeOfLoss:"",insuredName:"",insComment:"",createdBy:"",fileStatus:"",dateStartInv:""},headers:[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"INSURER",align:"center",value:"insurer",sortable:!1},{text:"VEHICLE NO.",align:"center",value:"vehicleNo",sortable:!1},{text:"CLAIM NO.",align:"start",sortable:!1,value:"claimNo"},{text:"DATE OF LOSS",align:"start",sortable:!1,value:"dateOfLoss"},{text:"STATUS",align:"center",value:"fileStatus",sortable:!1},{text:"ACTIONS",align:"center",value:"actions",sortable:!1}]}),computed:{addCasefileDisabled(){return!this.addcase},currentUser(){return this.$store.state.auth.user},filteredCasefiles(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")?this.dropboxfiles:this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")?this.dropboxfiles.filter(e=>this.$store.state.auth.user.dept.includes(e.refType)&&this.$store.state.auth.user.branches.includes(e.branch)):this.$store.state.auth.user.roles.includes("ADJUSTER")?this.dropboxfiles.filter(e=>this.$store.state.auth.user.dept.includes(e.refType)&&this.$store.state.auth.user.branches.includes(e.branch)&&this.$store.state.auth.user.id.toString().includes(e.adjuster)):this.$store.state.auth.user.roles.includes("EDITOR")?this.dropboxfiles.filter(e=>this.$store.state.auth.user.dept.includes(e.refType)&&this.$store.state.auth.user.branches.includes(e.branch)&&this.$store.state.auth.user.id.toString().includes(e.editor)):this.dropboxfiles},isAddFileButtonDisabled(){return!(this.newItem.refType&&this.newItem.subRefType&&this.newItem.insurer&&this.newItem.claimNo&&this.newItem.dateOfAssign&&this.newItem.dateOfLoss)},isEditFileButtonDisabled(){return!(this.editItem.refType&&this.editItem.subRefType&&this.editItem.insurer&&this.editItem.claimNo&&this.editItem.dateOfAssign&&this.editItem.dateOfLoss)},computedDateFormattedMomentjs(){return this.date?M()(this.date).format("DD/MM/YY"):""}},watch:{addDialog(e){e||this.closeAddDialog()},editDialog(e){e||this.closeEditDialog()},dialogDelete(e){e||this.closeDeleteDialog()},acceptCase(e){e||this.closeAcceptCase()}},methods:{filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterStates(e){return this.branch.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},checkAddCase(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK"))&&(this.addcase=!0)},viewItem(e){this.$router.push({name:"dropboxDetail",params:{id:e.id}})},formatDate(e){return M()(e).format("DD/MM/YYYY")},yearOnly(e){return M()(e).format("YY")},retrieveCasefiles(){$["a"].getAllCanc().then(e=>{this.dropboxfiles=e.data,this.loadTable=!1}).catch(e=>{console.log(e)})},refreshList(){this.retrieveCasefiles()},retrieveDept(){T["a"].getAll().then(e=>{this.refType=e.data}).catch(e=>{console.log(e)})},retrieveSubRefType(){N["a"].getAll().then(e=>{this.subRefTypes=e.data}).catch(e=>{console.log(e)})},retrieveStages(){L["a"].getAll().then(e=>{this.stages=e.data}).catch(e=>{console.log(e)})},retrieveIns(){O["a"].getAll().then(e=>{this.insurer=e.data}).catch(e=>{console.log(e)})},retrieveHandlers(){R["a"].getAll().then(e=>{this.handlers=e.data}).catch(e=>{console.log(e)})},updateItem(e){this.editItem=Object.assign({},e),this.editDialog=!0},deleteItem(e){this.editItem=Object.assign({},e),this.dialogDelete=!0},closeAddDialog(){this.addDialog=!1,this.$nextTick(()=>{this.newItem=Object.assign({})})},closeEditDialog(){this.editDialog=!1},closeDeleteDialog(){this.dialogDelete=!1},addCasefile(){var e={refType:this.newItem.refType,subRefType:this.newItem.subRefType,insurer:this.newItem.insurer,handler:this.newItem.handler,claimNo:this.newItem.claimNo,dateOfAssign:this.newItem.dateOfAssign,vehicleNo:this.newItem.vehicleNo,dateOfLoss:this.newItem.dateOfLoss,fileStatus:"INC",caseFrom:"ORGANIC"};$["a"].create(e).then(e=>{this.newItem.id=e.data.id,this.closeAddDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeAddDialog()},editCasefile(){$["a"].update(this.editItem.id,this.editItem).then(e=>{this.closeEditDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)}),this.closeEditDialog()},deleteItemConfirm(){$["a"].delete(this.editItem.id).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)}),this.closeDeleteDialog()}},mounted(){this.retrieveDept(),this.retrieveSubRefType(),this.retrieveStages(),this.retrieveIns(),this.retrieveCasefiles(),this.checkManagement(),this.checkAddCase(),this.retrieveHandlers()}},K=W,q=Object(U["a"])(K,z,G,!1,null,null,null),J=q.exports,Q={name:"dropboxfiles",components:{incTab:Y,cancTab:J},data(){return{incoming:!0,cancelled:!1}}},X=Q,Z=Object(U["a"])(X,l,r,!1,null,null,null);t["default"]=Z.exports},"88a7":function(e,t,s){"use strict";var a=s("cb2d"),i=s("e330"),n=s("577e"),l=s("d6d6"),r=URLSearchParams,o=r.prototype,c=i(o.append),d=i(o["delete"]),u=i(o.forEach),m=i([].push),h=new r("a=1&a=2&b=3");h["delete"]("a",1),h["delete"]("b",void 0),h+""!=="a=2"&&a(o,"delete",(function(e){var t=arguments.length,s=t<2?void 0:arguments[1];if(t&&void 0===s)return d(this,e);var a=[];u(this,(function(e,t){m(a,{key:t,value:e})})),l(t,1);var i,r=n(e),o=n(s),h=0,f=0,p=!1,g=a.length;while(h<g)i=a[h++],p||i.key===r?(p=!0,d(this,i.key)):f++;while(f<g)i=a[f++],i.key===r&&i.value===o||c(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},d6d6:function(e,t,s){"use strict";var a=TypeError;e.exports=function(e,t){if(e<t)throw new a("Not enough arguments");return e}},fbde:function(e,t,s){"use strict";var a=s("c427");class i{getAll(){return a["a"].get("/dropboxfiles")}getAllInc(){return a["a"].get("/dropboxfiles/incoming")}getAllCanc(){return a["a"].get("/dropboxfiles/cancelled")}getAllRefType(e){return a["a"].get("/byref/"+e)}getAllBranch(e){return a["a"].get("/bybranch/"+e)}getAllStatusRefType(e,t){return a["a"].get(`/detailByRef/${e}/${t}`)}getAllStatusBranch(e,t){return a["a"].get(`/detailByBranch/${e}/${t}`)}get(e){return a["a"].get("/dropboxfiles/"+e)}create(e){return a["a"].post("/dropboxfiles",e)}update(e,t){return a["a"].put("/dropboxfiles/"+e,t)}delete(e){return a["a"].delete("/dropboxfiles/"+e)}deleteids(e){return a["a"].delete("/dropboxfiles/delete/selected/",e)}deleteAll(){return a["a"].delete("/dropboxfiles")}}t["a"]=new i}}]);
//# sourceMappingURL=chunk-503eee76.e297be52.js.map