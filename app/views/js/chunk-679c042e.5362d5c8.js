(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-679c042e"],{"23a7":function(e,t,s){"use strict";s("14d9"),s("13d5"),s("e9f5"),s("d866"),s("7d54"),s("ab43"),s("9485"),s("5803");var a=s("2677"),i=s("cc20"),r=s("80d2"),l=s("d9bd"),o=s("d9f7");t["a"]=a["a"].extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:e=>"boolean"===typeof e||[1e3,1024].includes(e)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:e=>Object(r["H"])(e).every(e=>null!=e&&"object"===typeof e)}},computed:{classes(){return{...a["a"].options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const e=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,e);const t=this.internalArrayValue.reduce((e,{size:t=0})=>e+t,0);return this.$vuetify.lang.t(this.counterSizeString,e,Object(r["w"])(t,1024===this.base))},internalArrayValue(){return Object(r["H"])(this.internalValue)},internalValue:{get(){return this.lazyValue},set(e){this.lazyValue=e,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map(e=>{const{name:t="",size:s=0}=e,a=this.truncateText(t);return this.showSize?`${a} (${Object(r["w"])(s,1024===this.base)})`:a}):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(e){!0===e&&Object(l["b"])("readonly is not supported on <v-file-input>",this)},immediate:!0},value(e){const t=this.multiple?e:e?[e]:[];Object(r["k"])(t,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map((e,t)=>this.$createElement(i["a"],{props:{small:this.smallChips},on:{"click:close":()=>{const e=this.internalValue;e.splice(t,1),this.internalValue=e}}},[e])):[]},genControl(){const e=a["a"].options.methods.genControl.call(this);return this.hideInput&&(e.data.style=Object(o["d"])(e.data.style,{display:"none"})),e},genInput(){const e=a["a"].options.methods.genInput.call(this);return e.data.attrs.multiple=this.multiple,delete e.data.domProps.value,delete e.data.on.input,e.data.on.change=this.onInput,[this.genSelections(),e]},genPrependSlot(){if(!this.prependIcon)return null;const e=this.genIcon("prepend",()=>{this.$refs.input.click()});return this.genSlot("prepend","outer",[e])},genSelectionText(){const e=this.text.length;return e<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,e)]},genSelections(){const e=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((t,s)=>{this.$scopedSlots.selection&&e.push(this.$scopedSlots.selection({text:this.text[s],file:t,index:s}))}):e.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},e)},genTextFieldSlot(){const e=a["a"].options.methods.genTextFieldSlot.call(this);return e.data.on={...e.data.on||{},click:e=>{e.target&&"LABEL"===e.target.nodeName||this.$refs.input.click()}},e},onInput(e){const t=[...e.target.files||[]];this.internalValue=this.multiple?t:t[0],this.initialValue=this.internalValue},onKeyDown(e){this.$emit("keydown",e)},truncateText(e){if(e.length<Number(this.truncateLength))return e;const t=Math.floor((Number(this.truncateLength)-1)/2);return`${e.slice(0,t)}â€¦${e.slice(e.length-t)}`}}})},2677:function(e,t,s){"use strict";var a=s("8654");t["a"]=a["a"]},"3f81":function(e,t,s){e.exports=s.p+"img/Default-profile.09932d15.png"},5803:function(e,t,s){},"7e1b":function(e,t,s){"use strict";var a=s("c427");class i{upload(e,t){return a["a"].post("/docs/upload",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}uploadPhoto(e,t){let s=new FormData;return s.append("file",e),a["a"].post("/members/upload",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}uploadExcel(e,t){let s=new FormData;return s.append("file",e),a["a"].post("/dropboxfiles/upload",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}getFiles(){return a["a"].get("../docs")}getPhotos(){return a["a"].get("../files")}}t["a"]=new i},"8cd0":function(e,t,s){},c66d:function(e,t,s){"use strict";s.r(t);var a=s("0798"),i=s("8212"),r=s("8336"),l=s("b0af"),o=s("99d9"),n=s("cc20"),c=s("62ad"),d=s("a523"),m=s("169a"),u=s("ce7e"),h=s("23a7"),p=s("4bd4"),f=s("132d"),b=s("adda"),v=s("8860"),g=s("da13"),_=s("5d23"),y=s("34c3"),C=s("8e36"),k=s("0fd9"),w=s("2fa4"),x=(s("e9f5"),s("ab43"),s("8cd0"),s("f2e7")),D=s("fe6c"),S=s("f40d"),$=s("a293"),P=s("58df"),I=s("80d2"),z=Object(P["a"])(D["a"],x["a"],S["a"]).extend({name:"v-speed-dial",directives:{ClickOutside:$["a"]},props:{direction:{type:String,default:"top",validator:e=>["top","right","bottom","left"].includes(e)},openOnHover:Boolean,transition:{type:String,default:"scale-transition"}},computed:{classes(){return{"v-speed-dial":!0,"v-speed-dial--top":this.top,"v-speed-dial--right":this.right,"v-speed-dial--bottom":this.bottom,"v-speed-dial--left":this.left,"v-speed-dial--absolute":this.absolute,"v-speed-dial--fixed":this.fixed,["v-speed-dial--direction-"+this.direction]:!0,"v-speed-dial--is-active":this.isActive}}},render(e){let t=[];const s={class:this.classes,directives:[{name:"click-outside",value:()=>this.isActive=!1}],on:{click:()=>this.isActive=!this.isActive}};if(this.openOnHover&&(s.on.mouseenter=()=>this.isActive=!0,s.on.mouseleave=()=>this.isActive=!1),this.isActive){let s=0;t=(Object(I["s"])(this)||[]).map((t,a)=>!t.tag||"undefined"===typeof t.componentOptions||"v-btn"!==t.componentOptions.Ctor.options.name&&"v-tooltip"!==t.componentOptions.Ctor.options.name?(t.key=a,t):(s++,e("div",{style:{transitionDelay:.05*s+"s"},key:a},[t])))}const a=e("transition-group",{class:"v-speed-dial__list",props:{name:this.transition,mode:this.mode,origin:this.origin,tag:"div"}},t);return e("div",s,[Object(I["s"])(this,"activator"),a])}}),E=s("8654"),V=s("a844"),A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"profile-page"},[t("div",{staticClass:"cover-section"},[t(d["a"],{staticClass:"profile-container"},[t(l["a"],{staticClass:"profile-header-card",attrs:{elevation:"3"}},[t("div",{staticClass:"profile-header-content"},[t("div",{staticClass:"avatar-section"},[t(i["a"],{staticClass:"profile-avatar",attrs:{size:"120"}},[t(b["a"],{attrs:{src:e.profileImageUrl,alt:e.members.username},on:{error:e.handleImageError},scopedSlots:e._u([{key:"placeholder",fn:function(){return[t(f["a"],{attrs:{size:"64",color:"primary"}},[e._v("mdi-account-circle")])]},proxy:!0}])})],1),t(z,{staticClass:"profile-actions",attrs:{direction:"left",transition:"slide-y-reverse-transition"},scopedSlots:e._u([{key:"activator",fn:function(){return[t(r["a"],{attrs:{color:"primary",dark:"",fab:"",small:""},model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[e.fab?t(f["a"],[e._v("mdi-close")]):t(f["a"],[e._v("mdi-pencil")])],1)]},proxy:!0}]),model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[t(r["a"],{attrs:{fab:"",dark:"","x-small":"",color:"green"},on:{click:function(t){e.uploadDialog=!0}}},[t(f["a"],[e._v("mdi-camera")])],1),t(r["a"],{attrs:{fab:"",dark:"","x-small":"",color:"cyan"},on:{click:function(t){e.editDialog=!0}}},[t(f["a"],[e._v("mdi-account-edit")])],1),t(r["a"],{attrs:{fab:"",dark:"","x-small":"",color:"blue"},on:{click:function(t){e.passDialog=!0}}},[t(f["a"],[e._v("mdi-form-textbox-password")])],1)],1)],1),t("div",{staticClass:"user-info"},[t("h2",{staticClass:"text-h4 font-weight-bold"},[e._v(e._s(e.members.fullname))]),t("div",{staticClass:"subtitle-1 grey--text"},[e._v(e._s(e.members.position))]),t("div",{staticClass:"mt-2"},[t(n["a"],{attrs:{small:"",color:e.members.active?"success":"grey",dark:""}},[e._v(" "+e._s(e.members.active?"Active":"Inactive")+" ")]),e._l(e.currentUser.roles,(function(s,a){return t(n["a"],{key:a,staticClass:"ml-2",attrs:{small:"",color:"primary",outlined:""}},[e._v(" "+e._s(s)+" ")])}))],2)])])]),t(k["a"],{staticClass:"mt-6"},[t(c["a"],{attrs:{cols:"12",md:"4"}},[t(l["a"],{staticClass:"mb-4"},[t(o["c"],{staticClass:"subtitle-1 font-weight-bold d-flex align-center"},[e._v(" Personal Information "),t(w["a"]),t(r["a"],{attrs:{icon:"","x-small":""},on:{click:function(t){e.editDialog=!0}}},[t(f["a"],[e._v("mdi-pencil")])],1)],1),t(u["a"]),t(v["a"],{attrs:{dense:""}},[t(g["a"],[t(y["a"],[t(f["a"],[e._v("mdi-email")])],1),t(_["a"],[t(_["b"],[e._v("Email")]),t(_["c"],[e._v(e._s(e.members.email))])],1)],1),t(g["a"],[t(y["a"],[t(f["a"],[e._v("mdi-phone")])],1),t(_["a"],[t(_["b"],[e._v("Phone")]),t(_["c"],[e._v(e._s(e.members.telnumber))])],1)],1),t(g["a"],[t(y["a"],[t(f["a"],[e._v("mdi-card-account-details")])],1),t(_["a"],[t(_["b"],[e._v("NRIC")]),t(_["c"],[e._v(e._s(e.members.nric))])],1)],1),t(g["a"],[t(y["a"],[t(f["a"],[e._v("mdi-map-marker")])],1),t(_["a"],[t(_["b"],[e._v("Address")]),t(_["c"],[e._v(e._s(e.members.address))])],1)],1)],1)],1),t(l["a"],[t(o["c"],{staticClass:"subtitle-1 font-weight-bold"},[e._v(" Emergency Contact ")]),t(u["a"]),t(v["a"],{attrs:{dense:""}},[t(g["a"],[t(y["a"],[t(f["a"],[e._v("mdi-account-alert")])],1),t(_["a"],[t(_["b"],[e._v("Contact Name")]),t(_["c"],[e._v(e._s(e.members.emcontactname))])],1)],1),t(g["a"],[t(y["a"],[t(f["a"],[e._v("mdi-phone-alert")])],1),t(_["a"],[t(_["b"],[e._v("Contact Number")]),t(_["c"],[e._v(e._s(e.members.emcontactno))])],1)],1)],1)],1)],1),t(c["a"],{attrs:{cols:"12",md:"8"}},[t(l["a"],{staticClass:"mb-4"},[t(o["c"],{staticClass:"subtitle-1 font-weight-bold"},[e._v(" Work Information ")]),t(u["a"]),t(o["b"],[t(k["a"],{attrs:{dense:""}},[t(c["a"],{attrs:{cols:"12",md:"6"}},[t("div",{staticClass:"caption grey--text"},[e._v("Employee ID")]),t("div",{staticClass:"subtitle-1"},[e._v(e._s(e.members.empid))])]),t(c["a"],{attrs:{cols:"12",md:"6"}},[t("div",{staticClass:"caption grey--text"},[e._v("User Code")]),t("div",{staticClass:"subtitle-1"},[e._v(e._s(e.members.usercode))])]),t(c["a"],{attrs:{cols:"12",md:"6"}},[t("div",{staticClass:"caption grey--text"},[e._v("Date Joined")]),t("div",{staticClass:"subtitle-1"},[e._v(e._s(e.computedDate))])]),t(c["a"],{attrs:{cols:"12",md:"6"}},[t("div",{staticClass:"caption grey--text"},[e._v("Position")]),t("div",{staticClass:"subtitle-1"},[e._v(e._s(e.members.position))])])],1)],1)],1),t(k["a"],[t(c["a"],{attrs:{cols:"12",md:"6"}},[e.currentUser.dept?t(l["a"],{staticClass:"mb-4"},[t(o["c"],{staticClass:"subtitle-1 font-weight-bold"},[e._v(" Department ")]),t(u["a"]),t(v["a"],{attrs:{dense:""}},e._l(e.currentUser.dept,(function(s,a){return t(g["a"],{key:a},[t(y["a"],[t(f["a"],[e._v("mdi-domain")])],1),t(_["a"],[t(_["c"],e._l(e.filterDept(s),(function(s,a){return t("div",{key:a},[e._v(" "+e._s(s.name.toUpperCase())+" ")])})),0)],1)],1)})),1)],1):e._e()],1),t(c["a"],{attrs:{cols:"12",md:"6"}},[e.currentUser.branches?t(l["a"],{staticClass:"mb-4"},[t(o["c"],{staticClass:"subtitle-1 font-weight-bold"},[e._v(" Branch ")]),t(u["a"]),t(v["a"],{attrs:{dense:""}},e._l(e.currentUser.branches,(function(s,a){return t(g["a"],{key:a},[t(y["a"],[t(f["a"],[e._v("mdi-office-building")])],1),t(_["a"],[t(_["c"],e._l(e.filterStates(s),(function(s,a){return t("div",{key:a},[e._v(" "+e._s(s.name.toUpperCase())+" ")])})),0)],1)],1)})),1)],1):e._e()],1)],1)],1)],1)],1)],1),t(m["a"],{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(r["a"],e._g(e._b({staticClass:"ma-1",attrs:{small:"",fab:"",dark:"",color:"cyan"},on:{click:e.editDialog}},"v-btn",a,!1),s),[t(f["a"],{attrs:{dark:""}},[e._v(" mdi-pencil ")])],1)]}}]),model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[t(l["a"],{attrs:{tile:""}},[t(o["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",[e._v("Edit Profile")])]),t(o["b"],[t(d["a"],[t(p["a"],[t(k["a"],{attrs:{align:"center","no-gutters":""}},[t(c["a"],{attrs:{cols:"12",md:"3",sm:"6"}},[t("h4",[e._v("Fullname:")])]),t(c["a"],{attrs:{cols:"12",md:"9",sm:"6"}},[t(E["a"],{attrs:{dense:"",label:"Fullname*",rules:[e.rules.required]},model:{value:e.members.fullname,callback:function(t){e.$set(e.members,"fullname",t)},expression:"members.fullname"}})],1)],1),t(k["a"],{attrs:{align:"center","no-gutters":""}},[t(c["a"],{attrs:{cols:"12",md:"3",sm:"6"}},[t("h4",[e._v("NRIC:")])]),t(c["a"],{attrs:{cols:"12",md:"9",sm:"6"}},[t(E["a"],{attrs:{dense:"",type:"number","hide-spin-buttons":"",label:"NRIC*",rules:[e.rules.number,e.rules.required]},model:{value:e.members.nric,callback:function(t){e.$set(e.members,"nric",t)},expression:"members.nric"}})],1)],1),t(k["a"],{attrs:{align:"center","no-gutters":""}},[t(c["a"],{attrs:{cols:"12",md:"3",sm:"6"}},[t("h4",[e._v("Tel:")])]),t(c["a"],{attrs:{cols:"12",md:"9",sm:"6"}},[t(E["a"],{attrs:{dense:"",label:"Tel. Number"},model:{value:e.members.telnumber,callback:function(t){e.$set(e.members,"telnumber",t)},expression:"members.telnumber"}})],1)],1),t(k["a"],{attrs:{align:"center","no-gutters":""}},[t(c["a"],{attrs:{cols:"12",md:"3",sm:"6"}},[t("h4",[e._v("Address:")])]),t(c["a"],{attrs:{cols:"12",md:"9",sm:"6"}},[t(V["a"],{attrs:{dense:"","auto-grow":"",label:"Address"},model:{value:e.members.address,callback:function(t){e.$set(e.members,"address",t)},expression:"members.address"}})],1)],1),t(k["a"],{attrs:{align:"center","no-gutters":""}},[t(c["a"],{attrs:{cols:"12",md:"4",sm:"6"}},[t("h4",[e._v("Emergency Contact:")])]),t(c["a"],{attrs:{cols:"12",md:"8",sm:"6"}},[t(E["a"],{attrs:{dense:"",label:"Emergency Contact"},model:{value:e.members.emcontactname,callback:function(t){e.$set(e.members,"emcontactname",t)},expression:"members.emcontactname"}})],1)],1),t(k["a"],{attrs:{align:"center","no-gutters":""}},[t(c["a"],{attrs:{cols:"12",md:"4",sm:"6"}},[t("h4",[e._v("Emergency Contact No:")])]),t(c["a"],{attrs:{cols:"12",md:"8",sm:"6"}},[t(E["a"],{attrs:{dense:"",label:"Emergency Contact Number"},model:{value:e.members.emcontactno,callback:function(t){e.$set(e.members,"emcontactno",t)},expression:"members.emcontactno"}})],1)],1)],1)],1),t("small",[e._v("*indicates required field")])],1),t(o["a"],[t(w["a"]),t(r["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:e.closeEditDialog}},[e._v(" Close ")]),t(r["a"],{staticClass:"warning",attrs:{disabled:e.isEditDisabled,small:"",tile:""},on:{click:e.save}},[e._v(" Update ")])],1)],1)],1),t(m["a"],{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(r["a"],e._g(e._b({staticClass:"ma-1",attrs:{small:"",fab:"",dark:"",color:"blue"},on:{click:e.passDialog}},"v-btn",a,!1),s),[t(f["a"],{attrs:{dark:""}},[e._v(" mdi-form-textbox-password ")])],1)]}}]),model:{value:e.passDialog,callback:function(t){e.passDialog=t},expression:"passDialog"}},[t(l["a"],{attrs:{tile:""}},[t(p["a"],[t(o["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",[e._v("Change Password")])]),t(o["b"],[t(d["a"],[t(p["a"],{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(k["a"],[t(c["a"],{attrs:{cols:"12"}},[t(E["a"],{attrs:{disabled:"",type:"text",name:"username",autoComplete:"username"},model:{value:e.members.email,callback:function(t){e.$set(e.members,"email",t)},expression:"members.email"}})],1),t(c["a"],{attrs:{cols:"12"}},[t(E["a"],{staticClass:"mb-6",attrs:{label:"Password","append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min,e.rules.strength],"validate-on-blur":"",type:e.show1?"text":"password",hint:"Minimum strength 75%","persistent-hint":""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t(C["a"],{attrs:{"background-opacity":e.opacity,color:e.score.color,value:e.score.value,height:"25"},scopedSlots:e._u([{key:"default",fn:function({value:s}){return[t("strong",[e._v(e._s(Math.ceil(s))+"%")])]}}]),model:{value:e.score.value,callback:function(t){e.$set(e.score,"value",t)},expression:"score.value"}})],1),t(c["a"],{attrs:{cols:"12"}},[t(E["a"],{attrs:{"append-icon":e.show2?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min,e.password===e.confPassword||"Password must match"],type:e.show2?"text":"password",label:"Confirm Password*",autocomplete:"confPassword",id:"confPassword",required:""},on:{"click:append":function(t){e.show2=!e.show2}},model:{value:e.confPassword,callback:function(t){e.confPassword=t},expression:"confPassword"}})],1)],1)],1)],1),t("small",[e._v("*indicates required field")])],1),t(o["a"],[t(w["a"]),t(r["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:function(t){e.passDialog=!1}}},[e._v(" Close ")]),t(r["a"],{staticClass:"warning",attrs:{disabled:!e.valid,small:"",tile:""},on:{click:e.updatePass}},[e._v(" Change ")])],1)],1)],1)],1),t(m["a"],{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(r["a"],e._g(e._b({staticClass:"ma-1",attrs:{small:"",fab:"",dark:"",color:"green"},on:{click:e.uploadDialog}},"v-btn",a,!1),s),[t(f["a"],{attrs:{dark:""}},[e._v(" mdi-cloud-upload-outline ")])],1)]}}]),model:{value:e.uploadDialog,callback:function(t){e.uploadDialog=t},expression:"uploadDialog"}},[t(l["a"],{attrs:{tile:""}},[t(o["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",[e._v("Change Profile Image")])]),t(o["b"],[t(d["a"],[t(p["a"],[t(k["a"],[t(c["a"],{attrs:{cols:"12"}},[t(h["a"],{attrs:{"show-size":"",required:"",rules:e.profileRules,accept:"image/png, image/jpeg, image/bmp",placeholder:"Pick a profile picture","prepend-icon":"mdi-camera",label:"Profile Picture*",name:"file"},on:{change:e.selectFile},model:{value:e.currentFile,callback:function(t){e.currentFile=t},expression:"currentFile"}})],1),t(c["a"],{attrs:{cols:"12"}},[e.message?t(a["a"],{attrs:{width:"100%",border:"left",color:"blue-grey",dark:""}},[e._v(" "+e._s(e.message)+" ")]):e._e()],1)],1)],1)],1),t("small",[e._v("*indicates required field")]),e._v(" "),t("br"),t("small",[e._v("*max size: 2MB")])],1),t(o["a"],[t(w["a"]),t(r["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:e.closeUploadDialog}},[e._v(" Close ")]),t(r["a"],{staticClass:"success",attrs:{small:"",tile:""},on:{click:e.uploadConfirm}},[e._v(" Upload ")])],1)],1)],1)],1)},F=[],j=(s("14d9"),s("910d"),s("9df5")),U=s("fde1"),O=s("cb28"),T=s("7e1b"),M=s("580e"),B=s.n(M),L=s("c1df"),N=s.n(L),q=s("6736"),Y={name:"Profile",components:{},data:()=>({opacity:"",show1:!1,show2:!1,rules:{number:e=>/^\d+$/.test(e)||"This field is required and only accept numbers",required:e=>!!e||"Required.",min:e=>e.length>=8||"Min 8 characters",strength:e=>B()(e).score>=3||"Please choose a stronger password. Try a mix of letters, numbers, and symbols.",emailMatch:()=>"The password you entered don't match"},password:"",confPassword:"",editValid:!1,valid:!1,editDialog:!1,passDialog:!1,uploadDialog:!1,currentFile:void 0,progress:0,message:"",fileInfos:[],profileRules:[e=>!e||e.size<2e6||"Avatar size should be less than 2 MB!"],fab:!1,members:{id:null,username:"",fullname:"",profile:"",nric:"",email:"",telnumber:"",datejoined:"",position:"",empid:"",usercode:"",address:"",emcontactname:"",emcontactno:"",password:"",active:"",roles:"",branches:"",depts:""},branches:[],departments:[],profileImageErrored:!1}),computed:{isEditDisabled(){return!this.members.nric},score(){const e=B()(this.password);switch(e.score){case 4:return{color:"light-blue",value:100};case 3:return{color:"light-green",value:75};case 2:return{color:"yellow",value:50};case 1:return{color:"orange",value:25};default:return{color:"red",value:0}}},editDialogDisabled(){return!(this.members.fullname&&this.members.nric&&this.members.telnumber&&this.members.address&&this.members.emcontactname&&this.members.emcontactno)},currentUser(){return this.$store.state.auth.user},computedDate(){return this.members.datejoined?N()(this.members.datejoined).format("DD/MM/YYYY"):""},profileImageUrl(){return this.profileImageErrored||!this.members.profile?s("3f81"):`${q["a"].uploadsPath}${this.members.profile}`}},watch:{disabled(e){}},methods:{handleImageError(){this.profileImageErrored=!0},closeEditDialog(){this.editDialog=!1,this.$nextTick(()=>{})},formatDate(e){return N()(e).format("DD/MM/YYYY")},filterStates(e){return this.branches.filter(t=>t.id===e)},retrieveBranches(){U["a"].getAll().then(e=>{this.branches=e.data}).catch(e=>{console.log(e)})},filterDept(e){return this.departments.filter(t=>t.id===e)},retrieveDepts(){O["a"].getAll().then(e=>{this.departments=e.data}).catch(e=>{console.log(e)})},retrieveMembers(){j["a"].get(this.$store.state.auth.user.id).then(e=>{this.members=e.data,this.profileImageErrored=!1}).catch(e=>{console.log(e)})},selectFile(e){this.currentFile=e},refreshList(){this.retrieveMembers()},save(){var e={fullname:this.members.fullname,nric:this.members.nric,telnumber:this.members.telnumber,address:this.members.address,emcontactname:this.members.emcontactname,emcontactno:this.members.emcontactno};j["a"].updateProfile(this.members.id,e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),this.editDialog=!1,this.refreshList()}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e||toString()}),this.editDialog=!1,this.refreshList()})},closeUploadDialog(){this.uploadDialog=!1,this.message=""},uploadConfirm(){this.currentFile?this.currentFile&&(this.message="",T["a"].uploadPhoto(this.currentFile,e=>{this.progress=Math.round(100*e.loaded/e.total)}).then(e=>(this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),T["a"].getPhotos())).then(e=>{this.fileInfos=e.data,this.members.profile=e.data.slice(-1)[0].name,this.currentFile=void 0;var t={profile:this.members.profile};j["a"].updatePhoto(this.members.id,t).then(e=>{setTimeout(()=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()})},2500),this.uploadDialog=!1,this.refreshList()}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e||toString()}),this.refreshList()})}).catch(e=>{this.progress=0,this.uploadDialog=!1,this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e.response&&e.response.data&&e.response.data.message||e.message||toString()}),this.currentFile=void 0})):this.message="Please select a file!"},updatePass(){var e={password:this.password};j["a"].changepass(this.members.id,e).then(e=>{this.passDialog=!1,this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)}),this.passDialog=!1}},mounted(){this.retrieveBranches(),this.retrieveDepts(),T["a"].getPhotos().then(e=>{this.fileInfos=e.data}),this.currentUser||this.$router.push("/login"),this.retrieveMembers()}},R=Y,H=(s("fb05"),s("2877")),J=Object(H["a"])(R,A,F,!1,null,"1a4d4e3b",null);t["default"]=J.exports},ec27:function(e,t,s){},fb05:function(e,t,s){"use strict";s("ec27")}}]);
//# sourceMappingURL=chunk-679c042e.5362d5c8.js.map