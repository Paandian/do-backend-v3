{"version":3,"sources":["webpack:///./src/components/compliance/OutstandingInsurer.vue","webpack:///src/components/compliance/OutstandingInsurer.vue","webpack:///./src/components/compliance/OutstandingInsurer.vue?9d27","webpack:///./src/components/compliance/OutstandingInsurer.vue?f864"],"names":["_c","attrs","deptOptions","model","value","_vm","selectedDept","expression","selectedClass","scopedSlots","fn","menuMonth","callback","staticClass","selectedMonth","exportExcel","reportData","key","insurerCode","_s","style","staticStyle","row","dept","detail","breachCellStyle","detailPercent","breachedTat","_v","noDataMessage","staticRenderFns","render","name","data","classOptions","filteredClassOptions","totals","withinTat","total","breachPercent","exporting","watch","newDept","filterClassifications","handler","immediate","methods","res","DeptDataService","getAll","id","sort","a","b","localeCompare","SubDeptDataService","subCode","deptId","filter","c","params","classificationId","month","moment","format","axios","get","apiConfig","baseURL","processReportData","Array","isArray","length","monthStr","err","message","forEach","toFixed","percent","val","parseFloat","url","URLSearchParams","toString","window","open","$emit","mounted","loadDepartments","loadClassifications","component"],"mappings":"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","file":"js/chunk-2d0ae631.68e47e04.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-card',{staticClass:\"pa-4\"},[_c('h2',[_vm._v(\"Outstanding Assignment by Days (Insurer)\")]),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-select',{attrs:{\"items\":_vm.deptOptions,\"item-text\":\"name\",\"item-value\":\"id\",\"label\":\"Department\",\"dense\":\"\",\"outlined\":\"\",\"required\":\"\"},model:{value:(_vm.selectedDept),callback:function ($$v) {_vm.selectedDept=$$v},expression:\"selectedDept\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-select',{attrs:{\"items\":_vm.filteredClassOptions,\"item-text\":\"subCode\",\"item-value\":\"id\",\"label\":\"Classification\",\"dense\":\"\",\"outlined\":\"\",\"required\":\"\"},model:{value:(_vm.selectedClass),callback:function ($$v) {_vm.selectedClass=$$v},expression:\"selectedClass\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-menu',{attrs:{\"close-on-content-click\":false},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-text-field',_vm._g(_vm._b({attrs:{\"label\":\"Month\",\"prepend-icon\":\"mdi-calendar\",\"readonly\":\"\",\"dense\":\"\",\"required\":\"\"},model:{value:(_vm.selectedMonth),callback:function ($$v) {_vm.selectedMonth=$$v},expression:\"selectedMonth\"}},'v-text-field',attrs,false),on))]}}]),model:{value:(_vm.menuMonth),callback:function ($$v) {_vm.menuMonth=$$v},expression:\"menuMonth\"}},[_c('v-date-picker',{attrs:{\"type\":\"month\"},on:{\"change\":function($event){_vm.menuMonth = false}},model:{value:(_vm.selectedMonth),callback:function ($$v) {_vm.selectedMonth=$$v},expression:\"selectedMonth\"}})],1)],1)],1),_c('v-row',[_c('v-col',{staticClass:\"d-flex justify-end\",attrs:{\"cols\":\"12\"}},[_c('v-btn',{attrs:{\"color\":\"primary\",\"disabled\":!_vm.selectedMonth},on:{\"click\":_vm.generateReport}},[_vm._v(\" Generate Report \")]),_c('v-btn',{staticClass:\"ml-2\",attrs:{\"color\":\"success\",\"loading\":_vm.exporting,\"disabled\":!_vm.reportData.length},on:{\"click\":_vm.exportExcel}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-file-excel\")]),_vm._v(\" Export to Excel \")],1)],1)],1),_c('v-divider',{staticClass:\"my-4\"}),(_vm.reportData.length)?_c('div',[_c('v-simple-table',[_c('thead',[_c('tr',[_c('th',[_vm._v(\"Insurer\")]),_c('th',[_vm._v(\"Within TAT\")]),_c('th',[_vm._v(\"TAT Breach\")]),_c('th',[_vm._v(\"Total\")]),_c('th',[_vm._v(\"Breach %\")])])]),_c('tbody',[_vm._l((_vm.reportData),function(row){return [_c('tr',{key:row.insurerCode},[_c('td',[_c('strong',[_vm._v(_vm._s(row.insurerCode))])]),_c('td',[_vm._v(_vm._s(row.withinTat))]),_c('td',{staticClass:\"red--text font-weight-bold\"},[_vm._v(_vm._s(row.breachedTat))]),_c('td',[_vm._v(_vm._s(row.total))]),_c('td',[_c('span',{staticClass:\"px-2 py-1\",style:(_vm.breachCellStyle(row.percent))},[_vm._v(\" \"+_vm._s(row.percent)+\" \")])])]),_vm._l((row.details),function(detail){return _c('tr',{key:row.insurerCode + '-' + detail.dept + '-' + detail.class,staticClass:\"grey--text text--darken-2\"},[_c('td',[_c('span',{staticStyle:{\"padding-left\":\"24px\"}},[_vm._v(\" \"+_vm._s(row.insurerCode)+\" (\"+_vm._s(detail.dept)+\" - \"+_vm._s(detail.class)+\") \")])]),_c('td',[_vm._v(_vm._s(detail.withinTat))]),_c('td',[_vm._v(_vm._s(detail.breachedTat))]),_c('td',[_vm._v(_vm._s(detail.total))]),_c('td',[_c('span',{staticClass:\"px-2 py-1\",style:(_vm.breachCellStyle(_vm.detailPercent(detail)))},[_vm._v(\" \"+_vm._s(_vm.detailPercent(detail))+\" \")])])])})]}),_c('tr',[_c('td',[_c('strong',[_vm._v(\"TOTAL\")])]),_c('td',[_c('strong',[_vm._v(_vm._s(_vm.totals.withinTat))])]),_c('td',{staticClass:\"red--text font-weight-bold\"},[_c('strong',[_vm._v(_vm._s(_vm.totals.breachedTat))])]),_c('td',[_c('strong',[_vm._v(_vm._s(_vm.totals.total))])]),_c('td',[_c('strong',[_vm._v(_vm._s(_vm.totals.breachPercent))])])])],2)])],1):(_vm.noDataMessage)?_c('v-alert',{staticClass:\"mt-4\",attrs:{\"type\":\"warning\",\"outlined\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.noDataMessage)+\" \")]):_c('v-alert',{staticClass:\"mt-4\",attrs:{\"type\":\"info\",\"outlined\":\"\"}},[_vm._v(\" Please select department, classification, and month, then click \\\"Generate Report\\\" to view data. \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card class=\"pa-4\">\r\n    <h2>Outstanding Assignment by Days (Insurer)</h2>\r\n    <v-row dense>\r\n      <v-col cols=\"12\" md=\"4\">\r\n        <v-select\r\n          v-model=\"selectedDept\"\r\n          :items=\"deptOptions\"\r\n          item-text=\"name\"\r\n          item-value=\"id\"\r\n          label=\"Department\"\r\n          dense\r\n          outlined\r\n          required\r\n        />\r\n      </v-col>\r\n      <v-col cols=\"12\" md=\"4\">\r\n        <v-select\r\n          v-model=\"selectedClass\"\r\n          :items=\"filteredClassOptions\"\r\n          item-text=\"subCode\"\r\n          item-value=\"id\"\r\n          label=\"Classification\"\r\n          dense\r\n          outlined\r\n          required\r\n        />\r\n      </v-col>\r\n      <v-col cols=\"12\" md=\"4\">\r\n        <v-menu v-model=\"menuMonth\" :close-on-content-click=\"false\">\r\n          <template v-slot:activator=\"{ on, attrs }\">\r\n            <v-text-field\r\n              v-model=\"selectedMonth\"\r\n              label=\"Month\"\r\n              prepend-icon=\"mdi-calendar\"\r\n              readonly\r\n              v-bind=\"attrs\"\r\n              v-on=\"on\"\r\n              dense\r\n              required\r\n            />\r\n          </template>\r\n          <v-date-picker\r\n            v-model=\"selectedMonth\"\r\n            type=\"month\"\r\n            @change=\"menuMonth = false\"\r\n          />\r\n        </v-menu>\r\n      </v-col>\r\n    </v-row>\r\n    <v-row>\r\n      <v-col cols=\"12\" class=\"d-flex justify-end\">\r\n        <v-btn\r\n          color=\"primary\"\r\n          @click=\"generateReport\"\r\n          :disabled=\"!selectedMonth\"\r\n        >\r\n          Generate Report\r\n        </v-btn>\r\n        <v-btn\r\n          color=\"success\"\r\n          class=\"ml-2\"\r\n          @click=\"exportExcel\"\r\n          :loading=\"exporting\"\r\n          :disabled=\"!reportData.length\"\r\n        >\r\n          <v-icon left>mdi-file-excel</v-icon>\r\n          Export to Excel\r\n        </v-btn>\r\n      </v-col>\r\n    </v-row>\r\n    <v-divider class=\"my-4\" />\r\n    <div v-if=\"reportData.length\">\r\n      <v-simple-table>\r\n        <thead>\r\n          <tr>\r\n            <th>Insurer</th>\r\n            <th>Within TAT</th>\r\n            <th>TAT Breach</th>\r\n            <th>Total</th>\r\n            <th>Breach %</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <template v-for=\"row in reportData\">\r\n            <tr :key=\"row.insurerCode\">\r\n              <td>\r\n                <strong>{{ row.insurerCode }}</strong>\r\n              </td>\r\n              <td>{{ row.withinTat }}</td>\r\n              <td class=\"red--text font-weight-bold\">{{ row.breachedTat }}</td>\r\n              <td>{{ row.total }}</td>\r\n              <td>\r\n                <span :style=\"breachCellStyle(row.percent)\" class=\"px-2 py-1\">\r\n                  {{ row.percent }}\r\n                </span>\r\n              </td>\r\n            </tr>\r\n            <tr\r\n              v-for=\"detail in row.details\"\r\n              :key=\"row.insurerCode + '-' + detail.dept + '-' + detail.class\"\r\n              class=\"grey--text text--darken-2\"\r\n            >\r\n              <td>\r\n                <span style=\"padding-left: 24px\">\r\n                  {{ row.insurerCode }} ({{ detail.dept }} - {{ detail.class }})\r\n                </span>\r\n              </td>\r\n              <td>{{ detail.withinTat }}</td>\r\n              <td>{{ detail.breachedTat }}</td>\r\n              <td>{{ detail.total }}</td>\r\n              <td>\r\n                <span\r\n                  :style=\"breachCellStyle(detailPercent(detail))\"\r\n                  class=\"px-2 py-1\"\r\n                >\r\n                  {{ detailPercent(detail) }}\r\n                </span>\r\n              </td>\r\n            </tr>\r\n          </template>\r\n          <tr>\r\n            <td><strong>TOTAL</strong></td>\r\n            <td>\r\n              <strong>{{ totals.withinTat }}</strong>\r\n            </td>\r\n            <td class=\"red--text font-weight-bold\">\r\n              <strong>{{ totals.breachedTat }}</strong>\r\n            </td>\r\n            <td>\r\n              <strong>{{ totals.total }}</strong>\r\n            </td>\r\n            <td>\r\n              <strong>{{ totals.breachPercent }}</strong>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </v-simple-table>\r\n    </div>\r\n    <v-alert v-else-if=\"noDataMessage\" type=\"warning\" outlined class=\"mt-4\">\r\n      {{ noDataMessage }}\r\n    </v-alert>\r\n    <v-alert v-else type=\"info\" outlined class=\"mt-4\">\r\n      Please select department, classification, and month, then click \"Generate\r\n      Report\" to view data.\r\n    </v-alert>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport DeptDataService from \"../../services/DeptDataService\";\r\nimport SubDeptDataService from \"../../services/SubDeptDataService\";\r\nimport { apiConfig } from \"../../config/api.config\";\r\n\r\nexport default {\r\n  name: \"OutstandingInsurer\",\r\n  data() {\r\n    return {\r\n      selectedDept: \"all\",\r\n      deptOptions: [],\r\n      selectedClass: \"all\",\r\n      classOptions: [],\r\n      filteredClassOptions: [],\r\n      selectedMonth: null,\r\n      menuMonth: false,\r\n      reportData: [],\r\n      totals: {\r\n        withinTat: 0,\r\n        breachedTat: 0,\r\n        total: 0,\r\n        breachPercent: \"0.00\",\r\n      },\r\n      exporting: false,\r\n      noDataMessage: \"\",\r\n    };\r\n  },\r\n  watch: {\r\n    selectedDept(newDept) {\r\n      this.filterClassifications(newDept);\r\n      this.selectedClass = \"all\";\r\n    },\r\n    classOptions: {\r\n      handler() {\r\n        this.filterClassifications(this.selectedDept);\r\n      },\r\n      immediate: true,\r\n    },\r\n  },\r\n  methods: {\r\n    async loadDepartments() {\r\n      const res = await DeptDataService.getAll();\r\n      this.deptOptions = [\r\n        { id: \"all\", name: \"ALL DEPARTMENTS\" },\r\n        ...res.data,\r\n      ].sort((a, b) => a.name.localeCompare(b.name));\r\n    },\r\n    async loadClassifications() {\r\n      const res = await SubDeptDataService.getAll();\r\n      this.classOptions = [\r\n        { id: \"all\", subCode: \"ALL CLASSIFICATIONS\", deptId: \"all\" },\r\n        ...res.data,\r\n      ].sort((a, b) => a.subCode.localeCompare(b.subCode));\r\n    },\r\n    filterClassifications(deptId) {\r\n      if (deptId === \"all\") {\r\n        this.filteredClassOptions = this.classOptions;\r\n      } else {\r\n        this.filteredClassOptions = this.classOptions\r\n          .filter((c) => c.deptId === deptId || c.id === \"all\")\r\n          .sort((a, b) => a.subCode.localeCompare(b.subCode));\r\n      }\r\n    },\r\n    async generateReport() {\r\n      this.reportData = [];\r\n      this.totals = {\r\n        withinTat: 0,\r\n        breachedTat: 0,\r\n        total: 0,\r\n        breachPercent: \"0.00\",\r\n      };\r\n      this.noDataMessage = \"\";\r\n      try {\r\n        const params = {\r\n          deptId: this.selectedDept,\r\n          classificationId: this.selectedClass,\r\n          month: moment(this.selectedMonth).format(\"YYYY-MM\"),\r\n        };\r\n        const res = await axios.get(\r\n          `${apiConfig.baseURL}/compliance/outstanding-insurer`,\r\n          { params }\r\n        );\r\n        this.processReportData(res.data);\r\n        if (\r\n          !Array.isArray(res.data.reportData) ||\r\n          res.data.reportData.length === 0\r\n        ) {\r\n          const monthStr = moment(this.selectedMonth).format(\"MMMM YYYY\");\r\n          this.noDataMessage = `No outstanding data found for ${monthStr}.`;\r\n        }\r\n      } catch (err) {\r\n        this.noDataMessage =\r\n          err.message || \"Failed to fetch report data. Please try again.\";\r\n      }\r\n    },\r\n    processReportData(data) {\r\n      this.reportData = Array.isArray(data.reportData) ? data.reportData : [];\r\n      let withinTat = 0,\r\n        breachedTat = 0,\r\n        total = 0;\r\n      this.reportData.forEach((row) => {\r\n        withinTat += row.withinTat;\r\n        breachedTat += row.breachedTat;\r\n        total += row.total;\r\n      });\r\n      this.totals.withinTat = withinTat;\r\n      this.totals.breachedTat = breachedTat;\r\n      this.totals.total = total;\r\n      this.totals.breachPercent =\r\n        total > 0 ? ((breachedTat / total) * 100).toFixed(2) : \"0.00\";\r\n    },\r\n    breachCellStyle(percent) {\r\n      const val = parseFloat(percent);\r\n      if (val > 80) {\r\n        return \"background:#FF6600;color:white;border-radius:4px;\";\r\n      } else if (val >= 50) {\r\n        return \"background:#FFB366;color:black;border-radius:4px;\";\r\n      }\r\n      return \"\";\r\n    },\r\n    async exportExcel() {\r\n      this.exporting = true;\r\n      try {\r\n        const params = {\r\n          deptId: this.selectedDept,\r\n          classificationId: this.selectedClass,\r\n          month: moment(this.selectedMonth).format(\"YYYY-MM\"),\r\n        };\r\n        const url =\r\n          `${apiConfig.baseURL}/compliance/outstanding-insurer/export?` +\r\n          new URLSearchParams(params).toString();\r\n        window.open(url, \"_blank\");\r\n      } catch (err) {\r\n        this.$emit(\"error\", err.message || \"Failed to export Excel\");\r\n      } finally {\r\n        this.exporting = false;\r\n      }\r\n    },\r\n    detailPercent(detail) {\r\n      return detail.total > 0\r\n        ? ((detail.breachedTat / detail.total) * 100).toFixed(2)\r\n        : \"0.00\";\r\n    },\r\n  },\r\n  mounted() {\r\n    this.loadDepartments();\r\n    this.loadClassifications();\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutstandingInsurer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutstandingInsurer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./OutstandingInsurer.vue?vue&type=template&id=3265803f\"\nimport script from \"./OutstandingInsurer.vue?vue&type=script&lang=js\"\nexport * from \"./OutstandingInsurer.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}