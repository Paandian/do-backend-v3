(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ae631"],{"0a9c":function(t,a,e){"use strict";e.r(a);var s=e("0798"),o=e("8336"),n=e("b0af"),r=e("62ad"),l=e("2e4b"),i=e("ce7e"),c=e("132d"),d=e("e449"),h=e("0fd9"),p=e("1f4f"),u=e("8654"),_=function(){var t=this,a=t._self._c;return a(n["a"],{staticClass:"pa-4"},[a("h2",[t._v("Outstanding Assignment (By Insurer)")]),a(h["a"],{attrs:{dense:""}},[a(r["a"],{attrs:{cols:"12",md:"4"}},[a(d["a"],{attrs:{"close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:e,attrs:s}){return[a(u["a"],t._g(t._b({attrs:{label:"Month","prepend-icon":"mdi-calendar",readonly:"",dense:"",required:""},model:{value:t.selectedMonth,callback:function(a){t.selectedMonth=a},expression:"selectedMonth"}},"v-text-field",s,!1),e))]}}]),model:{value:t.menuMonth,callback:function(a){t.menuMonth=a},expression:"menuMonth"}},[a(l["a"],{attrs:{type:"month"},on:{change:function(a){t.menuMonth=!1}},model:{value:t.selectedMonth,callback:function(a){t.selectedMonth=a},expression:"selectedMonth"}})],1)],1),a(r["a"],{staticClass:"d-flex align-end",attrs:{cols:"12",md:"4"}},[a(o["a"],{attrs:{color:"primary",disabled:!t.selectedMonth},on:{click:t.generateReport}},[t._v(" Generate Report ")])],1)],1),a(i["a"],{staticClass:"my-4"}),t.reportData.length?a("div",[a(p["a"],[a("thead",[a("tr",[a("th",[t._v("INSURER")]),a("th",[t._v("WITHIN TAT")]),a("th",[t._v("TAT BREACH")]),a("th",[t._v("TOTAL")]),a("th",[t._v("BREACH PERCENTAGE")])])]),a("tbody",[t._l(t.reportData,(function(e){return a("tr",{key:e.insurer},[a("td",[t._v(t._s(e.insurer))]),a("td",[t._v(t._s(e.withinTat))]),a("td",[t._v(t._s(e.breachedTat))]),a("td",[t._v(t._s(e.total))]),a("td",[t._v(t._s(e.percent))])])})),a("tr",[a("td",[a("strong",[t._v("Total")])]),a("td",[a("strong",[t._v(t._s(t.totals.withinTat))])]),a("td",[a("strong",[t._v(t._s(t.totals.breachedTat))])]),a("td",[a("strong",[t._v(t._s(t.totals.total))])]),a("td",[a("strong",[t._v(" "+t._s(t.totals.total>0?(t.totals.breachedTat/t.totals.total*100).toFixed(2):"0.00")+" ")])])]),a("tr",[a("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[a("strong",[t._v("OVERALL RATIO")])]),a("td",[a("strong",[t._v(" "+t._s(t.totals.total>0?(t.totals.breachedTat/t.totals.total*100).toFixed(2):"0.00")+" ")])])])],2)]),a(o["a"],{staticClass:"mt-4",attrs:{color:"success",loading:t.exporting},on:{click:t.exportExcel}},[a(c["a"],{attrs:{left:""}},[t._v("mdi-file-excel")]),t._v(" Export to Excel ")],1)],1):t.noDataMessage?a(s["a"],{staticClass:"mt-4",attrs:{type:"warning",outlined:""}},[t._v(" "+t._s(t.noDataMessage)+" ")]):a(s["a"],{staticClass:"mt-4",attrs:{type:"info",outlined:""}},[t._v(' Please select month and click "Generate Report" to view data. ')])],1)},g=[],m=(e("e9f5"),e("7d54"),e("88a7"),e("271a"),e("5494"),e("bc3a")),v=e.n(m),f=e("c1df"),M=e.n(f),T=e("6736"),b={name:"OutstandingInsurer",data(){return{selectedMonth:null,menuMonth:!1,reportData:[],totals:{withinTat:0,breachedTat:0,total:0},exporting:!1,noDataMessage:""}},methods:{async generateReport(){this.reportData=[],this.totals={withinTat:0,breachedTat:0,total:0},this.noDataMessage="";try{const t={month:M()(this.selectedMonth).format("YYYY-MM")},a=await v.a.get(T["a"].baseURL+"/compliance/outstanding-insurer",{params:t});if(this.processReportData(a.data),!Array.isArray(a.data.reportData)||0===a.data.reportData.length){const t=M()(this.selectedMonth).format("MMMM YYYY");this.noDataMessage=`No outstanding data found for ${t}.`}}catch(t){this.noDataMessage=t.message||"Failed to fetch report data. Please try again."}},processReportData(t){this.reportData=Array.isArray(t.reportData)?t.reportData:[];const a={withinTat:0,breachedTat:0,total:0};this.reportData.forEach(t=>{a.withinTat+=t.withinTat,a.breachedTat+=t.breachedTat,a.total+=t.total}),this.totals=a},async exportExcel(){this.exporting=!0;try{const t={month:M()(this.selectedMonth).format("YYYY-MM")},a=T["a"].baseURL+"/compliance/outstanding-insurer/export?"+new URLSearchParams(t).toString();window.open(a,"_blank")}catch(t){this.$emit("error",t.message||"Failed to export Excel")}finally{this.exporting=!1}}}},x=b,y=e("2877"),w=Object(y["a"])(x,_,g,!1,null,null,null);a["default"]=w.exports}}]);
//# sourceMappingURL=chunk-2d0ae631.748fdcb4.js.map