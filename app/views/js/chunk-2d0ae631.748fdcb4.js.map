{"version":3,"sources":["webpack:///./src/components/compliance/OutstandingInsurer.vue","webpack:///src/components/compliance/OutstandingInsurer.vue","webpack:///./src/components/compliance/OutstandingInsurer.vue?9d27","webpack:///./src/components/compliance/OutstandingInsurer.vue?f864"],"names":["scopedSlots","key","on","attrs","model","expression","callback","menuMonth","value","selectedMonth","_vm","staticClass","_c","generateReport","_v","reportData","insurer","staticStyle","exporting","exportExcel","staticRenderFns","render","name","data","totals","withinTat","breachedTat","total","noDataMessage","methods","params","month","moment","format","res","axios","get","apiConfig","baseURL","processReportData","Array","isArray","length","monthStr","err","message","forEach","row","url","URLSearchParams","toString","window","open","$emit","component"],"mappings":"mQAAmO,W,IAAG,OAAE,EAAK,QAAS,G,OAAM,EAAC,Q,YAAC,QAA+B,iEAACA,OAAqBC,MAAI,K,GAA0BC,OAAI,C,MAAAC,CAAM,KAAE,K,GAAC,M,UAAgD,C,iCAA2D,G,YAAY,KAAW,E,IAAG,Y,GAACC,UAAM,G,kBAA0E,qB,MAACC,CAA0B,cAAG,eAAeF,eAAkB,YAAI,SAAO,aAAuBG,MAAS,CAAoBC,QAAS,cAAK,qBAACF,EAAW,iBAAkB,WAAe,kBAAS,eAAO,e,MAAa,C,MAA8BE,YAAiB,qBAAE,eAAQC,WAAWC,c,GAAwCC,OAAID,C,MAAkB,CAACJ,cAA6B,GAAG,CAAkBM,OAAW,SAAC,GAAmBR,EAAM,eAAqB,OAAIS,MAAG,EAAO,cAAET,SAAM,YAAC,gBAAiB,GAA+B,+BAAK,OAAQO,EAAIG,QAAc,+BAAE,MAAMC,CAAkDH,UAAsBD,GAAIK,M,CAA4Sd,EAAG,OAAKe,CAAO,MAAM,CAAwMJ,MAAQ,UAA2YK,UAAY,iBAAqB,GAAC,CAACd,MAAM,mBAAc,+CAAE,YAAa,SAAmMQ,aAAY,OAAM,oOAACR,OAAM,QAAC,MAAQ,SAAU,QAAUO,GAAIQ,+JAAU,4VAAChB,YAAG,CAAC,aAAYiB,SAAa,MAAK,CAAUhB,QAAM,MAAU,kLAAE,YAAS,OAA0FQ,OAAmBR,MAAM,UAAC,QAAO,aAAuB,IAAIO,MAAO,EAAIA,cAAkEP,GAAK,OAAC,C,MAAC,CAAc,UAAgB,CAACO,EAAII,GAAG,sEAA0E,UAC7zF,mBACGM,OAEJ,KAASC,U,kTCgHM,GACfC,KAAA,qBACAC,OACA,OACAd,cAAA,KACAF,WAAA,EACAQ,WAAA,GACAS,OAAA,CACAC,UAAA,EACAC,YAAA,EACAC,MAAA,GAEAT,WAAA,EACAU,cAAA,KAGAC,QAAA,CACA,uBACA,KAAAd,WAAA,GACA,KAAAS,OAAA,CAAAC,UAAA,EAAAC,YAAA,EAAAC,MAAA,GACA,KAAAC,cAAA,GACA,IACA,MAAAE,EAAA,CACAC,MAAAC,IAAA,KAAAvB,eAAAwB,OAAA,YAEAC,QAAAC,IAAAC,IACAC,OAAAC,QAAA,kCACA,CAAAR,WAGA,GADA,KAAAS,kBAAAL,EAAAX,OAEAiB,MAAAC,QAAAP,EAAAX,KAAAR,aACA,IAAAmB,EAAAX,KAAAR,WAAA2B,OACA,CACA,MAAAC,EAAAX,IAAA,KAAAvB,eAAAwB,OAAA,aACA,KAAAL,cAAA,iCAAAe,MAEA,MAAAC,GACA,KAAAhB,cACAgB,EAAAC,SAAA,mDAGAN,kBAAAhB,GACA,KAAAR,WAAAyB,MAAAC,QAAAlB,EAAAR,YAAAQ,EAAAR,WAAA,GACA,MAAAS,EAAA,CAAAC,UAAA,EAAAC,YAAA,EAAAC,MAAA,GACA,KAAAZ,WAAA+B,QAAAC,IACAvB,EAAAC,WAAAsB,EAAAtB,UACAD,EAAAE,aAAAqB,EAAArB,YACAF,EAAAG,OAAAoB,EAAApB,QAEA,KAAAH,UAEA,oBACA,KAAAN,WAAA,EACA,IACA,MAAAY,EAAA,CACAC,MAAAC,IAAA,KAAAvB,eAAAwB,OAAA,YAEAe,EACAX,OAAAC,QAAA,0CACA,IAAAW,gBAAAnB,GAAAoB,WACAC,OAAAC,KAAAJ,EAAA,UACA,MAAAJ,GACA,KAAAS,MAAA,QAAAT,EAAAC,SAAA,0BACA,QACA,KAAA3B,WAAA,MCrL0W,I,YCOtWoC,EAAY,eACd,EACA,EACAlC,GACA,EACA,KACA,KACA,MAIa,aAAAkC,E","file":"js/chunk-2d0ae631.748fdcb4.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-card',{staticClass:\"pa-4\"},[_c('h2',[_vm._v(\"Outstanding Assignment (By Insurer)\")]),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-menu',{attrs:{\"close-on-content-click\":false},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-text-field',_vm._g(_vm._b({attrs:{\"label\":\"Month\",\"prepend-icon\":\"mdi-calendar\",\"readonly\":\"\",\"dense\":\"\",\"required\":\"\"},model:{value:(_vm.selectedMonth),callback:function ($$v) {_vm.selectedMonth=$$v},expression:\"selectedMonth\"}},'v-text-field',attrs,false),on))]}}]),model:{value:(_vm.menuMonth),callback:function ($$v) {_vm.menuMonth=$$v},expression:\"menuMonth\"}},[_c('v-date-picker',{attrs:{\"type\":\"month\"},on:{\"change\":function($event){_vm.menuMonth = false}},model:{value:(_vm.selectedMonth),callback:function ($$v) {_vm.selectedMonth=$$v},expression:\"selectedMonth\"}})],1)],1),_c('v-col',{staticClass:\"d-flex align-end\",attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-btn',{attrs:{\"color\":\"primary\",\"disabled\":!_vm.selectedMonth},on:{\"click\":_vm.generateReport}},[_vm._v(\" Generate Report \")])],1)],1),_c('v-divider',{staticClass:\"my-4\"}),(_vm.reportData.length)?_c('div',[_c('v-simple-table',[_c('thead',[_c('tr',[_c('th',[_vm._v(\"INSURER\")]),_c('th',[_vm._v(\"WITHIN TAT\")]),_c('th',[_vm._v(\"TAT BREACH\")]),_c('th',[_vm._v(\"TOTAL\")]),_c('th',[_vm._v(\"BREACH PERCENTAGE\")])])]),_c('tbody',[_vm._l((_vm.reportData),function(row){return _c('tr',{key:row.insurer},[_c('td',[_vm._v(_vm._s(row.insurer))]),_c('td',[_vm._v(_vm._s(row.withinTat))]),_c('td',[_vm._v(_vm._s(row.breachedTat))]),_c('td',[_vm._v(_vm._s(row.total))]),_c('td',[_vm._v(_vm._s(row.percent))])])}),_c('tr',[_c('td',[_c('strong',[_vm._v(\"Total\")])]),_c('td',[_c('strong',[_vm._v(_vm._s(_vm.totals.withinTat))])]),_c('td',[_c('strong',[_vm._v(_vm._s(_vm.totals.breachedTat))])]),_c('td',[_c('strong',[_vm._v(_vm._s(_vm.totals.total))])]),_c('td',[_c('strong',[_vm._v(\" \"+_vm._s(_vm.totals.total > 0 ? ((_vm.totals.breachedTat / _vm.totals.total) * 100).toFixed(2) : \"0.00\")+\" \")])])]),_c('tr',[_c('td',{staticStyle:{\"text-align\":\"right\"},attrs:{\"colspan\":\"4\"}},[_c('strong',[_vm._v(\"OVERALL RATIO\")])]),_c('td',[_c('strong',[_vm._v(\" \"+_vm._s(_vm.totals.total > 0 ? ((_vm.totals.breachedTat / _vm.totals.total) * 100).toFixed(2) : \"0.00\")+\" \")])])])],2)]),_c('v-btn',{staticClass:\"mt-4\",attrs:{\"color\":\"success\",\"loading\":_vm.exporting},on:{\"click\":_vm.exportExcel}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-file-excel\")]),_vm._v(\" Export to Excel \")],1)],1):(_vm.noDataMessage)?_c('v-alert',{staticClass:\"mt-4\",attrs:{\"type\":\"warning\",\"outlined\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.noDataMessage)+\" \")]):_c('v-alert',{staticClass:\"mt-4\",attrs:{\"type\":\"info\",\"outlined\":\"\"}},[_vm._v(\" Please select month and click \\\"Generate Report\\\" to view data. \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card class=\"pa-4\">\r\n    <h2>Outstanding Assignment (By Insurer)</h2>\r\n    <v-row dense>\r\n      <v-col cols=\"12\" md=\"4\">\r\n        <v-menu v-model=\"menuMonth\" :close-on-content-click=\"false\">\r\n          <template v-slot:activator=\"{ on, attrs }\">\r\n            <v-text-field\r\n              v-model=\"selectedMonth\"\r\n              label=\"Month\"\r\n              prepend-icon=\"mdi-calendar\"\r\n              readonly\r\n              v-bind=\"attrs\"\r\n              v-on=\"on\"\r\n              dense\r\n              required\r\n            />\r\n          </template>\r\n          <v-date-picker\r\n            v-model=\"selectedMonth\"\r\n            type=\"month\"\r\n            @change=\"menuMonth = false\"\r\n          />\r\n        </v-menu>\r\n      </v-col>\r\n      <v-col cols=\"12\" md=\"4\" class=\"d-flex align-end\">\r\n        <v-btn\r\n          color=\"primary\"\r\n          @click=\"generateReport\"\r\n          :disabled=\"!selectedMonth\"\r\n        >\r\n          Generate Report\r\n        </v-btn>\r\n      </v-col>\r\n    </v-row>\r\n    <v-divider class=\"my-4\" />\r\n    <div v-if=\"reportData.length\">\r\n      <v-simple-table>\r\n        <thead>\r\n          <tr>\r\n            <th>INSURER</th>\r\n            <th>WITHIN TAT</th>\r\n            <th>TAT BREACH</th>\r\n            <th>TOTAL</th>\r\n            <th>BREACH PERCENTAGE</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"row in reportData\" :key=\"row.insurer\">\r\n            <td>{{ row.insurer }}</td>\r\n            <td>{{ row.withinTat }}</td>\r\n            <td>{{ row.breachedTat }}</td>\r\n            <td>{{ row.total }}</td>\r\n            <td>{{ row.percent }}</td>\r\n          </tr>\r\n          <tr>\r\n            <td><strong>Total</strong></td>\r\n            <td>\r\n              <strong>{{ totals.withinTat }}</strong>\r\n            </td>\r\n            <td>\r\n              <strong>{{ totals.breachedTat }}</strong>\r\n            </td>\r\n            <td>\r\n              <strong>{{ totals.total }}</strong>\r\n            </td>\r\n            <td>\r\n              <strong>\r\n                {{\r\n                  totals.total > 0\r\n                    ? ((totals.breachedTat / totals.total) * 100).toFixed(2)\r\n                    : \"0.00\"\r\n                }}\r\n              </strong>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td colspan=\"4\" style=\"text-align: right\">\r\n              <strong>OVERALL RATIO</strong>\r\n            </td>\r\n            <td>\r\n              <strong>\r\n                {{\r\n                  totals.total > 0\r\n                    ? ((totals.breachedTat / totals.total) * 100).toFixed(2)\r\n                    : \"0.00\"\r\n                }}\r\n              </strong>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </v-simple-table>\r\n      <v-btn\r\n        color=\"success\"\r\n        class=\"mt-4\"\r\n        @click=\"exportExcel\"\r\n        :loading=\"exporting\"\r\n      >\r\n        <v-icon left>mdi-file-excel</v-icon>\r\n        Export to Excel\r\n      </v-btn>\r\n    </div>\r\n    <v-alert v-else-if=\"noDataMessage\" type=\"warning\" outlined class=\"mt-4\">\r\n      {{ noDataMessage }}\r\n    </v-alert>\r\n    <v-alert v-else type=\"info\" outlined class=\"mt-4\">\r\n      Please select month and click \"Generate Report\" to view data.\r\n    </v-alert>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport { apiConfig } from \"../../config/api.config\";\r\n\r\nexport default {\r\n  name: \"OutstandingInsurer\",\r\n  data() {\r\n    return {\r\n      selectedMonth: null,\r\n      menuMonth: false,\r\n      reportData: [],\r\n      totals: {\r\n        withinTat: 0,\r\n        breachedTat: 0,\r\n        total: 0,\r\n      },\r\n      exporting: false,\r\n      noDataMessage: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    async generateReport() {\r\n      this.reportData = [];\r\n      this.totals = { withinTat: 0, breachedTat: 0, total: 0 };\r\n      this.noDataMessage = \"\";\r\n      try {\r\n        const params = {\r\n          month: moment(this.selectedMonth).format(\"YYYY-MM\"),\r\n        };\r\n        const res = await axios.get(\r\n          `${apiConfig.baseURL}/compliance/outstanding-insurer`,\r\n          { params }\r\n        );\r\n        this.processReportData(res.data);\r\n        if (\r\n          !Array.isArray(res.data.reportData) ||\r\n          res.data.reportData.length === 0\r\n        ) {\r\n          const monthStr = moment(this.selectedMonth).format(\"MMMM YYYY\");\r\n          this.noDataMessage = `No outstanding data found for ${monthStr}.`;\r\n        }\r\n      } catch (err) {\r\n        this.noDataMessage =\r\n          err.message || \"Failed to fetch report data. Please try again.\";\r\n      }\r\n    },\r\n    processReportData(data) {\r\n      this.reportData = Array.isArray(data.reportData) ? data.reportData : [];\r\n      const totals = { withinTat: 0, breachedTat: 0, total: 0 };\r\n      this.reportData.forEach((row) => {\r\n        totals.withinTat += row.withinTat;\r\n        totals.breachedTat += row.breachedTat;\r\n        totals.total += row.total;\r\n      });\r\n      this.totals = totals;\r\n    },\r\n    async exportExcel() {\r\n      this.exporting = true;\r\n      try {\r\n        const params = {\r\n          month: moment(this.selectedMonth).format(\"YYYY-MM\"),\r\n        };\r\n        const url =\r\n          `${apiConfig.baseURL}/compliance/outstanding-insurer/export?` +\r\n          new URLSearchParams(params).toString();\r\n        window.open(url, \"_blank\");\r\n      } catch (err) {\r\n        this.$emit(\"error\", err.message || \"Failed to export Excel\");\r\n      } finally {\r\n        this.exporting = false;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutstandingInsurer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutstandingInsurer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./OutstandingInsurer.vue?vue&type=template&id=0b63c206\"\nimport script from \"./OutstandingInsurer.vue?vue&type=script&lang=js\"\nexport * from \"./OutstandingInsurer.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}