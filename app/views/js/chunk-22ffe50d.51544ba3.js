(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22ffe50d"],{"0d2f":function(e,t,a){"use strict";a.r(t);var i=a("8336"),s=a("b0af"),n=a("99d9"),r=a("ac7c"),l=a("cc20"),d=a("62ad"),o=a("a523"),c=a("8fea"),m=a("2e4b"),u=a("169a"),h=a("ce7e"),p=a("132d"),b=a("e449"),f=a("0fd9"),v=a("b974"),I=a("2fa4"),g=a("8654"),k=a("a844"),x=a("71d9"),y=a("3a2f"),C=function(){var e=this,t=e._self._c;return t(o["a"],{attrs:{fluid:""}},[t("div",[t(c["a"],{staticClass:"elevation-1",attrs:{dense:"",headers:e.headers,items:e.members,"footer-props":{showFirstLastPage:!0,"items-per-page-options":[10,20,30,40,50,100,-1]},"items-per-page":50,search:e.search,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"mobile-breakpoint":"1100"},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"top",fn:function(){return[t(x["a"],{attrs:{flat:""}},[t(u["a"],{attrs:{"max-width":"600px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(y["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t(i["a"],e._g(e._b({attrs:{fab:"",small:"",color:"primary",dark:""}},"v-btn",s,!1),{...n,...a}),[t(p["a"],[e._v("mdi-plus")])],1)]}}],null,!0)},[t("span",[e._v("ADD USER")])])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(s["a"],{attrs:{tile:""}},[t(n["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",[e._v(e._s(e.formTitle))])]),t(n["b"],[t(o["a"],[t(f["a"],[t(f["a"],[t(d["a"],{attrs:{cols:"12",md:"6"}},[t(g["a"],{attrs:{rules:[e=>!!e||"Name is required"],label:"Name",required:""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Name ")]},proxy:!0}]),model:{value:e.editedItem.username,callback:function(t){e.$set(e.editedItem,"username",t)},expression:"editedItem.username"}})],1),t(d["a"],{attrs:{cols:"12",md:"6"}},[t(g["a"],{attrs:{rules:[e=>/^\d+$/.test(e)||"This field is required and only accept numbers"],type:"number","hide-spin-buttons":"",label:"NRIC"},model:{value:e.editedItem.nric,callback:function(t){e.$set(e.editedItem,"nric",t)},expression:"editedItem.nric"}})],1),t(d["a"],{attrs:{cols:"12"}},[t(g["a"],{attrs:{label:"Fullname as per NRIC"},model:{value:e.editedItem.fullname,callback:function(t){e.$set(e.editedItem,"fullname",t)},expression:"editedItem.fullname"}})],1),t(d["a"],{attrs:{cols:"12",md:"6"}},[t(g["a"],{attrs:{rules:e.editedItem.emailRules,label:"Email",required:"",type:"email"},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Email ")]},proxy:!0}]),model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),t(d["a"],{attrs:{cols:"12",md:"6"}},[t(v["a"],{attrs:{dense:"",rules:[e=>!!e||"Role is required"],items:e.access,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},label:"USER LEVEL",hint:"Set the user access","persistent-hint":"",multiple:""},model:{value:e.editedItem.roles,callback:function(t){e.$set(e.editedItem,"roles",t)},expression:"editedItem.roles"}})],1),t(d["a"],{attrs:{cols:"12",md:"6"}},[t(v["a"],{attrs:{dense:"",rules:[e=>!!e||"Branch is required"],items:e.branch,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Set the user branch","persistent-hint":"",multiple:""},model:{value:e.editedItem.branches,callback:function(t){e.$set(e.editedItem,"branches",t)},expression:"editedItem.branches"}})],1),t(d["a"],{attrs:{cols:"12",md:"6"}},[t(v["a"],{attrs:{dense:"",rules:[e=>!!e||"Department is required"],items:e.department,"item-text":"description","item-value":"id","menu-props":{maxHeight:"400"},label:"DEPARTMENT",hint:"Set the user department",multiple:""},model:{value:e.editedItem.depts,callback:function(t){e.$set(e.editedItem,"depts",t)},expression:"editedItem.depts"}})],1),t(d["a"],{attrs:{cols:"12",md:"6"}},[t(g["a"],{attrs:{label:"Telephone"},model:{value:e.editedItem.telnumber,callback:function(t){e.$set(e.editedItem,"telnumber",t)},expression:"editedItem.telnumber"}})],1),t(d["a"],{attrs:{cols:"12",md:"6"}},[[t("div",[t(b["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(g["a"],e._g(e._b({attrs:{"persistent-hint":"",label:"Date Joined","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},model:{value:e.ComputedDate,callback:function(t){e.ComputedDate=t},expression:"ComputedDate"}},"v-text-field",i,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(m["a"],{on:{change:function(t){e.menu=!1}},model:{value:e.editedItem.datejoined,callback:function(t){e.$set(e.editedItem,"datejoined",t)},expression:"editedItem.datejoined"}})],1)],1)]],2),t(d["a"],{attrs:{cols:"12",md:"6"}},[t(g["a"],{attrs:{label:"Position"},model:{value:e.editedItem.position,callback:function(t){e.$set(e.editedItem,"position",t)},expression:"editedItem.position"}})],1),t(d["a"],{attrs:{cols:"12",md:"6"}},[t(g["a"],{attrs:{label:"Employment ID"},model:{value:e.editedItem.empid,callback:function(t){e.$set(e.editedItem,"empid",t)},expression:"editedItem.empid"}})],1),t(d["a"],{attrs:{cols:"12",md:"6"}},[t(g["a"],{attrs:{label:"User Employment Code"},model:{value:e.editedItem.usercode,callback:function(t){e.$set(e.editedItem,"usercode",t)},expression:"editedItem.usercode"}})],1),t(d["a"],{attrs:{cols:"12"}},[t(k["a"],{attrs:{label:"Home Address"},model:{value:e.editedItem.address,callback:function(t){e.$set(e.editedItem,"address",t)},expression:"editedItem.address"}})],1),t(d["a"],{attrs:{cols:"12",md:"6"}},[t(g["a"],{attrs:{label:"Emergency Contact Name"},model:{value:e.editedItem.emcontactname,callback:function(t){e.$set(e.editedItem,"emcontactname",t)},expression:"editedItem.emcontactname"}})],1),t(d["a"],{attrs:{cols:"12",md:"6"}},[t(g["a"],{attrs:{label:"Emergency Contact Number"},model:{value:e.editedItem.emcontactno,callback:function(t){e.$set(e.editedItem,"emcontactno",t)},expression:"editedItem.emcontactno"}})],1)],1)],1)],1)],1),t(n["a"],[t(r["a"],{attrs:{label:"Active","input-value":"editedItem.active"},model:{value:e.editedItem.active,callback:function(t){e.$set(e.editedItem,"active",t)},expression:"editedItem.active"}}),t(I["a"]),t(i["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:e.close}},[e._v(" Cancel ")]),t(i["a"],{staticClass:"success",attrs:{disabled:e.isAddButtonDisabled,small:"",tile:""},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1),t(h["a"],{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t(u["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(s["a"],[t(n["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[e._v("Confirm delete? ")]),t(n["a"],[t(I["a"]),t(i["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:e.closeDelete}},[e._v("Cancel")]),t(i["a"],{staticClass:"error",attrs:{small:"",tile:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),t(I["a"])],1)],1)],1),t(I["a"]),t(g["a"],{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"item.numbering",fn:function(t){return[e._v(" "+e._s(t.index+1)+" ")]}},{key:"item.datejoined",fn:function({item:t}){return[e._v(" "+e._s(e.formatDate(t.datejoined))+" ")]}},{key:"item.active",fn:function({item:a}){return[t(l["a"],{attrs:{color:e.getStatusColor(a.active),outlined:"","x-small":"",label:""}},[t("tr",[e._v(" "+e._s(a.active?"ACTIVE":"INACTIVE")+" ")])])]}},{key:"item.depts",fn:function({item:a}){return e._l(a.depts,(function(a){return t("span",e._b({key:a.id},"span",a.item,!1),[t(l["a"],{attrs:{outlined:"","x-small":"",label:"",color:"primary"}},[e._v(" "+e._s(a.name.toUpperCase())+" ")])],1)}))}},{key:"item.branches",fn:function({item:a}){return e._l(a.branches,(function(a){return t("span",e._b({key:a.id},"span",a.item,!1),[t(l["a"],{attrs:{outlined:"","x-small":"",label:"",color:"warning"}},[e._v(" "+e._s(a.brCode.toUpperCase())+" ")])],1)}))}},{key:"item.roles",fn:function({item:a}){return e._l(a.roles,(function(a){return t("span",e._b({key:a.id},"span",a.item,!1),[t(l["a"],{attrs:{color:"ADMIN"===a.name?"grey":"MANAGER"===a.name?"red":"BRANCH MANAGER"===a.name?"blue":"ADJUSTER"===a.name?"magenta":"CLERK"===a.name?"red lighten-3":"BRANCH CLERK"===a.name?"blue lighten-3":"EDITOR"===a.name?"brown lighten-1":"DIRECTOR"===a.name?"blue-grey darken-1":"ACCOUNT"===a.name?"green":"black",outlined:"","x-small":"",label:""}},[e._v(" "+e._s(a.name.toUpperCase())+" ")])],1)}))}},{key:"item.actions",fn:function({item:a}){return[t(y["a"],{attrs:{left:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:s}){return[t(p["a"],e._g(e._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},"v-icon",s,!1),i),[e._v(" mdi-pencil ")])]}}],null,!0)},[t("span",[e._v(" edit")])]),t(y["a"],{attrs:{right:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:s}){return[t(p["a"],e._g(e._b({attrs:{small:"",color:"red darken-1"},on:{click:function(t){return e.deleteItem(a)}}},"v-icon",s,!1),i),[e._v(" mdi-delete ")])]}}],null,!0)},[t("span",[e._v(" delete")])])]}}],null,!0)})],1)])},D=[],_=(a("e9f5"),a("ab43"),a("9df5")),A=a("c427");class S{getAll(){return A["a"].get("/access")}get(e){return A["a"].get("/access/"+e)}create(e){return A["a"].post("/access",e)}update(e,t){return A["a"].put("/access/"+e,t)}delete(e){return A["a"].delete("/access/"+e)}deleteAll(){return A["a"].delete("/access")}findByUsername(e){return A["a"].get("/access?name="+e)}}var E=new S,$=a("fde1"),j=a("cb28"),R=a("c1df"),M=a.n(R),w={data:()=>({content:"",access:[],branch:[],department:[],dialog:!1,dialogDelete:!1,members:[],search:"",show1:!1,menu:!1,defaultItem:{id:null,username:"",fullname:"",nric:"",email:"",telnumber:"",datejoined:"",position:"",empid:"",usercode:"",address:"",emcontactname:"",emcontactno:"",emailRules:[e=>!!e||"E-mail is required",e=>/.+@.+/.test(e)||"E-mail must be valid"],active:"",roles:"",branches:"",depts:""},editedIndex:-1,editedItem:{id:null,username:"",fullname:"",nric:"",email:"",telnumber:"",datejoined:"",position:"",empid:"",usercode:"",address:"",emcontactname:"",emcontactno:"",emailRules:[e=>!!e||"E-mail is required",e=>/.+@.+/.test(e)||"E-mail must be valid"],active:"",roles:"",branches:"",depts:""},headers:[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"NAME",align:"start",sortable:!0,value:"username"},{text:"EMAIL",value:"email",sortable:!0},{text:"DEPARTMENT",align:"center",value:"depts",sortable:!1},{text:"BRANCH",align:"center",value:"branches",sortable:!0},{text:"STATUS",align:"center",value:"active",sortable:!0},{text:"ACCESS",align:"center",value:"roles",sortable:!1},{text:"ACTIONS",align:"center",value:"actions",sortable:!1}],sortBy:["username"],sortDesc:[!1]}),computed:{ComputedDate(){return this.formatDateMethod(this.editedItem.datejoined)},formTitle(){return-1===this.editedIndex?"Add User":"Update User"},isAddButtonDisabled(){return!(this.editedItem.username&&this.editedItem.email)},computedDateFormattedMomentjs(){return this.editedItem.datejoined?M()(this.editedItem.datejoined).format("DD/MM/YYYY"):""}},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()}},methods:{formatDateMethod(e){return e?M()(e).format("DD/MM/YYYY"):null},formatDate(e){return M()(e).format("DD/MM/YYYY")},retrieveAccess(){E.getAll().then(e=>{this.access=e.data.map(this.getDisplayAccess)}).catch(e=>{console.log(e)})},getDisplayAccess(e){return{id:e.id,name:e.name,roleCode:e.roleCode}},retrieveBranch(){$["a"].getAll().then(e=>{this.branch=e.data.map(this.getDisplayBranch).sort((e,t)=>e.name.localeCompare(t.name))}).catch(e=>{console.log(e)})},getDisplayBranch(e){return{id:e.id,name:e.name,brCode:e.brCode}},retrieveDept(){j["a"].getAll().then(e=>{this.department=e.data.map(this.getDisplayDept).sort((e,t)=>e.description.localeCompare(t.description))}).catch(e=>{console.log(e)})},getDisplayDept(e){return{id:e.id,name:e.name,description:e.description}},retrieveMembers(){_["a"].getAll().then(e=>{this.members=e.data.map(this.getDisplayMember).sort((e,t)=>e.username.localeCompare(t.username))}).catch(e=>{console.log(e)})},getDisplayMember(e){return{id:e.id,username:e.username,fullname:e.fullname,nric:e.nric,email:e.email,telnumber:e.telnumber,datejoined:e.datejoined,position:e.position,empid:e.empid,usercode:e.usercode,address:e.address,emcontactname:e.emcontactname,emcontactno:e.emcontactno,active:e.active?1:0,activatelink:e.activatelink,resetlink:e.resetlink,roles:e.roles,branches:e.branches,depts:e.depts}},refreshList(){this.retrieveMembers()},getRolesColor(e){return"ADMIN"==e[0].name?"red":"MANAGER"==e[0].name?"orange":"BRANCH MANAGER"==e[0].name?"indigo":"grey"},getStatusColor(e){return 0==e?"green lighten-2":"green darken-3"},editItem(e){this.editedIndex=this.members.indexOf(e),this.editedItem=Object.assign({},e),this.editedItem.roles=Object.assign([],e.roles.map(e=>e.user_roles.roleId)),this.editedItem.branches=Object.assign([],e.branches.map(e=>e.user_branches.brId)),this.editedItem.depts=Object.assign([],e.depts.map(e=>e.user_depts.deptId)),this.dialog=!0},deleteItem(e){this.editedIndex=this.members.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm(){_["a"].delete(this.editedItem.id).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)}),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1)_["a"].update(this.editedItem.id,this.editedItem).then(e=>{this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)});else{var e={username:this.editedItem.username,fullname:this.editedItem.fullname,nric:this.editedItem.nric,email:this.editedItem.email,telnumber:this.editedItem.telnumber,datejoined:this.editedItem.datejoined,position:this.editedItem.position,empid:this.editedItem.empid,usercode:this.editedItem.usercode,address:this.editedItem.address,emcontactname:this.editedItem.emcontactname,emcontactno:this.editedItem.emcontactno,active:this.editedItem.active?1:0,roles:this.editedItem.roles,branches:this.editedItem.branches,depts:this.editedItem.depts};console.log(this.editedItem.roles),_["a"].create(e).then(e=>{this.editedItem.id=e.data.id,this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})})}this.close()}},mounted(){this.retrieveMembers(),this.retrieveAccess(),this.retrieveBranch(),this.retrieveDept()}},N=w,V=a("2877"),B=Object(V["a"])(N,C,D,!1,null,null,null);t["default"]=B.exports},5311:function(e,t,a){"use strict";a("14d9");var i=a("5607"),s=a("2b0e");t["a"]=s["a"].extend({name:"rippleable",directives:{ripple:i["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(e={}){return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",e)):null}}})},"6ca7":function(e,t,a){},ac7c:function(e,t,a){"use strict";a("6ca7"),a("ec29");var i=a("9d26"),s=a("c37a"),n=a("fe09");t["a"]=n["a"].extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...s["a"].options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(e){this.$nextTick(()=>this.inputIndeterminate=e)},inputIndeterminate(e){this.$emit("update:indeterminate",e)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){const{title:e,...t}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(i["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...t,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}})},ec29:function(e,t,a){},fe09:function(e,t,a){"use strict";a.d(t,"b",(function(){return l}));a("14d9"),a("e9f5"),a("910d"),a("a732");var i=a("c37a"),s=a("5311"),n=a("8547"),r=a("58df");function l(e){e.preventDefault()}t["a"]=Object(r["a"])(i["a"],s["a"],n["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const e=this.value,t=this.internalValue;return this.isMultiple?!!Array.isArray(t)&&t.some(t=>this.valueComparator(t,e)):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,t):Boolean(t):this.valueComparator(t,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel(){const e=i["a"].options.methods.genLabel.call(this);return e?(e.data.on={click:l},e):e},genInput(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:l},ref:"input"})},onClick(e){this.onChange(),this.$emit("click",e)},onChange(){if(!this.isInteractive)return;const e=this.value;let t=this.internalValue;if(this.isMultiple){Array.isArray(t)||(t=[]);const a=t.length;t=t.filter(t=>!this.valueComparator(t,e)),t.length===a&&t.push(e)}else t=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(t,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(t,e)?null:e:!t;this.validate(!0,t),this.internalValue=t,this.hasColor=t},onFocus(e){this.isFocused=!0,this.$emit("focus",e)},onBlur(e){this.isFocused=!1,this.$emit("blur",e)},onKeydown(e){}}})}}]);
//# sourceMappingURL=chunk-22ffe50d.51544ba3.js.map