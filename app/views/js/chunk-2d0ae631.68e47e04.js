(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ae631"],{"0a9c":function(t,e,a){"use strict";a.r(e);var s=a("0798"),l=a("8336"),o=a("b0af"),n=a("62ad"),r=a("2e4b"),i=a("ce7e"),c=a("132d"),d=a("e449"),h=a("0fd9"),p=a("b974"),u=a("1f4f"),m=a("8654"),f=function(){var t=this,e=t._self._c;return e(o["a"],{staticClass:"pa-4"},[e("h2",[t._v("Outstanding Assignment by Days (Insurer)")]),e(h["a"],{attrs:{dense:""}},[e(n["a"],{attrs:{cols:"12",md:"4"}},[e(p["a"],{attrs:{items:t.deptOptions,"item-text":"name","item-value":"id",label:"Department",dense:"",outlined:"",required:""},model:{value:t.selectedDept,callback:function(e){t.selectedDept=e},expression:"selectedDept"}})],1),e(n["a"],{attrs:{cols:"12",md:"4"}},[e(p["a"],{attrs:{items:t.filteredClassOptions,"item-text":"subCode","item-value":"id",label:"Classification",dense:"",outlined:"",required:""},model:{value:t.selectedClass,callback:function(e){t.selectedClass=e},expression:"selectedClass"}})],1),e(n["a"],{attrs:{cols:"12",md:"4"}},[e(d["a"],{attrs:{"close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(m["a"],t._g(t._b({attrs:{label:"Month","prepend-icon":"mdi-calendar",readonly:"",dense:"",required:""},model:{value:t.selectedMonth,callback:function(e){t.selectedMonth=e},expression:"selectedMonth"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menuMonth,callback:function(e){t.menuMonth=e},expression:"menuMonth"}},[e(r["a"],{attrs:{type:"month"},on:{change:function(e){t.menuMonth=!1}},model:{value:t.selectedMonth,callback:function(e){t.selectedMonth=e},expression:"selectedMonth"}})],1)],1)],1),e(h["a"],[e(n["a"],{staticClass:"d-flex justify-end",attrs:{cols:"12"}},[e(l["a"],{attrs:{color:"primary",disabled:!t.selectedMonth},on:{click:t.generateReport}},[t._v(" Generate Report ")]),e(l["a"],{staticClass:"ml-2",attrs:{color:"success",loading:t.exporting,disabled:!t.reportData.length},on:{click:t.exportExcel}},[e(c["a"],{attrs:{left:""}},[t._v("mdi-file-excel")]),t._v(" Export to Excel ")],1)],1)],1),e(i["a"],{staticClass:"my-4"}),t.reportData.length?e("div",[e(u["a"],[e("thead",[e("tr",[e("th",[t._v("Insurer")]),e("th",[t._v("Within TAT")]),e("th",[t._v("TAT Breach")]),e("th",[t._v("Total")]),e("th",[t._v("Breach %")])])]),e("tbody",[t._l(t.reportData,(function(a){return[e("tr",{key:a.insurerCode},[e("td",[e("strong",[t._v(t._s(a.insurerCode))])]),e("td",[t._v(t._s(a.withinTat))]),e("td",{staticClass:"red--text font-weight-bold"},[t._v(t._s(a.breachedTat))]),e("td",[t._v(t._s(a.total))]),e("td",[e("span",{staticClass:"px-2 py-1",style:t.breachCellStyle(a.percent)},[t._v(" "+t._s(a.percent)+" ")])])]),t._l(a.details,(function(s){return e("tr",{key:a.insurerCode+"-"+s.dept+"-"+s.class,staticClass:"grey--text text--darken-2"},[e("td",[e("span",{staticStyle:{"padding-left":"24px"}},[t._v(" "+t._s(a.insurerCode)+" ("+t._s(s.dept)+" - "+t._s(s.class)+") ")])]),e("td",[t._v(t._s(s.withinTat))]),e("td",[t._v(t._s(s.breachedTat))]),e("td",[t._v(t._s(s.total))]),e("td",[e("span",{staticClass:"px-2 py-1",style:t.breachCellStyle(t.detailPercent(s))},[t._v(" "+t._s(t.detailPercent(s))+" ")])])])}))]})),e("tr",[e("td",[e("strong",[t._v("TOTAL")])]),e("td",[e("strong",[t._v(t._s(t.totals.withinTat))])]),e("td",{staticClass:"red--text font-weight-bold"},[e("strong",[t._v(t._s(t.totals.breachedTat))])]),e("td",[e("strong",[t._v(t._s(t.totals.total))])]),e("td",[e("strong",[t._v(t._s(t.totals.breachPercent))])])])],2)])],1):t.noDataMessage?e(s["a"],{staticClass:"mt-4",attrs:{type:"warning",outlined:""}},[t._v(" "+t._s(t.noDataMessage)+" ")]):e(s["a"],{staticClass:"mt-4",attrs:{type:"info",outlined:""}},[t._v(' Please select department, classification, and month, then click "Generate Report" to view data. ')])],1)},b=[],_=(a("e9f5"),a("910d"),a("7d54"),a("88a7"),a("271a"),a("5494"),a("bc3a")),C=a.n(_),g=a("c1df"),v=a.n(g),x=a("cb28"),y=a("f983"),D=a("6736"),M={name:"OutstandingInsurer",data(){return{selectedDept:"all",deptOptions:[],selectedClass:"all",classOptions:[],filteredClassOptions:[],selectedMonth:null,menuMonth:!1,reportData:[],totals:{withinTat:0,breachedTat:0,total:0,breachPercent:"0.00"},exporting:!1,noDataMessage:""}},watch:{selectedDept(t){this.filterClassifications(t),this.selectedClass="all"},classOptions:{handler(){this.filterClassifications(this.selectedDept)},immediate:!0}},methods:{async loadDepartments(){const t=await x["a"].getAll();this.deptOptions=[{id:"all",name:"ALL DEPARTMENTS"},...t.data].sort((t,e)=>t.name.localeCompare(e.name))},async loadClassifications(){const t=await y["a"].getAll();this.classOptions=[{id:"all",subCode:"ALL CLASSIFICATIONS",deptId:"all"},...t.data].sort((t,e)=>t.subCode.localeCompare(e.subCode))},filterClassifications(t){this.filteredClassOptions="all"===t?this.classOptions:this.classOptions.filter(e=>e.deptId===t||"all"===e.id).sort((t,e)=>t.subCode.localeCompare(e.subCode))},async generateReport(){this.reportData=[],this.totals={withinTat:0,breachedTat:0,total:0,breachPercent:"0.00"},this.noDataMessage="";try{const t={deptId:this.selectedDept,classificationId:this.selectedClass,month:v()(this.selectedMonth).format("YYYY-MM")},e=await C.a.get(D["a"].baseURL+"/compliance/outstanding-insurer",{params:t});if(this.processReportData(e.data),!Array.isArray(e.data.reportData)||0===e.data.reportData.length){const t=v()(this.selectedMonth).format("MMMM YYYY");this.noDataMessage=`No outstanding data found for ${t}.`}}catch(t){this.noDataMessage=t.message||"Failed to fetch report data. Please try again."}},processReportData(t){this.reportData=Array.isArray(t.reportData)?t.reportData:[];let e=0,a=0,s=0;this.reportData.forEach(t=>{e+=t.withinTat,a+=t.breachedTat,s+=t.total}),this.totals.withinTat=e,this.totals.breachedTat=a,this.totals.total=s,this.totals.breachPercent=s>0?(a/s*100).toFixed(2):"0.00"},breachCellStyle(t){const e=parseFloat(t);return e>80?"background:#FF6600;color:white;border-radius:4px;":e>=50?"background:#FFB366;color:black;border-radius:4px;":""},async exportExcel(){this.exporting=!0;try{const t={deptId:this.selectedDept,classificationId:this.selectedClass,month:v()(this.selectedMonth).format("YYYY-MM")},e=D["a"].baseURL+"/compliance/outstanding-insurer/export?"+new URLSearchParams(t).toString();window.open(e,"_blank")}catch(t){this.$emit("error",t.message||"Failed to export Excel")}finally{this.exporting=!1}},detailPercent(t){return t.total>0?(t.breachedTat/t.total*100).toFixed(2):"0.00"}},mounted(){this.loadDepartments(),this.loadClassifications()}},w=M,T=a("2877"),k=Object(T["a"])(w,f,b,!1,null,null,null);e["default"]=k.exports}}]);
//# sourceMappingURL=chunk-2d0ae631.68e47e04.js.map