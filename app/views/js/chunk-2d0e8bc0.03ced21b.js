(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e8bc0"],{"8b11":function(t,e,s){"use strict";s.r(e);var a=s("8336"),i=s("b0af"),l=s("99d9"),n=s("62ad"),r=s("a523"),o=s("8fea"),d=s("169a"),c=s("ce7e"),u=s("132d"),h=s("0fd9"),m=s("2fa4"),g=s("8654"),f=s("a844"),b=s("71d9"),w=s("3a2f"),p=function(){var t=this,e=t._self._c;return e(r["a"],{attrs:{fluid:""}},[e(d["a"],{attrs:{width:"600px",persistent:""},model:{value:t.bulletinDetailDialog,callback:function(e){t.bulletinDetailDialog=e},expression:"bulletinDetailDialog"}},[e(i["a"],[e(l["d"],{staticClass:"justify-start text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v(t._s(t.bulletinDetail.newsTitle))])]),e(l["c"],{staticClass:"text-h6 text-start mt-3"},[t._v(" "+t._s(t.bulletinDetail.newsStory)+" ")]),e(l["c"],{staticClass:"caption text-start"},[t._v(" - "+t._s(t.bulletinDetail.newsAuthor)+" "),e("br"),t._v(" - "+t._s(t.formatDate(t.bulletinDetail.createdAt))+" ")]),e(l["a"],[e(m["a"]),e(a["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.bulletinDetailDialog=!1}}},[t._v(" Close ")])],1)],1)],1),e("div",[e(o["a"],{staticClass:"elevation-1",attrs:{dense:"",headers:t.headers,items:t.bulletins,search:t.search,"footer-props":{showFirstLastPage:!0,"items-per-page-options":[10,20,30,40,50,100,-1]},"items-per-page":50},scopedSlots:t._u([{key:"top",fn:function(){return[e(b["a"],{attrs:{flat:""}},[e(d["a"],{attrs:{"max-width":"500px",persistent:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(w["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:l}){return[e(a["a"],t._g(t._b({attrs:{fab:"",small:"",color:"primary",dark:""}},"v-btn",i,!1),{...l,...s}),[e(u["a"],[t._v("mdi-plus")])],1)]}}],null,!0)},[e("span",[t._v("ADD BULLETIN")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(i["a"],[e(l["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",[t._v(t._s(t.formTitle))])]),e(l["c"],[e(r["a"],[e(h["a"],[e(n["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[e(g["a"],{attrs:{label:"Title"},model:{value:t.editedItem.newsTitle,callback:function(e){t.$set(t.editedItem,"newsTitle",e)},expression:"editedItem.newsTitle"}})],1),e(n["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[e(f["a"],{attrs:{label:"Content"},model:{value:t.editedItem.newsStory,callback:function(e){t.$set(t.editedItem,"newsStory",e)},expression:"editedItem.newsStory"}})],1)],1)],1)],1),e(l["a"],[e(m["a"]),e(a["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:t.close}},[t._v(" Cancel ")]),e(a["a"],{staticClass:"success",attrs:{disabled:t.isAddButtonDisabled,small:"",tile:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),e(c["a"],{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e(d["a"],{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(i["a"],[e(l["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("Confirm delete? ")]),e(l["a"],[e(m["a"]),e(a["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:t.closeDelete}},[t._v("No")]),e(a["a"],{staticClass:"error",attrs:{small:"",tile:""},on:{click:t.deleteItemConfirm}},[t._v("Yes")]),e(m["a"])],1)],1)],1),e(m["a"]),e(g["a"],{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.numbering",fn:function(e){return[t._v(" "+t._s(e.index+1)+" ")]}},{key:"item.newsStory",fn:function({value:s}){return[e("div",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"300px"}},[t._v(" "+t._s(s)+" ")])]}},{key:"item.actions",fn:function({item:s}){return[e(w["a"],{attrs:{left:"",transition:"fab-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(u["a"],t._g(t._b({staticClass:"mr-2",on:{click:function(e){return t.showDetail(s)}}},"v-icon",i,!1),a),[t._v(" mdi-folder-open-outline ")])]}}],null,!0)},[e("span",[t._v(" Show Detail")])]),e(w["a"],{attrs:{left:"",transition:"fab-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(u["a"],t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(s)}}},"v-icon",i,!1),a),[t._v(" mdi-pencil ")])]}}],null,!0)},[e("span",[t._v(" edit")])]),e(w["a"],{attrs:{right:"",transition:"fab-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(u["a"],t._g(t._b({attrs:{small:"",color:"red darken-1"},on:{click:function(e){return t.deleteItem(s)}}},"v-icon",i,!1),a),[t._v(" mdi-delete ")])]}}],null,!0)},[e("span",[t._v(" delete")])])]}}],null,!0)})],1)],1)},v=[],x=s("0c04"),_=s("c1df"),D=s.n(_),I={data:()=>({dialog:!1,dialogDelete:!1,bulletinDetailDialog:!1,bulletinDetail:!1,bulletins:[],search:"",defaultItem:{id:null,newsTitle:"",newsStory:"",newsAuthor:""},editedIndex:-1,editedItem:{id:null,newsTitle:"",newsStory:"",newsAuthor:""},headers:[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"TITLE",align:"start",sortable:!0,value:"newsTitle"},{text:"CONTENT",align:"center",value:"newsStory",sortable:!0},{text:"AUTHOR",align:"center",value:"newsAuthor",sortable:!0},{text:"ACTIONS",align:"center",value:"actions",sortable:!1}]}),computed:{currentUserName(){return this.$store.state.auth.user.username},formTitle(){return-1===this.editedIndex?"Add Bulletin":"Update Bulletin"},isAddButtonDisabled(){return!(this.editedItem.newsTitle&&this.editedItem.newsStory)}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},methods:{formatDate(t){return t?D()(t).format("DD/MM/YYYY"):""},showDetail(t){this.bulletinDetail=Object.assign({},t),this.bulletinDetailDialog=!0},retrieveBulletins(){x["a"].getAll().then(t=>{this.bulletins=t.data}).catch(t=>{console.log(t)})},retrieveUserName(){this.currentUserName().then(t=>{this.editedItem.newsAuthor=t.data}).catch(t=>{console.log(t)})},refreshList(){this.retrieveBulletins()},getDisplayBulletin(t){return{id:t.id,newsTitle:t.newsTitle.length>30?t.newsTitle.substr(0,30)+"...":t.newsTitle,newsStory:t.newsStory.length>30?t.newsStory.substr(0,30)+"...":t.newsStory,newsAuthor:t.newsAuthor.length>30?t.newsAuthor.substr(0,30)+"...":t.newsAuthor}},editItem(t){this.editedIndex=this.bulletins.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.bulletins.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){x["a"].delete(this.editedItem.id).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)}),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1)x["a"].update(this.editedItem.id,this.editedItem).then(t=>{this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)});else{var t={newsTitle:this.editedItem.newsTitle,newsStory:this.editedItem.newsStory,newsAuthor:this.$store.state.auth.user.username};x["a"].create(t).then(t=>{this.editedItem.id=t.data.id,this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})})}this.close()}},mounted(){this.retrieveBulletins()}},k=I,y=s("2877"),S=Object(y["a"])(k,p,v,!1,null,null,null);e["default"]=S.exports}}]);
//# sourceMappingURL=chunk-2d0e8bc0.03ced21b.js.map