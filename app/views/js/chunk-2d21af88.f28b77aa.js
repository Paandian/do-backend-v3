(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21af88"],{be7f:function(e,t,a){"use strict";a.r(t);var s=a("8336"),i=a("b0af"),l=a("99d9"),n=a("62ad"),d=a("a523"),r=a("8fea"),o=a("169a"),m=a("ce7e"),c=a("132d"),h=a("0fd9"),u=a("b974"),f=a("2fa4"),I=a("8654"),p=a("71d9"),b=a("3a2f"),g=function(){var e=this,t=e._self._c;return t(d["a"],{attrs:{fluid:""}},[t("div",[t(r["a"],{staticClass:"elevation-1",attrs:{dense:"",headers:e.headers,items:e.handlers,search:e.search,"footer-props":{showFirstLastPage:!0,"items-per-page-options":[10,20,30,40,50,100,-1]},"items-per-page":50,"sort-by":["insurerName","name"],"sort-desc":[!1,!1]},scopedSlots:e._u([{key:"top",fn:function(){return[t(p["a"],{attrs:{flat:""}},[t(o["a"],{attrs:{"max-width":"500px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(b["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:l}){return[t(s["a"],e._g(e._b({attrs:{fab:"",small:"",color:"primary",dark:""}},"v-btn",i,!1),{...l,...a}),[t(c["a"],[e._v("mdi-plus")])],1)]}}],null,!0)},[t("span",[e._v("ADD HANDLER")])])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(i["a"],{attrs:{tile:""}},[t(l["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",[e._v(e._s(e.formTitle))])]),t(l["c"],[t(d["a"],[t(h["a"],[t(n["a"],{attrs:{cols:"12"}},[t(u["a"],{attrs:{items:e.insurers,"item-text":"name","item-value":"id",label:"Insurer"},model:{value:e.editedItem.insId,callback:function(t){e.$set(e.editedItem,"insId",t)},expression:"editedItem.insId"}})],1),t(n["a"],{attrs:{cols:"12"}},[t(u["a"],{attrs:{items:e.departments,"item-text":"name","item-value":"id",label:"Department"},model:{value:e.editedItem.deptId,callback:function(t){e.$set(e.editedItem,"deptId",t)},expression:"editedItem.deptId"}})],1),t(n["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(I["a"],{attrs:{label:"Name"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),t(n["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(I["a"],{attrs:{label:"Telephone Number"},model:{value:e.editedItem.offTel,callback:function(t){e.$set(e.editedItem,"offTel",t)},expression:"editedItem.offTel"}})],1),t(n["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(I["a"],{attrs:{label:"Mobile Number"},model:{value:e.editedItem.mobile,callback:function(t){e.$set(e.editedItem,"mobile",t)},expression:"editedItem.mobile"}})],1),t(n["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(I["a"],{attrs:{label:"Email"},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1)],1)],1)],1),t(l["a"],[t(f["a"]),t(s["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:e.close}},[e._v(" Cancel ")]),t(s["a"],{staticClass:"success",attrs:{disabled:e.isAddButtonDisabled,small:"",tile:""},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1),t(m["a"],{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t(o["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(i["a"],[t(l["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e._v("Confirm delete? ")]),t(l["a"],[t(f["a"]),t(s["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:e.closeDelete}},[e._v("No")]),t(s["a"],{staticClass:"error",attrs:{small:"",tile:""},on:{click:e.deleteItemConfirm}},[e._v("Yes")]),t(f["a"])],1)],1)],1),t(f["a"]),t(I["a"],{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"item.numbering",fn:function(t){return[e._v(" "+e._s(t.index+1)+" ")]}},{key:"item.insurerName",fn:function({item:a}){return[t("div",{staticClass:"text-truncate",staticStyle:{"max-width":"80px"}},[e._v(" "+e._s(a.insurerName)+" ")])]}},{key:"item.deptId",fn:function({item:a}){return e._l(e.filterDept(a.deptId),(function(a){return t("span",e._b({key:a.id},"span",a.item,!1),[e._v(" "+e._s(a.name)+" ")])}))}},{key:"item.actions",fn:function({item:a}){return[t(b["a"],{attrs:{left:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:i}){return[t(c["a"],e._g(e._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},"v-icon",i,!1),s),[e._v(" mdi-pencil ")])]}}],null,!0)},[t("span",[e._v(" edit")])]),t(b["a"],{attrs:{right:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:i}){return[t(c["a"],e._g(e._b({attrs:{small:"",color:"red darken-1"},on:{click:function(t){return e.deleteItem(a)}}},"v-icon",i,!1),s),[e._v(" mdi-delete ")])]}}],null,!0)},[t("span",[e._v(" delete")])])]}}],null,!0)})],1)])},v=[],x=(a("e9f5"),a("910d"),a("f665"),a("ab43"),a("8643")),k=a("5632"),_=a("cb28"),D={name:"handlers",data:()=>({dialog:!1,dialogDelete:!1,handlers:[],insurers:[],departments:[],search:"",defaultItem:{id:null,insId:"",deptId:"",name:"",offTel:"",mobile:"",email:""},editedIndex:-1,editedItem:{id:null,insId:"",deptId:"",name:"",offTel:"",mobile:"",email:""},headers:[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"INSURER",align:"start",sortable:!0,value:"insurerName"},{text:"DEPARTMENT",align:"start",sortable:!0,value:"deptId"},{text:"HANDLER",align:"start",sortable:!0,value:"name"},{text:"TELEPHONE",align:"center",value:"offTel",sortable:!0},{text:"MOBILE",align:"center",value:"mobile",sortable:!0},{text:"EMAIL",align:"center",value:"email",sortable:!0},{text:"ACTIONS",align:"center",value:"actions",sortable:!1}]}),computed:{formTitle(){return-1===this.editedIndex?"Add Handler":"Update Handler"},isAddButtonDisabled(){return!(this.editedItem.insId&&this.editedItem.deptId&&this.editedItem.name&&this.editedItem.email)}},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()}},methods:{filterBranch(e){return this.branches.filter(t=>t.id===e)},filterIns(e){return this.insurers.filter(t=>t.id===e)},filterDept(e){return this.departments.filter(t=>t.id===e)},retrieveHandlers(){Promise.all([x["a"].getAll(),k["a"].getAll()]).then(([e,t])=>{this.insurers=t.data,this.handlers=e.data.map(e=>{const t=this.getDisplayHandler(e),a=this.insurers.find(t=>t.id===e.insId);return t.insurerName=a?a.name:"",t})}).catch(e=>{console.log(e)})},getDisplayHandler(e){return{id:e.id,insId:e.insId,deptId:e.deptId,name:e.name.length>30?e.name.substr(0,30)+"...":e.name,offTel:e.offTel,mobile:e.mobile,email:e.email}},retrieveInsurers(){k["a"].getAll().then(e=>{this.insurers=e.data.sort((e,t)=>e.name.localeCompare(t.name))}).catch(e=>{console.log(e)})},retrieveDepartments(){_["a"].getAll().then(e=>{this.departments=e.data.sort((e,t)=>e.name.localeCompare(t.name))}).catch(e=>{console.log(e)})},refreshList(){this.retrieveHandlers(),this.retrieveInsurers(),this.retrieveDepartments()},editItem(e){this.editedIndex=this.handlers.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem(e){this.editedIndex=this.handlers.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm(){x["a"].delete(this.editedItem.id).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)}),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1)x["a"].update(this.editedItem.id,this.editedItem).then(e=>{this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)});else{var e={insId:this.editedItem.insId,deptId:this.editedItem.deptId,name:this.editedItem.name,offTel:this.editedItem.offTel,mobile:this.editedItem.mobile,email:this.editedItem.email};x["a"].create(e).then(e=>{this.editedItem.id=e.data.id,this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})})}this.close()}},mounted(){this.retrieveHandlers(),this.retrieveInsurers(),this.retrieveDepartments()}},y=D,T=a("2877"),S=Object(T["a"])(y,g,v,!1,null,null,null);t["default"]=S.exports}}]);
//# sourceMappingURL=chunk-2d21af88.f28b77aa.js.map