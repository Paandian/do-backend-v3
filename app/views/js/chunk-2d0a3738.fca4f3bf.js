(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3738"],{"01de":function(e,t,a){"use strict";a.r(t);var s=a("0798"),n=a("8336"),r=a("b0af"),l=a("62ad"),d=a("2e4b"),c=a("ce7e"),o=a("132d"),i=a("e449"),u=a("0fd9"),m=a("b974"),h=a("8654"),p=function(){var e=this,t=e._self._c;return t(r["a"],{staticClass:"pa-4"},[t("h2",[e._v("Closed Assignments by Adjuster (By Date)")]),t(u["a"],{attrs:{dense:""}},[t(l["a"],{attrs:{cols:"12",md:"4"}},[t(m["a"],{attrs:{items:e.branches,"item-text":"name","item-value":"id",label:"Branch",dense:"",required:""},model:{value:e.selectedBranch,callback:function(t){e.selectedBranch=t},expression:"selectedBranch"}})],1),t(l["a"],{attrs:{cols:"12",md:"4"}},[t(m["a"],{attrs:{items:e.filteredAdjusters,"item-text":"username","item-value":"id",label:"Adjuster",dense:"",required:"",disabled:!e.selectedBranch},model:{value:e.selectedAdjuster,callback:function(t){e.selectedAdjuster=t},expression:"selectedAdjuster"}})],1),t(l["a"],{attrs:{cols:"12",md:"2"}},[t(i["a"],{attrs:{"close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(h["a"],e._g(e._b({attrs:{label:"Start Date","prepend-icon":"mdi-calendar",readonly:"",dense:"",required:""},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menuStart,callback:function(t){e.menuStart=t},expression:"menuStart"}},[t(d["a"],{attrs:{type:"date"},on:{change:function(t){e.menuStart=!1}},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1)],1),t(l["a"],{attrs:{cols:"12",md:"2"}},[t(i["a"],{attrs:{"close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(h["a"],e._g(e._b({attrs:{label:"End Date","prepend-icon":"mdi-calendar",readonly:"",dense:"",required:""},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menuEnd,callback:function(t){e.menuEnd=t},expression:"menuEnd"}},[t(d["a"],{attrs:{type:"date"},on:{change:function(t){e.menuEnd=!1}},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)],1)],1),t(c["a"],{staticClass:"my-4"}),t(n["a"],{staticClass:"mt-2",attrs:{color:"success",disabled:!e.selectedAdjuster||!e.startDate||!e.endDate,loading:e.exporting},on:{click:e.exportExcel}},[t(o["a"],{attrs:{left:""}},[e._v("mdi-file-excel")]),e._v(" Export Closed Assignments ")],1),t(s["a"],{staticClass:"mt-4",attrs:{type:"info",outlined:""}},[e._v(" ðŸš§ This feature generates a styled Excel sheet. Table preview coming soon! ")])],1)},f=[],b=(a("e9f5"),a("910d"),a("f665"),a("a732"),a("88a7"),a("271a"),a("5494"),a("9df5")),x=a("fde1"),v=a("6736"),D={name:"ClosedByAdjusterDate",data(){return{selectedBranch:null,branches:[],adjusters:[],selectedAdjuster:null,startDate:null,endDate:null,menuStart:!1,menuEnd:!1,exporting:!1}},computed:{filteredAdjusters(){if(!this.selectedBranch)return[];const e=this.branches.find(e=>e.id===this.selectedBranch);if(!e)return[];const t=e.brCode;return this.adjusters.filter(e=>Array.isArray(e.branches)&&e.branches.some(e=>e.brCode===t)).sort((e,t)=>e.username.localeCompare(t.username))}},mounted(){this.loadBranches(),this.retrieveAdjusters()},methods:{async loadBranches(){const e=await x["a"].getAll();this.branches=(e.data||[]).sort((e,t)=>e.name.localeCompare(t.name))},retrieveAdjusters(){b["a"].getAll().then(e=>{this.adjusters=e.data.filter(e=>e.roles&&e.roles.some(e=>"adjuster"===e.roleCode)&&e.active).sort((e,t)=>e.username.localeCompare(t.username))}).catch(e=>{console.log(e)})},async exportExcel(){this.exporting=!0;try{const e={adjusterId:this.selectedAdjuster,startDate:this.startDate,endDate:this.endDate},t=v["a"].baseURL+"/compliance/closed-by-adjuster/export?"+new URLSearchParams(e).toString();window.open(t,"_blank")}catch(e){this.$emit("error",e.message||"Failed to export Excel")}finally{this.exporting=!1}}}},j=D,y=a("2877"),A=Object(y["a"])(j,p,f,!1,null,null,null);t["default"]=A.exports}}]);
//# sourceMappingURL=chunk-2d0a3738.fca4f3bf.js.map