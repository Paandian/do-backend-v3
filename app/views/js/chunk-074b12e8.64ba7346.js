(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-074b12e8"],{"0160":function(t,e,a){},"0467":function(t,e,a){},1965:function(t,e,a){"use strict";a("7a6a")},"1dbf":function(t,e,a){"use strict";a("fa52")},"208e":function(t,e,a){"use strict";a("7d58")},"20dd":function(t,e,a){"use strict";var s=a("c427");class i{getAll(){return s["a"].get("/claims")}get(t){return s["a"].get("/claims/"+t)}create(t){return s["a"].post("/claims",t)}update(t,e){return s["a"].put("/claims/"+t,e)}updateAll(t,e){return s["a"].put("/claims/items/"+t,e)}delete(t){return s["a"].delete("/claims/"+t)}deleteAll(){return s["a"].delete("/claims")}findBySubDept(t){return s["a"].get("/claims?name="+t)}}e["a"]=new i},2122:function(t,e,a){},"23a7":function(t,e,a){"use strict";a("14d9"),a("13d5"),a("e9f5"),a("d866"),a("7d54"),a("ab43"),a("9485"),a("5803");var s=a("2677"),i=a("cc20"),r=a("80d2"),l=a("d9bd"),c=a("d9f7");e["a"]=s["a"].extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:t=>"boolean"===typeof t||[1e3,1024].includes(t)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:t=>Object(r["H"])(t).every(t=>null!=t&&"object"===typeof t)}},computed:{classes(){return{...s["a"].options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const t=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);const e=this.internalArrayValue.reduce((t,{size:e=0})=>t+e,0);return this.$vuetify.lang.t(this.counterSizeString,t,Object(r["w"])(e,1024===this.base))},internalArrayValue(){return Object(r["H"])(this.internalValue)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map(t=>{const{name:e="",size:a=0}=t,s=this.truncateText(e);return this.showSize?`${s} (${Object(r["w"])(a,1024===this.base)})`:s}):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(t){!0===t&&Object(l["b"])("readonly is not supported on <v-file-input>",this)},immediate:!0},value(t){const e=this.multiple?t:t?[t]:[];Object(r["k"])(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map((t,e)=>this.$createElement(i["a"],{props:{small:this.smallChips},on:{"click:close":()=>{const t=this.internalValue;t.splice(e,1),this.internalValue=t}}},[t])):[]},genControl(){const t=s["a"].options.methods.genControl.call(this);return this.hideInput&&(t.data.style=Object(c["d"])(t.data.style,{display:"none"})),t},genInput(){const t=s["a"].options.methods.genInput.call(this);return t.data.attrs.multiple=this.multiple,delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot(){if(!this.prependIcon)return null;const t=this.genIcon("prepend",()=>{this.$refs.input.click()});return this.genSlot("prepend","outer",[t])},genSelectionText(){const t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections(){const t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((e,a)=>{this.$scopedSlots.selection&&t.push(this.$scopedSlots.selection({text:this.text[a],file:e,index:a}))}):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot(){const t=s["a"].options.methods.genTextFieldSlot.call(this);return t.data.on={...t.data.on||{},click:t=>{t.target&&"LABEL"===t.target.nodeName||this.$refs.input.click()}},t},onInput(t){const e=[...t.target.files||[]];this.internalValue=this.multiple?e:e[0],this.initialValue=this.internalValue},onKeyDown(t){this.$emit("keydown",t)},truncateText(t){if(t.length<Number(this.truncateLength))return t;const e=Math.floor((Number(this.truncateLength)-1)/2);return`${t.slice(0,e)}…${t.slice(t.length-e)}`}}})},2677:function(t,e,a){"use strict";var s=a("8654");e["a"]=s["a"]},"271a":function(t,e,a){"use strict";var s=a("cb2d"),i=a("e330"),r=a("577e"),l=a("d6d6"),c=URLSearchParams,n=c.prototype,o=i(n.getAll),d=i(n.has),h=new c("a=1");!h.has("a",2)&&h.has("a",void 0)||s(n,"has",(function(t){var e=arguments.length,a=e<2?void 0:arguments[1];if(e&&void 0===a)return d(this,t);var s=o(this,t);l(e,1);var i=r(a),c=0;while(c<s.length)if(s[c++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},"3c98":function(t,e,a){"use strict";var s=a("c427");class i{getAll(){return s["a"].get("/documents")}get(t){return s["a"].get("/documents/"+t)}create(t){return s["a"].post("/documents",t)}update(t,e){return s["a"].put("/documents/"+t,e)}delete(t,e){return s["a"].delete(`/documents/${t}/${e}`)}deleteAll(){return s["a"].delete("/documents")}findByHandler(t){return s["a"].get("/documents?name="+t)}}e["a"]=new i},"4adb":function(t,e,a){"use strict";a("f1b7")},5246:function(t,e,a){"use strict";var s=a("8336"),i=a("b0af"),r=a("62ad"),l=a("169a"),c=a("ce7e"),n=a("132d"),o=a("0fd9"),d=a("3a2f"),h=function(){var t=this,e=t._self._c;return e(l["a"],{attrs:{width:"800px"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(d["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(s["a"],t._g({attrs:{icon:""}},{...i,...a}),[e(n["a"],[t._v("mdi-file-pdf-box")])],1)]}}],null,!0)},[e("span",[t._v("Acknowledgement Letter")])])]}}]),model:{value:t.acknowledgement,callback:function(e){t.acknowledgement=e},expression:"acknowledgement"}},[e(i["a"],[e("div",{staticClass:"ma-5"},[e("div",{staticClass:"pt-2",attrs:{align:"end"}},[e(s["a"],{staticClass:"mr-1",attrs:{outlined:"",small:"",tile:""},on:{click:t.closeDownloadAck}},[t._v(" Cancel ")]),e("download-button",{attrs:{dom:"#letter",name:t.vehicleNumber}})],1),e("div",{attrs:{id:"letter"}},[e("div",{staticClass:"title01"},[t._v("ASSOCIATED")]),e("div",{staticClass:"title01"},[t._v(" ADJUSTERS SDN BHD"),e("span",{staticClass:"caption01"},[t._v("( CO. NO. 30757-A)")])]),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"2"}},[e("div",{staticClass:"para01"},[t._v("YOUR REF")])]),e(r["a"],[e("div",{staticClass:"para01"},[t._v(": "+t._s(t.casefile.claimNo))])])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"2"}},[e("div",{staticClass:"para01"},[t._v("OUR REF")])]),e(r["a"],[e("div",{staticClass:"para01 d-flex"},[t._v(" : AA/ "),t._l(t.filterDept(t.casefile.refType),(function(a,s){return e("span",{key:s},[t._v(" "+t._s(a.name)),t._l(t.filterSubDept(t.casefile.subRefType),(function(a,s){return e("span",{key:s},[t._v("/"+t._s(a.subCode))])}))],2)})),t._v("/"+t._s(t.casefile.id)+"/"+t._s(t.yearOnly(t.casefile.createdAt))+"/"),t._l(t.filterBranches(t.casefile.branch),(function(a){return e("span",{key:a.id},[t._v(t._s(a.brCode)+" ")])}))],2)])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"2"}},[e("div",{staticClass:"para01"},[t._v("DATE")])]),e(r["a"],[e("div",{staticClass:"para01"},[t._v(" : "+t._s(t.formatDate(t.casefile.createdAt))+" ")])])],1),e("div",{staticClass:"para02"},[t._v("THE CLAIMS MANAGER,")]),t._l(t.filterIns(t.casefile.insurer),(function(a,s){return e("div",{key:s},[e("span",{staticClass:"para03"},[t._v(t._s(a.name))]),e("br"),e("span",{staticClass:"para04"},[t._v(t._s(a.insAddLine01))]),e("br"),e("span",{staticClass:"para04"},[t._v(t._s(a.insAddLine02))]),e("br"),e("span",{staticClass:"para04"},[t._v(t._s(a.insPostcode))]),t._v("   "),e("span",{staticClass:"para04"},[t._v(t._s(a.insTown))]),e("br"),e("span",{staticClass:"para04"},[t._v(t._s(a.insState))])])})),e("div",{staticClass:"para05"},[t._v("DEAR SIR/ MADAM,")]),e("div",{staticClass:"para03"},[t._v("RE : ACKNOWLEDGEMENT OF ASSIGNMENT")]),e("br"),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"3"}},[e("div",{staticClass:"para06"},[t._v("VEHICLE NO")])]),e(r["a"],[t.casefile.vehicleNo?e("div",{staticClass:"para06"},[t._v(" : "+t._s(t.casefile.vehicleNo.toUpperCase())+" ")]):t._e()])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"3"}},[e("div",{staticClass:"para06"},[t._v("DATE OF LOSS")])]),e(r["a"],[e("div",{staticClass:"para06"},[t._v(": "+t._s(t.formatDate(t.casefile.dateOfLoss)))])])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"3"}},[e("div",{staticClass:"para06"},[t._v("PLACE OF LOSS")])]),e(r["a"],[t.casefile.placeOfLoss?e("div",{staticClass:"para06"},[t._v(" : "+t._s(t.casefile.placeOfLoss)+", "),t._l(t.filterStates(t.casefile.stateOfLoss),(function(a){return e("span",{key:a.id},[t._v(" "+t._s(a.name)+" ")])}))],2):t._e()])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"3"}},[e("div",{staticClass:"para06"},[t._v("INSURED")])]),e(r["a"],[e("div",{staticClass:"para06"},[t._v(": "+t._s(t.casefile.insuredName))])])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"3"}},[e("div",{staticClass:"para06"},[t._v("ASSIGNMENT DATE")])]),e(r["a"],[e("div",{staticClass:"para06"},[t._v(" : "+t._s(t.formatDate(t.casefile.dateOfAssign))+" ")])])],1),e(c["a"],{staticClass:"para07"}),e("p",{staticClass:"para11"},[t._v(" We acknowledge receipt of your assignment pertaining to the above matter. ")]),e("p",{staticClass:"para11"},[t._v(" We thank you for your support and shall forward our report in connection with the above as soon as we finalised the same. ")]),e("p",{staticClass:"para11"},[t._v("In the meantime, kindly bear with us a while.")]),e("p",{staticClass:"para10"},[t._v(' " Ensuring you of our best services at all time ". ')]),e("p",{staticClass:"para04"},[t._v("Thank you.")]),e("p",{staticClass:"para08"},[t._v("ASSOCIATED ADJUSTERS SDN BHD")]),e("div",{staticClass:"para09"},[t._v(" *No signature required as it is computer generated. ")]),e("br"),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"1"}},[e("div",{staticClass:"para12"},[t._v("HEAD OFFICE")])]),e(r["a"],[e("div",{staticClass:"para12"},[t._v(" : C-9-1, BLOCK C, 9TH FLOOR, MEGAN PHILEO AVENUE II, NO.12, JALAN YAP KWAN SENG, 50450 KUALA LUMPUR ")]),e("div",{staticClass:"para12"},[t._v("   TEL : 03 - 21 666 330 (5 LINES) FAX : 03 - 21 666 110 E-MAIL : info@associatedadjusters.com ")])])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"1"}},[e("div",{staticClass:"para12"},[t._v("JOHOR BAHRU")])]),e(r["a"],[e("div",{staticClass:"para12"},[t._v(" : O.53-03,BLOK B, JALAN PERMAS 11, BANDAR BARU PERMAS JAYA, 81750 JOHOR BAHRU, JOHOR DARUL TAKZIM. ")]),e("div",{staticClass:"para12"},[t._v("   TEL : 07 - 386 1165 FAX : 07 - 386 1175 E-MAIL : johor@associatedadjusters.com ")])])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"1"}},[e("div",{staticClass:"para12"},[t._v("SG. PETANI")])]),e(r["a"],[e("div",{staticClass:"para12"},[t._v(" : NO.99A, 1ST FLOOR, JALAN PENGKALAN, TAMAN PEKAN BARU, 08000 SG. PETANI, KEDAH DARUL AMAN. ")]),e("div",{staticClass:"para12"},[t._v("   TEL : 04 - 4210100 FAX : 04 - 4252100. ")])])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"1"}},[e("div",{staticClass:"para12"},[t._v("KUANTAN")])]),e(r["a"],[e("div",{staticClass:"para12"},[t._v(" : NO.25A,2ND FLOOR, JALAN TUN ISMAIL 9, JALAN TUN ISMAIL, 25000 KUANTAN, PAHANG DARUL MAKMUR. ")]),e("div",{staticClass:"para12"},[t._v("   TEL : 09 - 5138001 FAX : 09 - 5148001 ")])])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"1"}},[e("div",{staticClass:"para12"},[t._v("KOTA BHARU")])]),e(r["a"],[e("div",{staticClass:"para12"},[t._v(" : Lot 235, 1st Floor, Kompleks Yakin, Jalan Gajah Mati, 15000 Kota Bahru, Kelantan Darul Naim. ")]),e("div",{staticClass:"para12"},[t._v("  TEL : 09-7482002 FAX : 09-7483008")])])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"1"}},[e("div",{staticClass:"para12"},[t._v("MELAKA:")])]),e(r["a"],[e("div",{staticClass:"para12"},[t._v(" : NO.9-1,Jalan KSB 16, Taman Kota Syahbandar 75200, Melaka ")]),e("div",{staticClass:"para12"},[t._v("  TEL: 06-2644389")])])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"1"}},[e("div",{staticClass:"para12"},[t._v("KOTA KINABALU")])]),e(r["a"],[e("div",{staticClass:"para12"},[t._v(" : B-3-6,3rd Floor, Tanjung Aru Plaza, Jalan Mat Salleh, 88100 Kota Kinabalu, Sabah. ")]),e("div",{staticClass:"para12"},[t._v("   Tel : 088-261 330 Fax : 088-267 3307 ")])])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"1"}},[e("div",{staticClass:"para12"},[t._v("KUCHING")])]),e(r["a"],[e("div",{staticClass:"para12"},[t._v(" : 2ND FLOOR, NO 9 BANGUNAN AL-IDRUS COMMERCIAL CENTRE, JALAN SATOK, 93400 KUCHING SARAWAK. ")]),e("div",{staticClass:"para12"},[t._v("  Tel : 082-236330 Fax : 082-237330")])])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"1"}},[e("div",{staticClass:"para12"},[t._v("IPOH")])]),e(r["a"],[e("div",{staticClass:"para12"},[t._v(" : No.3B GreenTown Utama Jalan Dato Seri Ahmad Said,30450, Ipoh Perak. ")]),e("div",{staticClass:"para12"},[t._v("  Tel : 05-241 13580")])])],1),e(o["a"],{attrs:{"no-gutters":""}},[e(r["a"],{attrs:{cols:"1"}},[e("div",{staticClass:"para12"},[t._v("PENANG")])]),e(r["a"],[e("div",{staticClass:"para12"},[t._v(" : No.88-01-03 Second Floor, Elite Commercial Centre, Jalan Jelutong, 11600 Georgetown Penang. ")]),e("div",{staticClass:"para12"},[t._v("  Tel : 04-288 9100")])])],1)],2),e("br")])])],1)},u=[],f=(a("e9f5"),a("910d"),function(){var t=this,e=t._self._c;return e(s["a"],{staticClass:"success",attrs:{small:"",tile:""},on:{mousedown:t.downloadFile}},[t._v("Download")])}),m=[],p=a("d67e"),v=a.n(p),g={props:["dom","name"],methods:{downloadFile(){const t=this,e=document.querySelector(t.dom);var a={margin:15,filename:t.name};v()().from(e).set(a).save()}}},C=g,b=a("2877"),S=Object(b["a"])(C,f,m,!1,null,null,null),_=S.exports,D=a("c1df"),y=a.n(D),A={name:"acknowledgement",props:["casefile","refType","subRefTypes","insurer","branches","states"],components:{DownloadButton:_},data(){return{acknowledgement:!1}},computed:{vehicleNumber(){return this.casefile.vehicleNo}},methods:{moment:function(){return y()()},yearOnly(t){return y()(t).format("YY")},formatDate:function(t){return y()(t).format("DD/MM/YYYY")},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterStates(t){return this.states.filter(e=>e.id===t)},closeDownloadAck(){this.acknowledgement=!1,this.$nextTick(()=>{})}}},x=A,k=(a("208e"),Object(b["a"])(x,h,u,!1,null,"58302cb4",null));e["a"]=k.exports},5494:function(t,e,a){"use strict";var s=a("83ab"),i=a("e330"),r=a("edd0"),l=URLSearchParams.prototype,c=i(l.forEach);s&&!("size"in l)&&r(l,"size",{get:function(){var t=0;return c(this,(function(){t++})),t},configurable:!0,enumerable:!0})},5803:function(t,e,a){},"732e":function(t,e,a){"use strict";a("2122")},"7a6a":function(t,e,a){},"7d58":function(t,e,a){},"7e1b":function(t,e,a){"use strict";var s=a("c427");class i{upload(t,e){return s["a"].post("/docs/upload",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e})}uploadPhoto(t,e){let a=new FormData;return a.append("file",t),s["a"].post("/members/upload",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e})}uploadExcel(t,e){let a=new FormData;return a.append("file",t),s["a"].post("/dropboxfiles/upload",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e})}getFiles(){return s["a"].get("../docs")}getPhotos(){return s["a"].get("../files")}}e["a"]=new i},"88a7":function(t,e,a){"use strict";var s=a("cb2d"),i=a("e330"),r=a("577e"),l=a("d6d6"),c=URLSearchParams,n=c.prototype,o=i(n.append),d=i(n["delete"]),h=i(n.forEach),u=i([].push),f=new c("a=1&a=2&b=3");f["delete"]("a",1),f["delete"]("b",void 0),f+""!=="a=2"&&s(n,"delete",(function(t){var e=arguments.length,a=e<2?void 0:arguments[1];if(e&&void 0===a)return d(this,t);var s=[];h(this,(function(t,e){u(s,{key:e,value:t})})),l(e,1);var i,c=r(t),n=r(a),f=0,m=0,p=!1,v=s.length;while(f<v)i=s[f++],p||i.key===c?(p=!0,d(this,i.key)):m++;while(m<v)i=s[m++],i.key===c&&i.value===n||o(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},a8b4:function(t,e,a){"use strict";a("fadd")},b1fa:function(t,e,a){},b762:function(t,e,a){"use strict";a.r(e);a("14d9"),a("ff44");var s=a("132d"),i=a("a9ad"),r=a("7560"),l=a("f2e7"),c=a("f40d"),n=a("fe6c"),o=a("58df"),d=a("80d2"),h=Object(o["a"])(i["a"],Object(n["b"])(["left","bottom"]),r["a"],l["a"],c["a"]).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes(){return{"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile,...this.themeClasses}},computedBottom(){return this.bottom?"auto":this.computedYOffset},computedLeft(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop(){return this.bottom?this.computedYOffset:"auto"},computedXOffset(){return this.calcPosition(this.offsetX)},computedYOffset(){return this.calcPosition(this.offsetY)},isRtl(){return this.$vuetify.rtl},offset(){return this.overlap?this.dot?8:12:this.dot?2:4},styles(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition(t){return`calc(100% - ${Object(d["h"])(t||this.offset)})`},genBadge(){const t=this.$vuetify.lang,e=this.$attrs["aria-label"]||t.t(this.label),a=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":e,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),s=this.$createElement("span",a,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[s]):s},genBadgeContent(){if(this.dot)return;const t=Object(d["s"])(this,"badge");return t||(this.content?String(this.content):this.icon?this.$createElement(s["a"],this.icon):void 0)},genBadgeWrapper(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render(t){const e=[this.genBadgeWrapper()],a=[Object(d["s"])(this)],{"aria-atomic":s,"aria-label":i,"aria-live":r,role:l,title:c,...n}=this.$attrs;return this.inline&&this.left?a.unshift(e):a.push(e),t("span",{staticClass:"v-badge",attrs:n,class:this.classes},a)}}),u=(a("0467"),a("10d2")),f=a("713a"),m=a("9d26"),p=a("0789"),v=a("e4cd"),g=Object(o["a"])(u["a"],v["a"],l["a"]).extend({name:"v-banner",inheritAttrs:!1,props:{app:Boolean,icon:String,iconColor:String,singleLine:Boolean,sticky:Boolean,value:{type:Boolean,default:!0}},computed:{classes(){return{...u["a"].options.computed.classes.call(this),"v-banner--has-icon":this.hasIcon,"v-banner--is-mobile":this.isMobile,"v-banner--single-line":this.singleLine,"v-banner--sticky":this.isSticky}},hasIcon(){return Boolean(this.icon||this.$slots.icon||this.$scopedSlots.icon)},isSticky(){return this.sticky||this.app},styles(){const t={...u["a"].options.computed.styles.call(this)};if(this.isSticky){const e=this.app?this.$vuetify.application.bar+this.$vuetify.application.top:0;t.top=Object(d["h"])(e),t.position="sticky",t.zIndex=1}return t}},methods:{toggle(){this.isActive=!this.isActive},iconClick(t){this.$emit("click:icon",t)},genIcon(){if(!this.hasIcon)return;let t;return t=this.icon?this.$createElement(m["a"],{props:{color:this.iconColor,size:28}},[this.icon]):Object(d["s"])(this,"icon"),this.$createElement(f["a"],{staticClass:"v-banner__icon",props:{color:this.color,size:40},on:{click:this.iconClick}},[t])},genText(){return this.$createElement("div",{staticClass:"v-banner__text"},Object(d["s"])(this))},genActions(){const t=Object(d["s"])(this,"actions",{dismiss:()=>this.isActive=!1});if(t)return this.$createElement("div",{staticClass:"v-banner__actions"},t)},genContent(){return this.$createElement("div",{staticClass:"v-banner__content"},[this.genIcon(),this.genText()])},genWrapper(){return this.$createElement("div",{staticClass:"v-banner__wrapper"},[this.genContent(),this.genActions()])}},render(t){const e={staticClass:"v-banner",attrs:this.attrs$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};return t(p["a"],[t("div",this.outlined?e:this.setBackgroundColor(this.color,e),[this.genWrapper()])])}}),C=a("8336"),b=a("b0af"),S=a("99d9"),_=a("cc20"),D=a("62ad"),y=a("a523"),A=a("490a"),x=a("0fd9"),k=a("8dd9"),T=a("3129"),E=a("71a3"),R=a("c671"),I=a("fe57"),w=a("aac8"),N=a("9a96"),O=(a("e9f5"),a("a732"),function(){var t,e,a,i,r,l,c=this,n=c._self._c;return n("div",[c.permissionCheckComplete&&c.accessDenied?n(b["a"],{staticClass:"mx-auto my-6 access-denied-card",attrs:{"max-width":"650",elevation:"8"}},[n(g,{staticClass:"banner-top",attrs:{dark:"",color:"error",icon:"mdi-alert-circle"}},[n("span",{staticClass:"text-h5 font-weight-bold"},[c._v("Access Denied")])]),n(S["c"],{staticClass:"pa-5 text-center"},[n(s["a"],{staticClass:"mb-4 access-icon",attrs:{size:"64",color:"error"}},[c._v("mdi-shield-lock")]),n("h2",{staticClass:"text-h5 mb-3 access-title"},[c._v(" You don't have permission to view this case file ")]),n("p",{staticClass:"subtitle-1 mb-4 access-message"},[c._v(" The case you're trying to access (ID: "+c._s(c.$route.params.id)+") may not exist or you don't have the necessary permissions to view it. ")]),n("p",{staticClass:"caption mb-6 grey--text access-hint"},[c._v(" If you believe this is an error, please contact your system administrator. ")]),n("div",{staticClass:"text-center"},[n(C["a"],{staticClass:"px-7 return-button",attrs:{color:"primary","x-large":"",rounded:"",elevation:"2"},on:{click:function(t){return c.$router.push("/home")}}},[n(s["a"],{attrs:{left:""}},[c._v("mdi-home")]),n("span",{staticClass:"button-text"},[c._v("Return to Home")])],1)],1)],1)],1):c.loading?n(T["a"],{staticClass:"mx-auto my-4",attrs:{type:"card, article, actions"}}):!c.permissionCheckComplete||c.accessDenied||c.loading?c._e():n("div",[c.caseState.casefile.id&&c.fileaccess?n(k["a"],{staticClass:"header-section px-6 py-4",attrs:{dark:""}},[n(x["a"],{attrs:{align:"center"}},[n(D["a"],{attrs:{cols:"12",sm:"8"}},[n("div",{staticClass:"d-flex flex-wrap align-center"},[n("h2",{staticClass:"text-h5 font-weight-bold mb-0 text-break"},[c._v(" AA/"+c._s((null===(t=c.filterDept(c.caseState.casefile.refType)[0])||void 0===t?void 0:t.name)||"")+c._s(c.filterSubDept(c.caseState.casefile.subRefType)[0]?"/"+c.filterSubDept(c.caseState.casefile.subRefType)[0].subCode:"")+"/"+c._s(c.caseState.casefile.id)+"/"+c._s(c.yearOnly(c.caseState.casefile.createdAt))+c._s(null!==(e=c.filterBranches(c.caseState.casefile.branch)[0])&&void 0!==e&&e.brCode?"/"+c.filterBranches(c.caseState.casefile.branch)[0].brCode:"")+" ")]),n(_["a"],{staticClass:"status-chip ml-3",attrs:{small:"",color:c.getStatusColorClass}},[n("span",{staticClass:"status-text"},[c._v(" "+c._s((null===(a=c.filterStages(c.caseState.casefile.fileStatus)[0])||void 0===a?void 0:a.name)||"N/A")+" ")])])],1),n("div",{staticClass:"text-subtitle-1 mt-1 opacity-medium text-break"},[c._v(" "+c._s((null===(i=c.filterIns(c.caseState.casefile.insurer)[0])||void 0===i?void 0:i.name)||"N/A")+" "),n("span",{staticClass:"mx-2"},[c._v("•")]),c._v(" "+c._s(null===(r=c.caseState.casefile.vehicleNo)||void 0===r?void 0:r.toUpperCase())+" ")])]),n(D["a"],{staticClass:"text-right d-flex align-center justify-end flex-wrap",attrs:{cols:"12",sm:"4"}},[n("TransferCase",{staticClass:"mr-3",attrs:{approvingManager:c.approvingManager,casefile:c.caseState.casefile,refType:c.refType,subRefTypes:c.subRefTypes,insurer:c.insurer,branches:c.branches,members:c.members,states:c.states,regions:c.regions}}),n("TransferAdj",{staticClass:"mr-3",attrs:{casefile:c.caseState.casefile,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,insurer:c.insurer,management:c.management,states:c.states,regions:c.regions,handlers:c.handlers,members:c.members,adjusters:c.adjusters}}),n("TransferClerk",{staticClass:"mr-3",attrs:{branches:c.branches,management:c.management,insurer:c.insurer,refType:c.refType,subRefTypes:c.subRefTypes,members:c.members,handlers:c.handlers,states:c.states,regions:c.regions,clerks:c.clerks}}),n("CancelCase",{staticClass:"mr-3",attrs:{casefile:c.caseState.casefile,approvingManager:c.approvingManager,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,insurer:c.insurer,management:c.management}}),n("EditCase",{staticClass:"mr-3",attrs:{casefile:c.caseState.casefile,management:c.management,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,handlers:c.handlers,states:c.states,regions:c.regions,stages:c.stages,insurer:c.insurer}}),c.dateDiff?n(_["a"],{staticClass:"purple lighten-3 mr-3",attrs:{outlined:"",small:""}},[c._v(" "+c._s(c.dateDiff(c.moment(c.caseState.casefile.createdAt).format(),c.moment().format()))+" Day(s) ")]):c._e(),n("acknowledgement",{staticClass:"mr-3",attrs:{casefile:c.caseState.casefile,refType:c.refType,subRefTypes:c.subRefTypes,insurer:c.insurer,branches:c.branches,states:c.states}}),n("flag",{staticClass:"d-inline-block flag-icon",attrs:{casefile:c.caseState.casefile}})],1)],1)],1):c._e(),n(y["a"],{staticClass:"pa-0",attrs:{fluid:""}},[c.caseState.casefile.id&&c.fileaccess?n("div",[n(b["a"],{staticClass:"workflow-actions ma-4",attrs:{flat:""}},[n(S["d"],{staticClass:"workflow-title d-flex align-center pb-4"},[n(s["a"],{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[c._v("mdi-ray-start-arrow")]),n("span",{staticClass:"title-text"},[c._v("Available Actions")])],1),n(S["c"],{staticClass:"action-buttons pa-6"},[n(x["a"],{attrs:{justify:"center",align:"start"}},[c.hasAvailableActions.showApplyDoc?n("ApplyDoc",{ref:"applyDoc",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,insurer:c.insurer,management:c.management}}):c._e(),c.hasAvailableActions.showAssignBranch?n("AssignBranch",{ref:"assignBranch",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,insurer:c.insurer,management:c.management,states:c.states,regions:c.regions,handlers:c.handlers,members:c.members}}):c._e(),c.hasAvailableActions.showBranchAccept?n("BranchAccept",{ref:"branchAccept",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,insurer:c.insurer,management:c.management,states:c.states,regions:c.regions,handlers:c.handlers,members:c.members,adjusters:c.adjusters}}):c._e(),c.hasAvailableActions.showAcceptAssignment?n("AcceptAssignment",{ref:"acceptAssignment",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,insurer:c.insurer,members:c.members,handlers:c.handlers,states:c.states},on:{accepted:c.refreshList}}):c._e(),c.hasAvailableActions.showCompleteInvestigation?n("CompleteInvestigation",{ref:"completeInvestigation",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,claims:c.claims,refType:c.refType,branches:c.branches,branch:c.branch,subRefTypes:c.subRefTypes,insurer:c.insurer,clerks:c.clerks,members:c.members,documents:c.documents},on:{"refresh-documents":c.preloadDocuments}}):c._e(),c.hasAvailableActions.showAssignEditor?n("AssignEditor",{ref:"assignEditor",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,branches:c.branches,branch:c.branch,management:c.management,editors:c.editors,refType:c.refType,subRefTypes:c.subRefTypes,insurer:c.insurer,members:c.members}}):c._e(),c.hasAvailableActions.showAcceptEditing?n("AcceptEditing",{ref:"acceptEditing",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile}}):c._e(),c.hasAvailableActions.showCompleteEditing?n("CompleteEditing",{ref:"completeEditing",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,refType:c.refType,branches:c.branches,branch:c.branch,subRefTypes:c.subRefTypes,insurer:c.insurer,clerks:c.clerks,members:c.members}}):c._e(),c.hasAvailableActions.showHoldApproval?n("HoldApproval",{ref:"holdApproval",staticClass:"action-wrapper",attrs:{approvingManager:c.approvingManager}}):c._e(),c.hasAvailableActions.showApprovalReport?n("ApprovalReport",{ref:"approvalReport",staticClass:"action-wrapper",attrs:{holdingManager:c.holdingManager}}):c._e(),c.hasAvailableActions.showReInvestigate?n("ReInvestigate",{ref:"reInvestigate",staticClass:"action-wrapper",attrs:{holdingManager:c.holdingManager}}):c._e(),c.hasAvailableActions.showReEdit?n("ReEdit",{ref:"reEdit",staticClass:"action-wrapper",attrs:{holdingManager:c.holdingManager}}):c._e(),c.hasAvailableActions.showAssignClerk?n("AssignClerk",{ref:"assignClerk",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,branches:c.branches,branch:c.branch,refType:c.refType,subRefTypes:c.subRefTypes,insurer:c.insurer,members:c.members,management:c.management,clerks:c.clerks,documents:c.documents},on:{"refresh-documents":c.preloadDocuments}}):c._e(),c.hasAvailableActions.showAcceptFormatting?n("AcceptFormatting",{ref:"acceptFormatting",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile}}):c._e(),c.hasAvailableActions.showCompleteFormatting?n("CompleteFormatting",{ref:"completeFormatting",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile}}):c._e(),c.hasAvailableActions.showInvoising?n("Invoising",{ref:"invoising",staticClass:"action-wrapper",attrs:{management:c.management}}):c._e(),c.hasAvailableActions.showDispatch?n("Dispatch",{ref:"dispatch",staticClass:"action-wrapper",attrs:{management:c.management}}):c._e(),c.hasAvailableActions.showDoneDispatch?n("DoneDispatch",{ref:"doneDispatch",staticClass:"action-wrapper",attrs:{management:c.management}}):c._e(),c.hasAvailableActions.showClose?n("Close",{ref:"close",staticClass:"action-wrapper",attrs:{management:c.management}}):c._e(),Object.values(c.hasAvailableActions).some(t=>t)?c._e():n(D["a"],{attrs:{cols:"12"}},[n("div",{staticClass:"no-actions text-center pa-6"},[n(s["a"],{attrs:{size:"48",color:"grey lighten-1"}},[c._v("mdi-timer-sand")]),n("h3",{staticClass:"mt-4 grey--text text--darken-1"},[c._v(" Awaiting Next Action ")]),n("p",{staticClass:"subtitle-1 grey--text"},[c._v(" Current Stage: "+c._s((null===(l=c.filterStages(c.caseState.casefile.fileStatus)[0])||void 0===l?void 0:l.name)||"N/A")+" ")])],1)])],1)],1)],1),n(x["a"],[n(I["a"],{staticClass:"mb-5",attrs:{grow:""},model:{value:c.tab,callback:function(t){c.tab=t},expression:"tab"}},[n(N["a"],{staticStyle:{height:"5px"},attrs:{color:"green"}}),n(E["a"],[c._v("Details")]),n(E["a"],[c._v(" Documents "),c.documentsLoading?[n(A["a"],{staticClass:"ml-2",attrs:{indeterminate:"",size:"16",width:"2",color:"success"}})]:n(h,{attrs:{content:c.documentCount||"0",color:"success","offset-x":"5","offset-y":"1"}})],2),n(E["a"],[c._v(" Comments "),c.commentsLoading?[n(A["a"],{staticClass:"ml-2",attrs:{indeterminate:"",size:"16",width:"2",color:"warning"}})]:n(h,{attrs:{content:c.commentCount||"0",color:"warning","offset-x":"5","offset-y":"1"}})],2),n(E["a"],[c._v(" History "),c.historyLoading?[n(A["a"],{staticClass:"ml-2",attrs:{indeterminate:"",size:"16",width:"2",color:"info"}})]:n(h,{attrs:{content:c.historyCount||"0",color:"info","offset-x":"5","offset-y":"1"}})],2),n(E["a"],[c._v("Audit")]),n(E["a"],[c._v("Claims")])],1)],1),n(w["a"],{staticClass:"mt-1",model:{value:c.tab,callback:function(t){c.tab=t},expression:"tab"}},[n(R["a"],[n("DetailTab",{attrs:{adjusters:c.adjusters,members:c.members,editors:c.editors,clerks:c.clerks,branches:c.branches,insurer:c.insurer,handlers:c.handlers,refType:c.refType,subRefTypes:c.subRefTypes,stages:c.stages,states:c.states}})],1),n(R["a"],[n("Documents",{attrs:{casefile:c.caseState.casefile,preloadedDocs:c.documents,loading:c.documentsLoading}})],1),n(R["a"],[n("comments",{attrs:{casefile:c.caseState.casefile,preloadedComments:c.comments,loading:c.commentsLoading},on:{"comment-added":c.handleCommentAdded,"comment-deleted":c.handleCommentDeleted}})],1),n(R["a"],[n("History",{ref:"history",attrs:{branches:c.branches,refType:c.refType,subRefTypes:c.subRefTypes,stages:c.stages,members:c.members,insurer:c.insurer,states:c.states,handlers:c.handlers,preloadedHistory:c.caseHistory,loading:c.historyLoading},on:{"history-count-updated":c.handleHistoryCountUpdated}})],1),n(R["a"],[n("Audit",{attrs:{members:c.members}})],1),n(R["a"],[n("Claims",{attrs:{branches:c.branches,refType:c.refType,subRefTypes:c.subRefTypes,members:c.members}})],1)],1),n(x["a"],[n(D["a"],{attrs:{cols:"12"}},[n(x["a"],{staticClass:"mt-2",attrs:{"no-gutters":""}},[n(D["a"],{attrs:{cols:"12",justify:"center",align:"center"}})],1)],1)],1)],1):c._e()])],1)],1)}),B=[],$=(a("910d"),a("ab43"),a("169a")),j=a("ce7e"),L=a("ce87"),P=a("3a2f"),F=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.acceptEditingDisabled},on:{click:function(e){return t.acceptEditing()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-account-search")]),e("span",{staticClass:"action-text"},[t._v("ACCEPT EDITING")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("ACCEPT EDITING")])]),e($["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:t.dialogAcceptEditing,callback:function(e){t.dialogAcceptEditing=e},expression:"dialogAcceptEditing"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("ACCEPT EDITING")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[e(S["d"],[t._v("I ACCEPT")]),e(j["a"]),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeAcceptEditingDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:t.compAcceptEditing}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},M=[],U=a("f0cc"),H=a("c1df"),G=a.n(H),Y=a("2f62"),V={name:"acceptEditing",props:[],components:{},data(){return{dialogAcceptEditing:!1}},computed:{acceptEditingDisabled(){return!("EDAC"==this.caseState.casefile.fileStatus&&this.caseState.casefile.editor==this.$store.state.auth.user.id)},...Object(Y["c"])(["caseState"])},watch:{acceptEditing(t){t||this.closeAcceptEditingDialog()}},methods:{acceptEditing(){this.dialogAcceptEditing=!0},compAcceptEditing(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="EDI",this.caseState.casefile.dateStartEdi=G()().format()).then(t=>{this.closeAcceptEditingDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.closeAcceptEditingDialog()},closeAcceptEditingDialog(){this.dialogAcceptEditing=!1,this.$nextTick(()=>{})}}},K=V,z=a("2877"),J=Object(z["a"])(K,F,M,!1,null,null,null),W=J.exports,q=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.acceptFormattingDisabled},on:{click:function(e){return t.acceptFormatting()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-account-search")]),e("span",{staticClass:"action-text"},[t._v("ACCEPT FORMATTING")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("ACCEPT FORMATTING")])]),e($["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:t.dialogAcceptFormatting,callback:function(e){t.dialogAcceptFormatting=e},expression:"dialogAcceptFormatting"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("ACCEPT FORMATTING")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[e(S["d"],[t._v("I ACCEPT")]),e(j["a"]),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeAcceptFormattingDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:t.compAcceptFormatting}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},X=[],Q={name:"acceptFormatting",props:[],components:{},data(){return{dialogAcceptFormatting:!1}},computed:{acceptFormattingDisabled(){return!("CLERK"==this.caseState.casefile.fileStatus&&this.caseState.casefile.clerkInCharge==this.$store.state.auth.user.id)},...Object(Y["c"])(["caseState"])},watch:{acceptFormatting(t){t||this.closeAcceptFormattingDialog()}},methods:{acceptFormatting(){this.dialogAcceptFormatting=!0},compAcceptFormatting(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="FOIN",this.caseState.casefile.dateStartFormatting=G()().format()).then(t=>{this.closeAcceptFormattingDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.closeAcceptFormattingDialog()},closeAcceptFormattingDialog(){this.dialogAcceptFormatting=!1,this.$nextTick(()=>{})}}},Z=Q,tt=Object(z["a"])(Z,q,X,!1,null,null,null),et=tt.exports,at=a("5246"),st=a("2fa4"),it=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"primary mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.applyDocDisabled},on:{click:function(e){return t.applyDoc()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-file-document-multiple")]),e("span",{staticClass:"action-text"},[t._v("APPLY DOCUMENT")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("APPLY DOCUMENT")])]),e($["a"],{attrs:{"max-width":"500px"},model:{value:t.dialogApplyDoc,callback:function(e){t.dialogApplyDoc=e},expression:"dialogApplyDoc"}},[e(b["a"],{staticClass:"text-center"},[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("APPLY DOCUMENTS")]),e(S["c"],{staticClass:"mt-3 pa-0"},[t._v(" CASEFILE NUMBER: AA"),t._l(t.filterDept(t.caseState.casefile.refType),(function(a,s){return e("span",{key:s},[t._v("/"+t._s(a.name)),t._l(t.filterSubDept(t.caseState.casefile.subRefType),(function(a,s){return e("span",{key:s},[t._v("/"+t._s(a.subCode))])}))],2)})),t._v("/"+t._s(t.caseState.casefile.id)+"/"+t._s(t.yearOnly(t.caseState.casefile.createdAt))),t._l(t.filterBranches(t.caseState.casefile.branch),(function(a){return e("span",{key:a.id},[t._v("/"+t._s(a.brCode)+" ")])}))],2),e(j["a"]),e(S["a"],[e(st["a"]),e(C["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:function(e){t.dialogApplyDoc=!1}}},[t._v("Cancel")]),e(C["a"],{staticClass:"success",attrs:{small:"",tile:""},on:{click:t.setPendingDoc}},[t._v("OK")]),e(st["a"])],1)],1)],1)],1)},rt=[],lt={name:"applyDoc",props:["management","refType","subRefTypes","branches"],components:{},data(){return{dialogApplyDoc:!1}},computed:{applyDocDisabled(){return!("NEW"==this.caseState.casefile.fileStatus&&this.management)},...Object(Y["c"])(["caseState"])},watch:{applyDoc(t){t||this.closeApplyDoc()}},methods:{moment:function(t){return G()(t)},yearOnly(t){return G()(t).format("YY")},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},applyDoc(){this.dialogApplyDoc=!0},setPendingDoc(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PEND",this.caseState.casefile.applyDocBy=this.$store.state.auth.user.id,this.caseState.casefile.applyDocDate=G()().format()).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.closeApplyDoc()},closeApplyDoc(){this.dialogApplyDoc=!1,this.$nextTick(()=>{})}},mounted(){}},ct=lt,nt=Object(z["a"])(ct,it,rt,!1,null,null,null),ot=nt.exports,dt=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.approvalReportDisabled},on:{click:function(e){return t.approvalReport()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-tag-check")]),e("span",{staticClass:"action-text"},[t._v("APPROVE REPORT")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("APPROVE REPORT")])]),e($["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:t.dialogApprovalReport,callback:function(e){t.dialogApprovalReport=e},expression:"dialogApprovalReport"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("APPROVE REPORT")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%",tile:""}},[e(S["d"],[t._v("I APPROVE")]),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:t.closeApprovalReportDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"success mt-3",attrs:{tile:"",small:""},on:{click:t.compApprovalReport}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},ht=[],ut={name:"approvalReport",props:["holdingManager"],components:{},data(){return{dialogApprovalReport:!1}},computed:{approvalReportDisabled(){return!("HOLD"==this.caseState.casefile.fileStatus&&this.holdingManager)},...Object(Y["c"])(["caseState"])},watch:{approvalReport(t){t||this.closeApprovalReportDialog()}},methods:{approvalReport(){this.dialogApprovalReport=!0},compApprovalReport(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PFORM",this.caseState.casefile.dateOfApproval=G()().format()).then(t=>{this.closeApprovalReportDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.closeApprovalReportDialog()},closeApprovalReportDialog(){this.dialogApprovalReport=!1,this.$nextTick(()=>{})}}},ft=ut,mt=Object(z["a"])(ft,dt,ht,!1,null,null,null),pt=mt.exports,vt=a("c6a6"),gt=a("2e4b"),Ct=a("e449"),bt=a("b974"),St=a("8654"),_t=a("a844"),Dt=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.newPendDisabled},on:{click:function(e){return t.assignBranch()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-file-cabinet")]),e("span",{staticClass:"action-text"},[t._v("ASSIGN BRANCH")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("ASSIGN BRANCH")])]),e($["a"],{attrs:{"max-width":"750px"},model:{value:t.dialogAssignBranch,callback:function(e){t.dialogAssignBranch=e},expression:"dialogAssignBranch"}},[e(b["a"],[e(S["d"],[e("span",{staticClass:"text-h5"},[t._v("ASSIGN BRANCH")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(b["a"],{attrs:{width:"100%"}},[e(S["d"],[t._v("Department")]),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.refType,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select Department","persistent-hint":"",label:"Department"},on:{change:t.handleRefTypeChange},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Department ")]},proxy:!0}]),model:{value:t.caseState.casefile.refType,callback:function(e){t.$set(t.caseState.casefile,"refType",e)},expression:"caseState.casefile.refType"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.availableSubRefTypes,"item-text":"subCode","item-value":"id","no-data-text":"There is no file-Classification option for selected department above","menu-props":{maxHeight:"400"},label:"File-Classification",hint:"Select File-Classification","persistent-hint":""},model:{value:t.caseState.casefile.subRefType,callback:function(e){t.$set(t.caseState.casefile,"subRefType",e)},expression:"caseState.casefile.subRefType"}})],1)],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.branches,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile branch","persistent-hint":""},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Branch ")]},proxy:!0}]),model:{value:t.caseState.casefile.branch,callback:function(e){t.$set(t.caseState.casefile,"branch",e)},expression:"caseState.casefile.branch"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(vt["a"],{attrs:{items:t.insurer,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile insurer","persistent-hint":""},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Insurer ")]},proxy:!0}]),model:{value:t.caseState.casefile.insurer,callback:function(e){t.$set(t.caseState.casefile,"insurer",e)},expression:"caseState.casefile.insurer"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.filterHandler(t.caseState.casefile.insurer),"item-text":"name","item-value":"id","no-data-text":"There is no handler option for selected insurer above","menu-props":{maxHeight:"400"},label:"Claim Handler",hint:"Select Handler","persistent-hint":""},model:{value:t.caseState.casefile.handler,callback:function(e){t.$set(t.caseState.casefile,"handler",e)},expression:"caseState.casefile.handler"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{"item-text":"Insurer's Reference",rules:[t=>!!t||"Insurers reference is required"]},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Insurers Reference ")]},proxy:!0}]),model:{value:t.caseState.casefile.claimNo,callback:function(e){t.$set(t.caseState.casefile,"claimNo",e)},expression:"caseState.casefile.claimNo"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[e("div",[e(Ct["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(St["a"],t._g(t._b({attrs:{value:t.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(e){t.date=null}},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Date Of Assignment ")]},proxy:!0}],null,!0),model:{value:t.caseState.casefile.dateOfAssign,callback:function(e){t.$set(t.caseState.casefile,"dateOfAssign",e)},expression:"caseState.casefile.dateOfAssign"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(gt["a"],{attrs:{value:t.computedDateFormattedMomentjs},on:{change:function(e){t.menu=!1}},model:{value:t.caseState.casefile.dateOfAssign,callback:function(e){t.$set(t.caseState.casefile,"dateOfAssign",e)},expression:"caseState.casefile.dateOfAssign"}})],1)],1)]],2),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{rules:[t=>!!t||"Vehicle Number is required"]},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Vehicle Number ")]},proxy:!0}]),model:{value:t.caseState.casefile.vehicleNo,callback:function(e){t.$set(t.caseState.casefile,"vehicleNo",e)},expression:"caseState.casefile.vehicleNo"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[e("div",[e(Ct["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(St["a"],t._g(t._b({attrs:{value:t.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(e){t.date=null}},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Date Of Loss ")]},proxy:!0}],null,!0),model:{value:t.caseState.casefile.dateOfLoss,callback:function(e){t.$set(t.caseState.casefile,"dateOfLoss",e)},expression:"caseState.casefile.dateOfLoss"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[e(gt["a"],{attrs:{value:t.computedDateFormattedMomentjs},on:{change:function(e){t.menu1=!1}},model:{value:t.caseState.casefile.dateOfLoss,callback:function(e){t.$set(t.caseState.casefile,"dateOfLoss",e)},expression:"caseState.casefile.dateOfLoss"}})],1)],1)]],2),e(b["a"],{attrs:{width:"100%"}},[e(S["d"],[t._v("Place Of Loss")]),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.states,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select State","persistent-hint":"",label:"State"},model:{value:t.caseState.casefile.stateOfLoss,callback:function(e){t.$set(t.caseState.casefile,"stateOfLoss",e)},expression:"caseState.casefile.stateOfLoss"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.filterRegions(t.caseState.casefile.stateOfLoss),"item-text":"name","item-value":"name","no-data-text":"There is no district option for selected state above","menu-props":{maxHeight:"400"},label:"Area Of Loss",hint:"Select District","persistent-hint":""},model:{value:t.caseState.casefile.placeOfLoss,callback:function(e){t.$set(t.caseState.casefile,"placeOfLoss",e)},expression:"caseState.casefile.placeOfLoss"}})],1)],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{label:"Insured Name"},model:{value:t.caseState.casefile.insuredName,callback:function(e){t.$set(t.caseState.casefile,"insuredName",e)},expression:"caseState.casefile.insuredName"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(_t["a"],{attrs:{label:"Insurers Comment"},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Insurers Comment ")]},proxy:!0}]),model:{value:t.caseState.casefile.insComment,callback:function(e){t.$set(t.caseState.casefile,"insComment",e)},expression:"caseState.casefile.insComment"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(st["a"]),e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeAssignBranchDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:t.isAddFileButtonDisabled},on:{click:t.assignBranchSubmit}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},yt=[],At=a("061e"),xt={name:"AssignBranch",props:["branches","branch","management","insurer","refType","subRefTypes","members","handlers","states","regions"],components:{},data(){return{dialogAssignBranch:!1,menu:!1,menu1:!1}},computed:{...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},newPendDisabled(){return!(("NEW"==this.caseState.casefile.fileStatus||"PEND"==this.caseState.casefile.fileStatus)&&this.management)},availableSubRefTypes(){return this.caseState.casefile.subRefType?this.subRefTypes:this.filtersubRefType(this.caseState.casefile.refType)}},watch:{assignBranch(t){t||this.closeAssignBranchDialog()}},methods:{filtersubRefType(t){return this.subRefTypes.filter(e=>e.deptId===t)},filterHandler(t){return this.handlers.filter(e=>e.insId===t)},filterBranchName(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e[0].name},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterRegions(t){return this.regions.filter(e=>e.branchId===t)},filterPicID(t){if(!t)return"TBA";const e=this.refType.filter(e=>e.id===t);return e[0].picID},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},findUserEmail(t){const e=this.members.filter(e=>e.id===t);return e[0]?e[0].email:"sys.admin@associatedadjusters.com"},filterVehiclNo(t){return t?t.toLowerCase().replace(/\s/g,""):"TBA"},assignBranch(){this.dialogAssignBranch=!0},assignBranchSubmit(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.vehicleNo=this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),this.caseState.casefile.fileStatus="BRAC",this.caseState.casefile.assignBranchBy=this.$store.state.auth.user.id,this.caseState.casefile.dateOfReg=G()().format()).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}).then(()=>{const t=this.caseState.casefile.refType;var e={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:this.findUserEmail(this.filterPicID(t)),createdBy:this.$store.state.auth.user.id};At["a"].assignBranch(e).then(t=>{this.closeAssignBranchDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.dataEmail=""}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}),this.closeAssignBranchDialog()},closeAssignBranchDialog(){this.dialogAssignBranch=!1,this.$nextTick(()=>{})},handleRefTypeChange(){this.caseState.casefile.subRefType||(this.caseState.casefile.subRefType=null)}}},kt=xt,Tt=Object(z["a"])(kt,Dt,yt,!1,null,null,null),Et=Tt.exports,Rt=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.assignClerkDisabled},on:{click:function(e){return t.assignClerk()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-format-align-center")]),e("span",{staticClass:"action-text"},[t._v("ASSIGN CLERK FOR FORMATTING")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("ASSIGN CLERK FOR FORMATTING")])]),t.assignClerkDisabled?e("div",{staticClass:"mt-2 text-center"},[e("small",{staticClass:"red--text text--lighten-3"},[t._v(" "+t._s(t.assignClerkDisabledMessage)+" ")]),t.hasEditedReport?t._e():e("div",{staticClass:"mt-1"},[e(C["a"],{staticClass:"check-again-btn",attrs:{"x-small":"",text:"",color:"primary",loading:t.isRefreshing},on:{click:t.refreshDocuments}},[e(s["a"],{attrs:{small:"",left:""}},[t._v("mdi-refresh")]),t._v(" Check Again ")],1)],1)]):t._e(),e($["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:t.dialogAssignClerk,callback:function(e){t.dialogAssignClerk=e},expression:"dialogAssignClerk"}},[e(b["a"],{staticClass:"text-center"},[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("ASSIGN CLERK FOR FORMATTING")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.filteredBranches,"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":""},model:{value:t.branch.brCode,callback:function(e){t.$set(t.branch,"brCode",e)},expression:"branch.brCode"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.filterClerkByBranch(t.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Clerk for the branch above","menu-props":{maxHeight:"400"},label:"BRANCH CLERK / BRANCH MANAGER / CLERK / MANAGER",hint:"Assign Clerk","persistent-hint":""},model:{value:t.currentClerk,callback:function(e){t.currentClerk=e},expression:"currentClerk"}})],1)],1)],1)],1),e(j["a"]),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeAssignClerkDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",disabled:t.isFileButtonDisabled,small:""},on:{click:t.compAssignClerk}},[t._v("Submit")])],1)],1)],1)],1)},It=[],wt={name:"AssignClerk",props:["subRefTypes","branches","branch","insurer","refType","clerks","management","members","documents"],components:{},data(){return{dialogAssignClerk:!1,currentClerk:"",isRefreshing:!1,wasRefreshing:!1}},computed:{filteredBranches(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(t=>t.id===this.caseState.casefile.branch)},hasEditedReport(){return this.documents&&this.documents.some(t=>t.caseId===this.caseState.casefile.id&&3===t.docStageId)},assignClerkDisabled(){return!(("PFORM"==this.caseState.casefile.fileStatus||"PEDI"==this.caseState.casefile.fileStatus)&&this.management&&this.hasEditedReport)},assignClerkDisabledMessage(){return"PFORM"!=this.caseState.casefile.fileStatus&&"PEDI"!=this.caseState.casefile.fileStatus?"Case is not in formatting stage":this.management?this.hasEditedReport?"":'"EDITED REPORTS" has not been uploaded':"You do not have permission to assign clerk"},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!(this.branch.brCode&&this.currentClerk)}},watch:{assignClerk(t){t||this.closeAssignClerkDialog()},documents:{immediate:!0,deep:!0,handler(){if(this.$forceUpdate(),this.wasRefreshing){const t=this.hasEditedReport;this.$store.dispatch("setSnackbar",{showing:!0,text:t?'"EDITED REPORTS" found!':'"EDITED REPORTS" not found',color:t?"success":"warning",timeout:3e3}),this.wasRefreshing=!1}}}},methods:{filterBranchName(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e[0].name},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},findUserEmail(t){const e=this.members.filter(e=>e.id===t);return e[0]?e[0].email:"sys.admin@associatedadjusters.com"},filterClerkByBranch(t){return this.clerks.filter(e=>e.branches.some(e=>e.brCode===t))},assignClerk(){this.dialogAssignClerk=!0},async refreshDocuments(){if(!this.isRefreshing){this.isRefreshing=!0,this.wasRefreshing=!0;try{await this.$emit("refresh-documents"),await new Promise(t=>setTimeout(t,800))}catch(t){console.error("Error checking documents:",t),this.$store.dispatch("setSnackbar",{showing:!0,text:"Error checking documents",color:"error",timeout:3e3}),this.wasRefreshing=!1}finally{this.isRefreshing=!1}}},compAssignClerk(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.clerkInCharge=this.currentClerk,this.caseState.casefile.fileStatus="CLERK",this.caseState.casefile.dateAssignFormatting=G()().format(),this.caseState.casefile.assignClerkBy=this.$store.state.auth.user.id).then(t=>{this.closeAssignClerkDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).then(()=>{var t={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:this.findUserEmail(this.currentClerk),createdBy:this.$store.state.auth.user.id};At["a"].assignClerk(t).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}),this.dataEmail=""}).catch(t=>{console.log(t)}),this.closeAssignClerkDialog()},closeAssignClerkDialog(){this.dialogAssignClerk=!1,this.$nextTick(()=>{})}}},Nt=wt,Ot=(a("a8b4"),Object(z["a"])(Nt,Rt,It,!1,null,"3389537c",null)),Bt=Ot.exports,$t=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.assignEditorDisabled},on:{click:function(e){return t.assignEditor()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-account-edit-outline")]),e("span",{staticClass:"action-text"},[t._v("ASSIGN EDITOR")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("ASSIGN EDITOR")])]),e($["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:t.dialogAssignEditor,callback:function(e){t.dialogAssignEditor=e},expression:"dialogAssignEditor"}},[e(b["a"],{staticClass:"text-center"},[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("ASSIGN EDITOR")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.filteredBranches,"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":""},model:{value:t.branch.brCode,callback:function(e){t.$set(t.branch,"brCode",e)},expression:"branch.brCode"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.filterEditorByBranch(t.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Editor for the branch above","menu-props":{maxHeight:"400"},label:"EDITOR/ BRANCH CLERK / BRANCH MANAGER / CLERK / MANAGER",hint:"Assign Editor","persistent-hint":""},model:{value:t.currentEditor,callback:function(e){t.currentEditor=e},expression:"currentEditor"}})],1)],1)],1)],1),e(j["a"]),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeAssignEditorDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{disabled:t.isAddFileButtonDisabled,tile:"",small:""},on:{click:t.compAssignEditor}},[t._v("Submit")])],1)],1)],1)],1)},jt=[],Lt={name:"AssignEditor",props:["branches","branch","editors","management","insurer","refType","subRefTypes","members"],components:{},data(){return{dialogAssignEditor:!1,currentEditor:""}},computed:{filteredBranches(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(t=>t.id===this.caseState.casefile.branch)},assignEditorDisabled(){return!("PEDI"==this.caseState.casefile.fileStatus&&this.management)},...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.branch.brCode&&this.currentEditor)}},watch:{assignEditor(t){t||this.closeAssignEditorDialog()}},methods:{filterBranchName(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e[0].name},filterBranches(t){return this.branches.filter(e=>e.id===t)},findBrcode(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e.map(t=>t.brCode)},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},findUserEmail(t){const e=this.members.filter(e=>e.id===t);return e[0]?e[0].email:"sys.admin@associatedadjusters.com"},filterEditorByBranch(t){return this.editors.filter(e=>e.branches.some(e=>e.brCode===t))},assignEditor(){this.dialogAssignEditor=!0},compAssignEditor(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.editor=this.currentEditor,this.caseState.casefile.fileStatus="EDAC",this.caseState.casefile.dateOfEdi=G()().format(),this.caseState.casefile.assignEdiBy=this.$store.state.auth.user.id).then(t=>{this.closeAssignEditorDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).then(()=>{var t={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:this.findUserEmail(this.currentEditor),createdBy:this.$store.state.auth.user.id};At["a"].editorAccept(t).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}),this.dataEmail=""}).catch(t=>{console.log(t)}),this.closeAssignEditorDialog()},closeAssignEditorDialog(){this.dialogAssignEditor=!1,this.$nextTick(()=>{})}}},Pt=Lt,Ft=Object(z["a"])(Pt,$t,jt,!1,null,null,null),Mt=Ft.exports,Ut=(a("0160"),Object(o["a"])(r["a"]).extend({name:"v-timeline",provide(){return{timeline:this}},props:{alignTop:Boolean,dense:Boolean,reverse:Boolean},computed:{classes(){return{"v-timeline--align-top":this.alignTop,"v-timeline--dense":this.dense,"v-timeline--reverse":this.reverse,...this.themeClasses}}},render(t){return t("div",{staticClass:"v-timeline",class:this.classes},Object(d["s"])(this))}}));const Ht=Object(o["a"])(i["a"],r["a"]);var Gt=Ht.extend().extend({name:"v-timeline-item",inject:["timeline"],props:{color:{type:String,default:"primary"},fillDot:Boolean,hideDot:Boolean,icon:String,iconColor:String,large:Boolean,left:Boolean,right:Boolean,small:Boolean},computed:{hasIcon(){return!!this.icon||!!this.$slots.icon}},methods:{genBody(){return this.$createElement("div",{staticClass:"v-timeline-item__body"},Object(d["s"])(this))},genIcon(){return Object(d["s"])(this,"icon")||this.$createElement(m["a"],{props:{color:this.iconColor,dark:!this.theme.isDark,small:this.small}},this.icon)},genInnerDot(){const t=this.setBackgroundColor(this.color);return this.$createElement("div",{staticClass:"v-timeline-item__inner-dot",...t},[this.hasIcon&&this.genIcon()])},genDot(){return this.$createElement("div",{staticClass:"v-timeline-item__dot",class:{"v-timeline-item__dot--small":this.small,"v-timeline-item__dot--large":this.large}},[this.genInnerDot()])},genDivider(){const t=[];return this.hideDot||t.push(this.genDot()),this.$createElement("div",{staticClass:"v-timeline-item__divider"},t)},genOpposite(){return this.$createElement("div",{staticClass:"v-timeline-item__opposite"},Object(d["s"])(this,"opposite"))}},render(t){const e=[this.genBody(),this.genDivider()];return this.$slots.opposite&&e.push(this.genOpposite()),t("div",{staticClass:"v-timeline-item",class:{"v-timeline-item--fill-dot":this.fillDot,"v-timeline-item--before":this.timeline.reverse?this.right:this.left,"v-timeline-item--after":this.timeline.reverse?this.left:this.right,...this.themeClasses}},e)}}),Yt=function(){var t=this,e=t._self._c;return e("div",[e(S["d"],{staticClass:"pb-0"},[t._v("CASE AUDIT")]),e(j["a"]),e(y["a"],{staticStyle:{width:"700px"},attrs:{fluid:""}},[e(Ut,{attrs:{dense:t.$vuetify.breakpoint.smAndDown}},[e(Gt,{staticClass:"white--text mb-6",attrs:{"fill-dot":"",color:"success",large:""},scopedSlots:t._u([{key:"icon",fn:function(){return[e("span",[t._v("DAYS")])]},proxy:!0}])}),t.caseState.casefile.createdAt?e(Gt,[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.createdAt))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" CASEFILE CREATED ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" PENDING DOCUMENT APPLICATION / BRANCH ASSIGNING ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.createdBy))+" ")])],1)],1):t._e(),t.caseState.casefile.applyDocDate?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.createdAt).format(),t.moment(t.caseState.casefile.applyDocDate).format()))+" ")]):t._e()]},proxy:!0}],null,!1,1081402888)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.applyDocDate))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" DOCUMENTS APPLIED ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" PENDING BRANCH ASSIGNING ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.applyDocBy))+" ")])],1)],1):t._e(),t.caseState.casefile.dateOfReg?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.createdAt).format(),t.moment(t.caseState.casefile.dateOfReg).format()))+" ")]):t._e()]},proxy:!0}],null,!1,4224438349)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateOfReg))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" ASSIGNED TO BRANCH ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" PENDING BRANCH ACCEPTANCE ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.assignBranchBy))+" ")])],1)],1):t._e(),t.caseState.casefile.dateOfAdj?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateOfReg).format(),t.moment(t.caseState.casefile.dateOfAdj).format()))+" ")]):t._e()]},proxy:!0}],null,!1,1873036266)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateOfAdj))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" BRANCH ACCEPTED ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" ADJUSTER ASSIGNED ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.assignAdjBy))+" ")])],1)],1):t._e(),t.caseState.casefile.dateStartInv?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateOfAdj).format(),t.moment(t.caseState.casefile.dateStartInv).format()))+" ")]):t._e()]},proxy:!0}],null,!1,318801186)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateStartInv))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" ADJUSTER ACCEPTED ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" STARTED INVESTIGATION ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.adjuster))+" ")])],1)],1):t._e(),t.caseState.casefile.dateEndInv?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateStartInv).format(),t.moment(t.caseState.casefile.dateEndInv).format()))+" ")]):t._e()]},proxy:!0}],null,!1,1822802010)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateEndInv))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" INVESTIGATION COMPLETE ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" REPORT SUBMITTED ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.adjuster))+" ")])],1)],1):t._e(),t.caseState.casefile.dateOfEdi?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateEndInv).format(),t.moment(t.caseState.casefile.dateOfEdi).format()))+" ")]):t._e()]},proxy:!0}],null,!1,1969449226)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateOfEdi))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" EDITOR ASSIGNED ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" PENDING EDITING ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.assignEdiBy))+" ")])],1)],1):t._e(),t.caseState.casefile.dateStartEdi?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateOfEdi).format(),t.moment(t.caseState.casefile.dateStartEdi).format()))+" ")]):t._e()]},proxy:!0}],null,!1,2475003964)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateStartEdi))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" EDITOR ACCEPTED ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" EDITING ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.editor))+" ")])],1)],1):t._e(),t.caseState.casefile.dateEndEdi?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateStartEdi).format(),t.moment(t.caseState.casefile.dateEndEdi).format()))+" ")]):t._e()]},proxy:!0}],null,!1,2282619354)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateEndEdi))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" EDITING COMPLETE ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" REPORT SUBMITTED ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.editor))+" ")])],1)],1):t._e(),t.caseState.casefile.dateOfApproval?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateEndEdi).format(),t.moment(t.caseState.casefile.dateOfApproval).format()))+" ")]):t._e()]},proxy:!0}],null,!1,1312873564)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateOfApproval))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" REPORT APPROVED ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" PENDING FORMATTING ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.approvedBy))+" ")])],1)],1):t._e(),t.caseState.casefile.dateAssignFormatting?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateOfApproval).format(),t.moment(t.caseState.casefile.dateAssignFormatting).format()))+" ")]):t._e()]},proxy:!0}],null,!1,287509389)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateAssignFormatting))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" CLERK ASSIGNED ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" PENDING ACCEPTANCE ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.assignClerkBy))+" ")])],1)],1):t._e(),t.caseState.casefile.dateStartFormatting?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateAssignFormatting).format(),t.moment(t.caseState.casefile.dateStartFormatting).format()))+" ")]):t._e()]},proxy:!0}],null,!1,4041730132)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateStartFormatting))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" CLERK ACCEPTED ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" FORMATTING ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.clerkInCharge))+" ")])],1)],1):t._e(),t.caseState.casefile.dateEndFormatting?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateStartFormatting).format(),t.moment(t.caseState.casefile.dateEndFormatting).format()))+" ")]):t._e()]},proxy:!0}],null,!1,2677481882)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateEndFormatting))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" FORMATTING COMPLETE ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" REPORT SUBMITTED ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.clerkInCharge))+" ")])],1)],1):t._e(),t.caseState.casefile.dateFinal?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateEndFormatting).format(),t.moment(t.caseState.casefile.dateFinal).format()))+" ")]):t._e()]},proxy:!0}],null,!1,2137556161)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateFinal))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" INVOISING & FINALISATION ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" PENDING DISPATCH / CLOSURE ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.finalBy))+" ")])],1)],1):t._e(),t.caseState.casefile.dateDispatch?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateFinal).format(),t.moment(t.caseState.casefile.dateDispatch).format()))+" ")]):t._e()]},proxy:!0}],null,!1,671269065)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateDispatch))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" DISPATCH INITIATED ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" PENDING DISPATCH ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.dispatchBy))+" ")])],1)],1):t._e(),t.caseState.casefile.dateClosed?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.dateFinal).format(),t.moment(t.caseState.casefile.dateClosed).format()))+" ")]):t._e()]},proxy:!0}],null,!1,3788649547)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateClosed))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[t._v(" CLOSED ")]),e(S["c"],{staticClass:"caption text-start py-0"},[t._v(" FILE CLOSED ")]),e(S["c"],{staticClass:"caption text-start pt-0"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.closedBy))+" ")])],1)],1):t._e(),t.caseState.casefile.dateOfCancel?e(Gt,{scopedSlots:t._u([{key:"icon",fn:function(){return[t.dateDiff?e("span",{staticClass:"white--text font-italic font-weight-black"},[t._v(t._s(t.dateDiff(t.moment(t.caseState.casefile.createdAt).format(),t.moment(t.caseState.casefile.dateOfCancel).format()))+" ")]):t._e()]},proxy:!0}],null,!1,2883963995)},[e("span",{attrs:{slot:"opposite"},slot:"opposite"},[t._v(" "+t._s(t.formatDate(new Date(t.caseState.casefile.dateOfCancel))))]),e(b["a"],{staticClass:"elevation-2"},[e(S["c"],{staticClass:"text-h6 text-start font-weight-black"},[t._v(" CANCELLED ")]),e(S["c"],{staticClass:"caption text-start"},[t._v(" FILE CANCELLED ")]),e(S["c"],{staticClass:"caption text-start"},[t._v(" - "+t._s(t.getFilteredUserEmail(t.caseState.casefile.cancelBy))+" ")])],1)],1):t._e()],1)],1)],1)},Vt=[],Kt=(a("f665"),{name:"audit",props:["members"],data:()=>({events:[],input:null,nonce:0}),computed:{...Object(Y["c"])(["caseState"]),timeline(){return this.events.slice().reverse()}},methods:{moment:function(t){return G()(t)},dateDiff(t,e){let a=G()(t),s=G()(e),i=G.a.duration(s.diff(a));return Math.round(i.asDays())},formatDate:function(t){return t?G()(t).format("DD/MM/YYYY"):""},filterUser(t){if(!t||!this.members)return[{email:"N/A"}];const e=this.members.filter(e=>e.id===t);return e.length?e:[{email:"N/A"}]},getFilteredUserEmail(t){if(!t||!this.members)return"N/A";const e=this.members.find(e=>e.id===t);return e?e.email:"N/A"}}}),zt=Kt,Jt=Object(z["a"])(zt,Yt,Vt,!1,null,null,null),Wt=Jt.exports,qt=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.assignAdjDisabled},on:{click:function(e){return t.assignAdj()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-account-plus-outline")]),e("span",{staticClass:"action-text"},[t._v("ACCEPT CASE & ASSIGN ADJUSTER")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("ACCEPT CASE & ASSIGN ADJUSTER")])]),e($["a"],{attrs:{"max-width":"500px"},model:{value:t.dialogAdj,callback:function(e){t.dialogAdj=e},expression:"dialogAdj"}},[e(b["a"],{staticClass:"text-center"},[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("ACCEPT CASE & ASSIGN ADJUSTER")])]),e(S["c"],{staticClass:"mt-3 pa-0"},[e(y["a"],[e(x["a"],[e(D["a"],{attrs:{cols:"12"}},[e(S["c"],{staticClass:"mt-3 pa-0"},[t._v(" CHOOSE BRANCH FOLLOWED BY ADJUSTER ")])],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.currentUserBranch(),"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":"",clearable:""},model:{value:t.branch.brCode,callback:function(e){t.$set(t.branch,"brCode",e)},expression:"branch.brCode"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.filterAdjByBranch(t.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Adjuster for the branch above","menu-props":{maxHeight:"400"},label:"ADJUSTERS",hint:"Assign Adjuster","persistent-hint":"",clearable:""},model:{value:t.caseState.casefile.adjuster,callback:function(e){t.$set(t.caseState.casefile,"adjuster",e)},expression:"caseState.casefile.adjuster"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(st["a"]),e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",small:"",dark:""},on:{click:t.closeAdj}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:t.assignAdjRule},on:{click:t.saveAdjuster}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},Xt=[],Qt={name:"branchAccept",props:["branches","management","insurer","refType","subRefTypes","members","handlers","states","regions","adjusters"],components:{},data(){return{dialogAdj:!1,menu:!1,menu1:!1,branch:{name:"",brCode:""}}},computed:{...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},assignAdjRule(){return!(this.branch.brCode&&this.caseState.casefile.adjuster)},computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},assignAdjDisabled(){return!("BRAC"==this.caseState.casefile.fileStatus&&this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK"))}},watch:{assignAdj(t){t||this.closeAdj()}},methods:{currentUserBranch(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(t=>t.id===this.caseState.casefile.branch)},filtersubRefType(t){return this.subRefTypes.filter(e=>e.deptId===t)},filterHandler(t){return this.handlers.filter(e=>e.insId===t)},filterBranchName(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e[0].name},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterRegions(t){return this.regions.filter(e=>e.branchId===t)},filterPicID(t){if(!t)return"TBA";const e=this.refType.filter(e=>e.id===t);return e[0].picID},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},findAdjEmail(t){const e=this.adjusters.filter(e=>e.id===t);return e.map(t=>t.email)||"sys.admin@associatedadjusters.com"},findUserEmail(t){const e=this.members.filter(e=>e.id===t);return e[0]?e[0].email:"sys.admin@associatedadjusters.com"},filterAdjByBranch(t){return this.adjusters.filter(e=>e.branches.some(e=>e.brCode===t))},assignAdj(){this.dialogAdj=!0},saveAdjuster(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="ADAC",this.caseState.casefile.dateOfAdj=G()().format(),this.caseState.casefile.assignAdjBy=this.$store.state.auth.user.id).then(t=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}).then(()=>{const t=this.caseState.casefile.adjuster;var e={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo,recipient:this.findAdjEmail(t),createdBy:this.$store.state.auth.user.id};At["a"].assignAdj(e).then(t=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.dataEmail=""}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}),this.closeAdj()},closeAdj(){this.dialogAdj=!1,this.$nextTick(()=>{})}}},Zt=Qt,te=Object(z["a"])(Zt,qt,Xt,!1,null,null,null),ee=te.exports,ae=a("fde1"),se=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e("span",t._g({},a),[e(C["a"],t._b({staticClass:"mx-1",attrs:{fab:"","x-small":"",color:"red lighten-2",dark:"",disabled:!t.isRealManager||t.isCaseCancelled},on:{click:t.showCancelCaseDialog}},"v-btn",i,!1),[e(s["a"],{attrs:{dark:""}},[t._v("mdi-file-document-remove-outline")])],1)],1)]}}])},[e("span",[t._v("Cancel Case")])]),e($["a"],{attrs:{"max-width":"500px"},model:{value:t.dialogCancelCase,callback:function(e){t.dialogCancelCase=e},expression:"dialogCancelCase"}},[e(b["a"],{staticClass:"text-center"},[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("CANCEL ASSIGNMENT?")]),e(S["c"],{staticClass:"mt-3 pa-0"},[t._v(" CASEFILE NUMBER: AA"),t._l(t.filterDept(t.caseState.casefile.refType),(function(a,s){return e("span",{key:s},[t._v("/"+t._s(a.name)),t._l(t.filtersubRefType(t.caseState.casefile.subRefType),(function(a,s){return e("span",{key:s},[t._v("/"+t._s(a.subCode))])}))],2)})),t._v("/"+t._s(t.caseState.casefile.id)+"/"+t._s(t.yearOnly(t.caseState.casefile.createdAt))),t._l(t.filterBranches(t.caseState.casefile.branch),(function(a){return e("span",{key:a.id},[t._v("/"+t._s(a.brCode)+" ")])}))],2),e(D["a"],{attrs:{cols:"12"}},[e(_t["a"],{staticClass:"subtitle-1",attrs:{solo:"",dense:"",placeholder:"Reason"},model:{value:t.commentData.comment,callback:function(e){t.$set(t.commentData,"comment",e)},expression:"commentData.comment"}})],1),e(j["a"]),e(S["a"],[e(st["a"]),e(C["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:t.closeCancelCase}},[t._v("No")]),e(C["a"],{staticClass:"error",attrs:{small:"",tile:"",disabled:t.isComment},on:{click:t.cancelCaseConfirm}},[t._v("Yes")]),e(st["a"])],1)],1)],1)],1)},ie=[],re=a("e4ba"),le={name:"cancelCase",props:{approvingManager:Boolean,casefile:Object,refType:Array,subRefTypes:Array,insurer:Array,branches:Array,management:Boolean},components:{},data(){return{dialogCancelCase:!1,commentData:{id:null,caseId:null,comment:"",createdBy:""}}},computed:{isComment(){return!this.commentData.comment},isRealManager(){return this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")},isCaseCancelled(){return"CANC"===this.caseState.casefile.fileStatus||"CLO"===this.caseState.casefile.fileStatus},...Object(Y["c"])(["caseState"])},watch:{cancelCase(t){t||this.closeCancelCase()}},methods:{moment:function(t){return G()(t)},yearOnly(t){return G()(t).format("YY")},filterDept(t){return this.refType.filter(e=>e.id===t)},filtersubRefType(t){return this.subRefTypes.filter(e=>e.id===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},showCancelCaseDialog(){this.dialogCancelCase=!0},cancelCase(){this.dialogCancelCase=!0},cancelCaseConfirm(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="CANC",this.caseState.casefile.dateOfCancel=G()().format(),this.caseState.casefile.cancelBy=this.$store.state.auth.user.id).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)});var t={caseId:this.caseState.casefile.id,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};this.commentData.comment&&setTimeout(()=>{re["a"].create(t).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t||toString()})})},2500),this.closeCancelCase()},closeCancelCase(){this.dialogCancelCase=!1,this.$nextTick(()=>{})}}},ce=le,ne=Object(z["a"])(ce,se,ie,!1,null,null,null),oe=ne.exports,de=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"primary mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.closeDisabled},on:{click:function(e){return t.completeClose()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-check-all")]),e("span",{staticClass:"action-text"},[t._v("CLOSE CASE")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("CLOSE CASE")])]),e($["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:t.dialogCompleteClose,callback:function(e){t.dialogCompleteClose=e},expression:"dialogCompleteClose"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("CLOSE CASE")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[e(S["d"],[t._v("Closing case")]),e(j["a"]),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",disabled:t.isFileButtonDisabled,small:""},on:{click:t.compCloseSubmit}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},he=[],ue={name:"dispatch",props:["management"],components:{},data(){return{dialogCompleteClose:!1}},computed:{closeDisabled(){return!("DISP"==this.caseState.casefile.fileStatus&&this.management)},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!this.management}},watch:{completeClose(t){t||this.closeDialog()}},methods:{completeClose(){this.dialogCompleteClose=!0},compCloseSubmit(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="CLO",this.caseState.casefile.dateClosed=G()().format(),this.caseState.casefile.closedBy=this.$store.state.auth.user.id).then(t=>{this.closeDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.closeDialog()},closeDialog(){this.dialogCompleteClose=!1,this.$nextTick(()=>{})}}},fe=ue,me=Object(z["a"])(fe,de,he,!1,null,null,null),pe=me.exports,ve=function(){var t=this,e=t._self._c;return e("div",[e(b["a"],{attrs:{flat:"",id:"comments"}},[e(S["d"],{staticClass:"pb-0"},[t._v("COMMENTS")]),e(j["a"]),e($["a"],{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(b["a"],[e(S["d"],{staticClass:"text-h5"},[t._v("Are you sure you want to delete the comment?")]),e(S["a"],[e(st["a"]),e(C["a"],{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),e(C["a"],{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),e(st["a"])],1)],1)],1),e("div",{staticClass:"d-flex ml-4"},[e("p",[t._v("Comment ("+t._s(t.filterComment(t.comments).length)+")")])]),t._l(t.filterComment(t.comments),(function(a){return e("div",{key:a.id},[e("div",{staticClass:"d-flex mt-2 ml-4"},[e("p",[t._v(t._s(a.comment))])]),e("div",{staticClass:"d-flex caption ml-4 mt-0"},[t._l(t.filterUser(a.createdBy),(function(a){return e("td",{key:a.id,staticClass:"text-left"},[e("strong",[t._v(" "+t._s(a.email))]),t._v(" • ")])})),e("td",[t._v(t._s(t.formatDate(a.createdAt)))]),e("td",[t.management?e(C["a"],{staticClass:"ml-2",attrs:{tile:"","x-small":"",dark:"",color:"red",plain:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v("Delete")]):t._e()],1)],2),e("div",{staticClass:"d-flex ml-4"}),e(j["a"])],1)})),e("div",{staticClass:"d-flex ml-4"},[e(S["c"],{staticClass:"font-weight-black"},[t._v("Leave a comment")])],1),e("div",{staticClass:"d-flex ml-4"},[e(_t["a"],{attrs:{clearable:"",counter:"","auto-grow":"",solo:"",required:"",placeholder:"type in your comment","background-color":"grey lighten-5"},model:{value:t.editedItem.comment,callback:function(e){t.$set(t.editedItem,"comment",e)},expression:"editedItem.comment"}})],1),e(C["a"],{staticClass:"primary d-flex ml-4",attrs:{tile:"","x-small":"",disabled:t.isAddButtonDisabled},on:{click:t.save}},[t._v("Submit")])],2)],1)},ge=[],Ce=a("9df5"),be={name:"comments",props:{casefile:{type:Object,required:!0},preloadedComments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},data(){return{dialogDelete:!1,members:[],management:!1,defaultItem:{id:null,caseId:null,comment:"",createdBy:""},editedIndex:-1,editedItem:{id:null,caseId:null,comment:"",createdBy:""},comments:this.preloadedComments}},computed:{isAddButtonDisabled(){return!this.editedItem.comment}},watch:{dialogDelete(t){t||this.closeDelete()},preloadedComments:{immediate:!0,handler(t){t.length>0&&(this.comments=t)}}},methods:{formatDate:function(t){return G()(t).format("DD/MM/YYYY, h:mm:ss a")},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},filterComment(){return this.comments.filter(t=>t.caseId===this.casefile.id)},filterUser(t){return this.members.filter(e=>e.id===t)},retrieveComments(){re["a"].getAll().then(t=>{this.comments=t.data.filter(t=>t.caseId===this.casefile.id)}).catch(t=>{console.log(t),this.comments=[]})},retrieveUser(){Ce["a"].getAll().then(t=>{this.members=t.data}).catch(t=>{console.log(t)})},refreshList(){this.retrieveComments()},deleteItem(t){this.editedIndex=this.comments.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){re["a"].delete(this.editedItem.id).then(t=>{this.comments=this.comments.filter(t=>t.id!==this.editedItem.id),this.$emit("comment-deleted",this.editedItem.id),this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.closeDelete()},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1)re["a"].update(this.editedItem.id,this.editedItem).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)});else{var t={caseId:this.casefile.id,comment:this.editedItem.comment,createdBy:this.$store.state.auth.user.id};re["a"].create(t).then(t=>{const e=t.data;this.comments=[...this.comments,e],this.editedItem.comment="",this.$emit("comment-added",e),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})})}}},mounted(){this.retrieveComments(),this.checkManagement(),this.retrieveUser()}},Se=be,_e=Object(z["a"])(Se,ve,ge,!1,null,null,null),De=_e.exports,ye=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.completeEditingDisabled},on:{click:function(e){return t.completeEdi()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-alarm-check")]),e("span",{staticClass:"action-text"},[t._v("COMPLETE EDITING")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("COMPLETE EDITING")])]),e($["a"],{attrs:{"max-width":"750px"},model:{value:t.dialogCompleteEdi,callback:function(e){t.dialogCompleteEdi=e},expression:"dialogCompleteEdi"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("COMPLETE EDITING")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[e(S["d"],[t._v("I have completed editing the case report")]),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeCompleteEdiDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:t.compEditing}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},Ae=[],xe={name:"compEditing",props:["branches","insurer","refType","subRefTypes","clerks","members"],components:{},data(){return{dialogCompleteEdi:!1}},computed:{completeEditingDisabled(){return!("EDI"==this.caseState.casefile.fileStatus&&this.caseState.casefile.editor==this.$store.state.auth.user.id)},...Object(Y["c"])(["caseState"])},watch:{completeEdi(t){t||this.closeCompleteEdiDialog()}},methods:{filterBranchName(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e[0].name},filterBranches(t){return this.branches.filter(e=>e.id===t)},findBrcode(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e.map(t=>t.brCode)},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},filterManagerkByBranch(t){const e=this.clerks.filter(e=>e.branches.some(e=>e.brCode==t)&&e.roles.some(t=>"manager"===t.roleCode||"branchmanager"===t.roleCode)&&e.active),a=e.map(t=>t.email);return a},filterPicID(t){if(!t)return"TBA";const e=this.refType.filter(e=>e.id===t);return e[0].picID},findUserEmail(t){const e=this.members.filter(e=>e.id===t);return e[0]?e[0].email:"sys.admin@associatedadjusters.com"},completeEdi(){this.dialogCompleteEdi=!0},compEditing(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PAPP",this.caseState.casefile.dateEndEdi=G()().format()).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).then(()=>{const t=this.caseState.casefile.branch,e=this.filterManagerkByBranch(this.findBrcode(t));var a={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:e,createdBy:this.$store.state.auth.user.id};At["a"].managerApproval(a).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}),this.dataEmail=""}).catch(t=>{console.log(t)}),this.closeCompleteEdiDialog()},closeCompleteEdiDialog(){this.dialogCompleteEdi=!1,this.$nextTick(()=>{})}}},ke=xe,Te=Object(z["a"])(ke,ye,Ae,!1,null,null,null),Ee=Te.exports,Re=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.completeFormattingDisabled},on:{click:function(e){return t.completeFormatting()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-format-align-top")]),e("span",{staticClass:"action-text"},[t._v("COMPLETE FORMATTING")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("COMPLETE FORMATTING")])]),e($["a"],{attrs:{"max-width":"750px"},model:{value:t.dialogCompleteFormatting,callback:function(e){t.dialogCompleteFormatting=e},expression:"dialogCompleteFormatting"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("COMPLETE FORMATTING")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[e(S["d"],[t._v("I have completed formatting the case report.")]),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeCompleteFormattingDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:t.compFormatting}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},Ie=[],we={name:"compFormatting",props:[""],components:{},data(){return{dialogCompleteFormatting:!1}},computed:{completeFormattingDisabled(){return!("FOIN"==this.caseState.casefile.fileStatus&&this.caseState.casefile.clerkInCharge==this.$store.state.auth.user.id)},...Object(Y["c"])(["caseState"])},watch:{completeFormatting(t){t||this.closeCompleteFormattingDialog()}},methods:{completeFormatting(){this.dialogCompleteFormatting=!0},compFormatting(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="INFI",this.caseState.casefile.dateEndFormatting=G()().format()).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}),this.closeCompleteFormattingDialog()},closeCompleteFormattingDialog(){this.dialogCompleteFormatting=!1,this.$nextTick(()=>{})}}},Ne=we,Oe=Object(z["a"])(Ne,Re,Ie,!1,null,null,null),Be=Oe.exports,$e=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"d-flex flex-column"},[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.completeInvestigationDisabled},on:{click:function(e){return t.completeInv()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-account-arrow-right-outline")]),e("span",{staticClass:"action-text"},[t._v("COMPLETE INVESTIGATION")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v(t._s(t.tooltipMessage))])]),t.completeInvestigationDisabled?e("div",{staticClass:"mt-2 text-center"},[e("small",{staticClass:"red--text text--lighten-3"},[t._v(" "+t._s(t.disabledMessage)+" ")]),t.hasAdjusterReport?t._e():e("div",{staticClass:"mt-1"},[e(C["a"],{staticClass:"check-again-btn",attrs:{"x-small":"",text:"",color:"primary",loading:t.isRefreshing},on:{click:t.refreshDocuments}},[e(s["a"],{attrs:{small:"",left:""}},[t._v("mdi-refresh")]),t._v(" Check Again ")],1)],1)]):t._e()],1),e($["a"],{attrs:{"max-width":"750px"},model:{value:t.dialogCompleteInv,callback:function(e){t.dialogCompleteInv=e},expression:"dialogCompleteInv"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("COMPLETE INVESTIGATION")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(S["d"],[t._v("SUBMIT YOUR CLAIM DETAILS BELOW")]),e(b["a"],{staticClass:"mx-auto mt-3 pa-3 text-start",attrs:{width:"100%"}},[e(x["a"],[e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{rules:t.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Travelling / Mileage"},model:{value:t.claim.travMileage,callback:function(e){t.$set(t.claim,"travMileage",e)},expression:"claim.travMileage"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{rules:t.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Additional"},model:{value:t.claim.additional,callback:function(e){t.$set(t.claim,"additional",e)},expression:"claim.additional"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{rules:t.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"SD & Stamps"},model:{value:t.claim.sdAndStamps,callback:function(e){t.$set(t.claim,"sdAndStamps",e)},expression:"claim.sdAndStamps"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{rules:t.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Medical Report"},model:{value:t.claim.medicalReport,callback:function(e){t.$set(t.claim,"medicalReport",e)},expression:"claim.medicalReport"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{rules:t.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Police Document"},model:{value:t.claim.policeDoc,callback:function(e){t.$set(t.claim,"policeDoc",e)},expression:"claim.policeDoc"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{rules:t.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"JPJ Document"},model:{value:t.claim.jpjDoc,callback:function(e){t.$set(t.claim,"jpjDoc",e)},expression:"claim.jpjDoc"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{rules:t.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Miscellaneous"},model:{value:t.claim.misc,callback:function(e){t.$set(t.claim,"misc",e)},expression:"claim.misc"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{rules:t.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Typing"},model:{value:t.claim.typing,callback:function(e){t.$set(t.claim,"typing",e)},expression:"claim.typing"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(st["a"]),e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeCompleteInvDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:t.isAddFileButtonDisabled},on:{click:t.compInvestigation}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},je=[],Le=a("20dd"),Pe={name:"compInvestigation",props:["claims","branches","insurer","refType","subRefTypes","clerks","members","documents"],components:{},data(){return{dialogCompleteInv:!1,rules:[t=>!!t||"This field is required. Only Numbers accepted"],claim:{travMileage:"",additional:"",sdAndStamps:"",medicalReport:"",policeDoc:"",jpjDoc:"",misc:"",typing:""},isRefreshing:!1,wasRefreshing:!1}},computed:{computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},tooltipMessage(){return this.completeInvestigationDisabled?this.disabledMessage:"COMPLETE INVESTIGATION"},disabledMessage(){return"INVE"!==this.caseState.casefile.fileStatus?"Case is not in investigation stage":this.caseState.casefile.adjuster!==this.$store.state.auth.user.id?"You are not assigned as the adjuster":this.hasAdjusterReport?"":"Adjuster Report has not been uploaded"},hasAdjusterReport(){return this.documents.some(t=>t.caseId===this.caseState.casefile.id&&2===t.docStageId)},completeInvestigationDisabled(){return!("INVE"===this.caseState.casefile.fileStatus&&this.caseState.casefile.adjuster===this.$store.state.auth.user.id&&this.hasAdjusterReport)},...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.claim.travMileage&&this.claim.additional&&this.claim.sdAndStamps&&this.claim.medicalReport&&this.claim.policeDoc&&this.claim.jpjDoc&&this.claim.misc&&this.claim.typing)}},watch:{completeInv(t){t||this.closeCompleteInvDialog()},documents:{immediate:!0,deep:!0,handler(){if(this.$forceUpdate(),this.wasRefreshing){const t=this.hasAdjusterReport;this.$store.dispatch("setSnackbar",{showing:!0,text:t?"Adjuster Report found!":"Adjuster Report not found",color:t?"success":"warning",timeout:3e3}),this.wasRefreshing=!1}}}},methods:{filterBranchName(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e[0].name},filterBranches(t){return this.branches.filter(e=>e.id===t)},findBrcode(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e.map(t=>t.brCode)},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},filterManagerkByBranch(t){const e=this.clerks.filter(e=>e.branches.some(e=>e.brCode==t)&&e.roles.some(t=>"manager"===t.roleCode||"branchmanager"===t.roleCode)&&e.active),a=e.map(t=>t.email);return a},filterPicID(t){if(!t)return"TBA";const e=this.refType.filter(e=>e.id===t);return e[0].picID},findUserEmail(t){const e=this.members.filter(e=>e.id===t&&e.active);return e[0]?e[0].email:"sys.admin@associatedadjusters.com"},moment:function(t){return G()(t)},filterHandler(t){return this.handlers.filter(e=>e.id===t)},completeInv(){this.dialogCompleteInv=!0},compInvestigation(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PEDI",this.caseState.casefile.dateEndInv=G()().format()).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString(),timeout:2e3})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}).then(()=>{var t={caseId:this.caseState.casefile.id,adjId:this.$store.state.auth.user.id,travMileage:this.claim.travMileage,additional:this.claim.additional,sdAndStamps:this.claim.sdAndStamps,medicalReport:this.claim.medicalReport,policeDoc:this.claim.policeDoc,jpjDoc:this.claim.jpjDoc,misc:this.claim.misc,typing:this.claim.typing};Le["a"].create(t).then(t=>{this.claims.id=t.data.id,this.closeCompleteInvDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString(),timeout:4e3})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})})}).then(()=>{const t=this.caseState.casefile.branch,e=this.filterManagerkByBranch(this.findBrcode(t)),a=this.caseState.casefile.refType,s=this.findUserEmail(this.filterPicID(a));var i={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:e+","+s,createdBy:this.$store.state.auth.user.id};At["a"].assignEditor(i).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString(),timeout:6e3})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}),this.dataEmail=""}).catch(t=>{console.log(t)}),this.closeCompleteInvDialog()},closeCompleteInvDialog(){this.dialogCompleteInv=!1,this.$nextTick(()=>{})},async refreshDocuments(){if(!this.isRefreshing){this.isRefreshing=!0,this.wasRefreshing=!0;try{await this.$emit("refresh-documents"),await new Promise(t=>setTimeout(t,800))}catch(t){console.error("Error checking documents:",t),this.$store.dispatch("setSnackbar",{showing:!0,text:"Error checking documents",color:"error",timeout:3e3}),this.wasRefreshing=!1}finally{this.isRefreshing=!1}}}}},Fe=Pe,Me=(a("d7a5"),Object(z["a"])(Fe,$e,je,!1,null,"3c3752f6",null)),Ue=Me.exports,He=a("cb28"),Ge=a("cd55"),Ye=a("49e2"),Ve=a("c865"),Ke=a("0393"),ze=a("8860"),Je=a("da13"),We=a("5d23"),qe=a("34c3"),Xe=function(){var t,e,a,i,r,l,c,n,o,d,h,u,f,m,p,v,g,_=this,y=_._self._c;return y("div",{staticClass:"detail-tab"},[y(x["a"],{staticClass:"mb-6"},[y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card",class:_.getStatusColor},[y(S["c"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[_._v("mdi-file-document-outline")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[_._v("Status")]),y("div",{staticClass:"text-h6 white--text"},[_._v(" "+_._s((null===(t=_.filterStages(_.caseState.casefile.fileStatus)[0])||void 0===t?void 0:t.name)||"N/A")+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card primary"},[y(S["c"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[_._v("mdi-office-building")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[_._v("Branch")]),y("div",{staticClass:"text-h6 white--text"},[_._v(" "+_._s(_.filterBranchName(_.caseState.casefile.branch))+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card secondary"},[y(S["c"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[_._v("mdi-account-tie")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[_._v("Adjuster")]),y("div",{staticClass:"text-h6 white--text"},[_._v(" "+_._s((null===(e=_.filterAdj(_.caseState.casefile.adjuster)[0])||void 0===e?void 0:e.username)||"To be assigned")+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card info"},[y(S["c"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[_._v("mdi-pencil")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[_._v("Editor")]),y("div",{staticClass:"text-h6 white--text"},[_._v(" "+_._s((null===(a=_.filterEditor(_.caseState.casefile.editor)[0])||void 0===a?void 0:a.username)||"To be assigned")+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card success"},[y(S["c"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[_._v("mdi-check-decagram")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[_._v("Approver")]),y("div",{staticClass:"text-h6 white--text"},[_._v(" "+_._s((null===(i=_.filterApprover(_.caseState.casefile.approvedBy)[0])||void 0===i?void 0:i.username)||"To be assigned")+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card deep-purple"},[y(S["c"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[_._v("mdi-format-align-justify")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[_._v("Clerk")]),y("div",{staticClass:"text-h6 white--text"},[_._v(" "+_._s((null===(r=_.filterClerk(_.caseState.casefile.clerkInCharge)[0])||void 0===r?void 0:r.username)||"To be assigned")+" ")])])],1)],1)],1)],1),y(Ke["a"],{staticClass:"detail-panels",attrs:{accordion:"",flat:"",hover:"",multiple:""}},[y(Ge["a"],[y(Ve["a"],[y("div",{staticClass:"d-flex align-center justify-space-between w-100"},[y(s["a"],{staticClass:"mr-2",attrs:{color:"primary",size:"24"}},[_._v("mdi-file-document-outline")]),y("span",{staticClass:"panel-title"},[_._v("CASE INFORMATION")])],1)]),y(Ye["a"],[y(x["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ze["a"],{attrs:{dense:""}},[y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-car")])],1),y(We["a"],[y(We["b"],[_._v("Vehicle No.")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(null===(l=_.caseState.casefile.vehicleNo)||void 0===l?void 0:l.toUpperCase())+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-file-document")])],1),y(We["a"],[y(We["b"],[_._v("Our Ref.")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" AA/"+_._s((null===(c=_.filterDept(_.caseState.casefile.refType)[0])||void 0===c?void 0:c.name)||"")+_._s(_.filterSubDept(_.caseState.casefile.subRefType)[0]?"/"+_.filterSubDept(_.caseState.casefile.subRefType)[0].subCode:"")+"/"+_._s(_.caseState.casefile.id)+"/"+_._s(_.yearOnly(_.caseState.casefile.createdAt))+_._s(null!==(n=_.filterBranches(_.caseState.casefile.branch)[0])&&void 0!==n&&n.brCode?"/"+_.filterBranches(_.caseState.casefile.branch)[0].brCode:"")+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-calendar")])],1),y(We["a"],[y(We["b"],[_._v("Date of Loss")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.formatDate(_.caseState.casefile.dateOfLoss))+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-map-marker")])],1),y(We["a"],[y(We["b"],[_._v("Place of Loss")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.placeOfLoss)+", "+_._s(null===(o=_.filterStates(_.caseState.casefile.stateOfLoss)[0])||void 0===o?void 0:o.name)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ze["a"],{attrs:{dense:""}},[y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-file-document-outline")])],1),y(We["a"],[y(We["b"],[_._v("Claim Type")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s((null===(d=_.filterDept(_.caseState.casefile.refType)[0])||void 0===d?void 0:d.name)||"N/A")+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-calendar-check")])],1),y(We["a"],[y(We["b"],[_._v("Assignment Date")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.formatDate(_.caseState.casefile.dateOfAssign))+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-calendar-clock")])],1),y(We["a"],[y(We["b"],[_._v("Acknowledgement Date")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.formatDate(_.caseState.casefile.createdAt))+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-account")])],1),y(We["a"],[y(We["b"],[_._v("Case Creator")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s((null===(h=_.filterUser(_.caseState.casefile.createdBy)[0])||void 0===h?void 0:h.username)||"N/A")+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-domain")])],1),y(We["a"],[y(We["b"],[_._v("Creator Branch")]),y(We["c"],{staticClass:"font-weight-medium"},_._l(_.filterUser(_.caseState.casefile.createdBy),(function(t){return y("span",{key:t.id},_._l(t.branches,(function(t,e){return y("span",{key:e},[_._v(_._s(t.name))])})),0)})),0)],1)],1)],1)],1)],1)],1)],1),y(Ge["a"],[y(Ve["a"],[y("div",{staticClass:"d-flex align-center justify-space-between w-100"},[y(s["a"],{staticClass:"mr-2",attrs:{color:"primary",size:"24"}},[_._v("mdi-account")]),y("span",{staticClass:"panel-title"},[_._v("INSURED DETAILS")])],1)]),y(Ye["a"],[y(x["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ze["a"],{attrs:{dense:""}},[y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-account")])],1),y(We["a"],[y(We["b"],[_._v("Insured Name")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredName)+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-card-account-details")])],1),y(We["a"],[y(We["b"],[_._v("NRIC")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredIC)+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-phone")])],1),y(We["a"],[y(We["b"],[_._v("Tel")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredTel)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ze["a"],{attrs:{dense:""}},[y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-email")])],1),y(We["a"],[y(We["b"],[_._v("Email")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredEmail)+" ")])],1)],1)],1)],1)],1)],1)],1),y(Ge["a"],[y(Ve["a"],[y("div",{staticClass:"d-flex align-center justify-space-between w-100"},[y(s["a"],{staticClass:"mr-2",attrs:{color:"primary",size:"24"}},[_._v("mdi-car-back")]),y("span",{staticClass:"panel-title"},[_._v("INSURED DRIVER DETAILS")])],1)]),y(Ye["a"],[y(x["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ze["a"],{attrs:{dense:""}},[y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-account")])],1),y(We["a"],[y(We["b"],[_._v("Driver Name")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredDriverName)+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-card-account-details")])],1),y(We["a"],[y(We["b"],[_._v("NRIC")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredDriverIc)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ze["a"],{attrs:{dense:""}},[y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-phone")])],1),y(We["a"],[y(We["b"],[_._v("Tel")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredDriverTel)+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-email")])],1),y(We["a"],[y(We["b"],[_._v("Email")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredDriverEmail)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12"}},[y(j["a"],{staticClass:"my-4"}),y("div",{staticClass:"text-subtitle-2 mb-3"},[_._v("Police Report Information")]),y(x["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"4"}},[y(ze["a"],{attrs:{dense:""}},[y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-file-document-outline")])],1),y(We["a"],[y(We["b"],[_._v("Report No.")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.policeReportNo)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"4"}},[y(ze["a"],{attrs:{dense:""}},[y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-calendar")])],1),y(We["a"],[y(We["b"],[_._v("Date")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.formatDate(_.caseState.casefile.policeReportDate))+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"4"}},[y(ze["a"],{attrs:{dense:""}},[y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-clock-outline")])],1),y(We["a"],[y(We["b"],[_._v("Time")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.formatTime(_.caseState.casefile.policeReportDate))+" ")])],1)],1)],1)],1)],1)],1)],1)],1)],1),y(Ge["a"],[y(Ve["a"],[y("div",{staticClass:"d-flex align-center justify-space-between w-100"},[y(s["a"],{staticClass:"mr-2",attrs:{color:"primary",size:"24"}},[_._v("mdi-shield-check")]),y("span",{staticClass:"panel-title"},[_._v("INSURER DETAILS")])],1)]),y(Ye["a"],[y(x["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ze["a"],{attrs:{dense:""}},[y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-office-building")])],1),y(We["a"],[y(We["b"],[_._v("Insurer")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(null===(u=_.filterIns(_.caseState.casefile.insurer)[0])||void 0===u?void 0:u.name)+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-numeric")])],1),y(We["a"],[y(We["b"],[_._v("Claim No.")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.claimNo)+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-file-document")])],1),y(We["a"],[y(We["b"],[_._v("Policy/Cover No")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.policyNo)+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-calendar-range")])],1),y(We["a"],[y(We["b"],[_._v("Coverage")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.formatDate(_.caseState.casefile.coverFrom))+" - "+_._s(_.formatDate(_.caseState.casefile.coverTo))+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ze["a"],{attrs:{dense:""}},[y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-account-tie")])],1),y(We["a"],[y(We["b"],[_._v("Claims Handler")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(null===(f=_.filterHandler(_.caseState.casefile.handler)[0])||void 0===f?void 0:f.name)+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-phone")])],1),y(We["a"],[y(We["b"],[_._v("Tel")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(null===(m=_.filterHandler(_.caseState.casefile.handler)[0])||void 0===m?void 0:m.offTel)+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-cellphone")])],1),y(We["a"],[y(We["b"],[_._v("Mobile")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(null===(p=_.filterHandler(_.caseState.casefile.handler)[0])||void 0===p?void 0:p.mobile)+" ")])],1)],1),y(Je["a"],{attrs:{"two-line":""}},[y(qe["a"],[y(s["a"],[_._v("mdi-email")])],1),y(We["a"],[y(We["b"],[_._v("Email")]),y(We["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(null===(v=_.filterHandler(_.caseState.casefile.handler)[0])||void 0===v?void 0:v.email)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12"}},[y(j["a"],{staticClass:"my-4"}),y(Je["a"],[y(qe["a"],{staticClass:"align-self-start mt-2"},[y(s["a"],[_._v("mdi-comment-text")])],1),y(We["a"],[y(We["b"],[_._v("Insurer's Remarks")]),y(We["c"],{staticClass:"font-weight-medium"},[y("div",{staticClass:"remarks-container"},[y("div",{class:["remarks-text",{"remarks-collapsed":!_.showFullRemarks}]},[_._v(" "+_._s(_.caseState.casefile.insComment)+" ")]),(null===(g=_.caseState.casefile.insComment)||void 0===g?void 0:g.length)>150?y(C["a"],{staticClass:"px-0 mt-1",attrs:{text:"",small:"",color:"primary"},on:{click:function(t){_.showFullRemarks=!_.showFullRemarks}}},[_._v(" "+_._s(_.showFullRemarks?"Show Less":"Show More")+" ")]):_._e()],1)])],1)],1)],1)],1)],1)],1)],1)],1)},Qe=[],Ze={name:"detailTab",props:["adjusters","editors","clerks","branches","insurer","handlers","refType","subRefTypes","members","stages","states"],components:{},data(){return{showFullRemarks:!1}},computed:{...Object(Y["c"])(["caseState"]),getStatusColor(){const t=this.caseState.casefile.fileStatus,e={NEW:"success",PEND:"warning",INVE:"info",COMP:"error"};return e[t]||"grey"}},watch:{},methods:{moment:function(t){return G()(t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},yearOnly(t){return G()(t).format("YY")},filterStages(t){return this.stages.filter(e=>e.stageCode===t)},filterDept(t){return this.refType.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},filterAdj(t){return this.adjusters.filter(e=>e.id===t)},filterEditor(t){return this.editors.filter(e=>e.id===t)},filterApprover(t){return this.members.filter(e=>e.id===t)},filterClerk(t){return this.clerks.filter(e=>e.id===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterStates(t){return this.states.filter(e=>e.id===t)},filterHandler(t){return this.handlers.filter(e=>e.id===t)},filterUser(t){return this.members.filter(e=>e.id===t)},formatDate:function(t){return t?G()(t).format("DD/MM/YYYY"):""},formatTime:function(t){return t?G()(t).format("h:mm:ss a"):""},dateDiff(t,e){let a=G()(t),s=G()(e),i=G.a.duration(s.diff(a));return Math.round(i.asDays())},refreshList(){},filterBranchName(t){if(!t)return"To be assigned";const e=this.branches.find(e=>e.id===t);return e?e.name:"Unknown Branch"}},mounted(){}},ta=Ze,ea=(a("4adb"),Object(z["a"])(ta,Xe,Qe,!1,null,"24cb662a",null)),aa=ea.exports,sa=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.dispatchDisabled},on:{click:function(e){return t.completeDispatch()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-truck")]),e("span",{staticClass:"action-text"},[t._v("DISPATCH")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("DISPATCH")])]),e($["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:t.dialogCompleteDispatch,callback:function(e){t.dialogCompleteDispatch=e},expression:"dialogCompleteDispatch"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("DISPATCH")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[e(S["d"],[t._v("This client requires physical report along with attachments.")]),e(j["a"]),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeDispatchDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",disabled:t.isFileButtonDisabled,small:""},on:{click:t.compDispatchSubmit}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},ia=[],ra={name:"dispatch",props:["management"],components:{},data(){return{dialogCompleteDispatch:!1}},computed:{dispatchDisabled(){return!("DISP"==this.caseState.casefile.fileStatus&&this.management)},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!this.management}},watch:{completeDispatch(t){t||this.closeDispatchDialog()}},methods:{completeDispatch(){this.dialogCompleteDispatch=!0},compDispatchSubmit(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PDISP",this.caseState.casefile.dateDispatch=G()().format(),this.caseState.casefile.dispatchBy=this.$store.state.auth.user.id).then(t=>{this.closeDispatchDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.closeDispatchDialog()},closeDispatchDialog(){this.dialogCompleteDispatch=!1,this.$nextTick(()=>{})}}},la=ra,ca=Object(z["a"])(la,sa,ia,!1,null,null,null),na=ca.exports,oa=a("23a7"),da=a("1f4f"),ha=function(){var t=this,e=t._self._c;return e("div",[e(S["d"],{staticClass:"pb-0"},[t._v("DOCUMENTS")]),e(j["a"]),e(b["a"],{staticClass:"mt-3",attrs:{flat:"",id:"uploadedDocuments"}},[e($["a"],{attrs:{"max-width":"400px"},model:{value:t.dialogDeleteDoc,callback:function(e){t.dialogDeleteDoc=e},expression:"dialogDeleteDoc"}},[e(b["a"],[e(S["d"],{staticClass:"text-h5 grey lighten-2 justify-center"},[t._v(" Confirm Delete ")]),e(S["c"],[e(y["a"],[e(x["a"],[e(D["a"],{attrs:{cols:"12"}},[e("strong",[t._v("File Name:")]),t._v(" "+t._s(t.editedItem.name)+" ")]),e(D["a"],{attrs:{cols:"12"}},[e("strong",[t._v("File Type:")]),t._v(" "+t._s(t.editedItem.Type)+" ")]),e(D["a"],{attrs:{cols:"12"}},[e("strong",[t._v("File Remark:")]),t._v(" "+t._s(t.editedItem.Remark)+" ")])],1)],1)],1),e(S["a"],{staticClass:"justify-center"},[e(C["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:t.closeDeleteDoc}},[t._v("Cancel")]),e(C["a"],{staticClass:"error mt-3",attrs:{small:"",tile:"",outlined:"",color:"white darken-1"},on:{click:t.deleteItemConfirm}},[t._v("Delete")])],1)],1)],1),e("div",{staticClass:"red lighten-5"},[e(x["a"],[e(D["a"],{attrs:{cols:"6"}},[e(S["d"],{staticClass:"justify-center"},[t._v(" INITIAL DOCUMENT(S) ")])],1),e(D["a"],{attrs:{cols:"6"}},[e($["a"],{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[t.shouldShowUploadButton(t.currentStageId)?e(C["a"],t._g(t._b({staticClass:"my-2",attrs:{outlined:"",large:""},on:{click:function(e){return t.openUploadDialog(t.stageId)}}},"v-btn",s,!1),a),[t._v(" UPLOAD DOCUMENTS ")]):t._e()]}}]),model:{value:t.dialogUploadDoc,callback:function(e){t.dialogUploadDoc=e},expression:"dialogUploadDoc"}},[e(b["a"],{attrs:{tile:""}},[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v(" "+t._s(t.dialogTitle)+" ")]),e(S["c"],[e(y["a"],[e(x["a"],[e(D["a"],{attrs:{cols:"12"}},[e(oa["a"],{attrs:{accept:"image/*,.pdf, .doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document","show-size":"","truncate-length":"50",placeholder:"Select Document","prepend-icon":"mdi-camera",label:"Document",name:"file",rules:t.rules},on:{change:t.selectFile},model:{value:t.currentFile,callback:function(e){t.currentFile=e},expression:"currentFile"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{suffix:"required",placeholder:"Select A Type",items:t.selectTypes,clearable:""},model:{value:t.uploads.Type,callback:function(e){t.$set(t.uploads,"Type",e)},expression:"uploads.Type"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{label:"Document Remark",clearable:""},model:{value:t.uploads.Remark,callback:function(e){t.$set(t.uploads,"Remark",e)},expression:"uploads.Remark"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(st["a"]),e(S["a"],[e(C["a"],{attrs:{small:"",tile:"",outlined:""},on:{click:t.closeUploadDialog}},[t._v("Cancel")]),e(C["a"],{staticClass:"success",attrs:{small:"",tile:"",color:"white darken-1",disabled:t.isUploadDocDisabled},on:{click:function(e){return t.uploadDocConfirm(t.currentStageId)}}},[t._v(" Submit ")])],1)],1)],1)],1)],1)],1)],1),t.shouldShowUploadButton(1)?e(C["a"],{staticClass:"my-2",attrs:{outlined:""},on:{click:function(e){return t.openUploadDialog(1)}}},[e(s["a"],{attrs:{left:""}},[t._v("mdi-upload")]),t._v(" UPLOAD ")],1):t._e()],1)],1),t.filterCase(t.documents).length>0?e(b["a"],[e(da["a"],{attrs:{dense:""}},[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("FILE NAME")]),e("th",{staticClass:"text-left"},[t._v("FILE TYPE")]),e("th",{staticClass:"text-left"},[t._v("FILE REMARK")]),e("th",{staticClass:"text-left"},[t._v("UPLOADED BY")]),e("th",{staticClass:"text-left"},[t._v("UPLOADED AT")]),e("th",{staticClass:"text-left"})])]),e("tbody",t._l(t.filterCase(t.documents),(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"text-left"},[e(C["a"],{attrs:{outlined:"","x-small":"",block:""},on:{click:function(e){return t.onClick(a.name)}}},[t._v(t._s(a.name))])],1),e("td",{staticClass:"text-left"},[t._v(" "+t._s(a.Type)+" ")]),e("td",{staticClass:"text-left"},[t._v(t._s(a.Remark))]),t._l(t.filterUser(a.createdBy),(function(a){return e("td",{key:a.id,staticClass:"text-left"},[t._v(" "+t._s(a.username)+" ")])})),e("td",{staticClass:"text-left"},[t._v(t._s(t.formatDate(a.createdAt)))]),e("td",{staticClass:"text-left"},[e(P["a"],{attrs:{bottom:"",transition:"fab-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:r}){return[t.management?e(s["a"],t._g(t._b({attrs:{small:"",color:"red darken-1"},on:{click:function(e){return t.deleteDoc(a)}}},"v-icon",r,!1),i),[t._v(" mdi-trash-can-outline ")]):t._e()]}}],null,!0)},[e("span",[t._v(" delete")])])],1)],2)})),0)])],1):t._e()],1),e("div",{staticClass:"orange lighten-5"},[e(x["a"],[e(D["a"],{attrs:{cols:"6"}},[e(S["d"],{staticClass:"justify-center"},[t._v(" ADJUSTER'S REPORT(S) ")])],1),e(D["a"],{attrs:{cols:"6"}},[t.shouldShowUploadButton(2)?e(C["a"],{staticClass:"my-2",attrs:{outlined:""},on:{click:function(e){return t.openUploadDialog(2)}}},[e(s["a"],{attrs:{left:""}},[t._v("mdi-upload")]),t._v(" UPLOAD ")],1):t._e()],1)],1),t.filterCase1(t.documents).length>0?e(b["a"],[e(da["a"],{attrs:{dense:""}},[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("FILE NAME")]),e("th",{staticClass:"text-left"},[t._v("FILE TYPE")]),e("th",{staticClass:"text-left"},[t._v("FILE REMARK")]),e("th",{staticClass:"text-left"},[t._v("UPLOADED BY")]),e("th",{staticClass:"text-left"},[t._v("UPLOADED AT")]),e("th",{staticClass:"text-left"})])]),e("tbody",t._l(t.filterCase1(t.documents),(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"text-left"},[e(C["a"],{attrs:{outlined:"","x-small":"",block:""},on:{click:function(e){return t.onClick(a.name)}}},[t._v(t._s(a.name))])],1),e("td",{staticClass:"text-left"},[t._v(" "+t._s(a.Type)+" ")]),e("td",{staticClass:"text-left"},[t._v(t._s(a.Remark))]),t._l(t.filterUser(a.createdBy),(function(a){return e("td",{key:a.id,staticClass:"text-left"},[t._v(" "+t._s(a.username)+" ")])})),e("td",{staticClass:"text-left"},[t._v(t._s(t.formatDate(a.createdAt)))]),e("td",{staticClass:"text-left"},[e(P["a"],{attrs:{bottom:"",transition:"fab-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:r}){return[t.management?e(s["a"],t._g(t._b({attrs:{small:"",color:"red darken-1"},on:{click:function(e){return t.deleteDoc(a)}}},"v-icon",r,!1),i),[t._v(" mdi-trash-can-outline ")]):t._e()]}}],null,!0)},[e("span",[t._v(" delete")])])],1)],2)})),0)])],1):t._e()],1),e("div",{staticClass:"yellow lighten-5"},[e(x["a"],[e(D["a"],{attrs:{cols:"6"}},[e(S["d"],{staticClass:"justify-center"},[t._v(" EDITED REPORT(S) ")])],1),e(D["a"],{attrs:{cols:"6"}},[t.shouldShowUploadButton(3)?e(C["a"],{staticClass:"my-2",attrs:{outlined:""},on:{click:function(e){return t.openUploadDialog(3)}}},[e(s["a"],{attrs:{left:""}},[t._v("mdi-upload")]),t._v(" UPLOAD ")],1):t._e()],1)],1),t.filterCase2(t.documents).length>0?e(b["a"],[e(da["a"],{attrs:{dense:""}},[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("FILE NAME")]),e("th",{staticClass:"text-left"},[t._v("FILE TYPE")]),e("th",{staticClass:"text-left"},[t._v("FILE REMARK")]),e("th",{staticClass:"text-left"},[t._v("UPLOADED BY")]),e("th",{staticClass:"text-left"},[t._v("UPLOADED AT")]),e("th",{staticClass:"text-left"})])]),e("tbody",t._l(t.filterCase2(t.documents),(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"text-left"},[e(C["a"],{attrs:{outlined:"","x-small":"",block:""},on:{click:function(e){return t.onClick(a.name)}}},[t._v(t._s(a.name))])],1),e("td",{staticClass:"text-left"},[t._v(" "+t._s(a.Type)+" ")]),e("td",{staticClass:"text-left"},[t._v(t._s(a.Remark))]),t._l(t.filterUser(a.createdBy),(function(a){return e("td",{key:a.id,staticClass:"text-left"},[t._v(" "+t._s(a.username)+" ")])})),e("td",{staticClass:"text-left"},[t._v(t._s(t.formatDate(a.createdAt)))]),e("td",{staticClass:"text-left"},[e(P["a"],{attrs:{bottom:"",transition:"fab-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:r}){return[t.management?e(s["a"],t._g(t._b({attrs:{small:"",color:"red darken-1"},on:{click:function(e){return t.deleteDoc(a)}}},"v-icon",r,!1),i),[t._v(" mdi-trash-can-outline ")]):t._e()]}}],null,!0)},[e("span",[t._v(" delete")])])],1)],2)})),0)])],1):t._e()],1),e("div",{staticClass:"green lighten-5"},[e(x["a"],[e(D["a"],{attrs:{cols:"6"}},[e(S["d"],{staticClass:"justify-center"},[t._v(" FINAL REPORT(S) ")])],1),e(D["a"],{attrs:{cols:"6"}},[t.shouldShowUploadButton(4)?e(C["a"],{staticClass:"my-2",attrs:{outlined:""},on:{click:function(e){return t.openUploadDialog(4)}}},[e(s["a"],{attrs:{left:""}},[t._v("mdi-upload")]),t._v(" UPLOAD ")],1):t._e()],1)],1),t.filterCase3(t.documents).length>0?e(b["a"],[e(da["a"],{attrs:{dense:""}},[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("FILE NAME")]),e("th",{staticClass:"text-left"},[t._v("FILE TYPE")]),e("th",{staticClass:"text-left"},[t._v("FILE REMARK")]),e("th",{staticClass:"text-left"},[t._v("UPLOADED BY")]),e("th",{staticClass:"text-left"},[t._v("UPLOADED AT")]),e("th",{staticClass:"text-left"})])]),e("tbody",t._l(t.filterCase3(t.documents),(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"text-left"},[e(C["a"],{attrs:{outlined:"","x-small":"",block:""},on:{click:function(e){return t.onClick(a.name)}}},[t._v(t._s(a.name))])],1),e("td",{staticClass:"text-left"},[t._v(" "+t._s(a.Type)+" ")]),e("td",{staticClass:"text-left"},[t._v(t._s(a.Remark))]),t._l(t.filterUser(a.createdBy),(function(a){return e("td",{key:a.id,staticClass:"text-left"},[t._v(" "+t._s(a.username)+" ")])})),e("td",{staticClass:"text-left"},[t._v(t._s(t.formatDate(a.createdAt)))]),e("td",{staticClass:"text-left"},[e(P["a"],{attrs:{bottom:"",transition:"fab-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:r}){return[t.management?e(s["a"],t._g(t._b({attrs:{small:"",color:"red darken-1"},on:{click:function(e){return t.deleteDoc(a)}}},"v-icon",r,!1),i),[t._v(" mdi-trash-can-outline ")]):t._e()]}}],null,!0)},[e("span",[t._v(" delete")])])],1)],2)})),0)])],1):t._e()],1)],1)],1)},ua=[],fa=(a("88a7"),a("271a"),a("5494"),a("3c98")),ma=a("7e1b"),pa=a("bc3a"),va=a.n(pa),ga=a("6736"),Ca={name:"documents",props:{casefile:{type:Object,required:!0},preloadedDocs:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},data(){return{currentFile:void 0,progress:0,message:"",management:!1,fileInfos:[],rules:[t=>!t||t.size<4e6||"File size should be less than 4 MB!"],documents:this.preloadedDocs,editedIndex:-1,editedItem:{id:null,caseId:null,docStageId:null,name:"",Type:"",Remark:"",createdBy:null},members:[],selectTypes:["Adjuster Report","Court Documents","Cover Note / Policy","Employment letters","Insurers Instruction","JPJ Report","Medical Report","Other Claim Documents","Police Documents (Full Set)","Police Out-Come","Police Reports","Solicitors Instruction","Statutory Declaration"],uploads:{id:null,caseId:"",name:"",Type:"",Remark:"",createdBy:""},dialogUploadDoc:!1,currentStageId:null,dialogTitle:"",dialogDeleteDoc:!1,dialogDeleteDoc1:!1,dialogDeleteDoc2:!1,dialogDeleteDoc3:!1,UploadAccess:!1,adjUploadAccess:!1,ediUploadAccess:!1}},computed:{isUploadDocDisabled(){return!this.uploads.Type}},watch:{preloadedDocs:{immediate:!0,handler(t){t.length>0&&(this.documents=t)}},uploadDoc(t){t||this.closeUploadDoc()},uploadDoc1(t){t||this.closeUploadDoc1()},uploadDoc2(t){t||this.closeUploadDoc2()},uploadDoc3(t){t||this.closeUploadDoc3()},deleteDoc(t){t||this.closeDeleteDoc()}},methods:{checkUploadAccess(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER"))&&(this.UploadAccess=!0)},checkAdjUploadAccess(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("ADJUSTER"))&&(this.adjUploadAccess=!0)},checkEdiUploadAccess(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("EDITOR"))&&(this.ediUploadAccess=!0)},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},onClick(t){va()({url:`${ga["a"].docsURL}/${t}`,method:"GET",responseType:"blob"}).then(e=>{var a=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=a;var i=t.substr(t.lastIndexOf(".")+1),r=this.casefile.vehicleNo.toUpperCase();s.setAttribute("download",r+"_"+this.casefile.id+"."+i),document.body.appendChild(s),s.click()})},moment:function(t){return G()(t)},formatDate:function(t){return G()(t).format("DD/MM/YYYY, h:mm:ss a")},refreshList(){this.retrieveDocs()},filterCaseFile(){return this.casefile.filter(t=>t.id===this.casefile.id)},filterCase(){return this.documents.filter(t=>t.caseId===this.casefile.id&&1===t.docStageId)},filterCase1(){return this.documents.filter(t=>t.caseId===this.casefile.id&&2===t.docStageId)},filterCase2(){return this.documents.filter(t=>t.caseId===this.casefile.id&&3===t.docStageId)},filterCase3(){return this.documents.filter(t=>t.caseId===this.casefile.id&&4===t.docStageId)},filterUser(t){return this.members.filter(e=>e.id===t)},selectFile(t){this.currentFile=t},retrieveDocs(){fa["a"].getAll().then(t=>{this.documents=t.data}).catch(t=>{console.log(t)})},retrieveUser(){Ce["a"].getAll().then(t=>{this.members=t.data}).catch(t=>{console.log(t)})},deleteDoc(t){this.editedItem=Object.assign({},t),this.dialogDeleteDoc=!0},closeDeleteDoc(){this.dialogDeleteDoc=!1,this.$nextTick(()=>{})},closeDeleteDoc1(){this.dialogDeleteDoc1=!1,this.$nextTick(()=>{})},closeDeleteDoc2(){this.dialogDeleteDoc2=!1,this.$nextTick(()=>{})},closeDeleteDoc3(){this.dialogDeleteDoc3=!1,this.$nextTick(()=>{})},deleteItemConfirm(){fa["a"].delete(this.editedItem.id,this.editedItem.name).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)}),this.closeDeleteDoc()},openUploadDialog(t){switch(this.currentStageId=t,this.dialogUploadDoc=!0,t){case 1:this.dialogTitle="UPLOAD INITIAL DOCUMENT";break;case 2:this.dialogTitle="UPLOAD ADJUSTER'S REPORT";break;case 3:this.dialogTitle="UPLOAD EDITED REPORT";break;case 4:this.dialogTitle="UPLOAD FINAL REPORT";break}},shouldShowUploadButton(t){switch(t){case 1:return this.UploadAccess;case 2:return this.adjUploadAccess;case 3:return this.ediUploadAccess;case 4:return this.UploadAccess;default:return!1}},closeUploadDialog(){this.dialogUploadDoc=!1,this.currentStageId=null,this.$nextTick(()=>{})},uploadDocConfirm(t){if(!this.currentFile)return void this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:"Please select a file!"});const e=new FormData;e.append("file",this.currentFile),e.append("caseId",this.casefile.id),e.append("stageId",t),e.append("userId",this.$store.state.auth.user.id),e.append("type",this.uploads.Type),e.append("remark",this.uploads.Remark),this.message="",ma["a"].upload(e,t=>{this.progress=Math.round(100*t.loaded/t.total)}).then(e=>{const a=e.data.name,s={caseId:this.casefile.id,docStageId:t,name:a,Type:this.uploads.Type,Remark:this.uploads.Remark,createdBy:this.$store.state.auth.user.id};return this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),fa["a"].create(s)}).then(t=>{this.closeUploadDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),this.uploads.Type="",this.uploads.Remark="",this.refreshList(),this.currentFile=void 0}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})})}},mounted(){this.retrieveDocs(),this.retrieveUser(),this.checkManagement(),this.checkUploadAccess(),this.checkAdjUploadAccess(),this.checkEdiUploadAccess()}},ba=Ca,Sa=Object(z["a"])(ba,ha,ua,!1,null,null,null),_a=Sa.exports,Da=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.doneDispatchDisabled},on:{click:function(e){return t.completeDoneDispatch()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-truck-check")]),e("span",{staticClass:"action-text"},[t._v("DONE DISPATCH")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("DONE DISPATCH")])]),e($["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:t.dialogCompleteDoneDispatch,callback:function(e){t.dialogCompleteDoneDispatch=e},expression:"dialogCompleteDoneDispatch"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("DONE DISPATCH")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[e(S["d"],[t._v("The physical report along with attachments are dispatched.")]),e(j["a"]),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeDoneDispatchDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{disabled:t.isFileButtonDisabled,tile:"",small:""},on:{click:t.compDoneDispatchSubmit}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},ya=[],Aa={name:"dispatch",props:["management"],components:{},data(){return{dialogCompleteDoneDispatch:!1}},computed:{doneDispatchDisabled(){return!("PDISP"==this.caseState.casefile.fileStatus&&this.management)},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!this.management}},watch:{completeDoneDispatch(t){t||this.closeDoneDispatchDialog()}},methods:{completeDoneDispatch(){this.dialogCompleteDoneDispatch=!0},compDoneDispatchSubmit(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="CLO",this.caseState.casefile.dateClosed=G()().format(),this.caseState.casefile.closedBy=this.$store.state.auth.user.id).then(t=>{this.closeDoneDispatchDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.closeDoneDispatchDialog()},closeDoneDispatchDialog(){this.dialogCompleteDoneDispatch=!1,this.$nextTick(()=>{})}}},xa=Aa,ka=Object(z["a"])(xa,Da,ya,!1,null,null,null),Ta=ka.exports,Ea=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[t.management&&"CANC"!==t.caseState.casefile.fileStatus&&"CLO"!==t.caseState.casefile.fileStatus?e(C["a"],t._g({staticClass:"mr-1",attrs:{outlined:"",fab:"","x-small":""},on:{click:function(e){return t.editCase()}}},{...a}),[e(s["a"],[t._v("mdi-pencil")])],1):t._e()]}}])},[e("span",[t._v("EDIT FILE")])]),e($["a"],{attrs:{"max-width":"600px",persistent:""},model:{value:t.dialogEditCase,callback:function(e){t.dialogEditCase=e},expression:"dialogEditCase"}},[e(b["a"],{attrs:{tile:""}},[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("EDIT CASEFILE")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(I["a"],{staticClass:"mb-2",attrs:{dark:"","show-arrows":"","background-color":"teal darken-3"},model:{value:t.editTab,callback:function(e){t.editTab=e},expression:"editTab"}},[e(N["a"],{attrs:{color:"teal lighten-3"}}),e(E["a"],[t._v("General")]),e(E["a"],[t._v("Insured")]),e(E["a"],[t._v("Driver")]),e(E["a"],[t._v("Insurer")]),e(E["a"],[t._v("Solicitor")]),e(E["a"],[t._v("Claimant")])],1)],1),e(x["a"],[e(w["a"],{staticClass:"mt-1",model:{value:t.editTab,callback:function(e){t.editTab=e},expression:"editTab"}},[e(R["a"],[e(x["a"],{staticClass:"ma-1"},[e(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[e(x["a"],{staticClass:"ma-1"},[e(S["d"],[t._v("Department")]),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{dense:"",items:t.refType,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select Department","persistent-hint":"",label:"Department"},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Department ")]},proxy:!0}]),model:{value:t.caseState.casefile.refType,callback:function(e){t.$set(t.caseState.casefile,"refType",e)},expression:"caseState.casefile.refType"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{dense:"",items:t.filtersubRefType(t.caseState.casefile.refType),"item-text":"subCode","item-value":"id","no-data-text":"There is no file-Classification option for selected department above","menu-props":{maxHeight:"400"},label:"File-Classification",hint:"Select File-Classification","persistent-hint":""},model:{value:t.caseState.casefile.subRefType,callback:function(e){t.$set(t.caseState.casefile,"subRefType",e)},expression:"caseState.casefile.subRefType"}})],1)],1)],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{dense:"",items:t.branches,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile branch","persistent-hint":"",label:"Branch"},model:{value:t.caseState.casefile.branch,callback:function(e){t.$set(t.caseState.casefile,"branch",e)},expression:"caseState.casefile.branch"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(vt["a"],{attrs:{dense:"",items:t.insurer,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile insurer","persistent-hint":""},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Insurer ")]},proxy:!0}]),model:{value:t.caseState.casefile.insurer,callback:function(e){t.$set(t.caseState.casefile,"insurer",e)},expression:"caseState.casefile.insurer"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{dense:"",items:t.filterHandler(t.caseState.casefile.insurer),"item-text":"name","item-value":"id","no-data-text":"There is no handler option for selected insurer above","menu-props":{maxHeight:"400"},label:"Claim Handler",hint:"Select Handler","persistent-hint":""},model:{value:t.caseState.casefile.handler,callback:function(e){t.$set(t.caseState.casefile,"handler",e)},expression:"caseState.casefile.handler"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"","item-text":"Insurer's Reference",label:"Insurers Reference Number",rules:[t=>!!t||"Insurers reference is required"]},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Insurers Reference ")]},proxy:!0}]),model:{value:t.caseState.casefile.claimNo,callback:function(e){t.$set(t.caseState.casefile,"claimNo",e)},expression:"caseState.casefile.claimNo"}})],1),e(D["a"],{attrs:{cols:"12"}},[[e("div",[e(Ct["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(St["a"],t._g(t._b({attrs:{"persistent-hint":"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(e){t.date=null}},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Date Of Assignment ")]},proxy:!0}],null,!0),model:{value:t.ComputedDateOfAssignEdit,callback:function(e){t.ComputedDateOfAssignEdit=e},expression:"ComputedDateOfAssignEdit"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[e(gt["a"],{on:{change:function(e){t.menu2=!1}},model:{value:t.caseState.casefile.dateOfAssign,callback:function(e){t.$set(t.caseState.casefile,"dateOfAssign",e)},expression:"caseState.casefile.dateOfAssign"}})],1)],1)]],2),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Vehicle Number",hint:"Vehicle Number"},model:{value:t.caseState.casefile.vehicleNo,callback:function(e){t.$set(t.caseState.casefile,"vehicleNo",e)},expression:"caseState.casefile.vehicleNo"}})],1),e(D["a"],{attrs:{cols:"12"}},[[e("div",[e(Ct["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(St["a"],t._g(t._b({attrs:{"prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(e){t.date=null}},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Date Of Loss ")]},proxy:!0}],null,!0),model:{value:t.ComputedDateOfLossEdit,callback:function(e){t.ComputedDateOfLossEdit=e},expression:"ComputedDateOfLossEdit"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu3,callback:function(e){t.menu3=e},expression:"menu3"}},[e(gt["a"],{on:{change:function(e){t.menu3=!1}},model:{value:t.caseState.casefile.dateOfLoss,callback:function(e){t.$set(t.caseState.casefile,"dateOfLoss",e)},expression:"caseState.casefile.dateOfLoss"}})],1)],1)]],2),e(b["a"],{attrs:{tile:""}},[e(x["a"],{staticClass:"ma-1"},[e(S["d"],[t._v("Place Of Loss")]),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{dense:"",items:t.states,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select State","persistent-hint":"",label:"State"},model:{value:t.caseState.casefile.stateOfLoss,callback:function(e){t.$set(t.caseState.casefile,"stateOfLoss",e)},expression:"caseState.casefile.stateOfLoss"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{dense:"",items:t.filterRegions(t.caseState.casefile.stateOfLoss),"item-text":"name","item-value":"name","no-data-text":"There is no district option for selected state above","menu-props":{maxHeight:"400"},label:"Area Of Loss",hint:"Select District","persistent-hint":""},model:{value:t.caseState.casefile.placeOfLoss,callback:function(e){t.$set(t.caseState.casefile,"placeOfLoss",e)},expression:"caseState.casefile.placeOfLoss"}})],1)],1)],1)],1)],1),e(R["a"],[e(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[e(x["a"],{staticClass:"ma-1"},[e(S["d"],[t._v("Insured Details")]),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Insured Name"},model:{value:t.caseState.casefile.insuredName,callback:function(e){t.$set(t.caseState.casefile,"insuredName",e)},expression:"caseState.casefile.insuredName"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Insured IC"},model:{value:t.caseState.casefile.insuredIC,callback:function(e){t.$set(t.caseState.casefile,"insuredIC",e)},expression:"caseState.casefile.insuredIC"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Insured Tel"},model:{value:t.caseState.casefile.insuredTel,callback:function(e){t.$set(t.caseState.casefile,"insuredTel",e)},expression:"caseState.casefile.insuredTel"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Insured Email"},model:{value:t.caseState.casefile.insuredEmail,callback:function(e){t.$set(t.caseState.casefile,"insuredEmail",e)},expression:"caseState.casefile.insuredEmail"}})],1)],1)],1)],1),e(R["a"],[e(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[e(x["a"],{staticClass:"ma-1"},[e(S["d"],[t._v("Insured Driver Details")]),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Insured Driver Name"},model:{value:t.caseState.casefile.insuredDriverName,callback:function(e){t.$set(t.caseState.casefile,"insuredDriverName",e)},expression:"caseState.casefile.insuredDriverName"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Insured Driver IC"},model:{value:t.caseState.casefile.insuredDriverIc,callback:function(e){t.$set(t.caseState.casefile,"insuredDriverIc",e)},expression:"caseState.casefile.insuredDriverIc"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Insured Driver Tel"},model:{value:t.caseState.casefile.insuredDriverTel,callback:function(e){t.$set(t.caseState.casefile,"insuredDriverTel",e)},expression:"caseState.casefile.insuredDriverTel"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Insured Driver Email"},model:{value:t.caseState.casefile.insuredDriverEmail,callback:function(e){t.$set(t.caseState.casefile,"insuredDriverEmail",e)},expression:"caseState.casefile.insuredDriverEmail"}})],1)],1)],1)],1),e(R["a"],[e(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[e(x["a"],{staticClass:"ma-1"},[e(S["d"],[t._v("Insurer Details")]),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Police Report Number"},model:{value:t.caseState.casefile.policeReportNo,callback:function(e){t.$set(t.caseState.casefile,"policeReportNo",e)},expression:"caseState.casefile.policeReportNo"}})],1),e(D["a"],{attrs:{cols:"12"}},[[e("div",[e(Ct["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(St["a"],t._g(t._b({attrs:{"persistent-hint":"","prepend-icon":"mdi-calendar",readonly:"",label:"Police Report Date"},on:{"click:clear":function(e){t.date=null}},model:{value:t.ComputedDateOfPoliceRepotDate,callback:function(e){t.ComputedDateOfPoliceRepotDate=e},expression:"ComputedDateOfPoliceRepotDate"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu4,callback:function(e){t.menu4=e},expression:"menu4"}},[e(gt["a"],{on:{change:function(e){t.menu4=!1}},model:{value:t.caseState.casefile.policeReportDate,callback:function(e){t.$set(t.caseState.casefile,"policeReportDate",e)},expression:"caseState.casefile.policeReportDate"}})],1)],1)]],2),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Policy Number"},model:{value:t.caseState.casefile.policyNo,callback:function(e){t.$set(t.caseState.casefile,"policyNo",e)},expression:"caseState.casefile.policyNo"}})],1),e(D["a"],{attrs:{cols:"12"}},[[e("div",[e(Ct["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(St["a"],t._g(t._b({attrs:{"persistent-hint":"","prepend-icon":"mdi-calendar",readonly:"",label:"Policy Cover From"},on:{"click:clear":function(e){t.date=null}},model:{value:t.ComputedDateOfCoverFrom,callback:function(e){t.ComputedDateOfCoverFrom=e},expression:"ComputedDateOfCoverFrom"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu5,callback:function(e){t.menu5=e},expression:"menu5"}},[e(gt["a"],{on:{change:function(e){t.menu5=!1}},model:{value:t.caseState.casefile.coverFrom,callback:function(e){t.$set(t.caseState.casefile,"coverFrom",e)},expression:"caseState.casefile.coverFrom"}})],1)],1)]],2),e(D["a"],{attrs:{cols:"12"}},[[e("div",[e(Ct["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(St["a"],t._g(t._b({attrs:{"persistent-hint":"","prepend-icon":"mdi-calendar",readonly:"",label:"Policy Cover To"},on:{"click:clear":function(e){t.date=null}},model:{value:t.ComputedDateOfCoverTo,callback:function(e){t.ComputedDateOfCoverTo=e},expression:"ComputedDateOfCoverTo"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu6,callback:function(e){t.menu6=e},expression:"menu6"}},[e(gt["a"],{on:{change:function(e){t.menu6=!1}},model:{value:t.caseState.casefile.coverTo,callback:function(e){t.$set(t.caseState.casefile,"coverTo",e)},expression:"caseState.casefile.coverTo"}})],1)],1)]],2),e(D["a"],{attrs:{cols:"12"}},[e(_t["a"],{attrs:{label:"Insurers Comment"},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Insurers Comment ")]},proxy:!0}]),model:{value:t.caseState.casefile.insComment,callback:function(e){t.$set(t.caseState.casefile,"insComment",e)},expression:"caseState.casefile.insComment"}})],1)],1)],1)],1),e(R["a"],[e(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[e(x["a"],{staticClass:"ma-1"},[e(S["d"],[t._v("Insured Solicitor Details")]),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Insured Solicitor Name"},model:{value:t.caseState.casefile.solicitorName,callback:function(e){t.$set(t.caseState.casefile,"solicitorName",e)},expression:"caseState.casefile.solicitorName"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Insured Solicitor Tel"},model:{value:t.caseState.casefile.solicitorTel,callback:function(e){t.$set(t.caseState.casefile,"solicitorTel",e)},expression:"caseState.casefile.solicitorTel"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Insured Solicitor Email"},model:{value:t.caseState.casefile.solicitorEmail,callback:function(e){t.$set(t.caseState.casefile,"solicitorEmail",e)},expression:"caseState.casefile.solicitorEmail"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Attending Counsel"},model:{value:t.caseState.casefile.counselName,callback:function(e){t.$set(t.caseState.casefile,"counselName",e)},expression:"caseState.casefile.counselName"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Counsel Tel"},model:{value:t.caseState.casefile.counselTel,callback:function(e){t.$set(t.caseState.casefile,"counselTel",e)},expression:"caseState.casefile.counselTel"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Counsel Email"},model:{value:t.caseState.casefile.counselEmail,callback:function(e){t.$set(t.caseState.casefile,"counselEmail",e)},expression:"caseState.casefile.counselEmail"}})],1)],1)],1)],1),e(R["a"],[e(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[e(x["a"],{staticClass:"ma-1"},[e(S["d"],[t._v("Third Party Claimant Details")]),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Third Party Claimant Name"},model:{value:t.caseState.casefile.thirdPartyClaimantName,callback:function(e){t.$set(t.caseState.casefile,"thirdPartyClaimantName",e)},expression:"caseState.casefile.thirdPartyClaimantName"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Third Party Claimant IC"},model:{value:t.caseState.casefile.thirdPartyClaimantIc,callback:function(e){t.$set(t.caseState.casefile,"thirdPartyClaimantIc",e)},expression:"caseState.casefile.thirdPartyClaimantIc"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Third Party Claimant Tel"},model:{value:t.caseState.casefile.thirdPartyClaimantTel,callback:function(e){t.$set(t.caseState.casefile,"thirdPartyClaimantTel",e)},expression:"caseState.casefile.thirdPartyClaimantTel"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Third Party Claimant Email"},model:{value:t.caseState.casefile.thirdPartyClaimantEmail,callback:function(e){t.$set(t.caseState.casefile,"thirdPartyClaimantEmail",e)},expression:"caseState.casefile.thirdPartyClaimantEmail"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Third Party Claimant Vehicle Number"},model:{value:t.caseState.casefile.thirdPartyClaimantVehicleNo,callback:function(e){t.$set(t.caseState.casefile,"thirdPartyClaimantVehicleNo",e)},expression:"\n                          caseState.casefile.thirdPartyClaimantVehicleNo\n                        "}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Third Party Claimant Vehicle Model"},model:{value:t.caseState.casefile.thirdPartyClaimantVehicleModel,callback:function(e){t.$set(t.caseState.casefile,"thirdPartyClaimantVehicleModel",e)},expression:"\n                          caseState.casefile.thirdPartyClaimantVehicleModel\n                        "}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Third Party Claimant Solicitor"},model:{value:t.caseState.casefile.thirdPartyClaimantSolicitor,callback:function(e){t.$set(t.caseState.casefile,"thirdPartyClaimantSolicitor",e)},expression:"\n                          caseState.casefile.thirdPartyClaimantSolicitor\n                        "}})],1),e(D["a"],{attrs:{cols:"12"}},[e(St["a"],{attrs:{dense:"",label:"Third Party Claimant Solicitor Email"},model:{value:t.caseState.casefile.thirdPartyClaimantSolicitorEmail,callback:function(e){t.$set(t.caseState.casefile,"thirdPartyClaimantSolicitorEmail",e)},expression:"\n                          caseState.casefile.thirdPartyClaimantSolicitorEmail\n                        "}})],1)],1)],1)],1)],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(st["a"]),e(C["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:t.closeEditCase}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"success mt-3",attrs:{disabled:t.isEditFileButtonDisabled,small:"",tile:""},on:{click:t.editCasefile}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},Ra=[],Ia={name:"editCase",props:["management","refType","subRefTypes","branches","insurer","handlers","states","regions","stages"],components:{},data(){return{dialogEditCase:!1,menu2:!1,menu3:!1,menu4:!1,menu5:!1,menu6:!1,editTab:null}},computed:{...Object(Y["c"])(["caseState"]),ComputedDateOfAssignEdit(){return this.formatDateMethod(this.caseState.casefile.dateOfAssign)},ComputedDateOfLossEdit(){return this.formatDateMethod(this.caseState.casefile.dateOfLoss)},ComputedDateOfPoliceRepotDate(){return this.formatDateMethod(this.caseState.casefile.policeReportDate)},ComputedDateOfCoverFrom(){return this.formatDateMethod(this.caseState.casefile.coverFrom)},ComputedDateOfCoverTo(){return this.formatDateMethod(this.caseState.casefile.coverTo)},isEditFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.dateOfAssign&&this.caseState.casefile.dateOfLoss)}},watch:{editCase(t){t||this.closeEditCase()}},methods:{moment:function(t){return G()(t)},formatDateMethod(t){return t?G()(t).format("DD/MM/YYYY"):null},yearOnly(t){return G()(t).format("YY")},filterDept(t){return this.refType.filter(e=>e.id===t)},filtersubRefType(t){return this.subRefTypes.filter(e=>e.deptId===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterHandler(t){return this.handlers.filter(e=>e.insId===t)},filterRegions(t){return this.regions.filter(e=>e.branchId===t)},editCase(){this.dialogEditCase=!0},editCasefile(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.vehicleNo=this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,"")).then(t=>{this.closeEditCase(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.closeEditCase()},closeEditCase(){this.dialogEditCase=!1,this.$nextTick(()=>{})}}},wa=Ia,Na=Object(z["a"])(wa,Ea,Ra,!1,null,null,null),Oa=Na.exports,Ba=a("8643"),$a=function(){var t=this,e=t._self._c;return e("div",[e(b["a"],{staticClass:"history-container",attrs:{flat:""}},[e(S["d"],{staticClass:"d-flex align-center pb-2"},[e(s["a"],{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[t._v("mdi-history")]),e("span",{staticClass:"text-h6"},[t._v("Vehicle History")]),e(st["a"]),t.cases.length>1?e(_["a"],{staticClass:"font-weight-medium",attrs:{color:"orange",small:""}},[t._v(" "+t._s(t.cases.length-1)+" Previous Cases ")]):t._e()],1),e(j["a"]),t.loading?e("div",{staticClass:"pa-4"},t._l(3,(function(t){return e(T["a"],{key:t,staticClass:"mb-4",attrs:{type:"list-item-two-line"}})})),1):!t.cases.length||t.cases.length<=1?e(S["c"],{staticClass:"text-center pa-8"},[e(s["a"],{attrs:{size:"64",color:"grey lighten-1"}},[t._v("mdi-car-off")]),e("h3",{staticClass:"mt-4 grey--text text--darken-1"},[t._v("No Previous Cases Found")]),e("p",{staticClass:"subtitle-1 grey--text"},[t._v(" This is the first case for this vehicle ")])],1):e(S["c"],{staticClass:"pa-4"},[e(x["a"],t._l(t.filteredCases,(function(a){return e(D["a"],{key:a.id,attrs:{cols:"12",sm:"6",md:"4"}},[e(b["a"],{staticClass:"history-card",attrs:{outlined:"",hover:""},on:{click:function(e){return t.showDetail(a)}}},[e(S["c"],[e("div",{staticClass:"d-flex align-center mb-2"},[e(s["a"],{staticClass:"mr-2",attrs:{color:"primary",small:""}},[t._v("mdi-file-document-outline")]),e("span",{staticClass:"text-subtitle-2"},[t._v("AA/"+t._s(t.getRefNumber(a)))])],1),e("div",{staticClass:"d-flex align-center"},[e(s["a"],{staticClass:"mr-2",attrs:{small:"",color:"grey"}},[t._v("mdi-calendar")]),e("span",{staticClass:"caption grey--text"},[t._v(t._s(t.formatDate(a.createdAt)))])],1),e(_["a"],{staticClass:"mt-2",attrs:{"x-small":"",color:t.getStatusColor(a.fileStatus),"text-color":"white"}},[t._v(" "+t._s(t.getStatusText(a.fileStatus))+" ")])],1)],1)],1)})),1)],1)],1),e($["a"],{attrs:{width:"700"},model:{value:t.dialogDetail,callback:function(e){t.dialogDetail=e},expression:"dialogDetail"}},[e(b["a"],[e(S["a"],[e(st["a"]),e(C["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialogDetail=!1}}},[t._v(" Close ")])],1),e(S["d"],[e(st["a"]),e("span",{staticClass:"caption text-decoration-overline"},[t._v("Details of AA/"),t._l(t.filterDept(t.caseDetail.refType),(function(a,s){return e("span",{key:s},[t._v(t._s(a.name)+" "),t._l(t.filterSubDept(t.caseDetail.subRefType),(function(a,s){return e("span",{key:s},[t._v("/"+t._s(a.subCode))])}))],2)})),t._v("/"+t._s(t.caseDetail.id)+"/"+t._s(t.yearOnly(t.caseDetail.createdAt))+"/"),t._l(t.filterBranches(t.caseDetail.branch),(function(a){return e("span",{key:a.id},[t._v(t._s(a.brCode)+" ")])}))],2)],1),e(da["a"],{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-center font-weight-black"},[t._v("Name")]),e("th",{staticClass:"text-left font-weight-black"},[t._v("Description")])])]),e("tbody",[t.caseDetail.fileStatus?e("tr",[e("td",{staticClass:"text-center"},[t._v("Status")]),t._l(t.filterStages(t.caseDetail.fileStatus),(function(a){return e("td",{key:a.id,staticClass:"text-left font-italic font-weight-black"},[t._v(" "+t._s(a.name)+" ")])}))],2):t._e(),t.caseDetail.createdAt?e("tr",[e("td",{staticClass:"text-center"},[t._v("Created On:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.createdAt))+" ")])]):t._e(),t.caseDetail.createdAt?e("tr",[e("td",{staticClass:"text-center"},[t._v("Created By:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.createdBy))+" ")])]):t._e(),t.caseDetail.transferDate?e("tr",[e("td",{staticClass:"text-center"},[t._v("Transfer Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.transferDate))+" ")])]):t._e(),t.caseDetail.transferDate?e("tr",[e("td",{staticClass:"text-center"},[t._v("Transfered By:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.transferBy))+" ")])]):t._e(),t.caseDetail.dateOfCancel?e("tr",[e("td",{staticClass:"text-center"},[t._v("Cancellation Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateOfCancel))+" ")])]):t._e(),t.caseDetail.dateOfCancel?e("tr",[e("td",{staticClass:"text-center"},[t._v("Cancellation By:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.cancelBy))+" ")])]):t._e(),t.caseDetail.caseFrom?e("tr",[e("td",{staticClass:"text-center"},[t._v("Type")]),e("td",{staticClass:"text-left font-italic"},[t._v(t._s(t.caseDetail.caseFrom))])]):t._e(),t.caseDetail.refType?e("tr",[e("td",{staticClass:"text-center"},[t._v("Department")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterDept(t.caseDetail.refType)[0].name)+", ("+t._s(t.filterDept(t.caseDetail.refType)[0].description)+") ")])]):t._e(),t.caseDetail.subRefType?e("tr",[e("td",{staticClass:"text-center"},[t._v("File Classification")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterSubDept(t.caseDetail.subRefType)[0].subCode)+" ")])]):t._e(),t.caseDetail.branch?e("tr",[e("td",{staticClass:"text-center"},[t._v("Branch")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterBranches(t.caseDetail.branch)[0].brCode)+", ("+t._s(t.filterBranches(t.caseDetail.branch)[0].name)+") ")])]):t._e(),t.caseDetail.insurer?e("tr",[e("td",{staticClass:"text-center"},[t._v("Insurer")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterIns(t.caseDetail.insurer)[0].name)+" ")])]):t._e(),t.caseDetail.handler?e("tr",[e("td",{staticClass:"text-center"},[t._v("Handler")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterHandler(t.caseDetail.handler)[0].name)+", ("+t._s(t.filterHandler(t.caseDetail.handler)[0].email)+") ")])]):t._e(),t.caseDetail.adjuster?e("tr",[e("td",{staticClass:"text-center"},[t._v("Adjuster")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.adjuster))+" ")])]):t._e(),t.caseDetail.editor?e("tr",[e("td",{staticClass:"text-center"},[t._v("Editor")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.editor))+" ")])]):t._e(),t.caseDetail.clerkInCharge?e("tr",[e("td",{staticClass:"text-center"},[t._v("Clerk In Charge")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.clerkInCharge))+" ")])]):t._e(),t.caseDetail.claimNo?e("tr",[e("td",{staticClass:"text-center"},[t._v("Insurer's Ref No.")]),e("td",{staticClass:"text-left font-italic"},[t._v(t._s(t.caseDetail.claimNo))])]):t._e(),t.caseDetail.vehicleNo?e("tr",[e("td",{staticClass:"text-center"},[t._v("Vehicle No.")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.vehicleNo.toUpperCase())+" ")])]):t._e(),t.caseDetail.dateOfAssign?e("tr",[e("td",{staticClass:"text-center"},[t._v("Date Of Assignment")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateOfAssign))+" ")])]):t._e(),t.caseDetail.dateOfLoss?e("tr",[e("td",{staticClass:"text-center"},[t._v("Date Of Loss")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateOfLoss))+" ")])]):t._e(),t.caseDetail.stateOfLoss?e("tr",[e("td",{staticClass:"text-center"},[t._v("State Of Loss")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterStates(t.caseDetail.stateOfLoss)[0].stCode)+", ("+t._s(t.filterStates(t.caseDetail.stateOfLoss)[0].name)+") ")])]):t._e(),t.caseDetail.placeOfLoss?e("tr",[e("td",{staticClass:"text-center"},[t._v("Place Of Loss")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.placeOfLoss)+" ")])]):t._e(),t.caseDetail.insuredName?e("tr",[e("td",{staticClass:"text-center"},[t._v("Insured Name")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.insuredName)+" ")])]):t._e(),t.caseDetail.insuredIC?e("tr",[e("td",{staticClass:"text-center"},[t._v("Insured IC No.")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.insuredIC)+" ")])]):t._e(),t.caseDetail.InsuredTel?e("tr",[e("td",{staticClass:"text-center"},[t._v("Insured Tel. No.")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.InsuredTel)+" ")])]):t._e(),t.caseDetail.insuredEmail?e("tr",[e("td",{staticClass:"text-center"},[t._v("Insured Email")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.insuredEmail)+" ")])]):t._e(),t.caseDetail.insuredDriverName?e("tr",[e("td",{staticClass:"text-center"},[t._v("Insured Driver Name")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.insuredDriverName)+" ")])]):t._e(),t.caseDetail.insuredDriverIc?e("tr",[e("td",{staticClass:"text-center"},[t._v("Insured Driver IC No.")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.insuredDriverIc)+" ")])]):t._e(),t.caseDetail.insuredDriverEmail?e("tr",[e("td",{staticClass:"text-center"},[t._v("Insured Driver Email")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.insuredDriverEmail)+" ")])]):t._e(),t.caseDetail.policeReportNo?e("tr",[e("td",{staticClass:"text-center"},[t._v("Police Report No.")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.policeReportNo)+" ")])]):t._e(),t.caseDetail.policeReportDate?e("tr",[e("td",{staticClass:"text-center"},[t._v("Police Report Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.policeReportDate)+" ")])]):t._e(),t.caseDetail.policyNo?e("tr",[e("td",{staticClass:"text-center"},[t._v("Policy Number")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.policyNo)+" ")])]):t._e(),t.caseDetail.coverFrom||t.caseDetail.coverTo?e("tr",[e("td",{staticClass:"text-center"},[t._v("Cover Period")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.coverFrom))+" - "+t._s(t.formatDate(t.caseDetail.coverTo))+" ")])]):t._e(),t.caseDetail.insComment?e("tr",[e("td",{staticClass:"text-center"},[t._v("Insurer's Comment")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.insComment)+" ")])]):t._e(),t.caseDetail.solicitorName?e("tr",[e("td",{staticClass:"text-center"},[t._v("Solicitor Name")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.solicitorName)+" ")])]):t._e(),t.caseDetail.solicitorTel?e("tr",[e("td",{staticClass:"text-center"},[t._v("Solicitor Tel.")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.solicitorTel)+" ")])]):t._e(),t.caseDetail.solicitorEmail?e("tr",[e("td",{staticClass:"text-center"},[t._v("Solicitor Email")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.solicitorEmail)+" ")])]):t._e(),t.caseDetail.counselName?e("tr",[e("td",{staticClass:"text-center"},[t._v("Counsel Name")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.counselName)+" ")])]):t._e(),t.caseDetail.counselTel?e("tr",[e("td",{staticClass:"text-center"},[t._v("Counsel Tel")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.counselTel)+" ")])]):t._e(),t.caseDetail.counselEmail?e("tr",[e("td",{staticClass:"text-center"},[t._v("Counsel Email")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.counselEmail)+" ")])]):t._e(),t.caseDetail.thirdPartyClaimantName?e("tr",[e("td",{staticClass:"text-center"},[t._v("Third Party Claimant Name")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.thirdPartyClaimantName)+" ")])]):t._e(),t.caseDetail.thirdPartyClaimantIc?e("tr",[e("td",{staticClass:"text-center"},[t._v("Third Party Claimant IC No.")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.thirdPartyClaimantIc)+" ")])]):t._e(),t.caseDetail.thirdPartyClaimantTel?e("tr",[e("td",{staticClass:"text-center"},[t._v("Third Party Claimant Tel No.")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.thirdPartyClaimantTel)+" ")])]):t._e(),t.caseDetail.thirdPartyClaimantEmail?e("tr",[e("td",{staticClass:"text-center"},[t._v("Third Party Claimant Email")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.thirdPartyClaimantEmail)+" ")])]):t._e(),t.caseDetail.thirdPartyClaimantVehicleNo?e("tr",[e("td",{staticClass:"text-center"},[t._v("Third Party Claimant Vehicle No.")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.thirdPartyClaimantVehicleNo)+" ")])]):t._e(),t.caseDetail.thirdPartyClaimantVehicleModel?e("tr",[e("td",{staticClass:"text-center"},[t._v("Third Party Claimant Vehicle Model")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.thirdPartyClaimantVehicleModel)+" ")])]):t._e(),t.caseDetail.thirdPartyClaimantVehicleSolicitor?e("tr",[e("td",{staticClass:"text-center"},[t._v("Third Party Claimant Solicitor")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.thirdPartyClaimantVehicleSolicitor)+" ")])]):t._e(),t.caseDetail.thirdPartyClaimantVehicleSolicitorEmail?e("tr",[e("td",{staticClass:"text-center"},[t._v(" Third Party Claimant Solicitor Email ")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.thirdPartyClaimantVehicleSolicitorEmail)+" ")])]):t._e(),t.caseDetail.applyDocDate?e("tr",[e("td",{staticClass:"text-center"},[t._v("Document Application Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.applyDocDate))+" ")])]):t._e(),t.caseDetail.applyDocDate?e("tr",[e("td",{staticClass:"text-center"},[t._v("Document Application By:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.applyDocBy))+" ")])]):t._e(),t.caseDetail.dateOfReg?e("tr",[e("td",{staticClass:"text-center"},[t._v("Branch Assigning Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateOfReg))+" ")])]):t._e(),t.caseDetail.dateOfReg?e("tr",[e("td",{staticClass:"text-center"},[t._v("Branch Assigned By:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.assignBranchBy))+" ")])]):t._e(),t.caseDetail.dateOfAdj?e("tr",[e("td",{staticClass:"text-center"},[t._v("Adjuster Assigning Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateOfAdj))+" ")])]):t._e(),t.caseDetail.dateOfAdj?e("tr",[e("td",{staticClass:"text-center"},[t._v("Adjuster Assigning By:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.assignAdjBy))+" ")])]):t._e(),t.caseDetail.dateStartInv?e("tr",[e("td",{staticClass:"text-center"},[t._v("Start Investigation Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateStartInv))+" ")])]):t._e(),t.caseDetail.dateEndInv?e("tr",[e("td",{staticClass:"text-center"},[t._v("Complete Investigation Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateEndInv))+" ")])]):t._e(),t.caseDetail.dateOfEdi?e("tr",[e("td",{staticClass:"text-center"},[t._v("Editor Assigned Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateOfEdi))+" ")])]):t._e(),t.caseDetail.dateOfEdi?e("tr",[e("td",{staticClass:"text-center"},[t._v("Editor Assigned By:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.assignEdiBy))+" ")])]):t._e(),t.caseDetail.dateStartEdi?e("tr",[e("td",{staticClass:"text-center"},[t._v("Start Editing Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateStartEdi))+" ")])]):t._e(),t.caseDetail.dateEndEdi?e("tr",[e("td",{staticClass:"text-center"},[t._v("Complete Editing Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateEndEdi))+" ")])]):t._e(),t.caseDetail.dateOfApproval?e("tr",[e("td",{staticClass:"text-center"},[t._v("Approval Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateOfApproval))+" ")])]):t._e(),t.caseDetail.dateOfApproval?e("tr",[e("td",{staticClass:"text-center"},[t._v("Approval By:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.approvedBy))+" ")])]):t._e(),t.caseDetail.dateAssignFormatting?e("tr",[e("td",{staticClass:"text-center"},[t._v("Clerk Assigned Date(Formatting)")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateAssignFormatting))+" ")])]):t._e(),t.caseDetail.dateAssignFormatting?e("tr",[e("td",{staticClass:"text-center"},[t._v("Clerk Assigned (Formatting) By:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.assignClerkBy))+" ")])]):t._e(),t.caseDetail.dateStartFormatting?e("tr",[e("td",{staticClass:"text-center"},[t._v("Start Formatting Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateStartFormatting))+" ")])]):t._e(),t.caseDetail.dateEndFormatting?e("tr",[e("td",{staticClass:"text-center"},[t._v("Complete Formatting Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateEndFormatting))+" ")])]):t._e(),t.caseDetail.dateFinal?e("tr",[e("td",{staticClass:"text-center"},[t._v("Invoising & Finalisation Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateFinal))+" ")])]):t._e(),t.caseDetail.dateFinal?e("tr",[e("td",{staticClass:"text-center"},[t._v("Invoising & Finalisation By:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.finalBy))+" ")])]):t._e(),t.caseDetail.dateFinal?e("tr",[e("td",{staticClass:"text-center"},[t._v("Invoice Nombor")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.invNo)+" ")])]):t._e(),t.caseDetail.dateFinal?e("tr",[e("td",{staticClass:"text-center"},[t._v("Invoice Fee Note")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.caseDetail.invFeeNote)+" ")])]):t._e(),t.caseDetail.dateFinal?e("tr",[e("td",{staticClass:"text-center"},[t._v("Invoice Total")]),e("td",{staticClass:"text-left font-italic"},[t._v(" RM "+t._s(t.caseDetail.invTotal)+" ")])]):t._e(),t.caseDetail.dateDispatch?e("tr",[e("td",{staticClass:"text-center"},[t._v("Dispatch Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateDispatch))+" ")])]):t._e(),t.caseDetail.dateDispatch?e("tr",[e("td",{staticClass:"text-center"},[t._v("Dispatch By:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.dispatchBy))+" ")])]):t._e(),t.caseDetail.dateClosed?e("tr",[e("td",{staticClass:"text-center"},[t._v("Closed Date")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.formatDate(t.caseDetail.dateClosed))+" ")])]):t._e(),t.caseDetail.dateClosed?e("tr",[e("td",{staticClass:"text-center"},[t._v("Closed By:")]),e("td",{staticClass:"text-left font-italic"},[t._v(" "+t._s(t.filterUser(t.caseDetail.closedBy))+" ")])]):t._e()])]},proxy:!0}])}),e(S["a"],[e(st["a"]),e(C["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialogDetail=!1}}},[t._v(" Close ")])],1)],1)],1)],1)},ja=[],La={name:"history",props:{branches:{type:Array,required:!0},states:{type:Array,required:!0},insurer:{type:Array,required:!0},handlers:{type:Array,required:!0},refType:{type:Array,required:!0},subRefTypes:{type:Array,required:!0},members:{type:Array,required:!0},stages:{type:Array,required:!0},preloadedHistory:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},data:()=>({cases:[],dialogDetail:!1,caseDetail:"",caseHistory:[]}),computed:{...Object(Y["c"])(["caseState"]),filteredCases(){const t=this.cases.filter(t=>t.id!==this.caseState.casefile.id).sort((t,e)=>G()(e.createdAt)-G()(t.createdAt));return this.$emit("history-count-updated",t.length),t}},methods:{formatDate:function(t){return t?G()(t).format("DD/MM/YYYY"):""},showDetail(t){this.caseDetail=Object.assign({},t),this.dialogDetail=!0},yearOnly(t){return G()(t).format("YY")},filterCase(t){return this.cases.filter(e=>e.id===t)},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterStates(t){return this.states.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},filterStages(t){return this.stages.filter(e=>e.stageCode===t)},filterUser(t){const e=this.members.filter(e=>e.id===t);let a=e.map(t=>t.username+", "+t.email);return a[0]},filterHandler(t){return this.handlers.filter(e=>e.id===t)},showFileStatus(t){const e=this.stages.filter(e=>e.stageCode===t);let a=e.map(t=>t.name);return a},retrieveCases(){if(this.preloadedHistory&&this.preloadedHistory.length>0)return this.cases=[...this.preloadedHistory],void this.$emit("history-count-updated",this.filteredCases.length);U["a"].getAll().then(t=>{let e=this.caseState.casefile.vehicleNo;e&&(this.cases=t.data.filter(t=>t.vehicleNo===e),this.$emit("history-count-updated",this.filteredCases.length))}).catch(t=>{console.log(t),this.$emit("history-count-updated",0)})},getRefNumber(t){var e,a,s;const i=(null===(e=this.filterDept(t.refType)[0])||void 0===e?void 0:e.name)||"",r=(null===(a=this.filterSubDept(t.subRefType)[0])||void 0===a?void 0:a.subCode)||"",l=(null===(s=this.filterBranches(t.branch)[0])||void 0===s?void 0:s.brCode)||"";return`${i}${r?"/"+r:""}/${t.id}/${this.yearOnly(t.createdAt)}${l?"/"+l:""}`},getStatusColor(t){const e={NEW:"success",PEND:"warning",INVE:"info",COMP:"error",CLOSED:"grey"};return e[t]||"grey"},getStatusText(t){const e=this.filterStages(t)[0];return e?e.name:t}},watch:{preloadedHistory:{immediate:!0,handler(t){t&&t.length>0&&(this.cases=[...t],this.$emit("history-count-updated",this.filteredCases.length))}}},mounted(){this.retrieveCases()}},Pa=La,Fa=(a("1965"),Object(z["a"])(Pa,$a,ja,!1,null,"1998a29f",null)),Ma=Fa.exports,Ua=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.holdApprovalDisabled},on:{click:function(e){return t.holdApproval()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-account-convert-outline")]),e("span",{staticClass:"action-text"},[t._v("HOLD APPROVAL")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("HOLD APPROVAL")])]),e($["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:t.dialogHoldApproval,callback:function(e){t.dialogHoldApproval=e},expression:"dialogHoldApproval"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("HOLD APPROVAL")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[e(S["d"],[t._v("I accept this file.")]),e(j["a"]),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeHoldApprovalDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:t.compHoldApproval}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},Ha=[],Ga={name:"holdApproval",props:["approvingManager"],components:{},data(){return{dialogHoldApproval:!1}},computed:{holdApprovalDisabled(){return!("PAPP"==this.caseState.casefile.fileStatus&&this.approvingManager)},...Object(Y["c"])(["caseState"])},watch:{holdApproval(t){t||this.closeHoldApprovalDialog()}},methods:{holdApproval(){this.dialogHoldApproval=!0},compHoldApproval(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="HOLD",this.caseState.casefile.approvedBy=this.$store.state.auth.user.id).then(t=>{this.closeHoldApprovalDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.closeHoldApprovalDialog()},closeHoldApprovalDialog(){this.dialogHoldApproval=!1,this.$nextTick(()=>{})}}},Ya=Ga,Va=Object(z["a"])(Ya,Ua,Ha,!1,null,null,null),Ka=Va.exports,za=a("5632"),Ja=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.invoisingDisabled},on:{click:function(e){return t.completeInvoising()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-currency-usd")]),e("span",{staticClass:"action-text"},[t._v("INVOISING & FINALISATION")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("INVOISING & FINALISATION")])]),e($["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:t.dialogCompleteInvoising,callback:function(e){t.dialogCompleteInvoising=e},expression:"dialogCompleteInvoising"}},[e(b["a"],{staticClass:"text-center"},[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("INVOISING & FINALISATION")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[e("div",[e(Ct["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(St["a"],t._g(t._b({attrs:{value:t.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(e){t.date=null}},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Date Of Invoising ")]},proxy:!0}],null,!0),model:{value:t.invoice.date,callback:function(e){t.$set(t.invoice,"date",e)},expression:"invoice.date"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(gt["a"],{attrs:{value:t.computedDateFormattedMomentjs},on:{change:function(e){t.menu=!1}},model:{value:t.invoice.date,callback:function(e){t.$set(t.invoice,"date",e)},expression:"invoice.date"}})],1)],1)]],2),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{rules:[t=>!!t||"Invoice Number is required"]},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Invoice Number ")]},proxy:!0}]),model:{value:t.invoice.number,callback:function(e){t.$set(t.invoice,"number",e)},expression:"invoice.number"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{dense:"",type:"number",prefix:"RM",rules:[t=>!!t||"Fee Note is required"]},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Fee Note ")]},proxy:!0}]),model:{value:t.invoice.fee,callback:function(e){t.$set(t.invoice,"fee",t._n(e))},expression:"invoice.fee"}})],1),e(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(St["a"],{attrs:{dense:"",type:"number",prefix:"RM",rules:[t=>!!t||"Total Invoice Amount is required"]},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Total Invoice Amount ")]},proxy:!0}]),model:{value:t.invoice.total,callback:function(e){t.$set(t.invoice,"total",t._n(e))},expression:"invoice.total"}})],1),e(j["a"]),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeCompleteInvDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",disabled:t.isFileButtonDisabled,small:""},on:{click:t.compInvoisingDone}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},Wa=[],qa={name:"Invoising",props:["management"],components:{},data(){return{menu:!1,dialogCompleteInvoising:!1,rules:[t=>!!t||"This field is required. Only Numbers accepted"],invoice:{date:"",number:"",fee:"",total:""}}},computed:{computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},invoisingDisabled(){return!("INFI"==this.caseState.casefile.fileStatus&&this.management)},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!(this.invoice.date&&this.invoice.number&&this.invoice.fee&&this.invoice.total)}},watch:{completeInvoising(t){t||this.closeCompleteInvDialog()}},methods:{filterRegions(t){return this.regions.filter(e=>e.branchId===t)},filtersubRefType(t){return this.subRefTypes.filter(e=>e.deptId===t)},moment:function(t){return G()(t)},filterHandler(t){return this.handlers.filter(e=>e.id===t)},completeInvoising(){this.dialogCompleteInvoising=!0},compInvoisingDone(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.dateFinal=this.invoice.date,this.caseState.casefile.invNo=this.invoice.number,this.caseState.casefile.invFeeNote=this.invoice.fee,this.caseState.casefile.invTotal=this.invoice.total,this.caseState.casefile.fileStatus="DISP",this.caseState.casefile.dateFinal=G()().format(),this.caseState.casefile.finalBy=this.$store.state.auth.user.id).then(t=>{this.closeCompleteInvDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)});var t={caseId:this.caseState.casefile.id,isApproved:0};setTimeout(()=>{Le["a"].updateAll(t.caseId,t).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t||toString()})})},2500),this.closeCompleteInvDialog()},closeCompleteInvDialog(){this.dialogCompleteInvoising=!1,this.$nextTick(()=>{})}}},Xa=qa,Qa=Object(z["a"])(Xa,Ja,Wa,!1,null,null,null),Za=Qa.exports,ts=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"warning mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.reEditDisabled},on:{click:function(e){return t.reEdit()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-pencil-off")]),e("span",{staticClass:"action-text"},[t._v("RE-EDIT CASE")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("RE-EDIT CASE")])]),e($["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:t.dialogReInvestigate,callback:function(e){t.dialogReInvestigate=e},expression:"dialogReInvestigate"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("RE-EDIT CASE")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[e(S["d"],[t._v("I advice to re-edit the case.")]),e(j["a"],{attrs:{inset:""}}),e(D["a"],{attrs:{cols:"12"}},[e(_t["a"],{attrs:{"item-text":"Add a remark",label:"Case remark",rules:[t=>!!t||"Remark is required"]},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Remark ")]},proxy:!0}]),model:{value:t.commentData.comment,callback:function(e){t.$set(t.commentData,"comment",e)},expression:"commentData.comment"}})],1),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:t.closeReEditDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"success mt-3",attrs:{disabled:t.isFileButtonDisabled,small:"",tile:""},on:{click:t.compApprovalReport}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},es=[],as={name:"reEdit",props:["holdingManager"],components:{},data(){return{dialogReInvestigate:!1,commentData:{id:null,caseId:null,comment:null,createdBy:""}}},computed:{reEditDisabled(){return!("HOLD"==this.caseState.casefile.fileStatus&&this.holdingManager)},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!this.commentData.comment}},watch:{reEdit(t){t||this.closeReEditDialog()}},methods:{reEdit(){this.dialogReInvestigate=!0},compApprovalReport(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PEDI").then(t=>{this.closeReEditDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).then(()=>{var t={caseId:this.caseState.casefile.id,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};re["a"].create(t).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t||toString()})})}).catch(t=>{console.log(t)}),this.closeReEditDialog()},closeReEditDialog(){this.dialogReInvestigate=!1,this.$nextTick(()=>{})}}},ss=as,is=Object(z["a"])(ss,ts,es,!1,null,null,null),rs=is.exports,ls=a("02ba"),cs=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"error mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.reInvestigateDisabled},on:{click:function(e){return t.reInvestigate()}}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-steering-off")]),e("span",{staticClass:"action-text"},[t._v("RE-INVESTIGATE CASE")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("RE-INVESTIGATE CASE")])]),e($["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:t.dialogReInvestigate,callback:function(e){t.dialogReInvestigate=e},expression:"dialogReInvestigate"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("RE-INVESTIGATE CASE")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[e(S["d"],[t._v("I advice to re-investigate the case.")]),e(j["a"],{attrs:{inset:""}}),e(D["a"],{attrs:{cols:"12"}},[e(_t["a"],{attrs:{"item-text":"Add a remark",label:"Case remark",rules:[t=>!!t||"Remark is required"]},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Remark ")]},proxy:!0}]),model:{value:t.commentData.comment,callback:function(e){t.$set(t.commentData,"comment",e)},expression:"commentData.comment"}})],1),e(S["a"],[e(C["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:t.closeReInvestigateDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"success mt-3",attrs:{disabled:t.isFileButtonDisabled,small:"",tile:""},on:{click:t.compApprovalReport}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},ns=[],os={name:"reInvestigate",props:["holdingManager"],components:{},data(){return{dialogReInvestigate:!1,commentData:{id:null,caseId:null,comment:null,createdBy:""}}},computed:{reInvestigateDisabled(){return!("HOLD"==this.caseState.casefile.fileStatus&&this.holdingManager)},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!this.commentData.comment}},watch:{reInvestigate(t){t||this.closeReInvestigateDialog()}},methods:{reInvestigate(){this.dialogReInvestigate=!0},compApprovalReport(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="BRAC").then(t=>{this.closeReInvestigateDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).then(()=>{var t={caseId:this.caseState.casefile.id,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};re["a"].create(t).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t||toString()})})}).catch(t=>{console.log(t)}),this.closeReInvestigateDialog()},closeReInvestigateDialog(){this.dialogReInvestigate=!1,this.$nextTick(()=>{})}}},ds=os,hs=Object(z["a"])(ds,cs,ns,!1,null,null,null),us=hs.exports,fs=a("d14b"),ms=a("304b"),ps=a("f983"),vs=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{disabled:t.assignAdjDisabled,fab:"","x-small":""},on:{click:function(e){return t.transferAdj()}}},{...a}),[e(s["a"],[t._v("mdi-transit-transfer")])],1)]}}])},[e("span",[t._v("TRANSFER ADJUSTER")])]),e($["a"],{attrs:{"max-width":"750px"},model:{value:t.dialogAdj,callback:function(e){t.dialogAdj=e},expression:"dialogAdj"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("TRANSFER ADJUSTER")])]),e(S["c"],{staticClass:"mt-3 pa-0"},[e(y["a"],[e(x["a"],[e(D["a"],{attrs:{cols:"12"}},[e(S["d"],{staticClass:"error"},[t._v(" BY TRANSFERING THE CASE TO ANOTHER ADJUSTER, PLEASE ACCEPT THAT ALL PREVIOUS ADJUSTERS RELATED LOGS WILL BE DELETED! ")]),e(S["c"],{staticClass:"mt-3 pa-0"},[t._v(" CHOOSE BRANCH FOLLOWED BY ADJUSTER ")])],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.currentUserBranch(),"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":"",clearable:""},model:{value:t.branch.brCode,callback:function(e){t.$set(t.branch,"brCode",e)},expression:"branch.brCode"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.filterAdjByBranch(t.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Adjuster for the branch above","menu-props":{maxHeight:"400"},label:"ADJUSTERS",hint:"Assign Adjuster","persistent-hint":"",clearable:""},model:{value:t.caseState.casefile.adjuster,callback:function(e){t.$set(t.caseState.casefile,"adjuster",e)},expression:"caseState.casefile.adjuster"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(st["a"]),e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",small:"",dark:""},on:{click:t.closeAdj}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:t.assignAdjRule},on:{click:t.saveAdjuster}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},gs=[],Cs={name:"branchAccept",props:["branches","management","insurer","refType","subRefTypes","members","handlers","states","regions","adjusters"],components:{},data(){return{dialogAdj:!1,menu:!1,menu1:!1,branch:{name:"",brCode:""}}},computed:{...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},assignAdjRule(){return!(this.branch.brCode&&this.caseState.casefile.adjuster)},computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},assignAdjDisabled(){return"NEW"==this.caseState.casefile.fileStatus||"PEND"==this.caseState.casefile.fileStatus||"BRAC"==this.caseState.casefile.fileStatus||"CANC"==this.caseState.casefile.fileStatus||"CLO"==this.caseState.casefile.fileStatus||!this.management}},watch:{transferAdj(t){t||this.closeAdj()}},methods:{currentUserBranch(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(t=>t.id===this.caseState.casefile.branch)},filtersubRefType(t){return this.subRefTypes.filter(e=>e.deptId===t)},filterHandler(t){return this.handlers.filter(e=>e.insId===t)},filterBranchName(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e[0].name},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterRegions(t){return this.regions.filter(e=>e.branchId===t)},filterPicID(t){if(!t)return"TBA";const e=this.refType.filter(e=>e.id===t);return e[0].picID},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},findAdjEmail(t){const e=this.adjusters.filter(e=>e.id===t);return e.map(t=>t.email)||"sys.admin@associatedadjusters.com"},findUserEmail(t){const e=this.members.filter(e=>e.id===t);return e[0]?e[0].email:"sys.admin@associatedadjusters.com"},filterAdjByBranch(t){return this.adjusters.filter(e=>e.branches.some(e=>e.brCode===t))},transferAdj(){this.dialogAdj=!0},saveAdjuster(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.dateOfAdj=G()().format(),this.caseState.casefile.assignAdjBy=this.$store.state.auth.user.id).then(t=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}).then(()=>{const t=this.caseState.casefile.adjuster;var e={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,recipient:this.findAdjEmail(t),createdBy:this.$store.state.auth.user.id};At["a"].assignAdj(e).then(t=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.dataEmail=""}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}),this.closeAdj()},closeAdj(){this.dialogAdj=!1,this.$nextTick(()=>{})}}},bs=Cs,Ss=Object(z["a"])(bs,vs,gs,!1,null,null,null),_s=Ss.exports,Ds=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e("span",t._g({},a),[e(C["a"],t._b({staticClass:"mx-1",attrs:{fab:"","x-small":"",color:"blue lighten-2",dark:"",disabled:!t.isRealManager||t.isCaseCancelled},on:{click:t.showTransferCaseDialog}},"v-btn",i,!1),[e(s["a"],{attrs:{dark:""}},[t._v("mdi-file-move-outline")])],1)],1)]}}])},[e("span",[t._v("Transfer Case")])]),e($["a"],{attrs:{"max-width":"750px"},model:{value:t.dialogTransferBranch,callback:function(e){t.dialogTransferBranch=e},expression:"dialogTransferBranch"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("TRANSFER BRANCH")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.branches,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile branch","persistent-hint":""},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Branch ")]},proxy:!0}]),model:{value:t.caseState.casefile.branch,callback:function(e){t.$set(t.caseState.casefile,"branch",e)},expression:"caseState.casefile.branch"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(st["a"]),e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:t.closeTransferBranchDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:t.isAddFileButtonDisabled},on:{click:t.transferBranchSubmit}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},ys=[],As={name:"transferBranch",props:{approvingManager:Boolean,casefile:Object,refType:Array,subRefTypes:Array,insurer:Array,branches:Array,members:Array,states:Array,regions:Array},data(){return{dialogTransferBranch:!1,menu:!1,menu1:!1}},computed:{...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!this.caseState.casefile.branch},isRealManager(){return this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")},isCaseCancelled(){return"CANC"===this.caseState.casefile.fileStatus||"CLO"===this.caseState.casefile.fileStatus},computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""}},watch:{transferBranch(t){t||this.closeTransferBranchDialog()}},methods:{filterBranchName(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e[0].name},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterPicID(t){if(!t)return"TBA";const e=this.refType.filter(e=>e.id===t);return e[0].picID},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},findUserEmail(t){const e=this.members.filter(e=>e.id===t);return e[0]?e[0].email:"sys.admin@associatedadjusters.com"},showTransferCaseDialog(){this.dialogTransferBranch=!0},transferBranch(){this.dialogTransferBranch=!0},transferBranchSubmit(){const t=this.caseState.casefile.refType;var e={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,recipient:this.findUserEmail(this.filterPicID(t)),createdBy:this.$store.state.auth.user.id};U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.vehicleNo=this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),this.caseState.casefile.fileStatus="BRAC",this.caseState.casefile.assignBranchBy=this.$store.state.auth.user.id,this.caseState.casefile.dateOfReg=G()().format()).then(()=>{At["a"].assignBranch(e).then(t=>{this.closeTransferBranchDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.dataEmail=""}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}),this.closeTransferBranchDialog()},closeTransferBranchDialog(){this.dialogTransferBranch=!1,this.$nextTick(()=>{})}}},xs=As,ks=Object(z["a"])(xs,Ds,ys,!1,null,null,null),Ts=ks.exports,Es=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(C["a"],t._g({staticClass:"warning mr-1",attrs:{disabled:t.assignClerkDisabled,fab:"","x-small":""},on:{click:function(e){return t.transferClerk()}}},{...a}),[e(s["a"],[t._v("mdi-account-switch")])],1)]}}])},[e("span",[t._v("TRANSFER CLERK")])]),e($["a"],{attrs:{"max-width":"750px"},model:{value:t.dialogClerk,callback:function(e){t.dialogClerk=e},expression:"dialogClerk"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("TRANSFER CLERK")])]),e(S["c"],{staticClass:"mt-3 pa-0"},[e(y["a"],[e(x["a"],[e(D["a"],{attrs:{cols:"12"}},[e(S["d"],{staticClass:"error"},[t._v(" BY TRANSFERING THE CASE TO ANOTHER CLERK, PLEASE ACCEPT THAT ALL PREVIOUS CLERK RELATED LOGS WILL BE DELETED! ")]),e(S["c"],{staticClass:"mt-3 pa-0"},[t._v(" CHOOSE BRANCH FOLLOWED BY CLERK ")])],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.currentUserBranch(),"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":"",clearable:""},model:{value:t.branch.brCode,callback:function(e){t.$set(t.branch,"brCode",e)},expression:"branch.brCode"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.filterClerkByBranch(t.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Clerk for the branch above","menu-props":{maxHeight:"400"},label:"CLERKS",hint:"Assign Clerk","persistent-hint":"",clearable:""},model:{value:t.caseState.casefile.clerkInCharge,callback:function(e){t.$set(t.caseState.casefile,"clerkInCharge",e)},expression:"caseState.casefile.clerkInCharge"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(st["a"]),e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",small:"",dark:""},on:{click:t.closeClerk}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 warning",attrs:{tile:"",small:"",disabled:t.assignClerkRule},on:{click:t.saveClerk}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},Rs=[],Is={name:"branchAccept",props:["branches","management","insurer","refType","subRefTypes","members","handlers","states","regions","adjusters","clerks"],components:{},data(){return{dialogAdj:!1,dialogClerk:!1,menu:!1,menu1:!1,branch:{name:"",brCode:""}}},computed:{...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},assignAdjRule(){return!(this.branch.brCode&&this.caseState.casefile.adjuster)},assignClerkRule(){return!(this.branch.brCode&&this.caseState.casefile.clerkInCharge)},computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},assignClerkDisabled(){return"NEW"==this.caseState.casefile.fileStatus||"PEND"==this.caseState.casefile.fileStatus||"BRAC"==this.caseState.casefile.fileStatus||"ADAC"==this.caseState.casefile.fileStatus||"INVE"==this.caseState.casefile.fileStatus||"PEDI"==this.caseState.casefile.fileStatus||"EDAC"==this.caseState.casefile.fileStatus||"EDI"==this.caseState.casefile.fileStatus||"PAPP"==this.caseState.casefile.fileStatus||"HOLD"==this.caseState.casefile.fileStatus||"PFORM"==this.caseState.casefile.fileStatus||"CANC"==this.caseState.casefile.fileStatus||"CLO"==this.caseState.casefile.fileStatus||!this.management}},watch:{transferAdj(t){t||this.closeAdj()},transferClerk(t){t||this.closeClerk()}},methods:{currentUserBranch(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(t=>t.id===this.caseState.casefile.branch)},filtersubRefType(t){return this.subRefTypes.filter(e=>e.deptId===t)},filterHandler(t){return this.handlers.filter(e=>e.insId===t)},filterBranchName(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e[0].name},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterRegions(t){return this.regions.filter(e=>e.branchId===t)},filterPicID(t){if(!t)return"TBA";const e=this.refType.filter(e=>e.id===t);return e[0].picID},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},findAdjEmail(t){const e=this.adjusters.filter(e=>e.id===t);return e.map(t=>t.email)||"sys.admin@associatedadjusters.com"},findClerkEmail(t){const e=this.clerks.filter(e=>e.id===t);return e.map(t=>t.email)||"sys.admin@associatedadjusters.com"},findUserEmail(t){const e=this.members.filter(e=>e.id===t);return e[0]?e[0].email:"sys.admin@associatedadjusters.com"},filterAdjByBranch(t){return this.adjusters.filter(e=>e.branches.some(e=>e.brCode===t))},filterClerkByBranch(t){return this.clerks.filter(e=>e.branches.some(e=>e.brCode===t))},transferAdj(){this.dialogAdj=!0},transferClerk(){this.dialogClerk=!0},saveAdjuster(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.dateOfAdj=G()().format(),this.caseState.casefile.assignAdjBy=this.$store.state.auth.user.id).then(t=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}).then(()=>{const t=this.caseState.casefile.adjuster;var e={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,recipient:this.findAdjEmail(t),createdBy:this.$store.state.auth.user.id};At["a"].assignAdj(e).then(t=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.dataEmail=""}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}),this.closeAdj()},saveClerk(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.dateOfClerkAssign=G()().format(),this.caseState.casefile.assignClerkBy=this.$store.state.auth.user.id).then(t=>{this.closeClerk(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}).then(()=>{const t=this.caseState.casefile.clerk;var e={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,recipient:this.findClerkEmail(t),createdBy:this.$store.state.auth.user.id};At["a"].assignClerk(e).then(t=>{this.closeClerk(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()})}).catch(t=>{console.log(t)}),this.dataEmail=""}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})}),this.closeClerk()},closeAdj(){this.dialogAdj=!1,this.$nextTick(()=>{})},closeClerk(){this.dialogClerk=!1,this.$nextTick(()=>{})}}},ws=Is,Ns=Object(z["a"])(ws,Es,Rs,!1,null,null,null),Os=Ns.exports,Bs=function(){var t=this,e=t._self._c;return e($["a"],{attrs:{width:"800px"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(C["a"],t._g({attrs:{small:"",icon:""}},{...i,...a}),[1===t.casefile.flag?e(s["a"],{attrs:{color:"green lighten-1"}},[t._v(" mdi-shield-check ")]):t._e(),2===t.casefile.flag?e(s["a"],{attrs:{color:"orange lighten-1"}},[t._v(" mdi-shield-half-full ")]):t._e(),3===t.casefile.flag?e(s["a"],{attrs:{color:"red darken-5"}},[t._v(" mdi-shield-alert-outline ")]):t._e()],1)]}}],null,!0)},[1===t.casefile.flag?e("span",[t._v("GENUINE")]):t._e(),2===t.casefile.flag?e("span",[t._v("SUSPECTED FRAUD")]):t._e(),3===t.casefile.flag?e("span",[t._v("FRAUD")]):t._e()])]}}]),model:{value:t.flag,callback:function(e){t.flag=e},expression:"flag"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",{staticClass:"text-h5"},[t._v("CHANGE CASE STATUS")])]),e(S["c"],[e(y["a"],[e(x["a"],[e(D["a"],{attrs:{cols:"12"}},[e(bt["a"],{attrs:{items:t.SelectOptions,"item-text":"name","item-value":"value","menu-props":{maxHeight:"400"},label:"Status",hint:"Select Status","persistent-hint":""},model:{value:t.SelectOptions.value,callback:function(e){t.$set(t.SelectOptions,"value",e)},expression:"SelectOptions.value"}})],1),e(D["a"],{attrs:{cols:"12"}},[e(_t["a"],{attrs:{"item-text":"Add a remark",label:"Case remark",rules:[t=>!!t||"Remark is required"]},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"red--text"},[e("strong",[t._v("* ")])]),t._v("Remark ")]},proxy:!0}]),model:{value:t.commentData.comment,callback:function(e){t.$set(t.commentData,"comment",e)},expression:"commentData.comment"}})],1),e(j["a"]),e(S["a"],[e(C["a"],{attrs:{tile:"",small:"",outlined:""},on:{click:t.closeFlag}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"primary",attrs:{disabled:t.setFlagRule,tile:"",small:""},on:{click:t.setFlag}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)},$s=[],js={name:"flag",props:["casefile"],components:{},data(){return{flag:null,message:"",SelectOptions:[{name:"Genuine",value:1},{name:"Suspected Fraud",value:2},{name:"Fraud",value:3}],commentData:{id:null,caseId:null,comment:"",createdBy:""}}},computed:{setFlagRule(){return!(this.SelectOptions.value&&this.commentData.comment)}},watch:{flag(t){t||this.closeFlag()}},methods:{closeFlag(){this.flag=null,this.$nextTick(()=>{this.SelectOptions.value="",this.commentData.comment=""})},setFlag(){this.message="";var t={flag:this.SelectOptions.value};U["a"].update(this.casefile.id,t).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()})}).then(()=>{var t={caseId:this.casefile.id,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};re["a"].create(t).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),this.closeFlag(),this.$router.push("/home")}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t||toString()})})}).catch(()=>{this.message="Could not update the status!"})}}},Ls=js,Ps=Object(z["a"])(Ls,Bs,$s,!1,null,"c3d64826",null),Fs=Ps.exports,Ms=a("8fea"),Us=a("4bd4"),Hs=function(){var t=this,e=t._self._c;return e("div",[e(S["d"],{staticClass:"pb-0"},[t._v("CLAIM DETAILS")]),e(j["a"]),e(Ms["a"],{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{dense:"",headers:t.headers,items:t.claims},on:{"click:row":e=>t.showItem(e)},scopedSlots:t._u([{key:"top",fn:function(){return[e($["a"],{attrs:{"max-width":"500px",persistent:""},model:{value:t.approveDialog,callback:function(e){t.approveDialog=e},expression:"approveDialog"}},[e(b["a"],[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("Claim Details")]),e(S["c"],[e(y["a"],[e(Us["a"],{attrs:{disabled:!1===t.management}},[e(x["a"],[e(D["a"],{staticClass:"display-3 text-start font-weight-bold",attrs:{cols:"12"}},[t._v(" MYR "+t._s(t.newTotal)+" ")])],1),e(x["a"],{attrs:{"no-gutters":""}},[e(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Travelling ")]),e(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[t._v(t._s(t.selectedClaim.travMileage)+" ")]),e(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Additional ")]),e(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[t._v(t._s(t.selectedClaim.additional)+" ")]),e(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("SD & Stamps ")]),e(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[t._v(t._s(t.selectedClaim.sdAndStamps)+" ")]),e(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Medical Reprot ")]),e(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[t._v(t._s(t.selectedClaim.medicalReport)+" ")]),e(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Police Document ")]),e(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[t._v(t._s(t.selectedClaim.policeDoc)+" ")]),e(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("JPJ Document ")]),e(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[t._v(t._s(t.selectedClaim.jpjDoc)+" ")]),e(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Miscellaneous ")]),e(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[t._v(t._s(t.selectedClaim.misc)+" ")]),e(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[t._v("Typing ")]),e(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[t._v(t._s(t.selectedClaim.typing)+" ")]),t.selectedClaim.isApprovedComment?e(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"12"}},[t._v("Comment: "+t._s(t.selectedClaim.isApprovedComment)+" ")]):t._e(),e(S["a"],[e(C["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:t.closeApproveDialog}},[t._v("CLOSE")])],1)],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.numbering",fn:function(e){return[t._v(" "+t._s(e.index+1)+" ")]}},{key:"item.caseId",fn:function({item:a}){return[e("tr",{staticClass:"d-flex"},[t._v(" AA "),t._l(t.filterDept(t.caseState.casefile.refType),(function(s,i){return e("div",{key:i},[t._v(" /"+t._s(s.name)),t._l(t.filterSubDept(t.caseState.casefile.subRefType),(function(a,s){return e("span",{key:s},[t._v("/"+t._s(a.subCode))])})),e("span",[t._v("/"+t._s(a.caseId)+"/"+t._s(t.yearOnly(t.caseState.casefile.createdAt)))]),t._l(t.filterBranches(t.caseState.casefile.branch),(function(a){return e("span",{key:a.id},[t._v("/"+t._s(a.brCode))])}))],2)}))],2)]}},{key:"item.adjId",fn:function({item:a}){return t._l(t.filterUser(a.adjId),(function(a){return e("div",{key:a.id},[t._v(" "+t._s(a.username)+" ")])}))}},{key:"item.sumAll",fn:function({item:a}){return[e("span",[t._v("MYR "+t._s(t.total(a.id)))])]}},{key:"item.createdAt",fn:function({item:e}){return[t._v(" "+t._s(t.formatDate(e.createdAt))+" ")]}},{key:"item.isApproved",fn:function({item:e}){return[t._v(" "+t._s(t.getClaimStatus(e.isApproved))+" ")]}}],null,!0)})],1)},Gs=[],Ys=(a("13d5"),a("9485"),{name:"detailClaims",props:["branches","members","refType","subRefTypes"],data:()=>({management:!1,dialog:!1,dialogDelete:!1,approveDialog:!1,claims:[],selectedClaim:[],search:""}),components:{},computed:{...Object(Y["c"])(["caseState"]),headers(){return[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"AASB REFERENCE",align:"start",sortable:!0,value:"caseId"},{text:"ADJUSTER",align:"start",sortable:!1,value:"adjId"},{text:"SUBMITTED ON",align:"start",sortable:!1,value:"createdAt"},{text:"CLAIMS TOTAL",align:"start",sortable:!0,value:"sumAll"},{text:"STATUS",align:"start",sortable:!0,value:"isApproved"}]},newTotal(){const t=1*this.selectedClaim.travMileage+1*this.selectedClaim.additional+1*this.selectedClaim.sdAndStamps+1*this.selectedClaim.medicalReport+1*this.selectedClaim.policeDoc+1*this.selectedClaim.jpjDoc+1*this.selectedClaim.misc+1*this.selectedClaim.typing;return t.toFixed(2)}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},methods:{getClaimStatus(t){return null==t?"PENDING":0==t?"NEW":1==t?"QUERY":2==t?"APPROVED":""},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},total(t){const e=this.claims.filter(e=>e.id===t),a=e.reduce((t,e)=>t+1*e.travMileage+1*e.additional+1*e.sdAndStamps+1*e.medicalReport+1*e.policeDoc+1*e.jpjDoc+1*e.misc+1*e.typing,0);return a.toFixed(2)},formatDate(t){return G()(t).format("DD/MM/YYYY LT")},yearOnly(t){return G()(t).format("YY")},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},filterUser(t){return this.members.filter(e=>e.id===t)},retrieveClaims(){Le["a"].getAll().then(t=>{this.claims=t.data.filter(t=>t.caseId===this.caseState.casefile.id)}).catch(t=>{console.log(t)})},refreshList(){},showItem(t){this.selectedClaim=Object.assign({},t),this.approveDialog=!0},closeApproveDialog(){this.selectedClaim=Object.assign({}),this.approveDialog=!1}},mounted(){this.checkManagement(),this.retrieveClaims()}}),Vs=Ys,Ks=Object(z["a"])(Vs,Hs,Gs,!1,null,null,null),zs=Ks.exports,Js=a("2b0e"),Ws=function(){var t=this,e=t._self._c;return e("div",[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(C["a"],t._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:t.acceptAssignmentDisabled},on:{click:t.openDialog}},{...a}),[e("div",{staticClass:"d-flex flex-column align-center"},[e(s["a"],[t._v("mdi-account-check")]),e("span",{staticClass:"action-text"},[t._v("Accept Assignment")])],1)])]}}],null,!0)})]}}])},[e("span",[t._v("ACCEPT ASSIGNMENT")])]),e($["a"],{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b["a"],{staticClass:"text-center"},[e(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v(" ACCEPT ASSIGNMENT? ")]),e(S["c"],{staticClass:"mt-3 pa-0"},[t._v(" CASEFILE NUMBER: AA "),t._l(t.filterDept(t.casefile.refType),(function(a,s){return e("span",{key:s},[t._v(" /"+t._s(a.name)+" "),t._l(t.filterSubDept(t.casefile.subRefType),(function(a,s){return e("span",{key:"sub-"+s},[t._v(" /"+t._s(a.subCode)+" ")])}))],2)})),t._v(" /"+t._s(t.casefile.id)+"/"+t._s(t.yearOnly(t.casefile.createdAt))+" "),t._l(t.filterBranches(t.casefile.branch),(function(a){return e("span",{key:a.id},[t._v(" /"+t._s(a.brCode)+" ")])}))],2),e(j["a"]),e(S["a"],[e(st["a"]),e(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",small:"",dark:""},on:{click:t.closeDialog}},[t._v(" Cancel ")]),e(C["a"],{staticClass:"mt-3 mr-2 success",attrs:{tile:"",small:""},on:{click:t.acceptAssignment}},[t._v(" OK ")]),e(st["a"])],1)],1)],1)],1)},qs=[],Xs={name:"acceptAssignment",props:{casefile:{type:Object,required:!0},refType:Array,branches:Array,subRefTypes:Array,insurer:Array,members:Array,handlers:Array,states:Array},data(){return{dialog:!1}},computed:{acceptAssignmentDisabled(){return!("ADAC"===this.casefile.fileStatus&&this.casefile.adjuster===this.$store.state.auth.user.id)}},methods:{openDialog(){this.dialog=!0},closeDialog(){this.dialog=!1},acceptAssignment(){U["a"].update(this.casefile.id,this.casefile,this.casefile.fileStatus="INVE",this.casefile.dateStartInv=G()().format()).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"green",text:t&&t.data&&t.data.message||toString()}),this.$emit("accepted")}).catch(t=>{console.log(t)}),this.closeDialog()},filterDept(t){return this.refType.filter(e=>e.id===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},yearOnly(t){return G()(t).format("YY")}}},Qs=Xs,Zs=(a("732e"),Object(z["a"])(Qs,Ws,qs,!1,null,"dc80522e",null)),ti=Zs.exports,ei={name:"vuexFile",components:{Acknowledgement:at["a"],Documents:_a,Comments:De,Flag:Fs,ApplyDoc:ot,AssignBranch:Et,BranchAccept:ee,CompleteInvestigation:Ue,AssignEditor:Mt,AcceptEditing:W,CompleteEditing:Ee,CancelCase:oe,TransferCase:Ts,TransferAdj:_s,TransferClerk:Os,EditCase:Oa,HoldApproval:Ka,ApprovalReport:pt,ReInvestigate:us,ReEdit:rs,AssignClerk:Bt,AcceptFormatting:et,CompleteFormatting:Be,Invoising:Za,Dispatch:na,DoneDispatch:Ta,Close:pe,Audit:Wt,DetailTab:aa,History:Ma,Claims:zs,AcceptAssignment:ti},data(){return{overlay:!0,tab:null,fileaccess:!1,management:!1,newCase:!1,claims:[],stages:[],adjusters:[],editors:[],clerks:[],members:[],branches:[],regions:[],refType:[],subRefTypes:[],insurer:[],handlers:[],branch:{name:"",brCode:""},states:[],dialogAcceptCase:!1,acknowledgement:!1,menu:!1,menu1:!1,documentCount:0,commentCount:0,historyCount:0,documents:Object(Js["b"])([]),documentsLoading:Object(Js["b"])(!1),comments:Object(Js["b"])([]),commentsLoading:Object(Js["b"])(!1),accessDenied:!1,loading:!0,permissionCheckComplete:!1,caseHistory:[],historyLoading:!1}},computed:{...Object(Y["c"])(["caseState"]),holdingManager(){return this.caseState.casefile.approvedBy===this.$store.state.auth.user.id},getStatusColorClass(){const t=this.caseState.casefile.fileStatus,e={NEW:"success",PEND:"warning",INVE:"info",COMP:"error"};return e[t]||"grey"},newPendDisabled(){return!(("NEW"==this.caseState.casefile.fileStatus||"PEND"==this.caseState.casefile.fileStatus)&&this.management)},acceptAssignmentDisabled(){return!("ADAC"==this.caseState.casefile.fileStatus&&this.caseState.casefile.adjuster==this.$store.state.auth.user.id)},isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},hasAvailableActions(){const t=this.caseState.casefile.fileStatus,e=this.caseState.casefile.adjuster===this.$store.state.auth.user.id,a=this.caseState.casefile.editor===this.$store.state.auth.user.id,s=this.caseState.casefile.clerkInCharge===this.$store.state.auth.user.id;return{showApplyDoc:"NEW"===t&&this.management,showAssignBranch:("NEW"===t||"PEND"===t)&&this.management,showBranchAccept:"BRAC"===t&&this.management,showAcceptAssignment:"ADAC"===t&&e,showCompleteInvestigation:"INVE"===t&&e,showAssignEditor:("PEDI"===t||"REIN"===t)&&this.management,showAcceptEditing:"EDAC"===t&&a,showCompleteEditing:"EDI"===t&&a,showHoldApproval:"PAPP"===t&&this.approvingManager,showApprovalReport:"HOLD"===t&&this.holdingManager,showReInvestigate:"HOLD"===t&&this.holdingManager,showReEdit:"HOLD"===t&&this.holdingManager,showAssignClerk:("PFORM"===t||"PEDI"===t)&&this.management,showAcceptFormatting:"CLERK"===t&&s,showCompleteFormatting:"FOIN"===t&&s,showInvoising:"INFI"===t&&this.management,showDispatch:"DISP"===t&&this.management,showDoneDispatch:"PDISP"===t&&this.management,showClose:"DISP"===t&&this.management}},approvingManager(){return this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")}},watch:{acceptCase(t){t||this.closeAcceptCase()},"caseState.casefile":{immediate:!0,handler(){this.preloadDocuments(),this.preloadComments()},deep:!0}},methods:{moment:function(t){return G()(t)},yearOnly(t){return G()(t).format("YY")},filterRegions(t){return this.regions.filter(e=>e.branchId===t)},filtersubRefType(t){return this.subRefTypes.filter(e=>e.deptId===t)},filterSubDept(t){return this.subRefTypes.filter(e=>e.id===t)},filterAdjByBranch(t){return this.adjusters.filter(e=>e.branches.some(e=>e.brCode===t))},filterClerkByBranch(t){return this.clerks.filter(e=>e.branches.some(e=>e.brCode===t))},findClerkByBranch(t){const e=this.clerks.filter(e=>e.branches.some(e=>e.brCode===t));return e.map(t=>t.email)||"sys.admin@associatedadjusters.com"},findAdjByBranch(t){const e=this.adjusters.filter(e=>e.branches.some(e=>e.brCode===t));return e.map(t=>t.email)||"sys.admin@associatedadjusters.com"},findAdjEmail(t){const e=this.adjusters.filter(e=>e.id===t);return e.map(t=>t.email)||"sys.admin@associatedadjusters.com"},filterStages(t){return this.stages.filter(e=>e.stageCode===t)},filterDept(t){return this.refType.filter(e=>e.id===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},filterBranchName(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e[0].name},filterPicID(t){if(!t)return"TBA";const e=this.refType.filter(e=>e.id===t);return e[0].picID},filterAdj(t){return this.adjusters.filter(e=>e.id===t)},filterEditor(t){return this.editors.filter(e=>e.id===t)},filterrecipient(t){return t?this.clerks.filter(e=>e.id===t):"TBA"},filterApprover(t){return this.members.filter(e=>e.id===t)},filterClerk(t){return this.clerks.filter(e=>e.id===t)},filterBranches(t){return this.branches.filter(e=>e.id===t)},findBrcode(t){if(!t)return"TBA";const e=this.branches.filter(e=>e.id===t);return e[0].brCode},filterStates(t){return this.states.filter(e=>e.id===t)},filterHandler(t){return this.handlers.filter(e=>e.insId===t)},filterUser(t){return this.members.filter(e=>e.id===t)},findUserEmail(t){const e=this.members.filter(e=>e.id===t);return e[0]?e[0].email:"sys.admin@associatedadjusters.com"},currentUserBranch(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(t=>t.id===this.caseState.casefile.branch)},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("CLERK"))&&(this.management=!0)},formatDate:function(t){return t?G()(t).format("DD/MM/YYYY"):""},formatTime:function(t){return G()(t).format("h:mm:ss a")},dateDiff(t,e){let a=G()(t),s=G()(e),i=G.a.duration(s.diff(a));return Math.round(i.asDays())},refreshList(){this.retrieveAdjusters(),this.retrieveEditors(),this.retrieveClerks(),this.retrieveUsers(),this.retrieveBranches(),this.retrieveStates(),this.retrieveCasefiles(this.$route.params.id)},retrieveClaims(){Le["a"].getAll().then(t=>{this.claims=t.data}).catch(t=>{console.log(t)})},retrieveDept(){He["a"].getAll().then(t=>{this.refType=t.data}).catch(t=>{console.log(t)})},retrieveSubRefType(){ps["a"].getAll().then(t=>{this.subRefTypes=t.data}).catch(t=>{console.log(t)})},retrieveIns(){za["a"].getAll().then(t=>{this.insurer=t.data}).catch(t=>{console.log(t)})},retrieveHandler(){Ba["a"].getAll().then(t=>{this.handlers=t.data}).catch(t=>{console.log(t)})},retrieveStages(){fs["a"].getAll().then(t=>{this.stages=t.data}).catch(t=>{console.log(t)})},retrieveAdjusters(){Ce["a"].getAll().then(t=>{this.adjusters=t.data.filter(t=>t.roles.some(t=>"adjuster"===t.roleCode)&&t.active)}).catch(t=>{console.log(t)})},retrieveEditors(){Ce["a"].getAll().then(t=>{this.editors=t.data.filter(t=>t.roles.some(t=>"editor"===t.roleCode||"manager"===t.roleCode||"branchmanager"===t.roleCode)&&t.active)}).catch(t=>{console.log(t)})},retrieveClerks(){Ce["a"].getAll().then(t=>{this.clerks=t.data.filter(t=>t.roles.some(t=>"clerk"===t.roleCode||"manager"===t.roleCode||"branchclerk"===t.roleCode||"branchmanager"===t.roleCode)&&t.active)}).catch(t=>{console.log(t)})},retrieveUsers(){Ce["a"].getAll().then(t=>{this.members=t.data.filter(t=>t.active)}).catch(t=>{console.log(t)})},retrieveBranches(){ae["a"].getAll().then(t=>{this.branches=t.data}).catch(t=>{console.log(t)})},retrieveStates(){ms["a"].getAll().then(t=>{this.states=t.data.map(this.getDisplayStates)}).catch(t=>{console.log(t)})},getDisplayStates(t){return{id:t.id,name:t.name.length>30?t.name.substr(0,30)+"...":t.name,stCode:t.stCode.length>30?t.stCode.substr(0,30)+"...":t.stCode}},retrieveRegions(){ls["a"].getAll().then(t=>{this.regions=t.data}).catch(t=>{console.log(t)})},async retrieveCasefiles(t){this.loading=!0,this.permissionCheckComplete=!1,this.accessDenied=!1;try{const e=await U["a"].get(t),a=e.data;await Promise.all([this.ensureDeptLoaded(),this.ensureBranchesLoaded()]).then(()=>{this.checkCasefileAccess(a)?(this.caseState.casefile=a,this.checkFileaccess(),this.preloadHistory()):this.accessDenied=!0,this.permissionCheckComplete=!0,this.loading=!1}).catch(()=>{this.accessDenied=!0,this.permissionCheckComplete=!0,this.loading=!1})}catch(e){console.log(e),this.accessDenied=!0,this.permissionCheckComplete=!0,this.loading=!1,this.$store.dispatch("alerts/setAlert",{text:"Error loading case file data",type:"error"})}},ensureDeptLoaded(){return this.refType&&this.refType.length>0?Promise.resolve():new Promise((t,e)=>{He["a"].getAll().then(e=>{this.refType=e.data,t()}).catch(t=>{console.log("Error loading departments:",t),e(t)})})},ensureBranchesLoaded(){return this.branches&&this.branches.length>0?Promise.resolve():new Promise((t,e)=>{ae["a"].getAll().then(e=>{this.branches=e.data,t()}).catch(t=>{console.log("Error loading branches:",t),e(t)})})},checkCasefileAccess(t){if(!t)return!1;const e=this.$store.state.auth.user;return!!e&&(!(!e.roles||!(e.roles.includes("ADMIN")||e.roles.includes("MANAGER")||e.roles.includes("CLERK")))||(!!(e.roles&&e.roles.includes("BRANCHMANAGER")&&e.branches&&Array.isArray(e.branches)&&e.branches.includes(t.branch)&&e.dept&&Array.isArray(e.dept)&&e.dept.includes(t.refType))||(!!(e.roles&&e.roles.includes("BRANCHCLERK")&&e.branches&&Array.isArray(e.branches)&&e.branches.includes(t.branch)&&e.dept&&Array.isArray(e.dept)&&e.dept.includes(t.refType))||(t.adjuster===e.id||(t.editor===e.id||t.clerkInCharge===e.id)))))},checkFileaccess(){this.fileaccess=!0},applyDoc(){this.dialogApplyDoc=!0},acceptCase(){this.dialogAcceptCase=!0},acceptCaseConfirm(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="INVE",this.caseState.casefile.dateStartInv=G()().format()).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"green",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)}),this.closeAcceptCase()},closeAcceptCase(){this.dialogAcceptCase=!1,this.$nextTick(()=>{})},async preloadDocuments(){if(this.caseState.casefile.id){this.documentsLoading=!0;try{const t=await fa["a"].getAll();this.documents=t.data.filter(t=>t.caseId===this.caseState.casefile.id),this.documentCount=this.documents.length}catch(t){console.log(t),this.documents=[],this.documentCount=0}finally{this.documentsLoading=!1}}},async preloadComments(){if(this.caseState.casefile.id){this.commentsLoading=!0;try{const t=await re["a"].getAll();this.comments=t.data.filter(t=>t.caseId===this.caseState.casefile.id),this.commentCount=this.comments.length}catch(t){console.log(t),this.comments=[],this.commentCount=0}finally{this.commentsLoading=!1}}},async preloadHistory(){if(this.caseState.casefile.vehicleNo){this.historyLoading=!0;try{await Promise.all([U["a"].getAll(),new Promise(t=>setTimeout(t,500))]).then(([t])=>{this.caseHistory=t.data.filter(t=>t.vehicleNo===this.caseState.casefile.vehicleNo);const e=this.caseHistory.filter(t=>t.id!==this.caseState.casefile.id).length;this.historyCount=e})}catch(t){console.error("Error loading history:",t),this.caseHistory=[],this.historyCount=0}finally{this.historyLoading=!1}}},fetchCommentCount(){this.caseState.casefile.id&&re["a"].getAll().then(t=>{const e=t.data.filter(t=>t.caseId===this.caseState.casefile.id);this.commentCount=e.length}).catch(t=>{console.log(t),this.commentCount=0})},handleCommentAdded(t){this.comments=[...this.comments,t],this.commentCount=this.comments.length},handleCommentDeleted(t){this.comments=this.comments.filter(e=>e.id!==t),this.commentCount=this.comments.length},handleHistoryCountUpdated(t){this.historyCount=t}},mounted(){this.overlay=!1,Promise.all([this.retrieveClaims(),this.retrieveAdjusters(),this.retrieveEditors(),this.retrieveClerks(),this.retrieveUsers(),this.retrieveBranches(),this.retrieveStates(),this.retrieveRegions(),this.retrieveDept(),this.retrieveSubRefType(),this.retrieveIns(),this.retrieveHandler(),this.retrieveStages()]).then(()=>{this.retrieveCasefiles(this.$route.params.id),this.checkManagement(),this.fetchCommentCount()}).catch(t=>{console.error("Error loading initial data:",t),this.loading=!1,this.accessDenied=!0,this.$store.dispatch("alerts/setAlert",{text:"Error loading initial data",type:"error"})})}},ai=ei,si=(a("1dbf"),Object(z["a"])(ai,O,B,!1,null,"6eddafd6",null));e["default"]=si.exports},c671:function(t,e,a){"use strict";var s=a("9d65"),i=a("4e82"),r=a("c3f0"),l=a("80d2"),c=a("58df");const n=Object(c["a"])(s["a"],Object(i["a"])("windowGroup","v-window-item","v-window"));var o=n.extend().extend().extend({name:"v-window-item",directives:{Touch:r["a"]},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data(){return{isActive:!1,inTransition:!1}},computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return Object(l["s"])(this)},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=Object(l["h"])(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(t){this.inTransition&&this.$nextTick(()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=Object(l["h"])(t.clientHeight))})}},render(t){return t("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent(()=>[this.genWindowItem()]))}});e["a"]=o.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const t=o.options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}})},d6d6:function(t,e,a){"use strict";var s=TypeError;t.exports=function(t,e){if(t<e)throw new s("Not enough arguments");return t}},d7a5:function(t,e,a){"use strict";a("b1fa")},e4ba:function(t,e,a){"use strict";var s=a("c427");class i{getAll(){return s["a"].get("/comments")}get(t){return s["a"].get("/comments/"+t)}create(t){return s["a"].post("/comments",t)}update(t,e){return s["a"].put("/comments/"+t,e)}delete(t){return s["a"].delete("/comments/"+t)}deleteAll(){return s["a"].delete("/comments")}}e["a"]=new i},f1b7:function(t,e,a){},fa52:function(t,e,a){},fadd:function(t,e,a){},ff44:function(t,e,a){}}]);
//# sourceMappingURL=chunk-074b12e8.64ba7346.js.map