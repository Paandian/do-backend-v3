(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bdd13ad0"],{"0160":function(e,t,a){},"0467":function(e,t,a){},"16ee":function(e,t,a){},1743:function(e,t,a){},"1f09":function(e,t,a){},"208e":function(e,t,a){"use strict";a("7d58")},"20d0":function(e,t,a){"use strict";a("97bb")},"20dd":function(e,t,a){"use strict";var s=a("c427");class i{getAll(){return s["a"].get("/claims")}get(e){return s["a"].get("/claims/"+e)}create(e){return s["a"].post("/claims",e)}update(e,t){return s["a"].put("/claims/"+e,t)}updateAll(e,t){return s["a"].put("/claims/items/"+e,t)}delete(e){return s["a"].delete("/claims/"+e)}deleteAll(){return s["a"].delete("/claims")}findBySubDept(e){return s["a"].get("/claims?name="+e)}}t["a"]=new i},"210b":function(e,t,a){},2122:function(e,t,a){},3129:function(e,t,a){"use strict";a("14d9"),a("e9f5"),a("ab43"),a("1f09");var s=a("c995"),i=a("24b2"),r=a("7560"),l=a("58df"),c=a("80d2");t["a"]=Object(l["a"])(s["a"],i["a"],r["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},tile:Boolean,transition:String,type:String,types:{type:Object,default:()=>({})}},computed:{attrs(){return this.isLoading?{"aria-busy":!this.boilerplate||void 0,"aria-live":this.boilerplate?void 0:"polite","aria-label":this.boilerplate?void 0:this.$vuetify.lang.t(this.loadingText),role:this.boilerplate?void 0:"alert",...this.$attrs}:this.$attrs},classes(){return{"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile,...this.themeClasses,...this.elevationClasses}},isLoading(){return!("default"in this.$scopedSlots)||this.loading},rootTypes(){return{actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text",...this.types}}},methods:{genBone(e,t){return this.$createElement("div",{staticClass:`v-skeleton-loader__${e} v-skeleton-loader__bone`},t)},genBones(e){const[t,a]=e.split("@"),s=()=>this.genStructure(t);return Array.from({length:a}).map(s)},genStructure(e){let t=[];e=e||this.type||"";const a=this.rootTypes[e]||"";if(e===a);else{if(e.indexOf(",")>-1)return this.mapBones(e);if(e.indexOf("@")>-1)return this.genBones(e);a.indexOf(",")>-1?t=this.mapBones(a):a.indexOf("@")>-1?t=this.genBones(a):a&&t.push(this.genStructure(a))}return[this.genBone(e,t)]},genSkeleton(){const e=[];return this.isLoading?e.push(this.genStructure()):e.push(Object(c["s"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},e):e},mapBones(e){return e.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter(e){this.resetStyles(e),this.isLoading&&(e._initialStyle={display:e.style.display,transition:e.style.transition},e.style.setProperty("transition","none","important"))},onBeforeLeave(e){e.style.setProperty("display","none","important")},resetStyles(e){e._initialStyle&&(e.style.display=e._initialStyle.display||"",e.style.transition=e._initialStyle.transition,delete e._initialStyle)}},render(e){return e("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}})},"4adb":function(e,t,a){"use strict";a("f1b7")},5246:function(e,t,a){"use strict";var s=a("8336"),i=a("b0af"),r=a("62ad"),l=a("169a"),c=a("ce7e"),n=a("132d"),o=a("0fd9"),d=a("3a2f"),h=function(){var e=this,t=e._self._c;return t(l["a"],{attrs:{width:"800px"},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(d["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:i}){return[t(s["a"],e._g({attrs:{icon:""}},{...i,...a}),[t(n["a"],[e._v("mdi-file-pdf-box")])],1)]}}],null,!0)},[t("span",[e._v("Acknowledgement Letter")])])]}}]),model:{value:e.acknowledgement,callback:function(t){e.acknowledgement=t},expression:"acknowledgement"}},[t(i["a"],[t("div",{staticClass:"ma-5"},[t("div",{staticClass:"pt-2",attrs:{align:"end"}},[t(s["a"],{staticClass:"mr-1",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeDownloadAck}},[e._v(" Cancel ")]),t("download-button",{attrs:{dom:"#letter",name:e.vehicleNumber}})],1),t("div",{attrs:{id:"letter"}},[t("div",{staticClass:"title01"},[e._v("ASSOCIATED")]),t("div",{staticClass:"title01"},[e._v(" ADJUSTERS SDN BHD"),t("span",{staticClass:"caption01"},[e._v("( CO. NO. 30757-A)")])]),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"2"}},[t("div",{staticClass:"para01"},[e._v("YOUR REF")])]),t(r["a"],[t("div",{staticClass:"para01"},[e._v(": "+e._s(e.casefile.claimNo))])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"2"}},[t("div",{staticClass:"para01"},[e._v("OUR REF")])]),t(r["a"],[t("div",{staticClass:"para01 d-flex"},[e._v(" : AA/ "),e._l(e.filterDept(e.casefile.refType),(function(a,s){return t("span",{key:s},[e._v(" "+e._s(a.name)),e._l(e.filterSubDept(e.casefile.subRefType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.subCode))])}))],2)})),e._v("/"+e._s(e.casefile.id)+"/"+e._s(e.yearOnly(e.casefile.createdAt))+"/"),e._l(e.filterBranches(e.casefile.branch),(function(a){return t("span",{key:a.id},[e._v(e._s(a.brCode)+" ")])}))],2)])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"2"}},[t("div",{staticClass:"para01"},[e._v("DATE")])]),t(r["a"],[t("div",{staticClass:"para01"},[e._v(" : "+e._s(e.formatDate(e.casefile.createdAt))+" ")])])],1),t("div",{staticClass:"para02"},[e._v("THE CLAIMS MANAGER,")]),e._l(e.filterIns(e.casefile.insurer),(function(a,s){return t("div",{key:s},[t("span",{staticClass:"para03"},[e._v(e._s(a.name))]),t("br"),t("span",{staticClass:"para04"},[e._v(e._s(a.insAddLine01))]),t("br"),t("span",{staticClass:"para04"},[e._v(e._s(a.insAddLine02))]),t("br"),t("span",{staticClass:"para04"},[e._v(e._s(a.insPostcode))]),e._v("   "),t("span",{staticClass:"para04"},[e._v(e._s(a.insTown))]),t("br"),t("span",{staticClass:"para04"},[e._v(e._s(a.insState))])])})),t("div",{staticClass:"para05"},[e._v("DEAR SIR/ MADAM,")]),t("div",{staticClass:"para03"},[e._v("RE : ACKNOWLEDGEMENT OF ASSIGNMENT")]),t("br"),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"3"}},[t("div",{staticClass:"para06"},[e._v("VEHICLE NO")])]),t(r["a"],[e.casefile.vehicleNo?t("div",{staticClass:"para06"},[e._v(" : "+e._s(e.casefile.vehicleNo.toUpperCase())+" ")]):e._e()])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"3"}},[t("div",{staticClass:"para06"},[e._v("DATE OF LOSS")])]),t(r["a"],[t("div",{staticClass:"para06"},[e._v(": "+e._s(e.formatDate(e.casefile.dateOfLoss)))])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"3"}},[t("div",{staticClass:"para06"},[e._v("PLACE OF LOSS")])]),t(r["a"],[e.casefile.placeOfLoss?t("div",{staticClass:"para06"},[e._v(" : "+e._s(e.casefile.placeOfLoss)+", "),e._l(e.filterStates(e.casefile.stateOfLoss),(function(a){return t("span",{key:a.id},[e._v(" "+e._s(a.name)+" ")])}))],2):e._e()])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"3"}},[t("div",{staticClass:"para06"},[e._v("INSURED")])]),t(r["a"],[t("div",{staticClass:"para06"},[e._v(": "+e._s(e.casefile.insuredName))])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"3"}},[t("div",{staticClass:"para06"},[e._v("ASSIGNMENT DATE")])]),t(r["a"],[t("div",{staticClass:"para06"},[e._v(" : "+e._s(e.formatDate(e.casefile.dateOfAssign))+" ")])])],1),t(c["a"],{staticClass:"para07"}),t("p",{staticClass:"para11"},[e._v(" We acknowledge receipt of your assignment pertaining to the above matter. ")]),t("p",{staticClass:"para11"},[e._v(" We thank you for your support and shall forward our report in connection with the above as soon as we finalised the same. ")]),t("p",{staticClass:"para11"},[e._v("In the meantime, kindly bear with us a while.")]),t("p",{staticClass:"para10"},[e._v(' " Ensuring you of our best services at all time ". ')]),t("p",{staticClass:"para04"},[e._v("Thank you.")]),t("p",{staticClass:"para08"},[e._v("ASSOCIATED ADJUSTERS SDN BHD")]),t("div",{staticClass:"para09"},[e._v(" *No signature required as it is computer generated. ")]),t("br"),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("HEAD OFFICE")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : C-9-1, BLOCK C, 9TH FLOOR, MEGAN PHILEO AVENUE II, NO.12, JALAN YAP KWAN SENG, 50450 KUALA LUMPUR ")]),t("div",{staticClass:"para12"},[e._v("   TEL : 03 - 21 666 330 (5 LINES) FAX : 03 - 21 666 110 E-MAIL : info@associatedadjusters.com ")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("JOHOR BAHRU")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : O.53-03,BLOK B, JALAN PERMAS 11, BANDAR BARU PERMAS JAYA, 81750 JOHOR BAHRU, JOHOR DARUL TAKZIM. ")]),t("div",{staticClass:"para12"},[e._v("   TEL : 07 - 386 1165 FAX : 07 - 386 1175 E-MAIL : johor@associatedadjusters.com ")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("SG. PETANI")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : NO.99A, 1ST FLOOR, JALAN PENGKALAN, TAMAN PEKAN BARU, 08000 SG. PETANI, KEDAH DARUL AMAN. ")]),t("div",{staticClass:"para12"},[e._v("   TEL : 04 - 4210100 FAX : 04 - 4252100. ")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("KUANTAN")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : NO.25A,2ND FLOOR, JALAN TUN ISMAIL 9, JALAN TUN ISMAIL, 25000 KUANTAN, PAHANG DARUL MAKMUR. ")]),t("div",{staticClass:"para12"},[e._v("   TEL : 09 - 5138001 FAX : 09 - 5148001 ")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("KOTA BHARU")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : Lot 235, 1st Floor, Kompleks Yakin, Jalan Gajah Mati, 15000 Kota Bahru, Kelantan Darul Naim. ")]),t("div",{staticClass:"para12"},[e._v("  TEL : 09-7482002 FAX : 09-7483008")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("MELAKA:")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : NO.9-1,Jalan KSB 16, Taman Kota Syahbandar 75200, Melaka ")]),t("div",{staticClass:"para12"},[e._v("  TEL: 06-2644389")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("KOTA KINABALU")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : B-3-6,3rd Floor, Tanjung Aru Plaza, Jalan Mat Salleh, 88100 Kota Kinabalu, Sabah. ")]),t("div",{staticClass:"para12"},[e._v("   Tel : 088-261 330 Fax : 088-267 3307 ")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("KUCHING")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : 2ND FLOOR, NO 9 BANGUNAN AL-IDRUS COMMERCIAL CENTRE, JALAN SATOK, 93400 KUCHING SARAWAK. ")]),t("div",{staticClass:"para12"},[e._v("  Tel : 082-236330 Fax : 082-237330")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("IPOH")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : No.3B GreenTown Utama Jalan Dato Seri Ahmad Said,30450, Ipoh Perak. ")]),t("div",{staticClass:"para12"},[e._v("  Tel : 05-241 13580")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("PENANG")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : No.88-01-03 Second Floor, Elite Commercial Centre, Jalan Jelutong, 11600 Georgetown Penang. ")]),t("div",{staticClass:"para12"},[e._v("  Tel : 04-288 9100")])])],1)],2),t("br")])])],1)},u=[],f=(a("e9f5"),a("910d"),function(){var e=this,t=e._self._c;return t(s["a"],{staticClass:"success",attrs:{small:"",tile:""},on:{mousedown:e.downloadFile}},[e._v("Download")])}),m=[],p=a("d67e"),v=a.n(p),g={props:["dom","name"],methods:{downloadFile(){const e=this,t=document.querySelector(e.dom);var a={margin:15,filename:e.name};v()().from(t).set(a).save()}}},C=g,b=a("2877"),S=Object(b["a"])(C,f,m,!1,null,null,null),_=S.exports,D=a("c1df"),y=a.n(D),x={name:"acknowledgement",props:["casefile","refType","subRefTypes","insurer","branches","states"],components:{DownloadButton:_},data(){return{acknowledgement:!1}},computed:{vehicleNumber(){return this.casefile.vehicleNo}},methods:{moment:function(){return y()()},yearOnly(e){return y()(e).format("YY")},formatDate:function(e){return y()(e).format("DD/MM/YYYY")},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterStates(e){return this.states.filter(t=>t.id===e)},closeDownloadAck(){this.acknowledgement=!1,this.$nextTick(()=>{})}}},A=x,k=(a("208e"),Object(b["a"])(A,h,u,!1,null,"58302cb4",null));t["a"]=k.exports},"732e":function(e,t,a){"use strict";a("2122")},"7d3e":function(e,t,a){"use strict";a("9133")},"7d58":function(e,t,a){},"7e1b":function(e,t,a){"use strict";var s=a("c427");class i{upload(e,t){return s["a"].post("/docs/upload",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}uploadPhoto(e,t){let a=new FormData;return a.append("file",e),s["a"].post("/members/upload",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}uploadExcel(e,t){let a=new FormData;return a.append("file",e),s["a"].post("/dropboxfiles/upload",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}getFiles(){return s["a"].get("../docs")}getPhotos(){return s["a"].get("../files")}}t["a"]=new i},"8a73":function(e,t,a){"use strict";a("1743")},"8b9b":function(e,t,a){"use strict";a("c66f")},9133:function(e,t,a){},"97bb":function(e,t,a){},aa13:function(e,t,a){"use strict";a("16ee")},b762:function(e,t,a){"use strict";a.r(t);a("14d9"),a("ff44");var s=a("132d"),i=a("a9ad"),r=a("7560"),l=a("f2e7"),c=a("f40d"),n=a("fe6c"),o=a("58df"),d=a("80d2"),h=Object(o["a"])(i["a"],Object(n["b"])(["left","bottom"]),r["a"],l["a"],c["a"]).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes(){return{"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile,...this.themeClasses}},computedBottom(){return this.bottom?"auto":this.computedYOffset},computedLeft(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop(){return this.bottom?this.computedYOffset:"auto"},computedXOffset(){return this.calcPosition(this.offsetX)},computedYOffset(){return this.calcPosition(this.offsetY)},isRtl(){return this.$vuetify.rtl},offset(){return this.overlap?this.dot?8:12:this.dot?2:4},styles(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition(e){return`calc(100% - ${Object(d["h"])(e||this.offset)})`},genBadge(){const e=this.$vuetify.lang,t=this.$attrs["aria-label"]||e.t(this.label),a=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":t,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),s=this.$createElement("span",a,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[s]):s},genBadgeContent(){if(this.dot)return;const e=Object(d["s"])(this,"badge");return e||(this.content?String(this.content):this.icon?this.$createElement(s["a"],this.icon):void 0)},genBadgeWrapper(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render(e){const t=[this.genBadgeWrapper()],a=[Object(d["s"])(this)],{"aria-atomic":s,"aria-label":i,"aria-live":r,role:l,title:c,...n}=this.$attrs;return this.inline&&this.left?a.unshift(t):a.push(t),e("span",{staticClass:"v-badge",attrs:n,class:this.classes},a)}}),u=(a("0467"),a("10d2")),f=a("713a"),m=a("9d26"),p=a("0789"),v=a("e4cd"),g=Object(o["a"])(u["a"],v["a"],l["a"]).extend({name:"v-banner",inheritAttrs:!1,props:{app:Boolean,icon:String,iconColor:String,singleLine:Boolean,sticky:Boolean,value:{type:Boolean,default:!0}},computed:{classes(){return{...u["a"].options.computed.classes.call(this),"v-banner--has-icon":this.hasIcon,"v-banner--is-mobile":this.isMobile,"v-banner--single-line":this.singleLine,"v-banner--sticky":this.isSticky}},hasIcon(){return Boolean(this.icon||this.$slots.icon||this.$scopedSlots.icon)},isSticky(){return this.sticky||this.app},styles(){const e={...u["a"].options.computed.styles.call(this)};if(this.isSticky){const t=this.app?this.$vuetify.application.bar+this.$vuetify.application.top:0;e.top=Object(d["h"])(t),e.position="sticky",e.zIndex=1}return e}},methods:{toggle(){this.isActive=!this.isActive},iconClick(e){this.$emit("click:icon",e)},genIcon(){if(!this.hasIcon)return;let e;return e=this.icon?this.$createElement(m["a"],{props:{color:this.iconColor,size:28}},[this.icon]):Object(d["s"])(this,"icon"),this.$createElement(f["a"],{staticClass:"v-banner__icon",props:{color:this.color,size:40},on:{click:this.iconClick}},[e])},genText(){return this.$createElement("div",{staticClass:"v-banner__text"},Object(d["s"])(this))},genActions(){const e=Object(d["s"])(this,"actions",{dismiss:()=>this.isActive=!1});if(e)return this.$createElement("div",{staticClass:"v-banner__actions"},e)},genContent(){return this.$createElement("div",{staticClass:"v-banner__content"},[this.genIcon(),this.genText()])},genWrapper(){return this.$createElement("div",{staticClass:"v-banner__wrapper"},[this.genContent(),this.genActions()])}},render(e){const t={staticClass:"v-banner",attrs:this.attrs$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};return e(p["a"],[e("div",this.outlined?t:this.setBackgroundColor(this.color,t),[this.genWrapper()])])}}),C=a("8336"),b=a("b0af"),S=a("99d9"),_=a("cc20"),D=a("62ad"),y=a("a523"),x=a("490a"),A=a("0fd9"),k=a("8dd9"),T=a("3129"),E=a("71a3"),I=a("c671"),R=a("fe57"),w=a("aac8"),N=a("9a96"),O=(a("e9f5"),a("a732"),function(){var e,t,a,i,r,l,c=this,n=c._self._c;return n("div",[c.permissionCheckComplete&&c.accessDenied?n(b["a"],{staticClass:"mx-auto my-6 access-denied-card",attrs:{"max-width":"650",elevation:"8"}},[n(g,{staticClass:"banner-top",attrs:{dark:"",color:"error",icon:"mdi-alert-circle"}},[n("span",{staticClass:"text-h5 font-weight-bold"},[c._v("Access Denied")])]),n(S["c"],{staticClass:"pa-5 text-center"},[n(s["a"],{staticClass:"mb-4 access-icon",attrs:{size:"64",color:"error"}},[c._v("mdi-shield-lock")]),n("h2",{staticClass:"text-h5 mb-3 access-title"},[c._v(" You don't have permission to view this case file ")]),n("p",{staticClass:"subtitle-1 mb-4 access-message"},[c._v(" The case you're trying to access (ID: "+c._s(c.$route.params.id)+") may not exist or you don't have the necessary permissions to view it. ")]),n("p",{staticClass:"caption mb-6 grey--text access-hint"},[c._v(" If you believe this is an error, please contact your system administrator. ")]),n("div",{staticClass:"text-center"},[n(C["a"],{staticClass:"px-7 return-button",attrs:{color:"primary","x-large":"",rounded:"",elevation:"2"},on:{click:function(e){return c.$router.push("/home")}}},[n(s["a"],{attrs:{left:""}},[c._v("mdi-home")]),n("span",{staticClass:"button-text"},[c._v("Return to Home")])],1)],1)],1)],1):c.loading?n(T["a"],{staticClass:"mx-auto my-4",attrs:{type:"card, article, actions"}}):!c.permissionCheckComplete||c.accessDenied||c.loading?c._e():n("div",[c.caseState.casefile.id&&c.fileaccess?n(k["a"],{staticClass:"header-section px-6 py-4",attrs:{dark:""}},[n(A["a"],{attrs:{align:"center"}},[n(D["a"],{attrs:{cols:"12",sm:"8"}},[n("div",{staticClass:"d-flex flex-wrap align-center"},[n("h2",{staticClass:"text-h5 font-weight-bold mb-0 text-break"},[c._v(" AA/"+c._s((null===(e=c.filterDept(c.caseState.casefile.refType)[0])||void 0===e?void 0:e.name)||"")+c._s(c.filterSubDept(c.caseState.casefile.subRefType)[0]?"/"+c.filterSubDept(c.caseState.casefile.subRefType)[0].subCode:"")+"/"+c._s(c.caseState.casefile.id)+"/"+c._s(c.yearOnly(c.caseState.casefile.createdAt))+c._s(null!==(t=c.filterBranches(c.caseState.casefile.branch)[0])&&void 0!==t&&t.brCode?"/"+c.filterBranches(c.caseState.casefile.branch)[0].brCode:"")+" ")]),n(_["a"],{staticClass:"status-chip ml-3",attrs:{small:"",color:c.getStatusColorClass}},[n("span",{staticClass:"status-text"},[c._v(" "+c._s((null===(a=c.filterStages(c.caseState.casefile.fileStatus)[0])||void 0===a?void 0:a.name)||"N/A")+" ")])])],1),n("div",{staticClass:"text-subtitle-1 mt-1 opacity-medium text-break"},[c._v(" "+c._s((null===(i=c.filterIns(c.caseState.casefile.insurer)[0])||void 0===i?void 0:i.name)||"N/A")+" "),n("span",{staticClass:"mx-2"},[c._v("•")]),c._v(" "+c._s(null===(r=c.caseState.casefile.vehicleNo)||void 0===r?void 0:r.toUpperCase())+" ")])]),n(D["a"],{staticClass:"text-right d-flex align-center justify-end flex-wrap",attrs:{cols:"12",sm:"4"}},[n("TransferCase",{staticClass:"mr-3",attrs:{approvingManager:c.approvingManager,casefile:c.caseState.casefile,refType:c.refType,subRefTypes:c.subRefTypes,insurer:c.insurer,branches:c.branches,members:c.members,states:c.states,regions:c.regions}}),n("TransferAdj",{staticClass:"mr-3",attrs:{casefile:c.caseState.casefile,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,insurer:c.insurer,management:c.management,states:c.states,regions:c.regions,handlers:c.handlers,members:c.members,adjusters:c.adjusters}}),n("TransferClerk",{staticClass:"mr-3",attrs:{branches:c.branches,management:c.management,insurer:c.insurer,refType:c.refType,subRefTypes:c.subRefTypes,members:c.members,handlers:c.handlers,states:c.states,regions:c.regions,clerks:c.clerks}}),n("CancelCase",{staticClass:"mr-3",attrs:{casefile:c.caseState.casefile,approvingManager:c.approvingManager,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,insurer:c.insurer,management:c.management}}),n("EditCase",{staticClass:"mr-3",attrs:{casefile:c.caseState.casefile,management:c.management,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,handlers:c.handlers,states:c.states,regions:c.regions,stages:c.stages,insurer:c.insurer}}),c.dateDiff?n(_["a"],{staticClass:"purple lighten-3 mr-3",attrs:{outlined:"",small:""}},[c._v(" "+c._s(c.dateDiff(c.moment(c.caseState.casefile.dateOfAssign).format(),c.moment().format()))+" Day(s) ")]):c._e(),n("acknowledgement",{staticClass:"mr-3",attrs:{casefile:c.caseState.casefile,refType:c.refType,subRefTypes:c.subRefTypes,insurer:c.insurer,branches:c.branches,states:c.states}}),n("flag",{staticClass:"d-inline-block flag-icon",attrs:{casefile:c.caseState.casefile}})],1)],1)],1):c._e(),n(y["a"],{staticClass:"pa-0",attrs:{fluid:""}},[c.caseState.casefile.id&&c.fileaccess?n("div",[n(b["a"],{staticClass:"workflow-actions ma-4",attrs:{flat:""}},[n(S["d"],{staticClass:"workflow-title d-flex align-center pb-4"},[n(s["a"],{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[c._v("mdi-ray-start-arrow")]),n("span",{staticClass:"title-text"},[c._v("Available Actions")])],1),n(S["c"],{staticClass:"action-buttons pa-6"},[n(A["a"],{attrs:{justify:"center",align:"start"}},[c.hasAvailableActions.showApplyDoc?n("ApplyDoc",{ref:"applyDoc",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,insurer:c.insurer,management:c.management}}):c._e(),c.hasAvailableActions.showAssignBranch?n("AssignBranch",{ref:"assignBranch",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,insurer:c.insurer,management:c.management,states:c.states,regions:c.regions,handlers:c.handlers,members:c.members}}):c._e(),c.hasAvailableActions.showBranchAccept?n("BranchAccept",{ref:"branchAccept",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,insurer:c.insurer,management:c.management,states:c.states,regions:c.regions,handlers:c.handlers,members:c.members,adjusters:c.adjusters}}):c._e(),c.hasAvailableActions.showAcceptAssignment?n("AcceptAssignment",{ref:"acceptAssignment",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,refType:c.refType,branches:c.branches,subRefTypes:c.subRefTypes,insurer:c.insurer,members:c.members,handlers:c.handlers,states:c.states},on:{accepted:c.refreshList}}):c._e(),c.hasAvailableActions.showCompleteInvestigation?n("CompleteInvestigation",{ref:"completeInvestigation",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,claims:c.claims,refType:c.refType,branches:c.branches,branch:c.branch,subRefTypes:c.subRefTypes,insurer:c.insurer,clerks:c.clerks,members:c.members,documents:c.documents},on:{"refresh-documents":c.preloadDocuments}}):c._e(),c.hasAvailableActions.showAssignEditor?n("AssignEditor",{ref:"assignEditor",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,branches:c.branches,branch:c.branch,management:c.management,editors:c.editors,refType:c.refType,subRefTypes:c.subRefTypes,insurer:c.insurer,members:c.members}}):c._e(),c.hasAvailableActions.showAcceptEditing?n("AcceptEditing",{ref:"acceptEditing",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile}}):c._e(),c.hasAvailableActions.showCompleteEditing?n("CompleteEditing",{ref:"completeEditing",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,refType:c.refType,branches:c.branches,branch:c.branch,subRefTypes:c.subRefTypes,insurer:c.insurer,clerks:c.clerks,members:c.members}}):c._e(),c.hasAvailableActions.showHoldApproval?n("HoldApproval",{ref:"holdApproval",staticClass:"action-wrapper",attrs:{approvingManager:c.approvingManager}}):c._e(),c.hasAvailableActions.showApprovalReport?n("ApprovalReport",{ref:"approvalReport",staticClass:"action-wrapper",attrs:{holdingManager:c.holdingManager}}):c._e(),c.hasAvailableActions.showReInvestigate?n("ReInvestigate",{ref:"reInvestigate",staticClass:"action-wrapper",attrs:{holdingManager:c.holdingManager}}):c._e(),c.hasAvailableActions.showReEdit?n("ReEdit",{ref:"reEdit",staticClass:"action-wrapper",attrs:{holdingManager:c.holdingManager}}):c._e(),c.hasAvailableActions.showAssignClerk?n("AssignClerk",{ref:"assignClerk",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile,branches:c.branches,branch:c.branch,refType:c.refType,subRefTypes:c.subRefTypes,insurer:c.insurer,members:c.members,management:c.management,clerks:c.clerks,documents:c.documents},on:{"refresh-documents":c.preloadDocuments}}):c._e(),c.hasAvailableActions.showAcceptFormatting?n("AcceptFormatting",{ref:"acceptFormatting",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile}}):c._e(),c.hasAvailableActions.showCompleteFormatting?n("CompleteFormatting",{ref:"completeFormatting",staticClass:"action-wrapper",attrs:{casefile:c.caseState.casefile}}):c._e(),c.hasAvailableActions.showInvoising?n("Invoising",{ref:"invoising",staticClass:"action-wrapper",attrs:{management:c.management}}):c._e(),c.hasAvailableActions.showDispatch?n("Dispatch",{ref:"dispatch",staticClass:"action-wrapper",attrs:{management:c.management}}):c._e(),c.hasAvailableActions.showDoneDispatch?n("DoneDispatch",{ref:"doneDispatch",staticClass:"action-wrapper",attrs:{management:c.management}}):c._e(),c.hasAvailableActions.showClose?n("Close",{ref:"close",staticClass:"action-wrapper",attrs:{management:c.management}}):c._e(),Object.values(c.hasAvailableActions).some(e=>e)?c._e():n(D["a"],{attrs:{cols:"12"}},[n("div",{staticClass:"no-actions text-center pa-6"},[n(s["a"],{attrs:{size:"48",color:"grey lighten-1"}},[c._v("mdi-timer-sand")]),n("h3",{staticClass:"mt-4 grey--text text--darken-1"},[c._v(" Awaiting Next Action ")]),n("p",{staticClass:"subtitle-1 grey--text"},[c._v(" Current Stage: "+c._s((null===(l=c.filterStages(c.caseState.casefile.fileStatus)[0])||void 0===l?void 0:l.name)||"N/A")+" ")])],1)])],1)],1)],1),n(A["a"],[n(R["a"],{staticClass:"mb-5",attrs:{grow:""},model:{value:c.tab,callback:function(e){c.tab=e},expression:"tab"}},[n(N["a"],{staticStyle:{height:"5px"},attrs:{color:"green"}}),n(E["a"],[c._v("Details")]),n(E["a"],[c._v(" Documents "),c.documentsLoading?[n(x["a"],{staticClass:"ml-2",attrs:{indeterminate:"",size:"16",width:"2",color:"success"}})]:n(h,{attrs:{content:c.documentCount||"0",color:"success","offset-x":"5","offset-y":"1"}})],2),n(E["a"],[c._v(" Comments "),c.commentsLoading?[n(x["a"],{staticClass:"ml-2",attrs:{indeterminate:"",size:"16",width:"2",color:"warning"}})]:n(h,{attrs:{content:c.commentCount||"0",color:"warning","offset-x":"5","offset-y":"1"}})],2),n(E["a"],[c._v(" History "),c.historyLoading?[n(x["a"],{staticClass:"ml-2",attrs:{indeterminate:"",size:"16",width:"2",color:"info"}})]:n(h,{attrs:{content:c.historyTabCount||"0",color:"info","offset-x":"5","offset-y":"1"}})],2),n(E["a"],[c._v("Audit")]),n(E["a"],[c._v("Claims")])],1)],1),n(w["a"],{staticClass:"mt-1",model:{value:c.tab,callback:function(e){c.tab=e},expression:"tab"}},[n(I["a"],[n("DetailTab",{attrs:{adjusters:c.adjusters,members:c.members,editors:c.editors,clerks:c.clerks,branches:c.branches,insurer:c.insurer,handlers:c.handlers,refType:c.refType,subRefTypes:c.subRefTypes,stages:c.stages,states:c.states}})],1),n(I["a"],[n("Documents",{attrs:{casefile:c.caseState.casefile,preloadedDocs:c.documents,loading:c.documentsLoading}})],1),n(I["a"],[n("comments",{attrs:{casefile:c.caseState.casefile,preloadedComments:c.comments,loading:c.commentsLoading},on:{"comment-added":c.handleCommentAdded,"comment-deleted":c.handleCommentDeleted}})],1),n(I["a"],[n("History",{ref:"history",attrs:{branches:c.branches,refType:c.refType,subRefTypes:c.subRefTypes,stages:c.stages,members:c.members,insurer:c.insurer,states:c.states,handlers:c.handlers,preloadedHistory:c.caseHistory,loading:c.historyLoading},on:{"history-count-updated":c.handleHistoryCountUpdated}})],1),n(I["a"],[n("Audit",{attrs:{members:c.members}})],1),n(I["a"],[n("Claims",{attrs:{branches:c.branches,refType:c.refType,subRefTypes:c.subRefTypes,members:c.members}})],1)],1),n(A["a"],[n(D["a"],{attrs:{cols:"12"}},[n(A["a"],{staticClass:"mt-2",attrs:{"no-gutters":""}},[n(D["a"],{attrs:{cols:"12",justify:"center",align:"center"}})],1)],1)],1)],1):c._e()])],1)],1)}),B=[],j=(a("910d"),a("ab43"),a("169a")),$=a("ce7e"),F=a("ce87"),P=a("3a2f"),L=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.acceptEditingDisabled},on:{click:function(t){return e.acceptEditing()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-account-search")]),t("span",{staticClass:"action-text"},[e._v("ACCEPT EDITING")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ACCEPT EDITING")])]),t(j["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogAcceptEditing,callback:function(t){e.dialogAcceptEditing=t},expression:"dialogAcceptEditing"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("ACCEPT EDITING")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(S["d"],[e._v("I ACCEPT")]),t($["a"]),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeAcceptEditingDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:e.compAcceptEditing}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},M=[],U=a("f0cc"),H=a("c1df"),G=a.n(H),Y=a("2f62"),V={name:"acceptEditing",props:[],components:{},data(){return{dialogAcceptEditing:!1}},computed:{acceptEditingDisabled(){return!("EDAC"==this.caseState.casefile.fileStatus&&this.caseState.casefile.editor==this.$store.state.auth.user.id)},...Object(Y["c"])(["caseState"])},watch:{acceptEditing(e){e||this.closeAcceptEditingDialog()}},methods:{acceptEditing(){this.dialogAcceptEditing=!0},compAcceptEditing(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="EDI",this.caseState.casefile.dateStartEdi=G()().format()).then(e=>{this.closeAcceptEditingDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeAcceptEditingDialog()},closeAcceptEditingDialog(){this.dialogAcceptEditing=!1,this.$nextTick(()=>{})}}},K=V,J=a("2877"),z=Object(J["a"])(K,L,M,!1,null,null,null),W=z.exports,q=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.acceptFormattingDisabled},on:{click:function(t){return e.acceptFormatting()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-account-search")]),t("span",{staticClass:"action-text"},[e._v("ACCEPT FORMATTING")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ACCEPT FORMATTING")])]),t(j["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogAcceptFormatting,callback:function(t){e.dialogAcceptFormatting=t},expression:"dialogAcceptFormatting"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("ACCEPT FORMATTING")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(S["d"],[e._v("I ACCEPT")]),t($["a"]),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeAcceptFormattingDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:e.compAcceptFormatting}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},X=[],Q={name:"acceptFormatting",props:[],components:{},data(){return{dialogAcceptFormatting:!1}},computed:{acceptFormattingDisabled(){return!("CLERK"==this.caseState.casefile.fileStatus&&this.caseState.casefile.clerkInCharge==this.$store.state.auth.user.id)},...Object(Y["c"])(["caseState"])},watch:{acceptFormatting(e){e||this.closeAcceptFormattingDialog()}},methods:{acceptFormatting(){this.dialogAcceptFormatting=!0},compAcceptFormatting(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="FOIN",this.caseState.casefile.dateStartFormatting=G()().format()).then(e=>{this.closeAcceptFormattingDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeAcceptFormattingDialog()},closeAcceptFormattingDialog(){this.dialogAcceptFormatting=!1,this.$nextTick(()=>{})}}},Z=Q,ee=Object(J["a"])(Z,q,X,!1,null,null,null),te=ee.exports,ae=a("5246"),se=a("2fa4"),ie=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"primary mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.applyDocDisabled},on:{click:function(t){return e.applyDoc()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-file-document-multiple")]),t("span",{staticClass:"action-text"},[e._v("APPLY DOCUMENT")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("APPLY DOCUMENT")])]),t(j["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogApplyDoc,callback:function(t){e.dialogApplyDoc=t},expression:"dialogApplyDoc"}},[t(b["a"],{staticClass:"text-center"},[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e._v("APPLY DOCUMENTS")]),t(S["c"],{staticClass:"mt-3 pa-0"},[e._v(" CASEFILE NUMBER: AA"),e._l(e.filterDept(e.caseState.casefile.refType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.name)),e._l(e.filterSubDept(e.caseState.casefile.subRefType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.subCode))])}))],2)})),e._v("/"+e._s(e.caseState.casefile.id)+"/"+e._s(e.yearOnly(e.caseState.casefile.createdAt))),e._l(e.filterBranches(e.caseState.casefile.branch),(function(a){return t("span",{key:a.id},[e._v("/"+e._s(a.brCode)+" ")])}))],2),t($["a"]),t(S["a"],[t(se["a"]),t(C["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:function(t){e.dialogApplyDoc=!1}}},[e._v("Cancel")]),t(C["a"],{staticClass:"success",attrs:{small:"",tile:""},on:{click:e.setPendingDoc}},[e._v("OK")]),t(se["a"])],1)],1)],1)],1)},re=[],le={name:"applyDoc",props:["management","refType","subRefTypes","branches"],components:{},data(){return{dialogApplyDoc:!1}},computed:{applyDocDisabled(){return!("NEW"==this.caseState.casefile.fileStatus&&this.management)},...Object(Y["c"])(["caseState"])},watch:{applyDoc(e){e||this.closeApplyDoc()}},methods:{moment:function(e){return G()(e)},yearOnly(e){return G()(e).format("YY")},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},applyDoc(){this.dialogApplyDoc=!0},setPendingDoc(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PEND",this.caseState.casefile.applyDocBy=this.$store.state.auth.user.id,this.caseState.casefile.applyDocDate=G()().format()).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeApplyDoc()},closeApplyDoc(){this.dialogApplyDoc=!1,this.$nextTick(()=>{})}},mounted(){}},ce=le,ne=Object(J["a"])(ce,ie,re,!1,null,null,null),oe=ne.exports,de=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.approvalReportDisabled},on:{click:function(t){return e.approvalReport()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-tag-check")]),t("span",{staticClass:"action-text"},[e._v("APPROVE REPORT")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("APPROVE REPORT")])]),t(j["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogApprovalReport,callback:function(t){e.dialogApprovalReport=t},expression:"dialogApprovalReport"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("APPROVE REPORT")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%",tile:""}},[t(S["d"],[e._v("I APPROVE")]),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeApprovalReportDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"success mt-3",attrs:{tile:"",small:""},on:{click:e.compApprovalReport}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},he=[],ue={name:"approvalReport",props:["holdingManager"],components:{},data(){return{dialogApprovalReport:!1}},computed:{approvalReportDisabled(){return!("HOLD"==this.caseState.casefile.fileStatus&&this.holdingManager)},...Object(Y["c"])(["caseState"])},watch:{approvalReport(e){e||this.closeApprovalReportDialog()}},methods:{approvalReport(){this.dialogApprovalReport=!0},compApprovalReport(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PFORM",this.caseState.casefile.dateOfApproval=G()().format()).then(e=>{this.closeApprovalReportDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeApprovalReportDialog()},closeApprovalReportDialog(){this.dialogApprovalReport=!1,this.$nextTick(()=>{})}}},fe=ue,me=Object(J["a"])(fe,de,he,!1,null,null,null),pe=me.exports,ve=a("c6a6"),ge=a("2e4b"),Ce=a("e449"),be=a("b974"),Se=a("8654"),_e=a("a844"),De=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.newPendDisabled},on:{click:function(t){return e.assignBranch()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-file-cabinet")]),t("span",{staticClass:"action-text"},[e._v("ASSIGN BRANCH")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ASSIGN BRANCH")])]),t(j["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogAssignBranch,callback:function(t){e.dialogAssignBranch=t},expression:"dialogAssignBranch"}},[t(b["a"],[t(S["d"],[t("span",{staticClass:"text-h5"},[e._v("ASSIGN BRANCH")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(b["a"],{attrs:{width:"100%"}},[t(S["d"],[e._v("Department")]),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.refType,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select Department","persistent-hint":"",label:"Department"},on:{change:e.handleRefTypeChange},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Department ")]},proxy:!0}]),model:{value:e.caseState.casefile.refType,callback:function(t){e.$set(e.caseState.casefile,"refType",t)},expression:"caseState.casefile.refType"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.availableSubRefTypes,"item-text":"subCode","item-value":"id","no-data-text":"There is no file-Classification option for selected department above","menu-props":{maxHeight:"400"},label:"File-Classification",hint:"Select File-Classification","persistent-hint":""},model:{value:e.caseState.casefile.subRefType,callback:function(t){e.$set(e.caseState.casefile,"subRefType",t)},expression:"caseState.casefile.subRefType"}})],1)],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.branches,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile branch","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Branch ")]},proxy:!0}]),model:{value:e.caseState.casefile.branch,callback:function(t){e.$set(e.caseState.casefile,"branch",t)},expression:"caseState.casefile.branch"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(ve["a"],{attrs:{items:e.insurer,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile insurer","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurer ")]},proxy:!0}]),model:{value:e.caseState.casefile.insurer,callback:function(t){e.$set(e.caseState.casefile,"insurer",t)},expression:"caseState.casefile.insurer"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.filterHandler(e.caseState.casefile.insurer),"item-text":"name","item-value":"id","no-data-text":"There is no handler option for selected insurer above","menu-props":{maxHeight:"400"},label:"Claim Handler",hint:"Select Handler","persistent-hint":""},model:{value:e.caseState.casefile.handler,callback:function(t){e.$set(e.caseState.casefile,"handler",t)},expression:"caseState.casefile.handler"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{"item-text":"Insurer's Reference",rules:[e=>!!e||"Insurers reference is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurers Reference ")]},proxy:!0}]),model:{value:e.caseState.casefile.claimNo,callback:function(t){e.$set(e.caseState.casefile,"claimNo",t)},expression:"caseState.casefile.claimNo"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(Ce["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(Se["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Assignment ")]},proxy:!0}],null,!0),model:{value:e.caseState.casefile.dateOfAssign,callback:function(t){e.$set(e.caseState.casefile,"dateOfAssign",t)},expression:"caseState.casefile.dateOfAssign"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(ge["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu=!1}},model:{value:e.caseState.casefile.dateOfAssign,callback:function(t){e.$set(e.caseState.casefile,"dateOfAssign",t)},expression:"caseState.casefile.dateOfAssign"}})],1)],1)]],2),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{rules:[e=>!!e||"Vehicle Number is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Vehicle Number ")]},proxy:!0}]),model:{value:e.caseState.casefile.vehicleNo,callback:function(t){e.$set(e.caseState.casefile,"vehicleNo",t)},expression:"caseState.casefile.vehicleNo"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(Ce["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(Se["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Loss ")]},proxy:!0}],null,!0),model:{value:e.caseState.casefile.dateOfLoss,callback:function(t){e.$set(e.caseState.casefile,"dateOfLoss",t)},expression:"caseState.casefile.dateOfLoss"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[t(ge["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu1=!1}},model:{value:e.caseState.casefile.dateOfLoss,callback:function(t){e.$set(e.caseState.casefile,"dateOfLoss",t)},expression:"caseState.casefile.dateOfLoss"}})],1)],1)]],2),t(b["a"],{attrs:{width:"100%"}},[t(S["d"],[e._v("Place Of Loss")]),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.states,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select State","persistent-hint":"",label:"State"},model:{value:e.caseState.casefile.stateOfLoss,callback:function(t){e.$set(e.caseState.casefile,"stateOfLoss",t)},expression:"caseState.casefile.stateOfLoss"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.filterRegions(e.caseState.casefile.stateOfLoss),"item-text":"name","item-value":"name","no-data-text":"There is no district option for selected state above","menu-props":{maxHeight:"400"},label:"Area Of Loss",hint:"Select District","persistent-hint":""},model:{value:e.caseState.casefile.placeOfLoss,callback:function(t){e.$set(e.caseState.casefile,"placeOfLoss",t)},expression:"caseState.casefile.placeOfLoss"}})],1)],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{label:"Insured Name"},model:{value:e.caseState.casefile.insuredName,callback:function(t){e.$set(e.caseState.casefile,"insuredName",t)},expression:"caseState.casefile.insuredName"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(_e["a"],{attrs:{label:"Insurers Comment"},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurers Comment ")]},proxy:!0}]),model:{value:e.caseState.casefile.insComment,callback:function(t){e.$set(e.caseState.casefile,"insComment",t)},expression:"caseState.casefile.insComment"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(se["a"]),t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeAssignBranchDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:e.isAddFileButtonDisabled},on:{click:e.assignBranchSubmit}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},ye=[],xe=a("061e"),Ae={name:"AssignBranch",props:["branches","branch","management","insurer","refType","subRefTypes","members","handlers","states","regions"],components:{},data(){return{dialogAssignBranch:!1,menu:!1,menu1:!1}},computed:{...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},newPendDisabled(){return!(("NEW"==this.caseState.casefile.fileStatus||"PEND"==this.caseState.casefile.fileStatus)&&this.management)},availableSubRefTypes(){return this.caseState.casefile.subRefType?this.subRefTypes:this.filtersubRefType(this.caseState.casefile.refType)}},watch:{assignBranch(e){e||this.closeAssignBranchDialog()}},methods:{filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},filterVehiclNo(e){return e?e.toLowerCase().replace(/\s/g,""):"TBA"},assignBranch(){this.dialogAssignBranch=!0},assignBranchSubmit(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.vehicleNo=this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),this.caseState.casefile.fileStatus="BRAC",this.caseState.casefile.assignBranchBy=this.$store.state.auth.user.id,this.caseState.casefile.dateOfReg=G()().format()).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{const e=this.caseState.casefile.refType;var t={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:this.findUserEmail(this.filterPicID(e)),createdBy:this.$store.state.auth.user.id};xe["a"].assignBranch(t).then(e=>{this.closeAssignBranchDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.dataEmail=""}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeAssignBranchDialog()},closeAssignBranchDialog(){this.dialogAssignBranch=!1,this.$nextTick(()=>{})},handleRefTypeChange(){this.caseState.casefile.subRefType||(this.caseState.casefile.subRefType=null)}}},ke=Ae,Te=Object(J["a"])(ke,De,ye,!1,null,null,null),Ee=Te.exports,Ie=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.assignClerkDisabled},on:{click:function(t){return e.assignClerk()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-format-align-center")]),t("span",{staticClass:"action-text"},[e._v("ASSIGN CLERK FOR FORMATTING")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ASSIGN CLERK FOR FORMATTING")])]),e.assignClerkDisabled?t("div",{staticClass:"mt-2 text-center"},[t("small",{staticClass:"red--text text--lighten-3"},[e._v(" "+e._s(e.assignClerkDisabledMessage)+" ")])]):e._e(),t(j["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogAssignClerk,callback:function(t){e.dialogAssignClerk=t},expression:"dialogAssignClerk"}},[t(b["a"],{staticClass:"text-center"},[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("ASSIGN CLERK FOR FORMATTING")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.filteredBranches,"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":""},model:{value:e.branch.brCode,callback:function(t){e.$set(e.branch,"brCode",t)},expression:"branch.brCode"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.filterClerkByBranch(e.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Clerk for the branch above","menu-props":{maxHeight:"400"},label:"BRANCH CLERK / BRANCH MANAGER / CLERK / MANAGER",hint:"Assign Clerk","persistent-hint":""},model:{value:e.currentClerk,callback:function(t){e.currentClerk=t},expression:"currentClerk"}})],1)],1)],1)],1),t($["a"]),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeAssignClerkDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",disabled:e.isFileButtonDisabled,small:""},on:{click:e.compAssignClerk}},[e._v("Submit")])],1)],1)],1)],1)},Re=[],we={name:"AssignClerk",props:["subRefTypes","branches","branch","insurer","refType","clerks","management","members","documents"],components:{},data(){return{dialogAssignClerk:!1,currentClerk:""}},computed:{filteredBranches(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(e=>e.id===this.caseState.casefile.branch)},assignClerkDisabled(){return!(("PFORM"==this.caseState.casefile.fileStatus||"PEDI"==this.caseState.casefile.fileStatus)&&this.management)},assignClerkDisabledMessage(){return"PFORM"!=this.caseState.casefile.fileStatus&&"PEDI"!=this.caseState.casefile.fileStatus?"Case is not in formatting stage":this.management?"":"You do not have permission to assign clerk"},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!(this.branch.brCode&&this.currentClerk)}},watch:{assignClerk(e){e||this.closeAssignClerkDialog()},documents:{immediate:!0,deep:!0,handler(){this.$forceUpdate()}}},methods:{filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},filterClerkByBranch(e){return this.clerks.filter(t=>t.branches.some(t=>t.brCode===e))},assignClerk(){this.dialogAssignClerk=!0},compAssignClerk(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.clerkInCharge=this.currentClerk,this.caseState.casefile.fileStatus="CLERK",this.caseState.casefile.dateAssignFormatting=G()().format(),this.caseState.casefile.assignClerkBy=this.$store.state.auth.user.id).then(e=>{this.closeAssignClerkDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).then(()=>{var e={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:this.findUserEmail(this.currentClerk),createdBy:this.$store.state.auth.user.id};xe["a"].assignClerk(e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}),this.dataEmail=""}).catch(e=>{console.log(e)}),this.closeAssignClerkDialog()},closeAssignClerkDialog(){this.dialogAssignClerk=!1,this.$nextTick(()=>{})}}},Ne=we,Oe=(a("7d3e"),Object(J["a"])(Ne,Ie,Re,!1,null,"32c40920",null)),Be=Oe.exports,je=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"mr-1",staticStyle:{"background-color":"#a5d6a7",color:"#000"},attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.assignEditorDisabled},on:{click:function(t){return e.assignEditor()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],{staticStyle:{color:"#000"}},[e._v("mdi-account-edit-outline")]),t("span",{staticClass:"action-text",staticStyle:{color:"#000"}},[e._v("ASSIGN EDITOR")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ASSIGN EDITOR")])]),t(j["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogAssignEditor,callback:function(t){e.dialogAssignEditor=t},expression:"dialogAssignEditor"}},[t(b["a"],{staticClass:"text-center"},[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("ASSIGN EDITOR")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.filteredBranches,"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":""},model:{value:e.branch.brCode,callback:function(t){e.$set(e.branch,"brCode",t)},expression:"branch.brCode"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.filterEditorByBranch(e.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Editor for the branch above","menu-props":{maxHeight:"400"},label:"EDITOR/ BRANCH CLERK / BRANCH MANAGER / CLERK / MANAGER",hint:"Assign Editor","persistent-hint":""},model:{value:e.currentEditor,callback:function(t){e.currentEditor=t},expression:"currentEditor"}})],1)],1)],1)],1),t($["a"]),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeAssignEditorDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{disabled:e.isAddFileButtonDisabled,tile:"",small:""},on:{click:e.compAssignEditor}},[e._v("Submit")])],1)],1)],1)],1)},$e=[],Fe={name:"AssignEditor",props:["branches","branch","editors","management","insurer","refType","subRefTypes","members"],components:{},data(){return{dialogAssignEditor:!1,currentEditor:""}},computed:{filteredBranches(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(e=>e.id===this.caseState.casefile.branch)},assignEditorDisabled(){return!("PEDI"==this.caseState.casefile.fileStatus&&this.management)},...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.branch.brCode&&this.currentEditor)}},watch:{assignEditor(e){e||this.closeAssignEditorDialog()}},methods:{filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},findBrcode(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t.map(e=>e.brCode)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},filterEditorByBranch(e){return this.editors.filter(t=>t.branches.some(t=>t.brCode===e))},assignEditor(){this.dialogAssignEditor=!0},compAssignEditor(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.editor=this.currentEditor,this.caseState.casefile.fileStatus="EDAC",this.caseState.casefile.dateOfEdi=G()().format(),this.caseState.casefile.assignEdiBy=this.$store.state.auth.user.id).then(e=>{this.closeAssignEditorDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).then(()=>{var e={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:this.findUserEmail(this.currentEditor),createdBy:this.$store.state.auth.user.id};xe["a"].editorAccept(e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}),this.dataEmail=""}).catch(e=>{console.log(e)}),this.closeAssignEditorDialog()},closeAssignEditorDialog(){this.dialogAssignEditor=!1,this.$nextTick(()=>{})}}},Pe=Fe,Le=Object(J["a"])(Pe,je,$e,!1,null,null,null),Me=Le.exports,Ue=(a("0160"),Object(o["a"])(r["a"]).extend({name:"v-timeline",provide(){return{timeline:this}},props:{alignTop:Boolean,dense:Boolean,reverse:Boolean},computed:{classes(){return{"v-timeline--align-top":this.alignTop,"v-timeline--dense":this.dense,"v-timeline--reverse":this.reverse,...this.themeClasses}}},render(e){return e("div",{staticClass:"v-timeline",class:this.classes},Object(d["s"])(this))}}));const He=Object(o["a"])(i["a"],r["a"]);var Ge=He.extend().extend({name:"v-timeline-item",inject:["timeline"],props:{color:{type:String,default:"primary"},fillDot:Boolean,hideDot:Boolean,icon:String,iconColor:String,large:Boolean,left:Boolean,right:Boolean,small:Boolean},computed:{hasIcon(){return!!this.icon||!!this.$slots.icon}},methods:{genBody(){return this.$createElement("div",{staticClass:"v-timeline-item__body"},Object(d["s"])(this))},genIcon(){return Object(d["s"])(this,"icon")||this.$createElement(m["a"],{props:{color:this.iconColor,dark:!this.theme.isDark,small:this.small}},this.icon)},genInnerDot(){const e=this.setBackgroundColor(this.color);return this.$createElement("div",{staticClass:"v-timeline-item__inner-dot",...e},[this.hasIcon&&this.genIcon()])},genDot(){return this.$createElement("div",{staticClass:"v-timeline-item__dot",class:{"v-timeline-item__dot--small":this.small,"v-timeline-item__dot--large":this.large}},[this.genInnerDot()])},genDivider(){const e=[];return this.hideDot||e.push(this.genDot()),this.$createElement("div",{staticClass:"v-timeline-item__divider"},e)},genOpposite(){return this.$createElement("div",{staticClass:"v-timeline-item__opposite"},Object(d["s"])(this,"opposite"))}},render(e){const t=[this.genBody(),this.genDivider()];return this.$slots.opposite&&t.push(this.genOpposite()),e("div",{staticClass:"v-timeline-item",class:{"v-timeline-item--fill-dot":this.fillDot,"v-timeline-item--before":this.timeline.reverse?this.right:this.left,"v-timeline-item--after":this.timeline.reverse?this.left:this.right,...this.themeClasses}},t)}}),Ye=function(){var e=this,t=e._self._c;return t("div",[t(S["d"],{staticClass:"pb-0"},[e._v("CASE AUDIT")]),t($["a"]),t(y["a"],{staticStyle:{width:"700px"},attrs:{fluid:""}},[t(Ue,{attrs:{dense:e.$vuetify.breakpoint.smAndDown}},[t(Ge,{staticClass:"white--text mb-6",attrs:{"fill-dot":"",color:"success",large:""},scopedSlots:e._u([{key:"icon",fn:function(){return[t("span",[e._v("DAYS")])]},proxy:!0}])}),e.caseState.casefile.createdAt?t(Ge,[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.createdAt))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" CASEFILE CREATED ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" PENDING DOCUMENT APPLICATION / BRANCH ASSIGNING ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.createdBy))+" ")])],1)],1):e._e(),e.caseState.casefile.applyDocDate?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.createdAt).format(),e.moment(e.caseState.casefile.applyDocDate).format()))+" ")]):e._e()]},proxy:!0}],null,!1,1081402888)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.applyDocDate))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" DOCUMENTS APPLIED ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" PENDING BRANCH ASSIGNING ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.applyDocBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateOfReg?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.createdAt).format(),e.moment(e.caseState.casefile.dateOfReg).format()))+" ")]):e._e()]},proxy:!0}],null,!1,4224438349)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateOfReg))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" ASSIGNED TO BRANCH ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" PENDING BRANCH ACCEPTANCE ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.assignBranchBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateOfAdj?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateOfReg).format(),e.moment(e.caseState.casefile.dateOfAdj).format()))+" ")]):e._e()]},proxy:!0}],null,!1,1873036266)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateOfAdj))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" BRANCH ACCEPTED ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" ADJUSTER ASSIGNED ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.assignAdjBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateStartInv?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateOfAdj).format(),e.moment(e.caseState.casefile.dateStartInv).format()))+" ")]):e._e()]},proxy:!0}],null,!1,318801186)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateStartInv))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" ADJUSTER ACCEPTED ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" STARTED INVESTIGATION ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.adjuster))+" ")])],1)],1):e._e(),e.caseState.casefile.dateEndInv?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateStartInv).format(),e.moment(e.caseState.casefile.dateEndInv).format()))+" ")]):e._e()]},proxy:!0}],null,!1,1822802010)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateEndInv))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" INVESTIGATION COMPLETE ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" REPORT SUBMITTED ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.adjuster))+" ")])],1)],1):e._e(),e.caseState.casefile.dateOfEdi?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateEndInv).format(),e.moment(e.caseState.casefile.dateOfEdi).format()))+" ")]):e._e()]},proxy:!0}],null,!1,1969449226)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateOfEdi))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" EDITOR ASSIGNED ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" PENDING EDITING ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.assignEdiBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateStartEdi?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateOfEdi).format(),e.moment(e.caseState.casefile.dateStartEdi).format()))+" ")]):e._e()]},proxy:!0}],null,!1,2475003964)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateStartEdi))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" EDITOR ACCEPTED ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" EDITING ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.editor))+" ")])],1)],1):e._e(),e.caseState.casefile.dateEndEdi?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateStartEdi).format(),e.moment(e.caseState.casefile.dateEndEdi).format()))+" ")]):e._e()]},proxy:!0}],null,!1,2282619354)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateEndEdi))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" EDITING COMPLETE ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" REPORT SUBMITTED ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.editor))+" ")])],1)],1):e._e(),e.caseState.casefile.dateOfApproval?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateEndEdi).format(),e.moment(e.caseState.casefile.dateOfApproval).format()))+" ")]):e._e()]},proxy:!0}],null,!1,1312873564)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateOfApproval))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" REPORT APPROVED ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" PENDING FORMATTING ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.approvedBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateAssignFormatting?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateOfApproval).format(),e.moment(e.caseState.casefile.dateAssignFormatting).format()))+" ")]):e._e()]},proxy:!0}],null,!1,287509389)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateAssignFormatting))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" CLERK ASSIGNED ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" PENDING ACCEPTANCE ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.assignClerkBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateStartFormatting?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateAssignFormatting).format(),e.moment(e.caseState.casefile.dateStartFormatting).format()))+" ")]):e._e()]},proxy:!0}],null,!1,4041730132)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateStartFormatting))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" CLERK ACCEPTED ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" FORMATTING ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.clerkInCharge))+" ")])],1)],1):e._e(),e.caseState.casefile.dateEndFormatting?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateStartFormatting).format(),e.moment(e.caseState.casefile.dateEndFormatting).format()))+" ")]):e._e()]},proxy:!0}],null,!1,2677481882)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateEndFormatting))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" FORMATTING COMPLETE ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" REPORT SUBMITTED ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.clerkInCharge))+" ")])],1)],1):e._e(),e.caseState.casefile.dateFinal?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateEndFormatting).format(),e.moment(e.caseState.casefile.dateFinal).format()))+" ")]):e._e()]},proxy:!0}],null,!1,2137556161)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateFinal))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" INVOISING & FINALISATION ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" PENDING DISPATCH / CLOSURE ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.finalBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateDispatch?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateFinal).format(),e.moment(e.caseState.casefile.dateDispatch).format()))+" ")]):e._e()]},proxy:!0}],null,!1,671269065)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateDispatch))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" DISPATCH INITIATED ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" PENDING DISPATCH ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.dispatchBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateClosed?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateFinal).format(),e.moment(e.caseState.casefile.dateClosed).format()))+" ")]):e._e()]},proxy:!0}],null,!1,3788649547)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateClosed))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" CLOSED ")]),t(S["c"],{staticClass:"caption text-start py-0"},[e._v(" FILE CLOSED ")]),t(S["c"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.closedBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateOfCancel?t(Ge,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.createdAt).format(),e.moment(e.caseState.casefile.dateOfCancel).format()))+" ")]):e._e()]},proxy:!0}],null,!1,2883963995)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateOfCancel))))]),t(b["a"],{staticClass:"elevation-2"},[t(S["c"],{staticClass:"text-h6 text-start font-weight-black"},[e._v(" CANCELLED ")]),t(S["c"],{staticClass:"caption text-start"},[e._v(" FILE CANCELLED ")]),t(S["c"],{staticClass:"caption text-start"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.cancelBy))+" ")])],1)],1):e._e()],1)],1)],1)},Ve=[],Ke=(a("f665"),{name:"audit",props:["members"],data:()=>({events:[],input:null,nonce:0}),computed:{...Object(Y["c"])(["caseState"]),timeline(){return this.events.slice().reverse()}},methods:{moment:function(e){return G()(e)},dateDiff(e,t){let a=G()(e),s=G()(t),i=G.a.duration(s.diff(a));return Math.round(i.asDays())},formatDate:function(e){return e?G()(e).format("DD/MM/YYYY"):""},filterUser(e){if(!e||!this.members)return[{email:"N/A"}];const t=this.members.filter(t=>t.id===e);return t.length?t:[{email:"N/A"}]},getFilteredUserEmail(e){if(!e||!this.members)return"N/A";const t=this.members.find(t=>t.id===e);return t?t.email:"N/A"}}}),Je=Ke,ze=Object(J["a"])(Je,Ye,Ve,!1,null,null,null),We=ze.exports,qe=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.assignAdjDisabled},on:{click:function(t){return e.assignAdj()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-account-plus-outline")]),t("span",{staticClass:"action-text"},[e._v("ACCEPT CASE & ASSIGN ADJUSTER")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ACCEPT CASE & ASSIGN ADJUSTER")])]),t(j["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogAdj,callback:function(t){e.dialogAdj=t},expression:"dialogAdj"}},[t(b["a"],{staticClass:"text-center"},[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("ACCEPT CASE & ASSIGN ADJUSTER")])]),t(S["c"],{staticClass:"mt-3 pa-0"},[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(S["c"],{staticClass:"mt-3 pa-0"},[e._v(" CHOOSE BRANCH FOLLOWED BY ADJUSTER ")])],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.currentUserBranch(),"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":"",clearable:""},model:{value:e.branch.brCode,callback:function(t){e.$set(e.branch,"brCode",t)},expression:"branch.brCode"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.filterAdjByBranch(e.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Adjuster for the branch above","menu-props":{maxHeight:"400"},label:"ADJUSTERS",hint:"Assign Adjuster","persistent-hint":"",clearable:""},model:{value:e.caseState.casefile.adjuster,callback:function(t){e.$set(e.caseState.casefile,"adjuster",t)},expression:"caseState.casefile.adjuster"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(se["a"]),t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",small:"",dark:""},on:{click:e.closeAdj}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:e.assignAdjRule},on:{click:e.saveAdjuster}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},Xe=[],Qe={name:"branchAccept",props:["branches","management","insurer","refType","subRefTypes","members","handlers","states","regions","adjusters"],components:{},data(){return{dialogAdj:!1,menu:!1,menu1:!1,branch:{name:"",brCode:""}}},computed:{...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},assignAdjRule(){return!(this.branch.brCode&&this.caseState.casefile.adjuster)},computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},assignAdjDisabled(){return!("BRAC"==this.caseState.casefile.fileStatus&&this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK"))}},watch:{assignAdj(e){e||this.closeAdj()}},methods:{currentUserBranch(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(e=>e.id===this.caseState.casefile.branch)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findAdjEmail(e){const t=this.adjusters.filter(t=>t.id===e);return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},filterAdjByBranch(e){return this.adjusters.filter(t=>t.branches.some(t=>t.brCode===e))},assignAdj(){this.dialogAdj=!0},saveAdjuster(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="ADAC",this.caseState.casefile.dateOfAdj=G()().format(),this.caseState.casefile.assignAdjBy=this.$store.state.auth.user.id).then(e=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{const e=this.caseState.casefile.adjuster;var t={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo,recipient:this.findAdjEmail(e),createdBy:this.$store.state.auth.user.id};xe["a"].assignAdj(t).then(e=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.dataEmail=""}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeAdj()},closeAdj(){this.dialogAdj=!1,this.$nextTick(()=>{})}}},Ze=Qe,et=Object(J["a"])(Ze,qe,Xe,!1,null,null,null),tt=et.exports,at=a("fde1"),st=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t("span",e._g({},a),[t(C["a"],e._b({staticClass:"mx-1",attrs:{fab:"","x-small":"",color:"red lighten-2",dark:"",disabled:!e.isRealManager||e.isCaseCancelled},on:{click:e.showCancelCaseDialog}},"v-btn",i,!1),[t(s["a"],{attrs:{dark:""}},[e._v("mdi-file-document-remove-outline")])],1)],1)]}}])},[t("span",[e._v("Cancel Case")])]),t(j["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogCancelCase,callback:function(t){e.dialogCancelCase=t},expression:"dialogCancelCase"}},[t(b["a"],{staticClass:"text-center"},[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e._v("CANCEL ASSIGNMENT?")]),t(S["c"],{staticClass:"mt-3 pa-0"},[e._v(" CASEFILE NUMBER: AA"),e._l(e.filterDept(e.caseState.casefile.refType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.name)),e._l(e.filtersubRefType(e.caseState.casefile.subRefType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.subCode))])}))],2)})),e._v("/"+e._s(e.caseState.casefile.id)+"/"+e._s(e.yearOnly(e.caseState.casefile.createdAt))),e._l(e.filterBranches(e.caseState.casefile.branch),(function(a){return t("span",{key:a.id},[e._v("/"+e._s(a.brCode)+" ")])}))],2),t(D["a"],{attrs:{cols:"12"}},[t(_e["a"],{staticClass:"subtitle-1",attrs:{solo:"",dense:"",placeholder:"Reason"},model:{value:e.commentData.comment,callback:function(t){e.$set(e.commentData,"comment",t)},expression:"commentData.comment"}})],1),t($["a"]),t(S["a"],[t(se["a"]),t(C["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:e.closeCancelCase}},[e._v("No")]),t(C["a"],{staticClass:"error",attrs:{small:"",tile:"",disabled:e.isComment},on:{click:e.cancelCaseConfirm}},[e._v("Yes")]),t(se["a"])],1)],1)],1)],1)},it=[],rt=a("e4ba"),lt={name:"cancelCase",props:{approvingManager:Boolean,casefile:Object,refType:Array,subRefTypes:Array,insurer:Array,branches:Array,management:Boolean},components:{},data(){return{dialogCancelCase:!1,commentData:{id:null,caseId:null,comment:"",createdBy:""}}},computed:{isComment(){return!this.commentData.comment},isRealManager(){return this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")},isCaseCancelled(){return"CANC"===this.caseState.casefile.fileStatus||"CLO"===this.caseState.casefile.fileStatus},...Object(Y["c"])(["caseState"])},watch:{cancelCase(e){e||this.closeCancelCase()}},methods:{moment:function(e){return G()(e)},yearOnly(e){return G()(e).format("YY")},filterDept(e){return this.refType.filter(t=>t.id===e)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},showCancelCaseDialog(){this.dialogCancelCase=!0},cancelCase(){this.dialogCancelCase=!0},cancelCaseConfirm(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="CANC",this.caseState.casefile.dateOfCancel=G()().format(),this.caseState.casefile.cancelBy=this.$store.state.auth.user.id).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)});var e={caseId:this.caseState.casefile.id,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};this.commentData.comment&&setTimeout(()=>{rt["a"].create(e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e||toString()})})},2500),this.closeCancelCase()},closeCancelCase(){this.dialogCancelCase=!1,this.$nextTick(()=>{})}}},ct=lt,nt=Object(J["a"])(ct,st,it,!1,null,null,null),ot=nt.exports,dt=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"primary mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.closeDisabled},on:{click:function(t){return e.completeClose()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-check-all")]),t("span",{staticClass:"action-text"},[e._v("CLOSE CASE")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("CLOSE CASE")])]),t(j["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogCompleteClose,callback:function(t){e.dialogCompleteClose=t},expression:"dialogCompleteClose"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("CLOSE CASE")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(S["d"],[e._v("Closing case")]),t($["a"]),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",disabled:e.isFileButtonDisabled,small:""},on:{click:e.compCloseSubmit}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},ht=[],ut={name:"dispatch",props:["management"],components:{},data(){return{dialogCompleteClose:!1}},computed:{closeDisabled(){return!("DISP"==this.caseState.casefile.fileStatus&&this.management)},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!this.management}},watch:{completeClose(e){e||this.closeDialog()}},methods:{completeClose(){this.dialogCompleteClose=!0},compCloseSubmit(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="CLO",this.caseState.casefile.dateClosed=G()().format(),this.caseState.casefile.closedBy=this.$store.state.auth.user.id).then(e=>{this.closeDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeDialog()},closeDialog(){this.dialogCompleteClose=!1,this.$nextTick(()=>{})}}},ft=ut,mt=Object(J["a"])(ft,dt,ht,!1,null,null,null),pt=mt.exports,vt=function(){var e=this,t=e._self._c;return t("div",[t(b["a"],{attrs:{flat:"",id:"comments"}},[t(S["d"],{staticClass:"pb-0"},[e._v("COMMENTS")]),t($["a"]),t(j["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(b["a"],[t(S["d"],{staticClass:"text-h5"},[e._v("Are you sure you want to delete the comment?")]),t(S["a"],[t(se["a"]),t(C["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),t(C["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),t(se["a"])],1)],1)],1),t("div",{staticClass:"d-flex ml-4"},[t("p",[e._v("Comment ("+e._s(e.filterComment(e.comments).length)+")")])]),e._l(e.filterComment(e.comments),(function(a){return t("div",{key:a.id},[t("div",{staticClass:"d-flex mt-2 ml-4"},[t("p",[e._v(e._s(a.comment))])]),t("div",{staticClass:"d-flex caption ml-4 mt-0"},[e._l(e.filterUser(a.createdBy),(function(a){return t("td",{key:a.id,staticClass:"text-left"},[t("strong",[e._v(" "+e._s(a.email))]),e._v(" • ")])})),t("td",[e._v(e._s(e.formatDate(a.createdAt)))]),t("td",[e.management?t(C["a"],{staticClass:"ml-2",attrs:{tile:"","x-small":"",dark:"",color:"red",plain:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v("Delete")]):e._e()],1)],2),t("div",{staticClass:"d-flex ml-4"}),t($["a"])],1)})),t("div",{staticClass:"d-flex ml-4"},[t(S["c"],{staticClass:"font-weight-black"},[e._v("Leave a comment")])],1),t("div",{staticClass:"d-flex ml-4"},[t(_e["a"],{attrs:{clearable:"",counter:"","auto-grow":"",solo:"",required:"",placeholder:"type in your comment","background-color":"grey lighten-5"},model:{value:e.editedItem.comment,callback:function(t){e.$set(e.editedItem,"comment",t)},expression:"editedItem.comment"}})],1),t(C["a"],{staticClass:"primary d-flex ml-4",attrs:{tile:"","x-small":"",disabled:e.isAddButtonDisabled},on:{click:e.save}},[e._v("Submit")])],2)],1)},gt=[],Ct=a("9df5"),bt={name:"comments",props:{casefile:{type:Object,required:!0},preloadedComments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},data(){return{dialogDelete:!1,members:[],management:!1,defaultItem:{id:null,caseId:null,comment:"",createdBy:""},editedIndex:-1,editedItem:{id:null,caseId:null,comment:"",createdBy:""},comments:this.preloadedComments}},computed:{isAddButtonDisabled(){return!this.editedItem.comment}},watch:{dialogDelete(e){e||this.closeDelete()},preloadedComments:{immediate:!0,handler(e){e.length>0&&(this.comments=e)}}},methods:{formatDate:function(e){return G()(e).format("DD/MM/YYYY, h:mm:ss a")},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},filterComment(){return this.comments.filter(e=>e.caseId===this.casefile.id)},filterUser(e){return this.members.filter(t=>t.id===e)},retrieveComments(){rt["a"].getAll().then(e=>{this.comments=e.data.filter(e=>e.caseId===this.casefile.id)}).catch(e=>{console.log(e),this.comments=[]})},retrieveUser(){Ct["a"].getAll().then(e=>{this.members=e.data}).catch(e=>{console.log(e)})},refreshList(){this.retrieveComments()},deleteItem(e){this.editedIndex=this.comments.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm(){rt["a"].delete(this.editedItem.id).then(e=>{this.comments=this.comments.filter(e=>e.id!==this.editedItem.id),this.$emit("comment-deleted",this.editedItem.id),this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeDelete()},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1)rt["a"].update(this.editedItem.id,this.editedItem).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)});else{var e={caseId:this.casefile.id,comment:this.editedItem.comment,createdBy:this.$store.state.auth.user.id};rt["a"].create(e).then(e=>{const t=e.data;this.comments=[...this.comments,t],this.editedItem.comment="",this.$emit("comment-added",t),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})})}}},mounted(){this.retrieveComments(),this.checkManagement(),this.retrieveUser()}},St=bt,_t=Object(J["a"])(St,vt,gt,!1,null,null,null),Dt=_t.exports,yt=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.completeEditingDisabled},on:{click:function(t){return e.completeEdi()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-alarm-check")]),t("span",{staticClass:"action-text"},[e._v("COMPLETE EDITING")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("COMPLETE EDITING")])]),t(j["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogCompleteEdi,callback:function(t){e.dialogCompleteEdi=t},expression:"dialogCompleteEdi"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("COMPLETE EDITING")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(S["d"],[e._v("I have completed editing the case report")]),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeCompleteEdiDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:e.compEditing}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},xt=[],At={name:"compEditing",props:["branches","insurer","refType","subRefTypes","clerks","members"],components:{},data(){return{dialogCompleteEdi:!1}},computed:{completeEditingDisabled(){return!("EDI"==this.caseState.casefile.fileStatus&&this.caseState.casefile.editor==this.$store.state.auth.user.id)},...Object(Y["c"])(["caseState"])},watch:{completeEdi(e){e||this.closeCompleteEdiDialog()}},methods:{filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},findBrcode(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t.map(e=>e.brCode)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterManagerkByBranch(e){const t=this.clerks.filter(t=>t.branches.some(t=>t.brCode==e)&&t.roles.some(e=>"manager"===e.roleCode||"branchmanager"===e.roleCode)&&t.active),a=t.map(e=>e.email);return a},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},completeEdi(){this.dialogCompleteEdi=!0},compEditing(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PAPP",this.caseState.casefile.dateEndEdi=G()().format()).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).then(()=>{const e=this.caseState.casefile.branch,t=this.filterManagerkByBranch(this.findBrcode(e));var a={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:t,createdBy:this.$store.state.auth.user.id};xe["a"].managerApproval(a).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}),this.dataEmail=""}).catch(e=>{console.log(e)}),this.closeCompleteEdiDialog()},closeCompleteEdiDialog(){this.dialogCompleteEdi=!1,this.$nextTick(()=>{})}}},kt=At,Tt=Object(J["a"])(kt,yt,xt,!1,null,null,null),Et=Tt.exports,It=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.completeFormattingDisabled},on:{click:function(t){return e.completeFormatting()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-format-align-top")]),t("span",{staticClass:"action-text"},[e._v("COMPLETE FORMATTING")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("COMPLETE FORMATTING")])]),t(j["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogCompleteFormatting,callback:function(t){e.dialogCompleteFormatting=t},expression:"dialogCompleteFormatting"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("COMPLETE FORMATTING")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(S["d"],[e._v("I have completed formatting the case report.")]),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeCompleteFormattingDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:e.compFormatting}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},Rt=[],wt={name:"compFormatting",props:[""],components:{},data(){return{dialogCompleteFormatting:!1}},computed:{completeFormattingDisabled(){return!("FOIN"==this.caseState.casefile.fileStatus&&this.caseState.casefile.clerkInCharge==this.$store.state.auth.user.id)},...Object(Y["c"])(["caseState"])},watch:{completeFormatting(e){e||this.closeCompleteFormattingDialog()}},methods:{completeFormatting(){this.dialogCompleteFormatting=!0},compFormatting(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="INFI",this.caseState.casefile.dateEndFormatting=G()().format()).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}),this.closeCompleteFormattingDialog()},closeCompleteFormattingDialog(){this.dialogCompleteFormatting=!1,this.$nextTick(()=>{})}}},Nt=wt,Ot=Object(J["a"])(Nt,It,Rt,!1,null,null,null),Bt=Ot.exports,jt=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"d-flex flex-column"},[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:!1},on:{click:function(t){return e.completeInv()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-account-arrow-right-outline")]),t("span",{staticClass:"action-text"},[e._v("COMPLETE INVESTIGATION")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v(e._s(e.tooltipMessage))])])],1),t(j["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogCompleteInv,callback:function(t){e.dialogCompleteInv=t},expression:"dialogCompleteInv"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("COMPLETE INVESTIGATION")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(S["d"],[e._v("SUBMIT YOUR CLAIM DETAILS BELOW")]),t(b["a"],{staticClass:"mx-auto mt-3 pa-3 text-start",attrs:{width:"100%"}},[t(A["a"],[t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{rules:e.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Travelling / Mileage"},model:{value:e.claim.travMileage,callback:function(t){e.$set(e.claim,"travMileage",t)},expression:"claim.travMileage"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{rules:e.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Additional"},model:{value:e.claim.additional,callback:function(t){e.$set(e.claim,"additional",t)},expression:"claim.additional"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{rules:e.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"SD & Stamps"},model:{value:e.claim.sdAndStamps,callback:function(t){e.$set(e.claim,"sdAndStamps",t)},expression:"claim.sdAndStamps"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{rules:e.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Medical Report"},model:{value:e.claim.medicalReport,callback:function(t){e.$set(e.claim,"medicalReport",t)},expression:"claim.medicalReport"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{rules:e.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Police Document"},model:{value:e.claim.policeDoc,callback:function(t){e.$set(e.claim,"policeDoc",t)},expression:"claim.policeDoc"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{rules:e.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"JPJ Document"},model:{value:e.claim.jpjDoc,callback:function(t){e.$set(e.claim,"jpjDoc",t)},expression:"claim.jpjDoc"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{rules:e.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Miscellaneous"},model:{value:e.claim.misc,callback:function(t){e.$set(e.claim,"misc",t)},expression:"claim.misc"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{rules:e.rules,dense:"",type:"number","hide-spin-buttons":"",prefix:"MYR",label:"Typing"},model:{value:e.claim.typing,callback:function(t){e.$set(e.claim,"typing",t)},expression:"claim.typing"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(se["a"]),t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeCompleteInvDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:e.isAddFileButtonDisabled},on:{click:e.compInvestigation}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},$t=[],Ft=a("20dd"),Pt={name:"compInvestigation",props:["claims","branches","insurer","refType","subRefTypes","clerks","members","documents"],components:{},data(){return{dialogCompleteInv:!1,rules:[e=>!!e||"This field is required. Only Numbers accepted"],claim:{travMileage:"",additional:"",sdAndStamps:"",medicalReport:"",policeDoc:"",jpjDoc:"",misc:"",typing:""},isRefreshing:!1,wasRefreshing:!1}},computed:{computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},tooltipMessage(){return"INVE"!==this.caseState.casefile.fileStatus?"Case is not in investigation stage":this.caseState.casefile.adjuster!==this.$store.state.auth.user.id?"You are not assigned as the adjuster":"COMPLETE INVESTIGATION"},disabledMessage(){return"INVE"!==this.caseState.casefile.fileStatus?"Case is not in investigation stage":this.caseState.casefile.adjuster!==this.$store.state.auth.user.id?"You are not assigned as the adjuster":""},completeInvestigationDisabled(){return!("INVE"===this.caseState.casefile.fileStatus&&this.caseState.casefile.adjuster===this.$store.state.auth.user.id)},...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.claim.travMileage&&this.claim.additional&&this.claim.sdAndStamps&&this.claim.medicalReport&&this.claim.policeDoc&&this.claim.jpjDoc&&this.claim.misc&&this.claim.typing)}},watch:{completeInv(e){e||this.closeCompleteInvDialog()},documents:{immediate:!0,deep:!0,handler(){}}},methods:{filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},findBrcode(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t.map(e=>e.brCode)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterManagerkByBranch(e){const t=this.clerks.filter(t=>t.branches.some(t=>t.brCode==e)&&t.roles.some(e=>"manager"===e.roleCode||"branchmanager"===e.roleCode)&&t.active),a=t.map(e=>e.email);return a},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},findUserEmail(e){const t=this.members.filter(t=>t.id===e&&t.active);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},moment:function(e){return G()(e)},filterHandler(e){return this.handlers.filter(t=>t.id===e)},completeInv(){this.dialogCompleteInv=!0},compInvestigation(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PEDI",this.caseState.casefile.dateEndInv=G()().format()).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString(),timeout:2e3})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{var e={caseId:this.caseState.casefile.id,adjId:this.$store.state.auth.user.id,travMileage:this.claim.travMileage,additional:this.claim.additional,sdAndStamps:this.claim.sdAndStamps,medicalReport:this.claim.medicalReport,policeDoc:this.claim.policeDoc,jpjDoc:this.claim.jpjDoc,misc:this.claim.misc,typing:this.claim.typing};Ft["a"].create(e).then(e=>{this.claims.id=e.data.id,this.closeCompleteInvDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString(),timeout:4e3})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})})}).then(()=>{const e=this.caseState.casefile.branch,t=this.filterManagerkByBranch(this.findBrcode(e)),a=this.caseState.casefile.refType,s=this.findUserEmail(this.filterPicID(a));var i={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:t+","+s,createdBy:this.$store.state.auth.user.id};xe["a"].assignEditor(i).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString(),timeout:6e3})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.dataEmail=""}).catch(e=>{console.log(e)}),this.closeCompleteInvDialog()},closeCompleteInvDialog(){this.dialogCompleteInv=!1,this.$nextTick(()=>{})}}},Lt=Pt,Mt=(a("8a73"),Object(J["a"])(Lt,jt,$t,!1,null,"37c0c104",null)),Ut=Mt.exports,Ht=a("cb28"),Gt=a("4e82"),Yt=a("3206"),Vt=Object(o["a"])(Object(Gt["a"])("expansionPanels","v-expansion-panel","v-expansion-panels"),Object(Yt["b"])("expansionPanel",!0)).extend({name:"v-expansion-panel",props:{disabled:Boolean,readonly:Boolean},data(){return{content:null,header:null,nextIsActive:!1}},computed:{classes(){return{"v-expansion-panel--active":this.isActive,"v-expansion-panel--next-active":this.nextIsActive,"v-expansion-panel--disabled":this.isDisabled,...this.groupClasses}},isDisabled(){return this.expansionPanels.disabled||this.disabled},isReadonly(){return this.expansionPanels.readonly||this.readonly}},methods:{registerContent(e){this.content=e},unregisterContent(){this.content=null},registerHeader(e){this.header=e,e.$on("click",this.onClick)},unregisterHeader(){this.header=null},onClick(e){e.detail&&this.header.$el.blur(),this.$emit("click",e),this.isReadonly||this.isDisabled||this.toggle()},toggle(){this.$nextTick(()=>this.$emit("change"))}},render(e){return e("div",{staticClass:"v-expansion-panel",class:this.classes,attrs:{"aria-expanded":String(this.isActive)}},Object(d["s"])(this))}}),Kt=a("9d65");const Jt=Object(o["a"])(Kt["a"],i["a"],Object(Yt["a"])("expansionPanel","v-expansion-panel-content","v-expansion-panel"));var zt=Jt.extend().extend({name:"v-expansion-panel-content",data:()=>({isActive:!1}),computed:{parentIsActive(){return this.expansionPanel.isActive}},watch:{parentIsActive:{immediate:!0,handler(e,t){e&&(this.isBooted=!0),null==t?this.isActive=e:this.$nextTick(()=>this.isActive=e)}}},created(){this.expansionPanel.registerContent(this)},beforeDestroy(){this.expansionPanel.unregisterContent()},render(e){return e(p["a"],this.showLazyContent(()=>[e("div",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-content",directives:[{name:"show",value:this.isActive}]}),[e("div",{class:"v-expansion-panel-content__wrap"},Object(d["s"])(this,"default",{open:this.isActive}))])]))}}),Wt=a("5607");const qt=Object(o["a"])(i["a"],Object(Yt["a"])("expansionPanel","v-expansion-panel-header","v-expansion-panel"));var Xt=qt.extend().extend({name:"v-expansion-panel-header",directives:{ripple:Wt["a"]},props:{disableIconRotate:Boolean,expandIcon:{type:String,default:"$expand"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1}},data:()=>({hasMousedown:!1}),computed:{classes(){return{"v-expansion-panel-header--active":this.isActive,"v-expansion-panel-header--mousedown":this.hasMousedown}},isActive(){return this.expansionPanel.isActive},isDisabled(){return this.expansionPanel.isDisabled},isReadonly(){return this.expansionPanel.isReadonly}},created(){this.expansionPanel.registerHeader(this)},beforeDestroy(){this.expansionPanel.unregisterHeader()},methods:{onClick(e){this.$emit("click",e)},genIcon(){const e=Object(d["s"])(this,"actions",{open:this.isActive})||[this.$createElement(m["a"],this.expandIcon)];return this.$createElement(p["d"],[this.$createElement("div",{staticClass:"v-expansion-panel-header__icon",class:{"v-expansion-panel-header__icon--disable-rotate":this.disableIconRotate},directives:[{name:"show",value:!this.isDisabled}]},e)])}},render(e){return e("button",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-header",class:this.classes,attrs:{tabindex:this.isDisabled?-1:null,type:"button","aria-expanded":this.isActive},directives:[{name:"ripple",value:this.ripple}],on:{...this.$listeners,click:this.onClick,mousedown:()=>this.hasMousedown=!0,mouseup:()=>this.hasMousedown=!1}}),[Object(d["s"])(this,"default",{open:this.isActive},!0),this.hideActions||this.genIcon()])}}),Qt=(a("210b"),a("604c")),Zt=a("d9bd"),ea=Qt["a"].extend({name:"v-expansion-panels",provide(){return{expansionPanels:this}},props:{accordion:Boolean,disabled:Boolean,flat:Boolean,hover:Boolean,focusable:Boolean,inset:Boolean,popout:Boolean,readonly:Boolean,tile:Boolean},computed:{classes(){return{...Qt["a"].options.computed.classes.call(this),"v-expansion-panels":!0,"v-expansion-panels--accordion":this.accordion,"v-expansion-panels--flat":this.flat,"v-expansion-panels--hover":this.hover,"v-expansion-panels--focusable":this.focusable,"v-expansion-panels--inset":this.inset,"v-expansion-panels--popout":this.popout,"v-expansion-panels--tile":this.tile}}},created(){this.$attrs.hasOwnProperty("expand")&&Object(Zt["a"])("expand","multiple",this),Array.isArray(this.value)&&this.value.length>0&&"boolean"===typeof this.value[0]&&Object(Zt["a"])(':value="[true, false, true]"',':value="[0, 2]"',this)},methods:{updateItem(e,t){const a=this.getValue(e,t),s=this.getValue(e,t+1);e.isActive=this.toggleMethod(a),e.nextIsActive=this.toggleMethod(s)}}}),ta=a("8860"),aa=a("da13"),sa=a("5d23"),ia=a("34c3"),ra=function(){var e,t,a,i,r,l,c,n,o,d,h,u,f,m,p,v,g,_=this,y=_._self._c;return y("div",{staticClass:"detail-tab"},[y(A["a"],{staticClass:"mb-6"},[y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card",class:_.getStatusColor},[y(S["c"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[_._v("mdi-file-document-outline")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[_._v("Status")]),y("div",{staticClass:"text-h6 white--text"},[_._v(" "+_._s((null===(e=_.filterStages(_.caseState.casefile.fileStatus)[0])||void 0===e?void 0:e.name)||"N/A")+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card primary"},[y(S["c"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[_._v("mdi-office-building")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[_._v("Branch")]),y("div",{staticClass:"text-h6 white--text"},[_._v(" "+_._s(_.filterBranchName(_.caseState.casefile.branch))+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card secondary"},[y(S["c"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[_._v("mdi-account-tie")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[_._v("Adjuster")]),y("div",{staticClass:"text-h6 white--text"},[_._v(" "+_._s((null===(t=_.filterAdj(_.caseState.casefile.adjuster)[0])||void 0===t?void 0:t.username)||"To be assigned")+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card info"},[y(S["c"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[_._v("mdi-pencil")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[_._v("Editor")]),y("div",{staticClass:"text-h6 white--text"},[_._v(" "+_._s((null===(a=_.filterEditor(_.caseState.casefile.editor)[0])||void 0===a?void 0:a.username)||"To be assigned")+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card success"},[y(S["c"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[_._v("mdi-check-decagram")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[_._v("Approver")]),y("div",{staticClass:"text-h6 white--text"},[_._v(" "+_._s((null===(i=_.filterApprover(_.caseState.casefile.approvedBy)[0])||void 0===i?void 0:i.username)||"To be assigned")+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card deep-purple"},[y(S["c"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[_._v("mdi-format-align-justify")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[_._v("Clerk")]),y("div",{staticClass:"text-h6 white--text"},[_._v(" "+_._s((null===(r=_.filterClerk(_.caseState.casefile.clerkInCharge)[0])||void 0===r?void 0:r.username)||"To be assigned")+" ")])])],1)],1)],1)],1),y(ea,{staticClass:"detail-panels",attrs:{accordion:"",flat:"",hover:"",multiple:""}},[y(Vt,[y(Xt,[y("div",{staticClass:"d-flex align-center justify-space-between w-100"},[y(s["a"],{staticClass:"mr-2",attrs:{color:"primary",size:"24"}},[_._v("mdi-file-document-outline")]),y("span",{staticClass:"panel-title"},[_._v("CASE INFORMATION")])],1)]),y(zt,[y(A["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ta["a"],{attrs:{dense:""}},[y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-car")])],1),y(sa["a"],[y(sa["b"],[_._v("Vehicle No.")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(null===(l=_.caseState.casefile.vehicleNo)||void 0===l?void 0:l.toUpperCase())+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-file-document")])],1),y(sa["a"],[y(sa["b"],[_._v("Our Ref.")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" AA/"+_._s((null===(c=_.filterDept(_.caseState.casefile.refType)[0])||void 0===c?void 0:c.name)||"")+_._s(_.filterSubDept(_.caseState.casefile.subRefType)[0]?"/"+_.filterSubDept(_.caseState.casefile.subRefType)[0].subCode:"")+"/"+_._s(_.caseState.casefile.id)+"/"+_._s(_.yearOnly(_.caseState.casefile.createdAt))+_._s(null!==(n=_.filterBranches(_.caseState.casefile.branch)[0])&&void 0!==n&&n.brCode?"/"+_.filterBranches(_.caseState.casefile.branch)[0].brCode:"")+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-calendar")])],1),y(sa["a"],[y(sa["b"],[_._v("Date of Loss")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.formatDate(_.caseState.casefile.dateOfLoss))+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-map-marker")])],1),y(sa["a"],[y(sa["b"],[_._v("Place of Loss")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.placeOfLoss)+", "+_._s(null===(o=_.filterStates(_.caseState.casefile.stateOfLoss)[0])||void 0===o?void 0:o.name)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ta["a"],{attrs:{dense:""}},[y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-file-document-outline")])],1),y(sa["a"],[y(sa["b"],[_._v("Claim Type")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s((null===(d=_.filterDept(_.caseState.casefile.refType)[0])||void 0===d?void 0:d.name)||"N/A")+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-calendar-check")])],1),y(sa["a"],[y(sa["b"],[_._v("Assignment Date")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.formatDate(_.caseState.casefile.dateOfAssign))+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-calendar-clock")])],1),y(sa["a"],[y(sa["b"],[_._v("Acknowledgement Date")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.formatDate(_.caseState.casefile.createdAt))+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-account")])],1),y(sa["a"],[y(sa["b"],[_._v("Case Creator")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s((null===(h=_.filterUser(_.caseState.casefile.createdBy)[0])||void 0===h?void 0:h.username)||"N/A")+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-domain")])],1),y(sa["a"],[y(sa["b"],[_._v("Creator Branch")]),y(sa["c"],{staticClass:"font-weight-medium"},_._l(_.filterUser(_.caseState.casefile.createdBy),(function(e){return y("span",{key:e.id},_._l(e.branches,(function(e,t){return y("span",{key:t},[_._v(_._s(e.name))])})),0)})),0)],1)],1)],1)],1)],1)],1)],1),y(Vt,[y(Xt,[y("div",{staticClass:"d-flex align-center justify-space-between w-100"},[y(s["a"],{staticClass:"mr-2",attrs:{color:"primary",size:"24"}},[_._v("mdi-account")]),y("span",{staticClass:"panel-title"},[_._v("INSURED DETAILS")])],1)]),y(zt,[y(A["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ta["a"],{attrs:{dense:""}},[y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-account")])],1),y(sa["a"],[y(sa["b"],[_._v("Insured Name")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredName)+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-card-account-details")])],1),y(sa["a"],[y(sa["b"],[_._v("NRIC")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredIC)+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-phone")])],1),y(sa["a"],[y(sa["b"],[_._v("Tel")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredTel)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ta["a"],{attrs:{dense:""}},[y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-email")])],1),y(sa["a"],[y(sa["b"],[_._v("Email")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredEmail)+" ")])],1)],1)],1)],1)],1)],1)],1),y(Vt,[y(Xt,[y("div",{staticClass:"d-flex align-center justify-space-between w-100"},[y(s["a"],{staticClass:"mr-2",attrs:{color:"primary",size:"24"}},[_._v("mdi-car-back")]),y("span",{staticClass:"panel-title"},[_._v("INSURED DRIVER DETAILS")])],1)]),y(zt,[y(A["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ta["a"],{attrs:{dense:""}},[y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-account")])],1),y(sa["a"],[y(sa["b"],[_._v("Driver Name")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredDriverName)+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-card-account-details")])],1),y(sa["a"],[y(sa["b"],[_._v("NRIC")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredDriverIc)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ta["a"],{attrs:{dense:""}},[y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-phone")])],1),y(sa["a"],[y(sa["b"],[_._v("Tel")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredDriverTel)+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-email")])],1),y(sa["a"],[y(sa["b"],[_._v("Email")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.insuredDriverEmail)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12"}},[y($["a"],{staticClass:"my-4"}),y("div",{staticClass:"text-subtitle-2 mb-3"},[_._v("Police Report Information")]),y(A["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"4"}},[y(ta["a"],{attrs:{dense:""}},[y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-file-document-outline")])],1),y(sa["a"],[y(sa["b"],[_._v("Report No.")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.policeReportNo)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"4"}},[y(ta["a"],{attrs:{dense:""}},[y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-calendar")])],1),y(sa["a"],[y(sa["b"],[_._v("Date")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.formatDate(_.caseState.casefile.policeReportDate))+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"4"}},[y(ta["a"],{attrs:{dense:""}},[y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-clock-outline")])],1),y(sa["a"],[y(sa["b"],[_._v("Time")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.formatTime(_.caseState.casefile.policeReportDate))+" ")])],1)],1)],1)],1)],1)],1)],1)],1)],1),y(Vt,[y(Xt,[y("div",{staticClass:"d-flex align-center justify-space-between w-100"},[y(s["a"],{staticClass:"mr-2",attrs:{color:"primary",size:"24"}},[_._v("mdi-shield-check")]),y("span",{staticClass:"panel-title"},[_._v("INSURER DETAILS")])],1)]),y(zt,[y(A["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ta["a"],{attrs:{dense:""}},[y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-office-building")])],1),y(sa["a"],[y(sa["b"],[_._v("Insurer")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(null===(u=_.filterIns(_.caseState.casefile.insurer)[0])||void 0===u?void 0:u.name)+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-numeric")])],1),y(sa["a"],[y(sa["b"],[_._v("Claim No.")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.claimNo)+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-file-document")])],1),y(sa["a"],[y(sa["b"],[_._v("Policy/Cover No")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.caseState.casefile.policyNo)+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-calendar-range")])],1),y(sa["a"],[y(sa["b"],[_._v("Coverage")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(_.formatDate(_.caseState.casefile.coverFrom))+" - "+_._s(_.formatDate(_.caseState.casefile.coverTo))+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ta["a"],{attrs:{dense:""}},[y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-account-tie")])],1),y(sa["a"],[y(sa["b"],[_._v("Claims Handler")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(null===(f=_.filterHandler(_.caseState.casefile.handler)[0])||void 0===f?void 0:f.name)+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-phone")])],1),y(sa["a"],[y(sa["b"],[_._v("Tel")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(null===(m=_.filterHandler(_.caseState.casefile.handler)[0])||void 0===m?void 0:m.offTel)+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-cellphone")])],1),y(sa["a"],[y(sa["b"],[_._v("Mobile")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(null===(p=_.filterHandler(_.caseState.casefile.handler)[0])||void 0===p?void 0:p.mobile)+" ")])],1)],1),y(aa["a"],{attrs:{"two-line":""}},[y(ia["a"],[y(s["a"],[_._v("mdi-email")])],1),y(sa["a"],[y(sa["b"],[_._v("Email")]),y(sa["c"],{staticClass:"font-weight-medium"},[_._v(" "+_._s(null===(v=_.filterHandler(_.caseState.casefile.handler)[0])||void 0===v?void 0:v.email)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12"}},[y($["a"],{staticClass:"my-4"}),y(aa["a"],[y(ia["a"],{staticClass:"align-self-start mt-2"},[y(s["a"],[_._v("mdi-comment-text")])],1),y(sa["a"],[y(sa["b"],[_._v("Insurer's Remarks")]),y(sa["c"],{staticClass:"font-weight-medium"},[y("div",{staticClass:"remarks-container"},[y("div",{class:["remarks-text",{"remarks-collapsed":!_.showFullRemarks}]},[_._v(" "+_._s(_.caseState.casefile.insComment)+" ")]),(null===(g=_.caseState.casefile.insComment)||void 0===g?void 0:g.length)>150?y(C["a"],{staticClass:"px-0 mt-1",attrs:{text:"",small:"",color:"primary"},on:{click:function(e){_.showFullRemarks=!_.showFullRemarks}}},[_._v(" "+_._s(_.showFullRemarks?"Show Less":"Show More")+" ")]):_._e()],1)])],1)],1)],1)],1)],1)],1)],1)],1)},la=[],ca={name:"detailTab",props:["adjusters","editors","clerks","branches","insurer","handlers","refType","subRefTypes","members","stages","states"],components:{},data(){return{showFullRemarks:!1}},computed:{...Object(Y["c"])(["caseState"]),getStatusColor(){const e=this.caseState.casefile.fileStatus,t={NEW:"success",PEND:"warning",INVE:"info",COMP:"error"};return t[e]||"grey"}},watch:{},methods:{moment:function(e){return G()(e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},yearOnly(e){return G()(e).format("YY")},filterStages(e){return this.stages.filter(t=>t.stageCode===e)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterAdj(e){return this.adjusters.filter(t=>t.id===e)},filterEditor(e){return this.editors.filter(t=>t.id===e)},filterApprover(e){return this.members.filter(t=>t.id===e)},filterClerk(e){return this.clerks.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterStates(e){return this.states.filter(t=>t.id===e)},filterHandler(e){return this.handlers.filter(t=>t.id===e)},filterUser(e){return this.members.filter(t=>t.id===e)},formatDate:function(e){return e?G()(e).format("DD/MM/YYYY"):""},formatTime:function(e){return e?G()(e).format("h:mm:ss a"):""},dateDiff(e,t){let a=G()(e),s=G()(t),i=G.a.duration(s.diff(a));return Math.round(i.asDays())},refreshList(){},filterBranchName(e){if(!e)return"To be assigned";const t=this.branches.find(t=>t.id===e);return t?t.name:"Unknown Branch"}},mounted(){}},na=ca,oa=(a("4adb"),Object(J["a"])(na,ra,la,!1,null,"24cb662a",null)),da=oa.exports,ha=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.dispatchDisabled},on:{click:function(t){return e.completeDispatch()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-truck")]),t("span",{staticClass:"action-text"},[e._v("DISPATCH")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("DISPATCH")])]),t(j["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogCompleteDispatch,callback:function(t){e.dialogCompleteDispatch=t},expression:"dialogCompleteDispatch"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("DISPATCH")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(S["d"],[e._v("This client requires physical report along with attachments.")]),t($["a"]),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeDispatchDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",disabled:e.isFileButtonDisabled,small:""},on:{click:e.compDispatchSubmit}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},ua=[],fa={name:"dispatch",props:["management"],components:{},data(){return{dialogCompleteDispatch:!1}},computed:{dispatchDisabled(){return!("DISP"==this.caseState.casefile.fileStatus&&this.management)},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!this.management}},watch:{completeDispatch(e){e||this.closeDispatchDialog()}},methods:{completeDispatch(){this.dialogCompleteDispatch=!0},compDispatchSubmit(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PDISP",this.caseState.casefile.dateDispatch=G()().format(),this.caseState.casefile.dispatchBy=this.$store.state.auth.user.id).then(e=>{this.closeDispatchDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeDispatchDialog()},closeDispatchDialog(){this.dialogCompleteDispatch=!1,this.$nextTick(()=>{})}}},ma=fa,pa=Object(J["a"])(ma,ha,ua,!1,null,null,null),va=pa.exports,ga=a("0798"),Ca=a("8212"),ba=a("8e36"),Sa=a("1f4f"),_a=function(){var e=this,t=e._self._c;return t("div",[t(S["d"],{staticClass:"pb-0 text-h4 font-weight-bold",staticStyle:{"letter-spacing":"1px"}},[t(s["a"],{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-file-document-multiple")]),e._v(" DOCUMENTS ")],1),t($["a"]),t(b["a"],{staticClass:"mt-3 pa-4 rounded-xl elevation-2",staticStyle:{background:"#f5f7fa"},attrs:{flat:"",id:"uploadedDocuments"}},[t(j["a"],{attrs:{"max-width":"420px",transition:"dialog-bottom-transition"},model:{value:e.dialogDeleteDoc,callback:function(t){e.dialogDeleteDoc=t},expression:"dialogDeleteDoc"}},[t(b["a"],{staticClass:"rounded-xl pa-4",staticStyle:{background:"#fff"}},[t(S["d"],{staticClass:"justify-center"},[t(Ca["a"],{staticClass:"mb-2",attrs:{size:"48",color:"red lighten-4"}},[t(s["a"],{attrs:{color:"red darken-2",size:"32"}},[e._v("mdi-alert-circle-outline")])],1)],1),t(S["d"],{staticClass:"text-h5 font-weight-bold justify-center",staticStyle:{color:"#d32f2f"}},[e._v(" Confirm Delete ")]),t(S["c"],[t(A["a"],[t(D["a"],{staticClass:"d-flex align-center",attrs:{cols:"12"}},[t(s["a"],{staticClass:"mr-2",attrs:{color:"grey"}},[e._v("mdi-file")]),t("span",[t("strong",[e._v("File Name:")]),e._v(" "+e._s(e.editedItem.name))])],1),t(D["a"],{staticClass:"d-flex align-center",attrs:{cols:"12"}},[t(s["a"],{staticClass:"mr-2",attrs:{color:"grey"}},[e._v("mdi-tag")]),t("span",[t("strong",[e._v("File Type:")]),e._v(" "+e._s(e.editedItem.Type))])],1),t(D["a"],{staticClass:"d-flex align-center",attrs:{cols:"12"}},[t(s["a"],{staticClass:"mr-2",attrs:{color:"grey"}},[e._v("mdi-comment-text")]),t("span",[t("strong",[e._v("File Remark:")]),e._v(" "+e._s(e.editedItem.Remark))])],1)],1)],1),t(S["a"],{staticClass:"justify-center mt-2"},[t(C["a"],{staticClass:"rounded-pill px-6",attrs:{color:"grey lighten-2"},on:{click:e.closeDeleteDoc}},[t(s["a"],{attrs:{left:""}},[e._v("mdi-close")]),e._v(" Cancel ")],1),t(C["a"],{staticClass:"rounded-pill px-6 ml-2 white--text",attrs:{color:"red darken-2"},on:{click:e.deleteItemConfirm}},[t(s["a"],{attrs:{left:""}},[e._v("mdi-trash-can-outline")]),e._v(" Delete ")],1)],1)],1)],1),t(j["a"],{attrs:{"max-width":"540px",transition:"dialog-bottom-transition"},model:{value:e.dialogUploadDoc,callback:function(t){e.dialogUploadDoc=t},expression:"dialogUploadDoc"}},[t(b["a"],{staticClass:"rounded-xl pa-4",staticStyle:{background:"#fff"}},[t(S["d"],{staticClass:"justify-center"},[t(Ca["a"],{attrs:{size:"48",color:"primary lighten-4"}},[t(s["a"],{attrs:{color:"primary",size:"32"}},[e._v("mdi-cloud-upload")])],1)],1),t(S["d"],{staticClass:"justify-center text-h5 font-weight-bold",staticStyle:{color:"#1976d2"}},[e._v(" "+e._s(e.dialogTitle)+" ")]),t(S["c"],[t("div",{staticClass:"upload-drop-area",on:{dragover:function(e){e.preventDefault()},drop:function(t){return t.preventDefault(),e.selectFile(t.dataTransfer.files[0])},click:e.triggerFileInput}},[t(s["a"],{attrs:{color:"primary",size:"48"}},[e._v("mdi-cloud-upload")]),e.currentFile?t("div",{staticClass:"mt-2 d-flex align-center justify-center"},[t(s["a"],{attrs:{color:"success",size:"32"}},[e._v("mdi-file-check")]),t("span",{staticClass:"ml-2 font-weight-medium"},[e._v(e._s(e.currentFile.name))])],1):t("div",{staticClass:"mt-2",staticStyle:{color:"#1976d2"}},[t("strong",[e._v("Drag & Drop or Click to Select Document")])]),t("input",{key:e.fileInputKey,ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*,.pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"},on:{change:e.onFileInputChange}})],1),e.currentFile&&e.currentFile.size>=4e6?t(ga["a"],{staticClass:"mt-2",attrs:{type:"error",dense:""}},[e._v(" File size should be less than 4 MB! ")]):e._e(),t(be["a"],{staticClass:"mt-4 mb-2",attrs:{suffix:"required",placeholder:"Select A Type",items:e.selectTypes,clearable:""},model:{value:e.uploads.Type,callback:function(t){e.$set(e.uploads,"Type",t)},expression:"uploads.Type"}}),t(Se["a"],{staticClass:"mb-2",attrs:{label:"Document Remark",clearable:""},model:{value:e.uploads.Remark,callback:function(t){e.$set(e.uploads,"Remark",t)},expression:"uploads.Remark"}}),e.progress>0&&e.progress<100?t(ba["a"],{staticClass:"mb-2",attrs:{value:e.progress,color:"primary",height:"6",rounded:""}}):e._e(),t("div",{staticClass:"d-flex justify-end"},[t(C["a"],{staticClass:"rounded-pill",attrs:{small:"",outlined:"",color:"grey"},on:{click:e.closeUploadDialog}},[t(s["a"],{attrs:{left:""}},[e._v("mdi-close")]),e._v(" Cancel ")],1),t(C["a"],{staticClass:"rounded-pill ml-2",attrs:{small:"",color:"primary",disabled:!e.currentFile||!e.uploads.Type},on:{click:function(t){return e.uploadDocConfirm(e.currentStageId)}}},[t(s["a"],{attrs:{left:""}},[e._v("mdi-cloud-upload")]),e._v(" Submit ")],1)],1)],1)],1)],1),e._l(e.docSections,(function(a){return t("div",{key:a.id,staticClass:"mb-6 rounded-xl pa-4 elevation-1",class:a.bg},[t(A["a"],[t(D["a"],{staticClass:"d-flex align-center",attrs:{cols:"6"}},[t(Ca["a"],{staticClass:"mr-2",attrs:{size:"36",color:a.avatarColor}},[t(s["a"],{attrs:{color:a.iconColor}},[e._v(e._s(a.icon))])],1),t(S["d"],{staticClass:"justify-center text-h6 font-weight-bold",staticStyle:{"letter-spacing":"1px"}},[e._v(" "+e._s(a.title)+" ")])],1),t(D["a"],{staticClass:"d-flex justify-end align-center",attrs:{cols:"6"}},[e.shouldShowUploadButton(a.id)?t(C["a"],{staticClass:"my-2 rounded-pill",attrs:{outlined:"",color:"primary"},on:{click:function(t){return e.openUploadDialog(a.id)}}},[t(s["a"],{attrs:{left:""}},[e._v("mdi-upload")]),e._v(" Upload ")],1):e._e()],1)],1),a.filterFn(e.documents,e.casefile).length>0?t(b["a"],{staticClass:"rounded-xl elevation-0 mt-2"},[t(Sa["a"],{attrs:{dense:""}},[t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("File")]),t("th",{staticClass:"text-left"},[e._v("Type")]),t("th",{staticClass:"text-left"},[e._v("Remark")]),t("th",{staticClass:"text-left"},[e._v("Uploaded By")]),t("th",{staticClass:"text-left"},[e._v("Uploaded At")]),t("th",{staticClass:"text-left"})])]),t("tbody",e._l(a.filterFn(e.documents,e.casefile),(function(a){return t("tr",{key:a.id,staticClass:"doc-row"},[t("td",{staticClass:"text-left"},[t(C["a"],{staticClass:"rounded-pill",attrs:{outlined:"","x-small":"",block:"",color:"primary"},on:{click:function(t){return e.onClick(a.name)}}},[t(s["a"],{attrs:{left:"",small:""}},[e._v("mdi-file-download")]),e._v(" "+e._s(a.name)+" ")],1)],1),t("td",{staticClass:"text-left"},[t(_["a"],{staticClass:"font-weight-bold",attrs:{small:"",color:"primary lighten-4","text-color":"primary"}},[e._v(" "+e._s(a.Type)+" ")])],1),t("td",{staticClass:"text-left"},[e._v(e._s(a.Remark))]),e._l(e.filterUser(a.createdBy),(function(a){return t("td",{key:a.id,staticClass:"text-left"},[t(Ca["a"],{staticClass:"mr-1",attrs:{size:"24",color:"grey lighten-2"}},[t(s["a"],{attrs:{small:"",color:"grey"}},[e._v("mdi-account")])],1),e._v(" "+e._s(a.username)+" ")],1)})),t("td",{staticClass:"text-left"},[e._v(e._s(e.formatDate(a.createdAt)))]),t("td",{staticClass:"text-left"},[t(P["a"],{attrs:{bottom:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:r}){return[e.management?t(s["a"],e._g(e._b({staticClass:"doc-delete-icon",attrs:{small:"",color:"red darken-1"},on:{click:function(t){return e.deleteDoc(a)}}},"v-icon",r,!1),i),[e._v(" mdi-trash-can-outline ")]):e._e()]}}],null,!0)},[t("span",[e._v("Delete")])])],1)],2)})),0)])],1):t(ga["a"],{staticClass:"mt-2",attrs:{type:"info",border:"left",color:"primary",dense:""}},[e._v(" No documents uploaded yet. ")])],1)}))],2)],1)},Da=[],ya=(a("88a7"),a("271a"),a("5494"),a("3c98")),xa=a("7e1b"),Aa=a("bc3a"),ka=a.n(Aa),Ta=a("6736"),Ea={name:"documents",props:{casefile:{type:Object,required:!0},preloadedDocs:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},data(){return{currentFile:void 0,progress:0,message:"",management:!1,fileInfos:[],rules:[e=>!e||e.size<4e6||"File size should be less than 4 MB!"],documents:this.preloadedDocs,editedIndex:-1,editedItem:{id:null,caseId:null,docStageId:null,name:"",Type:"",Remark:"",createdBy:null},members:[],selectTypes:["Adjuster Report","Court Documents","Cover Note / Policy","Employment letters","Insurers Instruction","JPJ Report","Medical Report","Other Claim Documents","Police Documents (Full Set)","Police Out-Come","Police Reports","Solicitors Instruction","Statutory Declaration"],uploads:{id:null,caseId:"",name:"",Type:"",Remark:"",createdBy:""},dialogUploadDoc:!1,currentStageId:null,dialogTitle:"",dialogDeleteDoc:!1,dialogDeleteDoc1:!1,dialogDeleteDoc2:!1,dialogDeleteDoc3:!1,UploadAccess:!1,adjUploadAccess:!1,ediUploadAccess:!1,fileInputKey:0,docSections:[{id:1,title:"INITIAL DOCUMENT(S)",bg:"red lighten-5",icon:"mdi-file-document-outline",iconColor:"red darken-2",avatarColor:"red lighten-4",filterFn:function(e,t){return e.filter(e=>e.caseId===t.id&&1===e.docStageId)}},{id:2,title:"ADJUSTER'S REPORT(S)",bg:"orange lighten-5",icon:"mdi-account-tie",iconColor:"orange darken-2",avatarColor:"orange lighten-4",filterFn:function(e,t){return e.filter(e=>e.caseId===t.id&&2===e.docStageId)}},{id:3,title:"EDITED REPORT(S)",bg:"yellow lighten-5",icon:"mdi-pencil",iconColor:"yellow darken-2",avatarColor:"yellow lighten-4",filterFn:function(e,t){return e.filter(e=>e.caseId===t.id&&3===e.docStageId)}},{id:4,title:"FINAL REPORT(S)",bg:"green lighten-5",icon:"mdi-file-check-outline",iconColor:"green darken-2",avatarColor:"green lighten-4",filterFn:function(e,t){return e.filter(e=>e.caseId===t.id&&4===e.docStageId)}}]}},computed:{isUploadDocDisabled(){return!this.uploads.Type}},watch:{preloadedDocs:{immediate:!0,handler(e){e.length>0&&(this.documents=e)}},uploadDoc(e){e||this.closeUploadDoc()},uploadDoc1(e){e||this.closeUploadDoc1()},uploadDoc2(e){e||this.closeUploadDoc2()},uploadDoc3(e){e||this.closeUploadDoc3()},deleteDoc(e){e||this.closeDeleteDoc()}},methods:{checkUploadAccess(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER"))&&(this.UploadAccess=!0)},checkAdjUploadAccess(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("ADJUSTER"))&&(this.adjUploadAccess=!0)},checkEdiUploadAccess(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("EDITOR"))&&(this.ediUploadAccess=!0)},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},onClick(e){ka()({url:`${Ta["a"].docsURL}/${e}`,method:"GET",responseType:"blob"}).then(t=>{var a=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=a;var i=e.substr(e.lastIndexOf(".")+1),r=this.casefile.vehicleNo.toUpperCase();s.setAttribute("download",r+"_"+this.casefile.id+"."+i),document.body.appendChild(s),s.click()})},moment:function(e){return G()(e)},formatDate:function(e){return G()(e).format("DD/MM/YYYY, h:mm:ss a")},refreshList(){this.retrieveDocs()},filterCaseFile(){return this.casefile.filter(e=>e.id===this.casefile.id)},filterCase(){return this.documents.filter(e=>e.caseId===this.casefile.id&&1===e.docStageId)},filterCase1(){return this.documents.filter(e=>e.caseId===this.casefile.id&&2===e.docStageId)},filterCase2(){return this.documents.filter(e=>e.caseId===this.casefile.id&&3===e.docStageId)},filterCase3(){return this.documents.filter(e=>e.caseId===this.casefile.id&&4===e.docStageId)},filterUser(e){return this.members.filter(t=>t.id===e)},selectFile(e){this.currentFile=e},onFileInputChange(e){const t=e.target.files;t&&t.length>0&&this.selectFile(t[0])},retrieveDocs(){ya["a"].getAll().then(e=>{this.documents=e.data}).catch(e=>{console.log(e)})},retrieveUser(){Ct["a"].getAll().then(e=>{this.members=e.data}).catch(e=>{console.log(e)})},deleteDoc(e){this.editedItem=Object.assign({},e),this.dialogDeleteDoc=!0},closeDeleteDoc(){this.dialogDeleteDoc=!1,this.$nextTick(()=>{})},closeDeleteDoc1(){this.dialogDeleteDoc1=!1,this.$nextTick(()=>{})},closeDeleteDoc2(){this.dialogDeleteDoc2=!1,this.$nextTick(()=>{})},closeDeleteDoc3(){this.dialogDeleteDoc3=!1,this.$nextTick(()=>{})},deleteItemConfirm(){ya["a"].delete(this.editedItem.id,this.editedItem.name).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)}),this.closeDeleteDoc()},triggerFileInput(){this.$refs.fileInput.value=null,this.$refs.fileInput.click()},openUploadDialog(e){switch(this.currentStageId=e,this.dialogUploadDoc=!0,this.currentFile=void 0,this.fileInputKey++,e){case 1:this.dialogTitle="UPLOAD INITIAL DOCUMENT";break;case 2:this.dialogTitle="UPLOAD ADJUSTER'S REPORT";break;case 3:this.dialogTitle="UPLOAD EDITED REPORT";break;case 4:this.dialogTitle="UPLOAD FINAL REPORT";break}},shouldShowUploadButton(e){switch(e){case 1:return this.UploadAccess;case 2:return this.adjUploadAccess;case 3:return this.ediUploadAccess;case 4:return this.UploadAccess;default:return!1}},closeUploadDialog(){this.dialogUploadDoc=!1,this.currentStageId=null,this.currentFile=void 0,this.fileInputKey++,this.$nextTick(()=>{})},uploadDocConfirm(e){if(!this.currentFile)return void this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:"Please select a file!"});const t=new FormData;t.append("file",this.currentFile),t.append("caseId",this.casefile.id),t.append("stageId",e),t.append("userId",this.$store.state.auth.user.id),t.append("type",this.uploads.Type),t.append("remark",this.uploads.Remark),this.message="",xa["a"].upload(t,e=>{this.progress=Math.round(100*e.loaded/e.total)}).then(t=>{const a=t.data.name,s={caseId:this.casefile.id,docStageId:e,name:a,Type:this.uploads.Type,Remark:this.uploads.Remark,createdBy:this.$store.state.auth.user.id};return this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),ya["a"].create(s)}).then(e=>{this.closeUploadDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),this.uploads.Type="",this.uploads.Remark="",this.refreshList(),this.currentFile=void 0}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})})}},mounted(){this.retrieveDocs(),this.retrieveUser(),this.checkManagement(),this.checkUploadAccess(),this.checkAdjUploadAccess(),this.checkEdiUploadAccess()}},Ia=Ea,Ra=(a("8b9b"),Object(J["a"])(Ia,_a,Da,!1,null,"4a569f6c",null)),wa=Ra.exports,Na=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.doneDispatchDisabled},on:{click:function(t){return e.completeDoneDispatch()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-truck-check")]),t("span",{staticClass:"action-text"},[e._v("DONE DISPATCH")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("DONE DISPATCH")])]),t(j["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogCompleteDoneDispatch,callback:function(t){e.dialogCompleteDoneDispatch=t},expression:"dialogCompleteDoneDispatch"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("DONE DISPATCH")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(S["d"],[e._v("The physical report along with attachments are dispatched.")]),t($["a"]),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeDoneDispatchDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{disabled:e.isFileButtonDisabled,tile:"",small:""},on:{click:e.compDoneDispatchSubmit}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},Oa=[],Ba={name:"dispatch",props:["management"],components:{},data(){return{dialogCompleteDoneDispatch:!1}},computed:{doneDispatchDisabled(){return!("PDISP"==this.caseState.casefile.fileStatus&&this.management)},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!this.management}},watch:{completeDoneDispatch(e){e||this.closeDoneDispatchDialog()}},methods:{completeDoneDispatch(){this.dialogCompleteDoneDispatch=!0},compDoneDispatchSubmit(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="CLO",this.caseState.casefile.dateClosed=G()().format(),this.caseState.casefile.closedBy=this.$store.state.auth.user.id).then(e=>{this.closeDoneDispatchDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeDoneDispatchDialog()},closeDoneDispatchDialog(){this.dialogCompleteDoneDispatch=!1,this.$nextTick(()=>{})}}},ja=Ba,$a=Object(J["a"])(ja,Na,Oa,!1,null,null,null),Fa=$a.exports,Pa=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[e.management&&"CANC"!==e.caseState.casefile.fileStatus&&"CLO"!==e.caseState.casefile.fileStatus?t(C["a"],e._g({staticClass:"mr-1",attrs:{outlined:"",fab:"","x-small":""},on:{click:function(t){return e.editCase()}}},{...a}),[t(s["a"],[e._v("mdi-pencil")])],1):e._e()]}}])},[t("span",[e._v("EDIT FILE")])]),t(j["a"],{attrs:{"max-width":"600px",persistent:""},model:{value:e.dialogEditCase,callback:function(t){e.dialogEditCase=t},expression:"dialogEditCase"}},[t(b["a"],{attrs:{tile:""}},[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("EDIT CASEFILE")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(R["a"],{staticClass:"mb-2",attrs:{dark:"","show-arrows":"","background-color":"teal darken-3"},model:{value:e.editTab,callback:function(t){e.editTab=t},expression:"editTab"}},[t(N["a"],{attrs:{color:"teal lighten-3"}}),t(E["a"],[e._v("General")]),t(E["a"],[e._v("Insured")]),t(E["a"],[e._v("Driver")]),t(E["a"],[e._v("Insurer")]),t(E["a"],[e._v("Solicitor")]),t(E["a"],[e._v("Claimant")])],1)],1),t(A["a"],[t(w["a"],{staticClass:"mt-1",model:{value:e.editTab,callback:function(t){e.editTab=t},expression:"editTab"}},[t(I["a"],[t(A["a"],{staticClass:"ma-1"},[t(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(S["d"],[e._v("Department")]),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{dense:"",items:e.refType,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select Department","persistent-hint":"",label:"Department"},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Department ")]},proxy:!0}]),model:{value:e.caseState.casefile.refType,callback:function(t){e.$set(e.caseState.casefile,"refType",t)},expression:"caseState.casefile.refType"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{dense:"",items:e.filtersubRefType(e.caseState.casefile.refType),"item-text":"subCode","item-value":"id","no-data-text":"There is no file-Classification option for selected department above","menu-props":{maxHeight:"400"},label:"File-Classification",hint:"Select File-Classification","persistent-hint":""},model:{value:e.caseState.casefile.subRefType,callback:function(t){e.$set(e.caseState.casefile,"subRefType",t)},expression:"caseState.casefile.subRefType"}})],1)],1)],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{dense:"",items:e.branches,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile branch","persistent-hint":"",label:"Branch"},model:{value:e.caseState.casefile.branch,callback:function(t){e.$set(e.caseState.casefile,"branch",t)},expression:"caseState.casefile.branch"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(ve["a"],{attrs:{dense:"",items:e.insurer,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile insurer","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurer ")]},proxy:!0}]),model:{value:e.caseState.casefile.insurer,callback:function(t){e.$set(e.caseState.casefile,"insurer",t)},expression:"caseState.casefile.insurer"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{dense:"",items:e.filterHandler(e.caseState.casefile.insurer),"item-text":"name","item-value":"id","no-data-text":"There is no handler option for selected insurer above","menu-props":{maxHeight:"400"},label:"Claim Handler",hint:"Select Handler","persistent-hint":""},model:{value:e.caseState.casefile.handler,callback:function(t){e.$set(e.caseState.casefile,"handler",t)},expression:"caseState.casefile.handler"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"","item-text":"Insurer's Reference",label:"Insurers Reference Number",rules:[e=>!!e||"Insurers reference is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurers Reference ")]},proxy:!0}]),model:{value:e.caseState.casefile.claimNo,callback:function(t){e.$set(e.caseState.casefile,"claimNo",t)},expression:"caseState.casefile.claimNo"}})],1),t(D["a"],{attrs:{cols:"12"}},[[t("div",[t(Ce["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(Se["a"],e._g(e._b({attrs:{"persistent-hint":"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Assignment ")]},proxy:!0}],null,!0),model:{value:e.ComputedDateOfAssignEdit,callback:function(t){e.ComputedDateOfAssignEdit=t},expression:"ComputedDateOfAssignEdit"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[t(ge["a"],{on:{change:function(t){e.menu2=!1}},model:{value:e.caseState.casefile.dateOfAssign,callback:function(t){e.$set(e.caseState.casefile,"dateOfAssign",t)},expression:"caseState.casefile.dateOfAssign"}})],1)],1)]],2),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Vehicle Number",hint:"Vehicle Number"},model:{value:e.caseState.casefile.vehicleNo,callback:function(t){e.$set(e.caseState.casefile,"vehicleNo",t)},expression:"caseState.casefile.vehicleNo"}})],1),t(D["a"],{attrs:{cols:"12"}},[[t("div",[t(Ce["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(Se["a"],e._g(e._b({attrs:{"prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Loss ")]},proxy:!0}],null,!0),model:{value:e.ComputedDateOfLossEdit,callback:function(t){e.ComputedDateOfLossEdit=t},expression:"ComputedDateOfLossEdit"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menu3,callback:function(t){e.menu3=t},expression:"menu3"}},[t(ge["a"],{on:{change:function(t){e.menu3=!1}},model:{value:e.caseState.casefile.dateOfLoss,callback:function(t){e.$set(e.caseState.casefile,"dateOfLoss",t)},expression:"caseState.casefile.dateOfLoss"}})],1)],1)]],2),t(b["a"],{attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(S["d"],[e._v("Place Of Loss")]),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{dense:"",items:e.states,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select State","persistent-hint":"",label:"State"},model:{value:e.caseState.casefile.stateOfLoss,callback:function(t){e.$set(e.caseState.casefile,"stateOfLoss",t)},expression:"caseState.casefile.stateOfLoss"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{dense:"",items:e.filterRegions(e.caseState.casefile.stateOfLoss),"item-text":"name","item-value":"name","no-data-text":"There is no district option for selected state above","menu-props":{maxHeight:"400"},label:"Area Of Loss",hint:"Select District","persistent-hint":""},model:{value:e.caseState.casefile.placeOfLoss,callback:function(t){e.$set(e.caseState.casefile,"placeOfLoss",t)},expression:"caseState.casefile.placeOfLoss"}})],1)],1)],1)],1)],1),t(I["a"],[t(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(S["d"],[e._v("Insured Details")]),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Insured Name"},model:{value:e.caseState.casefile.insuredName,callback:function(t){e.$set(e.caseState.casefile,"insuredName",t)},expression:"caseState.casefile.insuredName"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Insured IC"},model:{value:e.caseState.casefile.insuredIC,callback:function(t){e.$set(e.caseState.casefile,"insuredIC",t)},expression:"caseState.casefile.insuredIC"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Insured Tel"},model:{value:e.caseState.casefile.insuredTel,callback:function(t){e.$set(e.caseState.casefile,"insuredTel",t)},expression:"caseState.casefile.insuredTel"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Insured Email"},model:{value:e.caseState.casefile.insuredEmail,callback:function(t){e.$set(e.caseState.casefile,"insuredEmail",t)},expression:"caseState.casefile.insuredEmail"}})],1)],1)],1)],1),t(I["a"],[t(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(S["d"],[e._v("Insured Driver Details")]),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Insured Driver Name"},model:{value:e.caseState.casefile.insuredDriverName,callback:function(t){e.$set(e.caseState.casefile,"insuredDriverName",t)},expression:"caseState.casefile.insuredDriverName"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Insured Driver IC"},model:{value:e.caseState.casefile.insuredDriverIc,callback:function(t){e.$set(e.caseState.casefile,"insuredDriverIc",t)},expression:"caseState.casefile.insuredDriverIc"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Insured Driver Tel"},model:{value:e.caseState.casefile.insuredDriverTel,callback:function(t){e.$set(e.caseState.casefile,"insuredDriverTel",t)},expression:"caseState.casefile.insuredDriverTel"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Insured Driver Email"},model:{value:e.caseState.casefile.insuredDriverEmail,callback:function(t){e.$set(e.caseState.casefile,"insuredDriverEmail",t)},expression:"caseState.casefile.insuredDriverEmail"}})],1)],1)],1)],1),t(I["a"],[t(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(S["d"],[e._v("Insurer Details")]),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Police Report Number"},model:{value:e.caseState.casefile.policeReportNo,callback:function(t){e.$set(e.caseState.casefile,"policeReportNo",t)},expression:"caseState.casefile.policeReportNo"}})],1),t(D["a"],{attrs:{cols:"12"}},[[t("div",[t(Ce["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(Se["a"],e._g(e._b({attrs:{"persistent-hint":"","prepend-icon":"mdi-calendar",readonly:"",label:"Police Report Date"},on:{"click:clear":function(t){e.date=null}},model:{value:e.ComputedDateOfPoliceRepotDate,callback:function(t){e.ComputedDateOfPoliceRepotDate=t},expression:"ComputedDateOfPoliceRepotDate"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menu4,callback:function(t){e.menu4=t},expression:"menu4"}},[t(ge["a"],{on:{change:function(t){e.menu4=!1}},model:{value:e.caseState.casefile.policeReportDate,callback:function(t){e.$set(e.caseState.casefile,"policeReportDate",t)},expression:"caseState.casefile.policeReportDate"}})],1)],1)]],2),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Policy Number"},model:{value:e.caseState.casefile.policyNo,callback:function(t){e.$set(e.caseState.casefile,"policyNo",t)},expression:"caseState.casefile.policyNo"}})],1),t(D["a"],{attrs:{cols:"12"}},[[t("div",[t(Ce["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(Se["a"],e._g(e._b({attrs:{"persistent-hint":"","prepend-icon":"mdi-calendar",readonly:"",label:"Policy Cover From"},on:{"click:clear":function(t){e.date=null}},model:{value:e.ComputedDateOfCoverFrom,callback:function(t){e.ComputedDateOfCoverFrom=t},expression:"ComputedDateOfCoverFrom"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menu5,callback:function(t){e.menu5=t},expression:"menu5"}},[t(ge["a"],{on:{change:function(t){e.menu5=!1}},model:{value:e.caseState.casefile.coverFrom,callback:function(t){e.$set(e.caseState.casefile,"coverFrom",t)},expression:"caseState.casefile.coverFrom"}})],1)],1)]],2),t(D["a"],{attrs:{cols:"12"}},[[t("div",[t(Ce["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(Se["a"],e._g(e._b({attrs:{"persistent-hint":"","prepend-icon":"mdi-calendar",readonly:"",label:"Policy Cover To"},on:{"click:clear":function(t){e.date=null}},model:{value:e.ComputedDateOfCoverTo,callback:function(t){e.ComputedDateOfCoverTo=t},expression:"ComputedDateOfCoverTo"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menu6,callback:function(t){e.menu6=t},expression:"menu6"}},[t(ge["a"],{on:{change:function(t){e.menu6=!1}},model:{value:e.caseState.casefile.coverTo,callback:function(t){e.$set(e.caseState.casefile,"coverTo",t)},expression:"caseState.casefile.coverTo"}})],1)],1)]],2),t(D["a"],{attrs:{cols:"12"}},[t(_e["a"],{attrs:{label:"Insurers Comment"},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurers Comment ")]},proxy:!0}]),model:{value:e.caseState.casefile.insComment,callback:function(t){e.$set(e.caseState.casefile,"insComment",t)},expression:"caseState.casefile.insComment"}})],1)],1)],1)],1),t(I["a"],[t(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(S["d"],[e._v("Insured Solicitor Details")]),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Insured Solicitor Name"},model:{value:e.caseState.casefile.solicitorName,callback:function(t){e.$set(e.caseState.casefile,"solicitorName",t)},expression:"caseState.casefile.solicitorName"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Insured Solicitor Tel"},model:{value:e.caseState.casefile.solicitorTel,callback:function(t){e.$set(e.caseState.casefile,"solicitorTel",t)},expression:"caseState.casefile.solicitorTel"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Insured Solicitor Email"},model:{value:e.caseState.casefile.solicitorEmail,callback:function(t){e.$set(e.caseState.casefile,"solicitorEmail",t)},expression:"caseState.casefile.solicitorEmail"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Attending Counsel"},model:{value:e.caseState.casefile.counselName,callback:function(t){e.$set(e.caseState.casefile,"counselName",t)},expression:"caseState.casefile.counselName"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Counsel Tel"},model:{value:e.caseState.casefile.counselTel,callback:function(t){e.$set(e.caseState.casefile,"counselTel",t)},expression:"caseState.casefile.counselTel"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Counsel Email"},model:{value:e.caseState.casefile.counselEmail,callback:function(t){e.$set(e.caseState.casefile,"counselEmail",t)},expression:"caseState.casefile.counselEmail"}})],1)],1)],1)],1),t(I["a"],[t(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(S["d"],[e._v("Third Party Claimant Details")]),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Third Party Claimant Name"},model:{value:e.caseState.casefile.thirdPartyClaimantName,callback:function(t){e.$set(e.caseState.casefile,"thirdPartyClaimantName",t)},expression:"caseState.casefile.thirdPartyClaimantName"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Third Party Claimant IC"},model:{value:e.caseState.casefile.thirdPartyClaimantIc,callback:function(t){e.$set(e.caseState.casefile,"thirdPartyClaimantIc",t)},expression:"caseState.casefile.thirdPartyClaimantIc"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Third Party Claimant Tel"},model:{value:e.caseState.casefile.thirdPartyClaimantTel,callback:function(t){e.$set(e.caseState.casefile,"thirdPartyClaimantTel",t)},expression:"caseState.casefile.thirdPartyClaimantTel"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Third Party Claimant Email"},model:{value:e.caseState.casefile.thirdPartyClaimantEmail,callback:function(t){e.$set(e.caseState.casefile,"thirdPartyClaimantEmail",t)},expression:"caseState.casefile.thirdPartyClaimantEmail"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Third Party Claimant Vehicle Number"},model:{value:e.caseState.casefile.thirdPartyClaimantVehicleNo,callback:function(t){e.$set(e.caseState.casefile,"thirdPartyClaimantVehicleNo",t)},expression:"\n                          caseState.casefile.thirdPartyClaimantVehicleNo\n                        "}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Third Party Claimant Vehicle Model"},model:{value:e.caseState.casefile.thirdPartyClaimantVehicleModel,callback:function(t){e.$set(e.caseState.casefile,"thirdPartyClaimantVehicleModel",t)},expression:"\n                          caseState.casefile.thirdPartyClaimantVehicleModel\n                        "}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Third Party Claimant Solicitor"},model:{value:e.caseState.casefile.thirdPartyClaimantSolicitor,callback:function(t){e.$set(e.caseState.casefile,"thirdPartyClaimantSolicitor",t)},expression:"\n                          caseState.casefile.thirdPartyClaimantSolicitor\n                        "}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",label:"Third Party Claimant Solicitor Email"},model:{value:e.caseState.casefile.thirdPartyClaimantSolicitorEmail,callback:function(t){e.$set(e.caseState.casefile,"thirdPartyClaimantSolicitorEmail",t)},expression:"\n                          caseState.casefile.thirdPartyClaimantSolicitorEmail\n                        "}})],1)],1)],1)],1)],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(se["a"]),t(C["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeEditCase}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"success mt-3",attrs:{disabled:e.isEditFileButtonDisabled,small:"",tile:""},on:{click:e.editCasefile}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},La=[],Ma={name:"editCase",props:["management","refType","subRefTypes","branches","insurer","handlers","states","regions","stages"],components:{},data(){return{dialogEditCase:!1,menu2:!1,menu3:!1,menu4:!1,menu5:!1,menu6:!1,editTab:null}},computed:{...Object(Y["c"])(["caseState"]),ComputedDateOfAssignEdit(){return this.formatDateMethod(this.caseState.casefile.dateOfAssign)},ComputedDateOfLossEdit(){return this.formatDateMethod(this.caseState.casefile.dateOfLoss)},ComputedDateOfPoliceRepotDate(){return this.formatDateMethod(this.caseState.casefile.policeReportDate)},ComputedDateOfCoverFrom(){return this.formatDateMethod(this.caseState.casefile.coverFrom)},ComputedDateOfCoverTo(){return this.formatDateMethod(this.caseState.casefile.coverTo)},isEditFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.dateOfAssign&&this.caseState.casefile.dateOfLoss)}},watch:{editCase(e){e||this.closeEditCase()}},methods:{moment:function(e){return G()(e)},formatDateMethod(e){return e?G()(e).format("DD/MM/YYYY"):null},yearOnly(e){return G()(e).format("YY")},filterDept(e){return this.refType.filter(t=>t.id===e)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},editCase(){this.dialogEditCase=!0},editCasefile(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.vehicleNo=this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,"")).then(e=>{this.closeEditCase(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeEditCase()},closeEditCase(){this.dialogEditCase=!1,this.$nextTick(()=>{})}}},Ua=Ma,Ha=Object(J["a"])(Ua,Pa,La,!1,null,null,null),Ga=Ha.exports,Ya=a("8643"),Va=function(){var e=this,t=e._self._c;return t("div",[t(b["a"],{staticClass:"history-container",attrs:{flat:""}},[t(S["d"],{staticClass:"d-flex align-center pb-2"},[t(s["a"],{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[e._v("mdi-history")]),t("span",{staticClass:"text-h6"},[e._v(" Vehicle History "),e.caseState.casefile&&e.caseState.casefile.vehicleNo?t("span",{staticClass:"ml-2 grey--text text--darken-2"},[e._v(" ("+e._s(e.caseState.casefile.vehicleNo.toUpperCase())+") ")]):e._e()]),t(se["a"]),!e.isVehicleNoTbaOrNone&&e.cases.length>1?t(_["a"],{staticClass:"font-weight-medium",attrs:{color:"orange",small:""}},[e._v(" "+e._s(e.cases.length-1)+" Previous Cases ")]):e._e()],1),t($["a"]),e.isVehicleNoTbaOrNone?[t(S["c"],{staticClass:"text-center pa-8"},[t(s["a"],{attrs:{size:"64",color:"grey lighten-1"}},[e._v("mdi-car-off")]),t("h3",{staticClass:"mt-4 grey--text text--darken-1"},[e._v(" No Previous Cases Found ")]),t("p",{staticClass:"subtitle-1 grey--text"},[e._v(" This is the first case for this vehicle ")])],1)]:[e.loading?t("div",{staticClass:"pa-4"},e._l(3,(function(e){return t(T["a"],{key:e,staticClass:"mb-4",attrs:{type:"list-item-two-line"}})})),1):!e.cases.length||e.cases.length<=1?t(S["c"],{staticClass:"text-center pa-8"},[t(s["a"],{attrs:{size:"64",color:"grey lighten-1"}},[e._v("mdi-car-off")]),t("h3",{staticClass:"mt-4 grey--text text--darken-1"},[e._v(" No Previous Cases Found ")]),t("p",{staticClass:"subtitle-1 grey--text"},[e._v(" This is the first case for this vehicle ")])],1):t(S["c"],{staticClass:"pa-4"},[t(A["a"],e._l(e.filteredCases,(function(a){return t(D["a"],{key:a.id,attrs:{cols:"12",sm:"6",md:"4"}},[t(b["a"],{staticClass:"history-card",attrs:{outlined:"",hover:""},on:{click:function(t){return e.showDetail(a)}}},[t(S["c"],[t("div",{staticClass:"d-flex align-center mb-2"},[t(s["a"],{staticClass:"mr-2",attrs:{color:"primary",small:""}},[e._v("mdi-file-document-outline")]),t("span",{staticClass:"text-subtitle-2"},[e._v("AA/"+e._s(e.getRefNumber(a)))])],1),t("div",{staticClass:"d-flex align-center"},[t(s["a"],{staticClass:"mr-2",attrs:{small:"",color:"grey"}},[e._v("mdi-calendar")]),t("span",{staticClass:"caption grey--text"},[e._v(e._s(e.formatDate(a.createdAt)))])],1),t(_["a"],{staticClass:"mt-2",attrs:{"x-small":"",color:e.getStatusColor(a.fileStatus),"text-color":"white"}},[e._v(" "+e._s(e.getStatusText(a.fileStatus))+" ")])],1)],1)],1)})),1)],1)]],2),t(j["a"],{attrs:{width:"700"},model:{value:e.dialogDetail,callback:function(t){e.dialogDetail=t},expression:"dialogDetail"}},[t(b["a"],[t(S["a"],[t(se["a"]),t(C["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogDetail=!1}}},[e._v(" Close ")])],1),t(S["d"],[t(se["a"]),t("span",{staticClass:"caption text-decoration-overline"},[e._v("Details of AA/"),e._l(e.filterDept(e.caseDetail.refType),(function(a,s){return t("span",{key:s},[e._v(e._s(a.name)+" "),e._l(e.filterSubDept(e.caseDetail.subRefType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.subCode))])}))],2)})),e._v("/"+e._s(e.caseDetail.id)+"/"+e._s(e.yearOnly(e.caseDetail.createdAt))+"/"),e._l(e.filterBranches(e.caseDetail.branch),(function(a){return t("span",{key:a.id},[e._v(e._s(a.brCode)+" ")])}))],2)],1),t(Sa["a"],{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-center font-weight-black"},[e._v("Name")]),t("th",{staticClass:"text-left font-weight-black"},[e._v("Description")])])]),t("tbody",[e.caseDetail.fileStatus?t("tr",[t("td",{staticClass:"text-center"},[e._v("Status")]),e._l(e.filterStages(e.caseDetail.fileStatus),(function(a){return t("td",{key:a.id,staticClass:"text-left font-italic font-weight-black"},[e._v(" "+e._s(a.name)+" ")])}))],2):e._e(),e.caseDetail.createdAt?t("tr",[t("td",{staticClass:"text-center"},[e._v("Created On:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.createdAt))+" ")])]):e._e(),e.caseDetail.createdAt?t("tr",[t("td",{staticClass:"text-center"},[e._v("Created By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.createdBy))+" ")])]):e._e(),e.caseDetail.transferDate?t("tr",[t("td",{staticClass:"text-center"},[e._v("Transfer Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.transferDate))+" ")])]):e._e(),e.caseDetail.transferDate?t("tr",[t("td",{staticClass:"text-center"},[e._v("Transfered By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.transferBy))+" ")])]):e._e(),e.caseDetail.dateOfCancel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Cancellation Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfCancel))+" ")])]):e._e(),e.caseDetail.dateOfCancel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Cancellation By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.cancelBy))+" ")])]):e._e(),e.caseDetail.caseFrom?t("tr",[t("td",{staticClass:"text-center"},[e._v("Type")]),t("td",{staticClass:"text-left font-italic"},[e._v(e._s(e.caseDetail.caseFrom))])]):e._e(),e.caseDetail.refType?t("tr",[t("td",{staticClass:"text-center"},[e._v("Department")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterDept(e.caseDetail.refType)[0].name)+", ("+e._s(e.filterDept(e.caseDetail.refType)[0].description)+") ")])]):e._e(),e.caseDetail.subRefType?t("tr",[t("td",{staticClass:"text-center"},[e._v("File Classification")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterSubDept(e.caseDetail.subRefType)[0].subCode)+" ")])]):e._e(),e.caseDetail.branch?t("tr",[t("td",{staticClass:"text-center"},[e._v("Branch")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterBranches(e.caseDetail.branch)[0].brCode)+", ("+e._s(e.filterBranches(e.caseDetail.branch)[0].name)+") ")])]):e._e(),e.caseDetail.insurer?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insurer")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterIns(e.caseDetail.insurer)[0].name)+" ")])]):e._e(),e.caseDetail.handler?t("tr",[t("td",{staticClass:"text-center"},[e._v("Handler")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterHandler(e.caseDetail.handler)[0].name)+", ("+e._s(e.filterHandler(e.caseDetail.handler)[0].email)+") ")])]):e._e(),e.caseDetail.adjuster?t("tr",[t("td",{staticClass:"text-center"},[e._v("Adjuster")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.adjuster))+" ")])]):e._e(),e.caseDetail.editor?t("tr",[t("td",{staticClass:"text-center"},[e._v("Editor")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.editor))+" ")])]):e._e(),e.caseDetail.clerkInCharge?t("tr",[t("td",{staticClass:"text-center"},[e._v("Clerk In Charge")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.clerkInCharge))+" ")])]):e._e(),e.caseDetail.claimNo?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insurer's Ref No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(e._s(e.caseDetail.claimNo))])]):e._e(),e.caseDetail.vehicleNo?t("tr",[t("td",{staticClass:"text-center"},[e._v("Vehicle No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.vehicleNo.toUpperCase())+" ")])]):e._e(),e.caseDetail.dateOfAssign?t("tr",[t("td",{staticClass:"text-center"},[e._v("Date Of Assignment")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfAssign))+" ")])]):e._e(),e.caseDetail.dateOfLoss?t("tr",[t("td",{staticClass:"text-center"},[e._v("Date Of Loss")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfLoss))+" ")])]):e._e(),e.caseDetail.stateOfLoss?t("tr",[t("td",{staticClass:"text-center"},[e._v("State Of Loss")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterStates(e.caseDetail.stateOfLoss)[0].stCode)+", ("+e._s(e.filterStates(e.caseDetail.stateOfLoss)[0].name)+") ")])]):e._e(),e.caseDetail.placeOfLoss?t("tr",[t("td",{staticClass:"text-center"},[e._v("Place Of Loss")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.placeOfLoss)+" ")])]):e._e(),e.caseDetail.insuredName?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured Name")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insuredName)+" ")])]):e._e(),e.caseDetail.insuredIC?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured IC No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insuredIC)+" ")])]):e._e(),e.caseDetail.InsuredTel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured Tel. No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.InsuredTel)+" ")])]):e._e(),e.caseDetail.insuredEmail?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured Email")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insuredEmail)+" ")])]):e._e(),e.caseDetail.insuredDriverName?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured Driver Name")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insuredDriverName)+" ")])]):e._e(),e.caseDetail.insuredDriverIc?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured Driver IC No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insuredDriverIc)+" ")])]):e._e(),e.caseDetail.insuredDriverEmail?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured Driver Email")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insuredDriverEmail)+" ")])]):e._e(),e.caseDetail.policeReportNo?t("tr",[t("td",{staticClass:"text-center"},[e._v("Police Report No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.policeReportNo)+" ")])]):e._e(),e.caseDetail.policeReportDate?t("tr",[t("td",{staticClass:"text-center"},[e._v("Police Report Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.policeReportDate)+" ")])]):e._e(),e.caseDetail.policyNo?t("tr",[t("td",{staticClass:"text-center"},[e._v("Policy Number")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.policyNo)+" ")])]):e._e(),e.caseDetail.coverFrom||e.caseDetail.coverTo?t("tr",[t("td",{staticClass:"text-center"},[e._v("Cover Period")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.coverFrom))+" - "+e._s(e.formatDate(e.caseDetail.coverTo))+" ")])]):e._e(),e.caseDetail.insComment?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insurer's Comment")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insComment)+" ")])]):e._e(),e.caseDetail.solicitorName?t("tr",[t("td",{staticClass:"text-center"},[e._v("Solicitor Name")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.solicitorName)+" ")])]):e._e(),e.caseDetail.solicitorTel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Solicitor Tel.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.solicitorTel)+" ")])]):e._e(),e.caseDetail.solicitorEmail?t("tr",[t("td",{staticClass:"text-center"},[e._v("Solicitor Email")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.solicitorEmail)+" ")])]):e._e(),e.caseDetail.counselName?t("tr",[t("td",{staticClass:"text-center"},[e._v("Counsel Name")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.counselName)+" ")])]):e._e(),e.caseDetail.counselTel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Counsel Tel")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.counselTel)+" ")])]):e._e(),e.caseDetail.counselEmail?t("tr",[t("td",{staticClass:"text-center"},[e._v("Counsel Email")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.counselEmail)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantName?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant Name")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantName)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantIc?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant IC No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantIc)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantTel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant Tel No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantTel)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantEmail?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant Email")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantEmail)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantVehicleNo?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant Vehicle No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantVehicleNo)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantVehicleModel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant Vehicle Model")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantVehicleModel)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantVehicleSolicitor?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant Solicitor")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantVehicleSolicitor)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantVehicleSolicitorEmail?t("tr",[t("td",{staticClass:"text-center"},[e._v(" Third Party Claimant Solicitor Email ")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantVehicleSolicitorEmail)+" ")])]):e._e(),e.caseDetail.applyDocDate?t("tr",[t("td",{staticClass:"text-center"},[e._v("Document Application Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.applyDocDate))+" ")])]):e._e(),e.caseDetail.applyDocDate?t("tr",[t("td",{staticClass:"text-center"},[e._v("Document Application By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.applyDocBy))+" ")])]):e._e(),e.caseDetail.dateOfReg?t("tr",[t("td",{staticClass:"text-center"},[e._v("Branch Assigning Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfReg))+" ")])]):e._e(),e.caseDetail.dateOfReg?t("tr",[t("td",{staticClass:"text-center"},[e._v("Branch Assigned By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.assignBranchBy))+" ")])]):e._e(),e.caseDetail.dateOfAdj?t("tr",[t("td",{staticClass:"text-center"},[e._v("Adjuster Assigning Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfAdj))+" ")])]):e._e(),e.caseDetail.dateOfAdj?t("tr",[t("td",{staticClass:"text-center"},[e._v("Adjuster Assigning By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.assignAdjBy))+" ")])]):e._e(),e.caseDetail.dateStartInv?t("tr",[t("td",{staticClass:"text-center"},[e._v("Start Investigation Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateStartInv))+" ")])]):e._e(),e.caseDetail.dateEndInv?t("tr",[t("td",{staticClass:"text-center"},[e._v("Complete Investigation Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateEndInv))+" ")])]):e._e(),e.caseDetail.dateOfEdi?t("tr",[t("td",{staticClass:"text-center"},[e._v("Editor Assigned Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfEdi))+" ")])]):e._e(),e.caseDetail.dateOfEdi?t("tr",[t("td",{staticClass:"text-center"},[e._v("Editor Assigned By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.assignEdiBy))+" ")])]):e._e(),e.caseDetail.dateStartEdi?t("tr",[t("td",{staticClass:"text-center"},[e._v("Start Editing Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateStartEdi))+" ")])]):e._e(),e.caseDetail.dateEndEdi?t("tr",[t("td",{staticClass:"text-center"},[e._v("Complete Editing Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateEndEdi))+" ")])]):e._e(),e.caseDetail.dateOfApproval?t("tr",[t("td",{staticClass:"text-center"},[e._v("Approval Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfApproval))+" ")])]):e._e(),e.caseDetail.dateOfApproval?t("tr",[t("td",{staticClass:"text-center"},[e._v("Approval By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.approvedBy))+" ")])]):e._e(),e.caseDetail.dateAssignFormatting?t("tr",[t("td",{staticClass:"text-center"},[e._v("Clerk Assigned Date(Formatting)")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateAssignFormatting))+" ")])]):e._e(),e.caseDetail.dateAssignFormatting?t("tr",[t("td",{staticClass:"text-center"},[e._v("Clerk Assigned (Formatting) By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.assignClerkBy))+" ")])]):e._e(),e.caseDetail.dateStartFormatting?t("tr",[t("td",{staticClass:"text-center"},[e._v("Start Formatting Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateStartFormatting))+" ")])]):e._e(),e.caseDetail.dateEndFormatting?t("tr",[t("td",{staticClass:"text-center"},[e._v("Complete Formatting Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateEndFormatting))+" ")])]):e._e(),e.caseDetail.dateFinal?t("tr",[t("td",{staticClass:"text-center"},[e._v("Invoising & Finalisation Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateFinal))+" ")])]):e._e(),e.caseDetail.dateFinal?t("tr",[t("td",{staticClass:"text-center"},[e._v("Invoising & Finalisation By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.finalBy))+" ")])]):e._e(),e.caseDetail.dateFinal?t("tr",[t("td",{staticClass:"text-center"},[e._v("Invoice Nombor")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.invNo)+" ")])]):e._e(),e.caseDetail.dateFinal?t("tr",[t("td",{staticClass:"text-center"},[e._v("Invoice Fee Note")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.invFeeNote)+" ")])]):e._e(),e.caseDetail.dateFinal?t("tr",[t("td",{staticClass:"text-center"},[e._v("Invoice Total")]),t("td",{staticClass:"text-left font-italic"},[e._v(" RM "+e._s(e.caseDetail.invTotal)+" ")])]):e._e(),e.caseDetail.dateDispatch?t("tr",[t("td",{staticClass:"text-center"},[e._v("Dispatch Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateDispatch))+" ")])]):e._e(),e.caseDetail.dateDispatch?t("tr",[t("td",{staticClass:"text-center"},[e._v("Dispatch By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.dispatchBy))+" ")])]):e._e(),e.caseDetail.dateClosed?t("tr",[t("td",{staticClass:"text-center"},[e._v("Closed Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateClosed))+" ")])]):e._e(),e.caseDetail.dateClosed?t("tr",[t("td",{staticClass:"text-center"},[e._v("Closed By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.closedBy))+" ")])]):e._e()])]},proxy:!0}])}),t(S["a"],[t(se["a"]),t(C["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogDetail=!1}}},[e._v(" Close ")])],1)],1)],1)],1)},Ka=[],Ja={name:"history",props:{branches:{type:Array,required:!0},states:{type:Array,required:!0},insurer:{type:Array,required:!0},handlers:{type:Array,required:!0},refType:{type:Array,required:!0},subRefTypes:{type:Array,required:!0},members:{type:Array,required:!0},stages:{type:Array,required:!0},preloadedHistory:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},data:()=>({cases:[],dialogDetail:!1,caseDetail:"",caseHistory:[]}),computed:{...Object(Y["c"])(["caseState"]),filteredCases(){if(this.isVehicleNoTbaOrNone)return this.$emit("history-count-updated",0),[];const e=this.cases.filter(e=>e.id!==this.caseState.casefile.id).sort((e,t)=>G()(t.createdAt)-G()(e.createdAt));return this.$emit("history-count-updated",e.length),e},isVehicleNoTbaOrNone(){var e;const t=null===(e=this.caseState.casefile)||void 0===e?void 0:e.vehicleNo;if(!t)return!0;const a=String(t).trim().toUpperCase();return"TBA"===a||"NONE"===a}},methods:{formatDate:function(e){return e?G()(e).format("DD/MM/YYYY"):""},showDetail(e){this.caseDetail=Object.assign({},e),this.dialogDetail=!0},yearOnly(e){return G()(e).format("YY")},filterCase(e){return this.cases.filter(t=>t.id===e)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterStates(e){return this.states.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterStages(e){return this.stages.filter(t=>t.stageCode===e)},filterUser(e){const t=this.members.filter(t=>t.id===e);let a=t.map(e=>e.username+", "+e.email);return a[0]},filterHandler(e){return this.handlers.filter(t=>t.id===e)},showFileStatus(e){const t=this.stages.filter(t=>t.stageCode===e);let a=t.map(e=>e.name);return a},retrieveCases(){if(this.preloadedHistory&&this.preloadedHistory.length>0)return this.cases=[...this.preloadedHistory],void this.$emit("history-count-updated",this.filteredCases.length);let e=this.caseState.casefile.vehicleNo;if(!e||["TBA","NONE"].includes(String(e).trim().toUpperCase()))return this.cases=[],void this.$emit("history-count-updated",0);U["a"].getAll().then(t=>{this.cases=t.data.filter(t=>t.vehicleNo===e),this.$emit("history-count-updated",this.filteredCases.length)}).catch(e=>{console.log(e),this.$emit("history-count-updated",0)})},getRefNumber(e){var t,a,s;const i=(null===(t=this.filterDept(e.refType)[0])||void 0===t?void 0:t.name)||"",r=(null===(a=this.filterSubDept(e.subRefType)[0])||void 0===a?void 0:a.subCode)||"",l=(null===(s=this.filterBranches(e.branch)[0])||void 0===s?void 0:s.brCode)||"";return`${i}${r?"/"+r:""}/${e.id}/${this.yearOnly(e.createdAt)}${l?"/"+l:""}`},getStatusColor(e){const t={NEW:"success",PEND:"warning",INVE:"info",COMP:"error",CLOSED:"grey"};return t[e]||"grey"},getStatusText(e){const t=this.filterStages(e)[0];return t?t.name:e}},watch:{preloadedHistory:{immediate:!0,handler(e){e&&e.length>0&&(this.cases=[...e],this.$emit("history-count-updated",this.filteredCases.length))}}},mounted(){this.retrieveCases()}},za=Ja,Wa=(a("aa13"),Object(J["a"])(za,Va,Ka,!1,null,"3e875f22",null)),qa=Wa.exports,Xa=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.holdApprovalDisabled},on:{click:function(t){return e.holdApproval()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-account-convert-outline")]),t("span",{staticClass:"action-text"},[e._v("HOLD APPROVAL")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("HOLD APPROVAL")])]),t(j["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogHoldApproval,callback:function(t){e.dialogHoldApproval=t},expression:"dialogHoldApproval"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("HOLD APPROVAL")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(S["d"],[e._v("I accept this file.")]),t($["a"]),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeHoldApprovalDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:e.compHoldApproval}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},Qa=[],Za={name:"holdApproval",props:["approvingManager"],components:{},data(){return{dialogHoldApproval:!1}},computed:{holdApprovalDisabled(){return!("PAPP"==this.caseState.casefile.fileStatus&&this.approvingManager)},...Object(Y["c"])(["caseState"])},watch:{holdApproval(e){e||this.closeHoldApprovalDialog()}},methods:{holdApproval(){this.dialogHoldApproval=!0},compHoldApproval(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="HOLD",this.caseState.casefile.approvedBy=this.$store.state.auth.user.id).then(e=>{this.closeHoldApprovalDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeHoldApprovalDialog()},closeHoldApprovalDialog(){this.dialogHoldApproval=!1,this.$nextTick(()=>{})}}},es=Za,ts=Object(J["a"])(es,Xa,Qa,!1,null,null,null),as=ts.exports,ss=a("5632"),is=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.invoisingDisabled},on:{click:function(t){return e.completeInvoising()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-currency-usd")]),t("span",{staticClass:"action-text"},[e._v("INVOISING & FINALISATION")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("INVOISING & FINALISATION")])]),t(j["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogCompleteInvoising,callback:function(t){e.dialogCompleteInvoising=t},expression:"dialogCompleteInvoising"}},[t(b["a"],{staticClass:"text-center"},[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("INVOISING & FINALISATION")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(Ce["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(Se["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Invoising ")]},proxy:!0}],null,!0),model:{value:e.invoice.date,callback:function(t){e.$set(e.invoice,"date",t)},expression:"invoice.date"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(ge["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu=!1}},model:{value:e.invoice.date,callback:function(t){e.$set(e.invoice,"date",t)},expression:"invoice.date"}})],1)],1)]],2),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{rules:[e=>!!e||"Invoice Number is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Invoice Number ")]},proxy:!0}]),model:{value:e.invoice.number,callback:function(t){e.$set(e.invoice,"number",t)},expression:"invoice.number"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{dense:"",type:"number",prefix:"RM",rules:[e=>!!e||"Fee Note is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Fee Note ")]},proxy:!0}]),model:{value:e.invoice.fee,callback:function(t){e.$set(e.invoice,"fee",e._n(t))},expression:"invoice.fee"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(Se["a"],{attrs:{dense:"",type:"number",prefix:"RM",rules:[e=>!!e||"Total Invoice Amount is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Total Invoice Amount ")]},proxy:!0}]),model:{value:e.invoice.total,callback:function(t){e.$set(e.invoice,"total",e._n(t))},expression:"invoice.total"}})],1),t($["a"]),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeCompleteInvDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",disabled:e.isFileButtonDisabled,small:""},on:{click:e.compInvoisingDone}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},rs=[],ls={name:"Invoising",props:["management"],components:{},data(){return{menu:!1,dialogCompleteInvoising:!1,rules:[e=>!!e||"This field is required. Only Numbers accepted"],invoice:{date:"",number:"",fee:"",total:""}}},computed:{computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},invoisingDisabled(){return!("INFI"==this.caseState.casefile.fileStatus&&this.management)},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!(this.invoice.date&&this.invoice.number&&this.invoice.fee&&this.invoice.total)}},watch:{completeInvoising(e){e||this.closeCompleteInvDialog()}},methods:{filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},moment:function(e){return G()(e)},filterHandler(e){return this.handlers.filter(t=>t.id===e)},completeInvoising(){this.dialogCompleteInvoising=!0},compInvoisingDone(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.dateFinal=this.invoice.date,this.caseState.casefile.invNo=this.invoice.number,this.caseState.casefile.invFeeNote=this.invoice.fee,this.caseState.casefile.invTotal=this.invoice.total,this.caseState.casefile.fileStatus="DISP",this.caseState.casefile.dateFinal=G()().format(),this.caseState.casefile.finalBy=this.$store.state.auth.user.id).then(e=>{this.closeCompleteInvDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)});var e={caseId:this.caseState.casefile.id,isApproved:0};setTimeout(()=>{Ft["a"].updateAll(e.caseId,e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e||toString()})})},2500),this.closeCompleteInvDialog()},closeCompleteInvDialog(){this.dialogCompleteInvoising=!1,this.$nextTick(()=>{})}}},cs=ls,ns=Object(J["a"])(cs,is,rs,!1,null,null,null),os=ns.exports,ds=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"warning mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.reEditDisabled},on:{click:function(t){return e.reEdit()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-pencil-off")]),t("span",{staticClass:"action-text"},[e._v("RE-EDIT CASE")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("RE-EDIT CASE")])]),t(j["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogReInvestigate,callback:function(t){e.dialogReInvestigate=t},expression:"dialogReInvestigate"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("RE-EDIT CASE")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(S["d"],[e._v("I advice to re-edit the case.")]),t($["a"],{attrs:{inset:""}}),t(D["a"],{attrs:{cols:"12"}},[t(_e["a"],{attrs:{"item-text":"Add a remark",label:"Case remark",rules:[e=>!!e||"Remark is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Remark ")]},proxy:!0}]),model:{value:e.commentData.comment,callback:function(t){e.$set(e.commentData,"comment",t)},expression:"commentData.comment"}})],1),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeReEditDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"success mt-3",attrs:{disabled:e.isFileButtonDisabled,small:"",tile:""},on:{click:e.compApprovalReport}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},hs=[],us={name:"reEdit",props:["holdingManager"],components:{},data(){return{dialogReInvestigate:!1,commentData:{id:null,caseId:null,comment:null,createdBy:""}}},computed:{reEditDisabled(){return!("HOLD"==this.caseState.casefile.fileStatus&&this.holdingManager)},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!this.commentData.comment}},watch:{reEdit(e){e||this.closeReEditDialog()}},methods:{reEdit(){this.dialogReInvestigate=!0},compApprovalReport(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PEDI").then(e=>{this.closeReEditDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).then(()=>{var e={caseId:this.caseState.casefile.id,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};rt["a"].create(e).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e||toString()})})}).catch(e=>{console.log(e)}),this.closeReEditDialog()},closeReEditDialog(){this.dialogReInvestigate=!1,this.$nextTick(()=>{})}}},fs=us,ms=Object(J["a"])(fs,ds,hs,!1,null,null,null),ps=ms.exports,vs=a("02ba"),gs=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"error mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.reInvestigateDisabled},on:{click:function(t){return e.reInvestigate()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-steering-off")]),t("span",{staticClass:"action-text"},[e._v("RE-INVESTIGATE CASE")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("RE-INVESTIGATE CASE")])]),t(j["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogReInvestigate,callback:function(t){e.dialogReInvestigate=t},expression:"dialogReInvestigate"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("RE-INVESTIGATE CASE")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(S["d"],[e._v("I advice to re-investigate the case.")]),t($["a"],{attrs:{inset:""}}),t(D["a"],{attrs:{cols:"12"}},[t(_e["a"],{attrs:{"item-text":"Add a remark",label:"Case remark",rules:[e=>!!e||"Remark is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Remark ")]},proxy:!0}]),model:{value:e.commentData.comment,callback:function(t){e.$set(e.commentData,"comment",t)},expression:"commentData.comment"}})],1),t(S["a"],[t(C["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeReInvestigateDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"success mt-3",attrs:{disabled:e.isFileButtonDisabled,small:"",tile:""},on:{click:e.compApprovalReport}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},Cs=[],bs={name:"reInvestigate",props:["holdingManager"],components:{},data(){return{dialogReInvestigate:!1,commentData:{id:null,caseId:null,comment:null,createdBy:""}}},computed:{reInvestigateDisabled(){return!("HOLD"==this.caseState.casefile.fileStatus&&this.holdingManager)},...Object(Y["c"])(["caseState"]),isFileButtonDisabled(){return!this.commentData.comment}},watch:{reInvestigate(e){e||this.closeReInvestigateDialog()}},methods:{reInvestigate(){this.dialogReInvestigate=!0},compApprovalReport(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="BRAC").then(e=>{this.closeReInvestigateDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).then(()=>{var e={caseId:this.caseState.casefile.id,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};rt["a"].create(e).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e||toString()})})}).catch(e=>{console.log(e)}),this.closeReInvestigateDialog()},closeReInvestigateDialog(){this.dialogReInvestigate=!1,this.$nextTick(()=>{})}}},Ss=bs,_s=Object(J["a"])(Ss,gs,Cs,!1,null,null,null),Ds=_s.exports,ys=a("d14b"),xs=a("304b"),As=a("f983"),ks=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{disabled:e.assignAdjDisabled,fab:"","x-small":""},on:{click:function(t){return e.transferAdj()}}},{...a}),[t(s["a"],[e._v("mdi-transit-transfer")])],1)]}}])},[t("span",[e._v("TRANSFER ADJUSTER")])]),t(j["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogAdj,callback:function(t){e.dialogAdj=t},expression:"dialogAdj"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("TRANSFER ADJUSTER")])]),t(S["c"],{staticClass:"mt-3 pa-0"},[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(S["d"],{staticClass:"error"},[e._v(" BY TRANSFERING THE CASE TO ANOTHER ADJUSTER, PLEASE ACCEPT THAT ALL PREVIOUS ADJUSTERS RELATED LOGS WILL BE DELETED! ")]),t(S["c"],{staticClass:"mt-3 pa-0"},[e._v(" CHOOSE BRANCH FOLLOWED BY ADJUSTER ")])],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.currentUserBranch(),"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":"",clearable:""},model:{value:e.branch.brCode,callback:function(t){e.$set(e.branch,"brCode",t)},expression:"branch.brCode"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.filterAdjByBranch(e.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Adjuster for the branch above","menu-props":{maxHeight:"400"},label:"ADJUSTERS",hint:"Assign Adjuster","persistent-hint":"",clearable:""},model:{value:e.caseState.casefile.adjuster,callback:function(t){e.$set(e.caseState.casefile,"adjuster",t)},expression:"caseState.casefile.adjuster"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(se["a"]),t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",small:"",dark:""},on:{click:e.closeAdj}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:e.assignAdjRule},on:{click:e.saveAdjuster}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},Ts=[],Es={name:"branchAccept",props:["branches","management","insurer","refType","subRefTypes","members","handlers","states","regions","adjusters"],components:{},data(){return{dialogAdj:!1,menu:!1,menu1:!1,branch:{name:"",brCode:""}}},computed:{...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},assignAdjRule(){return!(this.branch.brCode&&this.caseState.casefile.adjuster)},computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},assignAdjDisabled(){return"NEW"==this.caseState.casefile.fileStatus||"PEND"==this.caseState.casefile.fileStatus||"BRAC"==this.caseState.casefile.fileStatus||"CANC"==this.caseState.casefile.fileStatus||"CLO"==this.caseState.casefile.fileStatus||!this.management}},watch:{transferAdj(e){e||this.closeAdj()}},methods:{currentUserBranch(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(e=>e.id===this.caseState.casefile.branch)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findAdjEmail(e){const t=this.adjusters.filter(t=>t.id===e);return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},filterAdjByBranch(e){return this.adjusters.filter(t=>t.branches.some(t=>t.brCode===e))},transferAdj(){this.dialogAdj=!0},saveAdjuster(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.dateOfAdj=G()().format(),this.caseState.casefile.assignAdjBy=this.$store.state.auth.user.id).then(e=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{const e=this.caseState.casefile.adjuster;var t={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,recipient:this.findAdjEmail(e),createdBy:this.$store.state.auth.user.id};xe["a"].assignAdj(t).then(e=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.dataEmail=""}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeAdj()},closeAdj(){this.dialogAdj=!1,this.$nextTick(()=>{})}}},Is=Es,Rs=Object(J["a"])(Is,ks,Ts,!1,null,null,null),ws=Rs.exports,Ns=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t("span",e._g({},a),[t(C["a"],e._b({staticClass:"mx-1",attrs:{fab:"","x-small":"",color:"blue lighten-2",dark:"",disabled:!e.isRealManager||e.isCaseCancelled},on:{click:e.showTransferCaseDialog}},"v-btn",i,!1),[t(s["a"],{attrs:{dark:""}},[e._v("mdi-file-move-outline")])],1)],1)]}}])},[t("span",[e._v("Transfer Case")])]),t(j["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogTransferBranch,callback:function(t){e.dialogTransferBranch=t},expression:"dialogTransferBranch"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("TRANSFER BRANCH")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.branches,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile branch","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Branch ")]},proxy:!0}]),model:{value:e.caseState.casefile.branch,callback:function(t){e.$set(e.caseState.casefile,"branch",t)},expression:"caseState.casefile.branch"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(se["a"]),t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeTransferBranchDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:e.isAddFileButtonDisabled},on:{click:e.transferBranchSubmit}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},Os=[],Bs={name:"transferBranch",props:{approvingManager:Boolean,casefile:Object,refType:Array,subRefTypes:Array,insurer:Array,branches:Array,members:Array,states:Array,regions:Array},data(){return{dialogTransferBranch:!1,menu:!1,menu1:!1}},computed:{...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!this.caseState.casefile.branch},isRealManager(){return this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")},isCaseCancelled(){return"CANC"===this.caseState.casefile.fileStatus||"CLO"===this.caseState.casefile.fileStatus},computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""}},watch:{transferBranch(e){e||this.closeTransferBranchDialog()}},methods:{filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},showTransferCaseDialog(){this.dialogTransferBranch=!0},transferBranch(){this.dialogTransferBranch=!0},transferBranchSubmit(){const e=this.caseState.casefile.refType;var t={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,recipient:this.findUserEmail(this.filterPicID(e)),createdBy:this.$store.state.auth.user.id};U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.vehicleNo=this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),this.caseState.casefile.fileStatus="BRAC",this.caseState.casefile.assignBranchBy=this.$store.state.auth.user.id,this.caseState.casefile.dateOfReg=G()().format()).then(()=>{xe["a"].assignBranch(t).then(e=>{this.closeTransferBranchDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.dataEmail=""}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeTransferBranchDialog()},closeTransferBranchDialog(){this.dialogTransferBranch=!1,this.$nextTick(()=>{})}}},js=Bs,$s=Object(J["a"])(js,Ns,Os,!1,null,null,null),Fs=$s.exports,Ps=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(C["a"],e._g({staticClass:"warning mr-1",attrs:{disabled:e.assignClerkDisabled,fab:"","x-small":""},on:{click:function(t){return e.transferClerk()}}},{...a}),[t(s["a"],[e._v("mdi-account-switch")])],1)]}}])},[t("span",[e._v("TRANSFER CLERK")])]),t(j["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogClerk,callback:function(t){e.dialogClerk=t},expression:"dialogClerk"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("TRANSFER CLERK")])]),t(S["c"],{staticClass:"mt-3 pa-0"},[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(S["d"],{staticClass:"error"},[e._v(" BY TRANSFERING THE CASE TO ANOTHER CLERK, PLEASE ACCEPT THAT ALL PREVIOUS CLERK RELATED LOGS WILL BE DELETED! ")]),t(S["c"],{staticClass:"mt-3 pa-0"},[e._v(" CHOOSE BRANCH FOLLOWED BY CLERK ")])],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.currentUserBranch(),"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":"",clearable:""},model:{value:e.branch.brCode,callback:function(t){e.$set(e.branch,"brCode",t)},expression:"branch.brCode"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.filterClerkByBranch(e.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Clerk for the branch above","menu-props":{maxHeight:"400"},label:"CLERKS",hint:"Assign Clerk","persistent-hint":"",clearable:""},model:{value:e.caseState.casefile.clerkInCharge,callback:function(t){e.$set(e.caseState.casefile,"clerkInCharge",t)},expression:"caseState.casefile.clerkInCharge"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(se["a"]),t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",small:"",dark:""},on:{click:e.closeClerk}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 warning",attrs:{tile:"",small:"",disabled:e.assignClerkRule},on:{click:e.saveClerk}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},Ls=[],Ms={name:"branchAccept",props:["branches","management","insurer","refType","subRefTypes","members","handlers","states","regions","adjusters","clerks"],components:{},data(){return{dialogAdj:!1,dialogClerk:!1,menu:!1,menu1:!1,branch:{name:"",brCode:""}}},computed:{...Object(Y["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},assignAdjRule(){return!(this.branch.brCode&&this.caseState.casefile.adjuster)},assignClerkRule(){return!(this.branch.brCode&&this.caseState.casefile.clerkInCharge)},computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},assignClerkDisabled(){return"NEW"==this.caseState.casefile.fileStatus||"PEND"==this.caseState.casefile.fileStatus||"BRAC"==this.caseState.casefile.fileStatus||"ADAC"==this.caseState.casefile.fileStatus||"INVE"==this.caseState.casefile.fileStatus||"PEDI"==this.caseState.casefile.fileStatus||"EDAC"==this.caseState.casefile.fileStatus||"EDI"==this.caseState.casefile.fileStatus||"PAPP"==this.caseState.casefile.fileStatus||"HOLD"==this.caseState.casefile.fileStatus||"PFORM"==this.caseState.casefile.fileStatus||"CANC"==this.caseState.casefile.fileStatus||"CLO"==this.caseState.casefile.fileStatus||!this.management}},watch:{transferAdj(e){e||this.closeAdj()},transferClerk(e){e||this.closeClerk()}},methods:{currentUserBranch(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(e=>e.id===this.caseState.casefile.branch)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findAdjEmail(e){const t=this.adjusters.filter(t=>t.id===e);return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},findClerkEmail(e){const t=this.clerks.filter(t=>t.id===e);return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},filterAdjByBranch(e){return this.adjusters.filter(t=>t.branches.some(t=>t.brCode===e))},filterClerkByBranch(e){return this.clerks.filter(t=>t.branches.some(t=>t.brCode===e))},transferAdj(){this.dialogAdj=!0},transferClerk(){this.dialogClerk=!0},saveAdjuster(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.dateOfAdj=G()().format(),this.caseState.casefile.assignAdjBy=this.$store.state.auth.user.id).then(e=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{const e=this.caseState.casefile.adjuster;var t={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,recipient:this.findAdjEmail(e),createdBy:this.$store.state.auth.user.id};xe["a"].assignAdj(t).then(e=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.dataEmail=""}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeAdj()},saveClerk(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.dateOfClerkAssign=G()().format(),this.caseState.casefile.assignClerkBy=this.$store.state.auth.user.id).then(e=>{this.closeClerk(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{const e=this.caseState.casefile.clerk;var t={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,recipient:this.findClerkEmail(e),createdBy:this.$store.state.auth.user.id};xe["a"].assignClerk(t).then(e=>{this.closeClerk(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.dataEmail=""}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeClerk()},closeAdj(){this.dialogAdj=!1,this.$nextTick(()=>{})},closeClerk(){this.dialogClerk=!1,this.$nextTick(()=>{})}}},Us=Ms,Hs=Object(J["a"])(Us,Ps,Ls,!1,null,null,null),Gs=Hs.exports,Ys=function(){var e=this,t=e._self._c;return t(j["a"],{attrs:{width:"800px"},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:i}){return[t(C["a"],e._g({attrs:{small:"",icon:""}},{...i,...a}),[1===e.casefile.flag?t(s["a"],{attrs:{color:"green lighten-1"}},[e._v(" mdi-shield-check ")]):e._e(),2===e.casefile.flag?t(s["a"],{attrs:{color:"orange lighten-1"}},[e._v(" mdi-shield-half-full ")]):e._e(),3===e.casefile.flag?t(s["a"],{attrs:{color:"red darken-5"}},[e._v(" mdi-shield-alert-outline ")]):e._e()],1)]}}],null,!0)},[1===e.casefile.flag?t("span",[e._v("GENUINE")]):e._e(),2===e.casefile.flag?t("span",[e._v("SUSPECTED FRAUD")]):e._e(),3===e.casefile.flag?t("span",[e._v("FRAUD")]):e._e()])]}}]),model:{value:e.flag,callback:function(t){e.flag=t},expression:"flag"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("CHANGE CASE STATUS")])]),t(S["c"],[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(be["a"],{attrs:{items:e.SelectOptions,"item-text":"name","item-value":"value","menu-props":{maxHeight:"400"},label:"Status",hint:"Select Status","persistent-hint":""},model:{value:e.SelectOptions.value,callback:function(t){e.$set(e.SelectOptions,"value",t)},expression:"SelectOptions.value"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(_e["a"],{attrs:{"item-text":"Add a remark",label:"Case remark",rules:[e=>!!e||"Remark is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Remark ")]},proxy:!0}]),model:{value:e.commentData.comment,callback:function(t){e.$set(e.commentData,"comment",t)},expression:"commentData.comment"}})],1),t($["a"]),t(S["a"],[t(C["a"],{attrs:{tile:"",small:"",outlined:""},on:{click:e.closeFlag}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"primary",attrs:{disabled:e.setFlagRule,tile:"",small:""},on:{click:e.setFlag}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)},Vs=[],Ks={name:"flag",props:["casefile"],components:{},data(){return{flag:null,message:"",SelectOptions:[{name:"Genuine",value:1},{name:"Suspected Fraud",value:2},{name:"Fraud",value:3}],commentData:{id:null,caseId:null,comment:"",createdBy:""}}},computed:{setFlagRule(){return!(this.SelectOptions.value&&this.commentData.comment)}},watch:{flag(e){e||this.closeFlag()}},methods:{closeFlag(){this.flag=null,this.$nextTick(()=>{this.SelectOptions.value="",this.commentData.comment=""})},setFlag(){this.message="";var e={flag:this.SelectOptions.value};U["a"].update(this.casefile.id,e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()})}).then(()=>{var e={caseId:this.casefile.id,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};rt["a"].create(e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),this.closeFlag(),this.$router.push("/home")}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e||toString()})})}).catch(()=>{this.message="Could not update the status!"})}}},Js=Ks,zs=Object(J["a"])(Js,Ys,Vs,!1,null,"c3d64826",null),Ws=zs.exports,qs=a("8fea"),Xs=a("4bd4"),Qs=function(){var e=this,t=e._self._c;return t("div",[t(S["d"],{staticClass:"pb-0"},[e._v("CLAIM DETAILS")]),t($["a"]),t(qs["a"],{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{dense:"",headers:e.headers,items:e.claims},on:{"click:row":t=>e.showItem(t)},scopedSlots:e._u([{key:"top",fn:function(){return[t(j["a"],{attrs:{"max-width":"500px",persistent:""},model:{value:e.approveDialog,callback:function(t){e.approveDialog=t},expression:"approveDialog"}},[t(b["a"],[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e._v("Claim Details")]),t(S["c"],[t(y["a"],[t(Xs["a"],{attrs:{disabled:!1===e.management}},[t(A["a"],[t(D["a"],{staticClass:"display-3 text-start font-weight-bold",attrs:{cols:"12"}},[e._v(" MYR "+e._s(e.newTotal)+" ")])],1),t(A["a"],{attrs:{"no-gutters":""}},[t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("Travelling ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.travMileage)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("Additional ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.additional)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("SD & Stamps ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.sdAndStamps)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("Medical Reprot ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.medicalReport)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("Police Document ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.policeDoc)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("JPJ Document ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.jpjDoc)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("Miscellaneous ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.misc)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("Typing ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.typing)+" ")]),e.selectedClaim.isApprovedComment?t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"12"}},[e._v("Comment: "+e._s(e.selectedClaim.isApprovedComment)+" ")]):e._e(),t(S["a"],[t(C["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:e.closeApproveDialog}},[e._v("CLOSE")])],1)],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.numbering",fn:function(t){return[e._v(" "+e._s(t.index+1)+" ")]}},{key:"item.caseId",fn:function({item:a}){return[t("tr",{staticClass:"d-flex"},[e._v(" AA "),e._l(e.filterDept(e.caseState.casefile.refType),(function(s,i){return t("div",{key:i},[e._v(" /"+e._s(s.name)),e._l(e.filterSubDept(e.caseState.casefile.subRefType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.subCode))])})),t("span",[e._v("/"+e._s(a.caseId)+"/"+e._s(e.yearOnly(e.caseState.casefile.createdAt)))]),e._l(e.filterBranches(e.caseState.casefile.branch),(function(a){return t("span",{key:a.id},[e._v("/"+e._s(a.brCode))])}))],2)}))],2)]}},{key:"item.adjId",fn:function({item:a}){return e._l(e.filterUser(a.adjId),(function(a){return t("div",{key:a.id},[e._v(" "+e._s(a.username)+" ")])}))}},{key:"item.sumAll",fn:function({item:a}){return[t("span",[e._v("MYR "+e._s(e.total(a.id)))])]}},{key:"item.createdAt",fn:function({item:t}){return[e._v(" "+e._s(e.formatDate(t.createdAt))+" ")]}},{key:"item.isApproved",fn:function({item:t}){return[e._v(" "+e._s(e.getClaimStatus(t.isApproved))+" ")]}}],null,!0)})],1)},Zs=[],ei=(a("13d5"),a("9485"),{name:"detailClaims",props:["branches","members","refType","subRefTypes"],data:()=>({management:!1,dialog:!1,dialogDelete:!1,approveDialog:!1,claims:[],selectedClaim:[],search:""}),components:{},computed:{...Object(Y["c"])(["caseState"]),headers(){return[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"AASB REFERENCE",align:"start",sortable:!0,value:"caseId"},{text:"ADJUSTER",align:"start",sortable:!1,value:"adjId"},{text:"SUBMITTED ON",align:"start",sortable:!1,value:"createdAt"},{text:"CLAIMS TOTAL",align:"start",sortable:!0,value:"sumAll"},{text:"STATUS",align:"start",sortable:!0,value:"isApproved"}]},newTotal(){const e=1*this.selectedClaim.travMileage+1*this.selectedClaim.additional+1*this.selectedClaim.sdAndStamps+1*this.selectedClaim.medicalReport+1*this.selectedClaim.policeDoc+1*this.selectedClaim.jpjDoc+1*this.selectedClaim.misc+1*this.selectedClaim.typing;return e.toFixed(2)}},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()}},methods:{getClaimStatus(e){return null==e?"PENDING":0==e?"NEW":1==e?"QUERY":2==e?"APPROVED":""},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},total(e){const t=this.claims.filter(t=>t.id===e),a=t.reduce((e,t)=>e+1*t.travMileage+1*t.additional+1*t.sdAndStamps+1*t.medicalReport+1*t.policeDoc+1*t.jpjDoc+1*t.misc+1*t.typing,0);return a.toFixed(2)},formatDate(e){return G()(e).format("DD/MM/YYYY LT")},yearOnly(e){return G()(e).format("YY")},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterUser(e){return this.members.filter(t=>t.id===e)},retrieveClaims(){Ft["a"].getAll().then(e=>{this.claims=e.data.filter(e=>e.caseId===this.caseState.casefile.id)}).catch(e=>{console.log(e)})},refreshList(){},showItem(e){this.selectedClaim=Object.assign({},e),this.approveDialog=!0},closeApproveDialog(){this.selectedClaim=Object.assign({}),this.approveDialog=!1}},mounted(){this.checkManagement(),this.retrieveClaims()}}),ti=ei,ai=Object(J["a"])(ti,Qs,Zs,!1,null,null,null),si=ai.exports,ii=a("2b0e"),ri=function(){var e=this,t=e._self._c;return t("div",[t(P["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(F["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(C["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.acceptAssignmentDisabled},on:{click:e.openDialog}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-account-check")]),t("span",{staticClass:"action-text"},[e._v("Accept Assignment")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ACCEPT ASSIGNMENT")])]),t(j["a"],{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(b["a"],{staticClass:"text-center"},[t(S["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e._v(" ACCEPT ASSIGNMENT? ")]),t(S["c"],{staticClass:"mt-3 pa-0"},[e._v(" CASEFILE NUMBER: AA "),e._l(e.filterDept(e.casefile.refType),(function(a,s){return t("span",{key:s},[e._v(" /"+e._s(a.name)+" "),e._l(e.filterSubDept(e.casefile.subRefType),(function(a,s){return t("span",{key:"sub-"+s},[e._v(" /"+e._s(a.subCode)+" ")])}))],2)})),e._v(" /"+e._s(e.casefile.id)+"/"+e._s(e.yearOnly(e.casefile.createdAt))+" "),e._l(e.filterBranches(e.casefile.branch),(function(a){return t("span",{key:a.id},[e._v(" /"+e._s(a.brCode)+" ")])}))],2),t($["a"]),t(S["a"],[t(se["a"]),t(C["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",small:"",dark:""},on:{click:e.closeDialog}},[e._v(" Cancel ")]),t(C["a"],{staticClass:"mt-3 mr-2 success",attrs:{tile:"",small:""},on:{click:e.acceptAssignment}},[e._v(" OK ")]),t(se["a"])],1)],1)],1)],1)},li=[],ci={name:"acceptAssignment",props:{casefile:{type:Object,required:!0},refType:Array,branches:Array,subRefTypes:Array,insurer:Array,members:Array,handlers:Array,states:Array},data(){return{dialog:!1}},computed:{acceptAssignmentDisabled(){return!("ADAC"===this.casefile.fileStatus&&this.casefile.adjuster===this.$store.state.auth.user.id)}},methods:{openDialog(){this.dialog=!0},closeDialog(){this.dialog=!1},acceptAssignment(){U["a"].update(this.casefile.id,this.casefile,this.casefile.fileStatus="INVE",this.casefile.dateStartInv=G()().format()).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"green",text:e&&e.data&&e.data.message||toString()}),this.$emit("accepted")}).catch(e=>{console.log(e)}),this.closeDialog()},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},yearOnly(e){return G()(e).format("YY")}}},ni=ci,oi=(a("732e"),Object(J["a"])(ni,ri,li,!1,null,"dc80522e",null)),di=oi.exports,hi={name:"vuexFile",components:{Acknowledgement:ae["a"],Documents:wa,Comments:Dt,Flag:Ws,ApplyDoc:oe,AssignBranch:Ee,BranchAccept:tt,CompleteInvestigation:Ut,AssignEditor:Me,AcceptEditing:W,CompleteEditing:Et,CancelCase:ot,TransferCase:Fs,TransferAdj:ws,TransferClerk:Gs,EditCase:Ga,HoldApproval:as,ApprovalReport:pe,ReInvestigate:Ds,ReEdit:ps,AssignClerk:Be,AcceptFormatting:te,CompleteFormatting:Bt,Invoising:os,Dispatch:va,DoneDispatch:Fa,Close:pt,Audit:We,DetailTab:da,History:qa,Claims:si,AcceptAssignment:di},data(){return{overlay:!0,tab:null,fileaccess:!1,management:!1,newCase:!1,claims:[],stages:[],adjusters:[],editors:[],clerks:[],members:[],branches:[],regions:[],refType:[],subRefTypes:[],insurer:[],handlers:[],branch:{name:"",brCode:""},states:[],dialogAcceptCase:!1,acknowledgement:!1,menu:!1,menu1:!1,documentCount:0,commentCount:0,historyCount:0,documents:Object(ii["b"])([]),documentsLoading:Object(ii["b"])(!1),comments:Object(ii["b"])([]),commentsLoading:Object(ii["b"])(!1),accessDenied:!1,loading:!0,permissionCheckComplete:!1,caseHistory:[],historyLoading:!1}},computed:{...Object(Y["c"])(["caseState"]),holdingManager(){return this.caseState.casefile.approvedBy===this.$store.state.auth.user.id},getStatusColorClass(){const e=this.caseState.casefile.fileStatus,t={NEW:"success",PEND:"warning",INVE:"info",COMP:"error"};return t[e]||"grey"},newPendDisabled(){return!(("NEW"==this.caseState.casefile.fileStatus||"PEND"==this.caseState.casefile.fileStatus)&&this.management)},acceptAssignmentDisabled(){return!("ADAC"==this.caseState.casefile.fileStatus&&this.caseState.casefile.adjuster==this.$store.state.auth.user.id)},isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},computedDateFormattedMomentjs(){return this.date?G()(this.date).format("DD/MM/YY"):""},hasAvailableActions(){const e=this.caseState.casefile.fileStatus,t=this.caseState.casefile.adjuster===this.$store.state.auth.user.id,a=this.caseState.casefile.editor===this.$store.state.auth.user.id,s=this.caseState.casefile.clerkInCharge===this.$store.state.auth.user.id;return{showApplyDoc:"NEW"===e&&this.management,showAssignBranch:("NEW"===e||"PEND"===e)&&this.management,showBranchAccept:"BRAC"===e&&this.management,showAcceptAssignment:"ADAC"===e&&t,showCompleteInvestigation:"INVE"===e&&t,showAssignEditor:("PEDI"===e||"REIN"===e)&&this.management,showAcceptEditing:"EDAC"===e&&a,showCompleteEditing:"EDI"===e&&a,showHoldApproval:"PAPP"===e&&this.approvingManager,showApprovalReport:"HOLD"===e&&this.holdingManager,showReInvestigate:"HOLD"===e&&this.holdingManager,showReEdit:"HOLD"===e&&this.holdingManager,showAssignClerk:("PFORM"===e||"PEDI"===e)&&this.management,showAcceptFormatting:"CLERK"===e&&s,showCompleteFormatting:"FOIN"===e&&s,showInvoising:"INFI"===e&&this.management,showDispatch:"DISP"===e&&this.management,showDoneDispatch:"PDISP"===e&&this.management,showClose:"DISP"===e&&this.management}},approvingManager(){return this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")},historyTabCount(){var e;const t=null===(e=this.caseState.casefile)||void 0===e?void 0:e.vehicleNo;if(!t)return 0;const a=String(t).trim().toUpperCase();return"TBA"===a||"NONE"===a?0:this.historyCount}},watch:{acceptCase(e){e||this.closeAcceptCase()},"caseState.casefile":{immediate:!0,handler(){this.preloadDocuments(),this.preloadComments()},deep:!0}},methods:{moment:function(e){return G()(e)},yearOnly(e){return G()(e).format("YY")},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterAdjByBranch(e){return this.adjusters.filter(t=>t.branches.some(t=>t.brCode===e))},filterClerkByBranch(e){return this.clerks.filter(t=>t.branches.some(t=>t.brCode===e))},findClerkByBranch(e){const t=this.clerks.filter(t=>t.branches.some(t=>t.brCode===e));return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},findAdjByBranch(e){const t=this.adjusters.filter(t=>t.branches.some(t=>t.brCode===e));return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},findAdjEmail(e){const t=this.adjusters.filter(t=>t.id===e);return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},filterStages(e){return this.stages.filter(t=>t.stageCode===e)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},filterAdj(e){return this.adjusters.filter(t=>t.id===e)},filterEditor(e){return this.editors.filter(t=>t.id===e)},filterrecipient(e){return e?this.clerks.filter(t=>t.id===e):"TBA"},filterApprover(e){return this.members.filter(t=>t.id===e)},filterClerk(e){return this.clerks.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},findBrcode(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].brCode},filterStates(e){return this.states.filter(t=>t.id===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterUser(e){return this.members.filter(t=>t.id===e)},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},currentUserBranch(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(e=>e.id===this.caseState.casefile.branch)},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("CLERK"))&&(this.management=!0)},formatDate:function(e){return e?G()(e).format("DD/MM/YYYY"):""},formatTime:function(e){return G()(e).format("h:mm:ss a")},dateDiff(e,t){let a=G()(e),s=G()(t),i=G.a.duration(s.diff(a));return Math.floor(i.asDays())},refreshList(){this.retrieveAdjusters(),this.retrieveEditors(),this.retrieveClerks(),this.retrieveUsers(),this.retrieveBranches(),this.retrieveStates(),this.retrieveCasefiles(this.$route.params.id)},retrieveClaims(){Ft["a"].getAll().then(e=>{this.claims=e.data}).catch(e=>{console.log(e)})},retrieveDept(){Ht["a"].getAll().then(e=>{this.refType=e.data}).catch(e=>{console.log(e)})},retrieveSubRefType(){As["a"].getAll().then(e=>{this.subRefTypes=e.data}).catch(e=>{console.log(e)})},retrieveIns(){ss["a"].getAll().then(e=>{this.insurer=e.data}).catch(e=>{console.log(e)})},retrieveHandler(){Ya["a"].getAll().then(e=>{this.handlers=e.data}).catch(e=>{console.log(e)})},retrieveStages(){ys["a"].getAll().then(e=>{this.stages=e.data}).catch(e=>{console.log(e)})},retrieveAdjusters(){Ct["a"].getAll().then(e=>{this.adjusters=e.data.filter(e=>e.roles.some(e=>"adjuster"===e.roleCode)&&e.active)}).catch(e=>{console.log(e)})},retrieveEditors(){Ct["a"].getAll().then(e=>{this.editors=e.data.filter(e=>e.roles.some(e=>"editor"===e.roleCode||"manager"===e.roleCode||"branchmanager"===e.roleCode)&&e.active)}).catch(e=>{console.log(e)})},retrieveClerks(){Ct["a"].getAll().then(e=>{this.clerks=e.data.filter(e=>e.roles.some(e=>"clerk"===e.roleCode||"manager"===e.roleCode||"branchclerk"===e.roleCode||"branchmanager"===e.roleCode)&&e.active)}).catch(e=>{console.log(e)})},retrieveUsers(){Ct["a"].getAll().then(e=>{this.members=e.data.filter(e=>e.active)}).catch(e=>{console.log(e)})},retrieveBranches(){at["a"].getAll().then(e=>{this.branches=e.data}).catch(e=>{console.log(e)})},retrieveStates(){xs["a"].getAll().then(e=>{this.states=e.data.map(this.getDisplayStates)}).catch(e=>{console.log(e)})},getDisplayStates(e){return{id:e.id,name:e.name.length>30?e.name.substr(0,30)+"...":e.name,stCode:e.stCode.length>30?e.stCode.substr(0,30)+"...":e.stCode}},retrieveRegions(){vs["a"].getAll().then(e=>{this.regions=e.data}).catch(e=>{console.log(e)})},async retrieveCasefiles(e){this.loading=!0,this.permissionCheckComplete=!1,this.accessDenied=!1;try{const t=await U["a"].get(e),a=t.data;await Promise.all([this.ensureDeptLoaded(),this.ensureBranchesLoaded()]).then(()=>{this.checkCasefileAccess(a)?(this.caseState.casefile=a,this.checkFileaccess(),this.preloadHistory()):this.accessDenied=!0,this.permissionCheckComplete=!0,this.loading=!1}).catch(()=>{this.accessDenied=!0,this.permissionCheckComplete=!0,this.loading=!1})}catch(t){console.log(t),this.accessDenied=!0,this.permissionCheckComplete=!0,this.loading=!1,this.$store.dispatch("alerts/setAlert",{text:"Error loading case file data",type:"error"})}},ensureDeptLoaded(){return this.refType&&this.refType.length>0?Promise.resolve():new Promise((e,t)=>{Ht["a"].getAll().then(t=>{this.refType=t.data,e()}).catch(e=>{console.log("Error loading departments:",e),t(e)})})},ensureBranchesLoaded(){return this.branches&&this.branches.length>0?Promise.resolve():new Promise((e,t)=>{at["a"].getAll().then(t=>{this.branches=t.data,e()}).catch(e=>{console.log("Error loading branches:",e),t(e)})})},checkCasefileAccess(e){if(!e)return!1;const t=this.$store.state.auth.user;return!!t&&(!(!t.roles||!(t.roles.includes("ADMIN")||t.roles.includes("MANAGER")||t.roles.includes("CLERK")))||(!!(t.roles&&t.roles.includes("BRANCHMANAGER")&&t.branches&&Array.isArray(t.branches)&&t.branches.includes(e.branch)&&t.dept&&Array.isArray(t.dept)&&t.dept.includes(e.refType))||(!!(t.roles&&t.roles.includes("BRANCHCLERK")&&t.branches&&Array.isArray(t.branches)&&t.branches.includes(e.branch)&&t.dept&&Array.isArray(t.dept)&&t.dept.includes(e.refType))||(e.adjuster===t.id||(e.editor===t.id||e.clerkInCharge===t.id)))))},checkFileaccess(){this.fileaccess=!0},applyDoc(){this.dialogApplyDoc=!0},acceptCase(){this.dialogAcceptCase=!0},acceptCaseConfirm(){U["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="INVE",this.caseState.casefile.dateStartInv=G()().format()).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"green",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)}),this.closeAcceptCase()},closeAcceptCase(){this.dialogAcceptCase=!1,this.$nextTick(()=>{})},async preloadDocuments(){if(this.caseState.casefile.id){this.documentsLoading=!0;try{const e=await ya["a"].getAll();this.documents=e.data.filter(e=>e.caseId===this.caseState.casefile.id),this.documentCount=this.documents.length}catch(e){console.log(e),this.documents=[],this.documentCount=0}finally{this.documentsLoading=!1}}},async preloadComments(){if(this.caseState.casefile.id){this.commentsLoading=!0;try{const e=await rt["a"].getAll();this.comments=e.data.filter(e=>e.caseId===this.caseState.casefile.id),this.commentCount=this.comments.length}catch(e){console.log(e),this.comments=[],this.commentCount=0}finally{this.commentsLoading=!1}}},async preloadHistory(){if(this.caseState.casefile.vehicleNo){this.historyLoading=!0;try{await Promise.all([U["a"].getAll(),new Promise(e=>setTimeout(e,500))]).then(([e])=>{this.caseHistory=e.data.filter(e=>e.vehicleNo===this.caseState.casefile.vehicleNo);const t=this.caseHistory.filter(e=>e.id!==this.caseState.casefile.id).length;this.historyCount=t})}catch(e){console.error("Error loading history:",e),this.caseHistory=[],this.historyCount=0}finally{this.historyLoading=!1}}},fetchCommentCount(){this.caseState.casefile.id&&rt["a"].getAll().then(e=>{const t=e.data.filter(e=>e.caseId===this.caseState.casefile.id);this.commentCount=t.length}).catch(e=>{console.log(e),this.commentCount=0})},handleCommentAdded(e){this.comments=[...this.comments,e],this.commentCount=this.comments.length},handleCommentDeleted(e){this.comments=this.comments.filter(t=>t.id!==e),this.commentCount=this.comments.length},handleHistoryCountUpdated(e){this.historyCount=e}},mounted(){this.overlay=!1,Promise.all([this.retrieveClaims(),this.retrieveAdjusters(),this.retrieveEditors(),this.retrieveClerks(),this.retrieveUsers(),this.retrieveBranches(),this.retrieveStates(),this.retrieveRegions(),this.retrieveDept(),this.retrieveSubRefType(),this.retrieveIns(),this.retrieveHandler(),this.retrieveStages()]).then(()=>{this.retrieveCasefiles(this.$route.params.id),this.checkManagement(),this.fetchCommentCount()}).catch(e=>{console.error("Error loading initial data:",e),this.loading=!1,this.accessDenied=!0,this.$store.dispatch("alerts/setAlert",{text:"Error loading initial data",type:"error"})})}},ui=hi,fi=(a("20d0"),Object(J["a"])(ui,O,B,!1,null,"088b48f5",null));t["default"]=fi.exports},c66f:function(e,t,a){},c671:function(e,t,a){"use strict";var s=a("9d65"),i=a("4e82"),r=a("c3f0"),l=a("80d2"),c=a("58df");const n=Object(c["a"])(s["a"],Object(i["a"])("windowGroup","v-window-item","v-window"));var o=n.extend().extend().extend({name:"v-window-item",directives:{Touch:r["a"]},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data(){return{isActive:!1,inTransition:!1}},computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return Object(l["s"])(this)},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=Object(l["h"])(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(e){this.inTransition&&this.$nextTick(()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=Object(l["h"])(e.clientHeight))})}},render(e){return e("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent(()=>[this.genWindowItem()]))}});t["a"]=o.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const e=o.options.methods.genWindowItem.call(this);return e.data.domProps=e.data.domProps||{},e.data.domProps.id=this.id||this.value,e}}})},e4ba:function(e,t,a){"use strict";var s=a("c427");class i{getAll(){return s["a"].get("/comments")}get(e){return s["a"].get("/comments/"+e)}create(e){return s["a"].post("/comments",e)}update(e,t){return s["a"].put("/comments/"+e,t)}delete(e){return s["a"].delete("/comments/"+e)}deleteAll(){return s["a"].delete("/comments")}}t["a"]=new i},f1b7:function(e,t,a){},ff44:function(e,t,a){}}]);
//# sourceMappingURL=chunk-bdd13ad0.e214a16f.js.map