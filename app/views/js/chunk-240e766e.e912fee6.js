(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-240e766e"],{"0094":function(e,t,a){},"0160":function(e,t,a){},"0467":function(e,t,a){},"04ad":function(e,t,a){},"16ee":function(e,t,a){},"1f09":function(e,t,a){},"208e":function(e,t,a){"use strict";a("7d58")},"20dd":function(e,t,a){"use strict";var s=a("c427");class i{getAll(){return s["a"].get("/claims")}get(e){return s["a"].get("/claims/"+e)}create(e){return s["a"].post("/claims",e)}update(e,t){return s["a"].put("/claims/"+e,t)}updateAll(e,t){return s["a"].put("/claims/items/"+e,t)}delete(e){return s["a"].delete("/claims/"+e)}deleteAll(){return s["a"].delete("/claims")}findBySubDept(e){return s["a"].get("/claims?name="+e)}}t["a"]=new i},"210b":function(e,t,a){},"4adb":function(e,t,a){"use strict";a("f1b7")},5246:function(e,t,a){"use strict";var s=a("8336"),i=a("b0af"),r=a("62ad"),l=a("169a"),n=a("ce7e"),c=a("132d"),o=a("0fd9"),d=a("3a2f"),h=function(){var e=this,t=e._self._c;return t(l["a"],{attrs:{width:"800px"},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(d["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:i}){return[t(s["a"],e._g({attrs:{icon:""}},{...i,...a}),[t(c["a"],[e._v("mdi-file-pdf-box")])],1)]}}],null,!0)},[t("span",[e._v("Acknowledgement Letter")])])]}}]),model:{value:e.acknowledgement,callback:function(t){e.acknowledgement=t},expression:"acknowledgement"}},[t(i["a"],[t("div",{staticClass:"ma-5"},[t("div",{staticClass:"pt-2",attrs:{align:"end"}},[t(s["a"],{staticClass:"mr-1",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeDownloadAck}},[e._v(" Cancel ")]),t("download-button",{attrs:{dom:"#letter",name:e.vehicleNumber}})],1),t("div",{attrs:{id:"letter"}},[t("div",{staticClass:"title01"},[e._v("ASSOCIATED")]),t("div",{staticClass:"title01"},[e._v(" ADJUSTERS SDN BHD"),t("span",{staticClass:"caption01"},[e._v("( CO. NO. 30757-A)")])]),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"2"}},[t("div",{staticClass:"para01"},[e._v("YOUR REF")])]),t(r["a"],[t("div",{staticClass:"para01"},[e._v(": "+e._s(e.casefile.claimNo))])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"2"}},[t("div",{staticClass:"para01"},[e._v("OUR REF")])]),t(r["a"],[t("div",{staticClass:"para01 d-flex"},[e._v(" : AA/ "),e._l(e.filterDept(e.casefile.refType),(function(a,s){return t("span",{key:s},[e._v(" "+e._s(a.name)),e._l(e.filterSubDept(e.casefile.subRefType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.subCode))])}))],2)})),e._v("/"+e._s(e.casefile.id)+"/"+e._s(e.yearOnly(e.casefile.createdAt))+"/"),e._l(e.filterBranches(e.casefile.branch),(function(a){return t("span",{key:a.id},[e._v(e._s(a.brCode)+" ")])}))],2)])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"2"}},[t("div",{staticClass:"para01"},[e._v("DATE")])]),t(r["a"],[t("div",{staticClass:"para01"},[e._v(" : "+e._s(e.formatDate(e.casefile.createdAt))+" ")])])],1),t("div",{staticClass:"para02"},[e._v("THE CLAIMS MANAGER,")]),e._l(e.filterIns(e.casefile.insurer),(function(a,s){return t("div",{key:s},[t("span",{staticClass:"para03"},[e._v(e._s(a.name))]),t("br"),t("span",{staticClass:"para04"},[e._v(e._s(a.insAddLine01))]),t("br"),t("span",{staticClass:"para04"},[e._v(e._s(a.insAddLine02))]),t("br"),t("span",{staticClass:"para04"},[e._v(e._s(a.insPostcode))]),e._v("   "),t("span",{staticClass:"para04"},[e._v(e._s(a.insTown))]),t("br"),t("span",{staticClass:"para04"},[e._v(e._s(a.insState))])])})),t("div",{staticClass:"para05"},[e._v("DEAR SIR/ MADAM,")]),t("div",{staticClass:"para03"},[e._v("RE : ACKNOWLEDGEMENT OF ASSIGNMENT")]),t("br"),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"3"}},[t("div",{staticClass:"para06"},[e._v("VEHICLE NO")])]),t(r["a"],[e.casefile.vehicleNo?t("div",{staticClass:"para06"},[e._v(" : "+e._s(e.casefile.vehicleNo.toUpperCase())+" ")]):e._e()])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"3"}},[t("div",{staticClass:"para06"},[e._v("DATE OF LOSS")])]),t(r["a"],[t("div",{staticClass:"para06"},[e._v(": "+e._s(e.formatDate(e.casefile.dateOfLoss)))])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"3"}},[t("div",{staticClass:"para06"},[e._v("PLACE OF LOSS")])]),t(r["a"],[e.casefile.placeOfLoss?t("div",{staticClass:"para06"},[e._v(" : "+e._s(e.casefile.placeOfLoss)+", "),e._l(e.filterStates(e.casefile.stateOfLoss),(function(a){return t("span",{key:a.id},[e._v(" "+e._s(a.name)+" ")])}))],2):e._e()])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"3"}},[t("div",{staticClass:"para06"},[e._v("INSURED")])]),t(r["a"],[t("div",{staticClass:"para06"},[e._v(": "+e._s(e.casefile.insuredName))])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"3"}},[t("div",{staticClass:"para06"},[e._v("ASSIGNMENT DATE")])]),t(r["a"],[t("div",{staticClass:"para06"},[e._v(" : "+e._s(e.formatDate(e.casefile.dateOfAssign))+" ")])])],1),t(n["a"],{staticClass:"para07"}),t("p",{staticClass:"para11"},[e._v(" We acknowledge receipt of your assignment pertaining to the above matter. ")]),t("p",{staticClass:"para11"},[e._v(" We thank you for your support and shall forward our report in connection with the above as soon as we finalised the same. ")]),t("p",{staticClass:"para11"},[e._v("In the meantime, kindly bear with us a while.")]),t("p",{staticClass:"para10"},[e._v(' " Ensuring you of our best services at all time ". ')]),t("p",{staticClass:"para04"},[e._v("Thank you.")]),t("p",{staticClass:"para08"},[e._v("ASSOCIATED ADJUSTERS SDN BHD")]),t("div",{staticClass:"para09"},[e._v(" *No signature required as it is computer generated. ")]),t("br"),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("HEAD OFFICE")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : C-9-1, BLOCK C, 9TH FLOOR, MEGAN PHILEO AVENUE II, NO.12, JALAN YAP KWAN SENG, 50450 KUALA LUMPUR ")]),t("div",{staticClass:"para12"},[e._v("   TEL : 03 - 21 666 330 (5 LINES) FAX : 03 - 21 666 110 E-MAIL : info@associatedadjusters.com ")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("JOHOR BAHRU")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : O.53-03,BLOK B, JALAN PERMAS 11, BANDAR BARU PERMAS JAYA, 81750 JOHOR BAHRU, JOHOR DARUL TAKZIM. ")]),t("div",{staticClass:"para12"},[e._v("   TEL : 07 - 386 1165 FAX : 07 - 386 1175 E-MAIL : johor@associatedadjusters.com ")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("SG. PETANI")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : NO.99A, 1ST FLOOR, JALAN PENGKALAN, TAMAN PEKAN BARU, 08000 SG. PETANI, KEDAH DARUL AMAN. ")]),t("div",{staticClass:"para12"},[e._v("   TEL : 04 - 4210100 FAX : 04 - 4252100. ")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("KUANTAN")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : NO.25A,2ND FLOOR, JALAN TUN ISMAIL 9, JALAN TUN ISMAIL, 25000 KUANTAN, PAHANG DARUL MAKMUR. ")]),t("div",{staticClass:"para12"},[e._v("   TEL : 09 - 5138001 FAX : 09 - 5148001 ")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("KOTA BHARU")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : Lot 235, 1st Floor, Kompleks Yakin, Jalan Gajah Mati, 15000 Kota Bahru, Kelantan Darul Naim. ")]),t("div",{staticClass:"para12"},[e._v("  TEL : 09-7482002 FAX : 09-7483008")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("MELAKA:")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : NO.9-1,Jalan KSB 16, Taman Kota Syahbandar 75200, Melaka ")]),t("div",{staticClass:"para12"},[e._v("  TEL: 06-2644389")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("KOTA KINABALU")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : B-3-6,3rd Floor, Tanjung Aru Plaza, Jalan Mat Salleh, 88100 Kota Kinabalu, Sabah. ")]),t("div",{staticClass:"para12"},[e._v("   Tel : 088-261 330 Fax : 088-267 3307 ")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("KUCHING")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : 2ND FLOOR, NO 9 BANGUNAN AL-IDRUS COMMERCIAL CENTRE, JALAN SATOK, 93400 KUCHING SARAWAK. ")]),t("div",{staticClass:"para12"},[e._v("  Tel : 082-236330 Fax : 082-237330")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("IPOH")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : No.3B GreenTown Utama Jalan Dato Seri Ahmad Said,30450, Ipoh Perak. ")]),t("div",{staticClass:"para12"},[e._v("  Tel : 05-241 13580")])])],1),t(o["a"],{attrs:{"no-gutters":""}},[t(r["a"],{attrs:{cols:"1"}},[t("div",{staticClass:"para12"},[e._v("PENANG")])]),t(r["a"],[t("div",{staticClass:"para12"},[e._v(" : No.88-01-03 Second Floor, Elite Commercial Centre, Jalan Jelutong, 11600 Georgetown Penang. ")]),t("div",{staticClass:"para12"},[e._v("  Tel : 04-288 9100")])])],1)],2),t("br")])])],1)},m=[],u=(a("e9f5"),a("910d"),function(){var e=this,t=e._self._c;return t(s["a"],{staticClass:"success",attrs:{small:"",tile:""},on:{mousedown:e.downloadFile}},[e._v("Download")])}),f=[],p=a("d67e"),C=a.n(p),g={props:["dom","name"],methods:{downloadFile(){const e=this,t=document.querySelector(e.dom);var a={margin:15,filename:e.name};C()().from(t).set(a).save()}}},v=g,b=a("2877"),_=Object(b["a"])(v,u,f,!1,null,null,null),S=_.exports,D=a("c1df"),y=a.n(D),x={name:"acknowledgement",props:["casefile","refType","subRefTypes","insurer","branches","states"],components:{DownloadButton:S},data(){return{acknowledgement:!1}},computed:{vehicleNumber(){return this.casefile.vehicleNo}},methods:{moment:function(){return y()()},yearOnly(e){return y()(e).format("YY")},formatDate:function(e){return y()(e).format("DD/MM/YYYY")},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterStates(e){return this.states.filter(t=>t.id===e)},closeDownloadAck(){this.acknowledgement=!1,this.$nextTick(()=>{})}}},A=x,k=(a("208e"),Object(b["a"])(A,h,m,!1,null,"58302cb4",null));t["a"]=k.exports},5894:function(e,t,a){},"5e55":function(e,t,a){},"707f":function(e,t,a){},"7d58":function(e,t,a){},"7e1b":function(e,t,a){"use strict";var s=a("c427");class i{upload(e,t){return s["a"].post("/docs/upload",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}uploadPhoto(e,t){let a=new FormData;return a.append("file",e),s["a"].post("/members/upload",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}uploadExcel(e,t){let a=new FormData;return a.append("file",e),s["a"].post("/dropboxfiles/upload",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}getFiles(){return s["a"].get("../docs")}getPhotos(){return s["a"].get("../files")}}t["a"]=new i},a864:function(e,t,a){"use strict";a("707f")},aa13:function(e,t,a){"use strict";a("16ee")},adfd:function(e,t,a){"use strict";a("04ad")},b762:function(e,t,a){"use strict";a.r(t);a("14d9"),a("ff44");var s=a("132d"),i=a("a9ad"),r=a("7560"),l=a("f2e7"),n=a("f40d"),c=a("fe6c"),o=a("58df"),d=a("80d2"),h=Object(o["a"])(i["a"],Object(c["b"])(["left","bottom"]),r["a"],l["a"],n["a"]).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes(){return{"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile,...this.themeClasses}},computedBottom(){return this.bottom?"auto":this.computedYOffset},computedLeft(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop(){return this.bottom?this.computedYOffset:"auto"},computedXOffset(){return this.calcPosition(this.offsetX)},computedYOffset(){return this.calcPosition(this.offsetY)},isRtl(){return this.$vuetify.rtl},offset(){return this.overlap?this.dot?8:12:this.dot?2:4},styles(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition(e){return`calc(100% - ${Object(d["h"])(e||this.offset)})`},genBadge(){const e=this.$vuetify.lang,t=this.$attrs["aria-label"]||e.t(this.label),a=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":t,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),s=this.$createElement("span",a,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[s]):s},genBadgeContent(){if(this.dot)return;const e=Object(d["s"])(this,"badge");return e||(this.content?String(this.content):this.icon?this.$createElement(s["a"],this.icon):void 0)},genBadgeWrapper(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render(e){const t=[this.genBadgeWrapper()],a=[Object(d["s"])(this)],{"aria-atomic":s,"aria-label":i,"aria-live":r,role:l,title:n,...c}=this.$attrs;return this.inline&&this.left?a.unshift(t):a.push(t),e("span",{staticClass:"v-badge",attrs:c,class:this.classes},a)}}),m=(a("0467"),a("10d2")),u=a("713a"),f=a("9d26"),p=a("0789"),C=a("e4cd"),g=Object(o["a"])(m["a"],C["a"],l["a"]).extend({name:"v-banner",inheritAttrs:!1,props:{app:Boolean,icon:String,iconColor:String,singleLine:Boolean,sticky:Boolean,value:{type:Boolean,default:!0}},computed:{classes(){return{...m["a"].options.computed.classes.call(this),"v-banner--has-icon":this.hasIcon,"v-banner--is-mobile":this.isMobile,"v-banner--single-line":this.singleLine,"v-banner--sticky":this.isSticky}},hasIcon(){return Boolean(this.icon||this.$slots.icon||this.$scopedSlots.icon)},isSticky(){return this.sticky||this.app},styles(){const e={...m["a"].options.computed.styles.call(this)};if(this.isSticky){const t=this.app?this.$vuetify.application.bar+this.$vuetify.application.top:0;e.top=Object(d["h"])(t),e.position="sticky",e.zIndex=1}return e}},methods:{toggle(){this.isActive=!this.isActive},iconClick(e){this.$emit("click:icon",e)},genIcon(){if(!this.hasIcon)return;let e;return e=this.icon?this.$createElement(f["a"],{props:{color:this.iconColor,size:28}},[this.icon]):Object(d["s"])(this,"icon"),this.$createElement(u["a"],{staticClass:"v-banner__icon",props:{color:this.color,size:40},on:{click:this.iconClick}},[e])},genText(){return this.$createElement("div",{staticClass:"v-banner__text"},Object(d["s"])(this))},genActions(){const e=Object(d["s"])(this,"actions",{dismiss:()=>this.isActive=!1});if(e)return this.$createElement("div",{staticClass:"v-banner__actions"},e)},genContent(){return this.$createElement("div",{staticClass:"v-banner__content"},[this.genIcon(),this.genText()])},genWrapper(){return this.$createElement("div",{staticClass:"v-banner__wrapper"},[this.genContent(),this.genActions()])}},render(e){const t={staticClass:"v-banner",attrs:this.attrs$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};return e(p["a"],[e("div",this.outlined?t:this.setBackgroundColor(this.color,t),[this.genWrapper()])])}}),v=a("8336"),b=a("b0af"),_=a("99d9"),S=a("cc20"),D=a("62ad"),y=a("a523"),x=a("490a"),A=a("0fd9"),k=a("8dd9"),T=(a("e9f5"),a("ab43"),a("1f09"),a("c995")),E=a("24b2"),I=Object(o["a"])(T["a"],E["a"],r["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},tile:Boolean,transition:String,type:String,types:{type:Object,default:()=>({})}},computed:{attrs(){return this.isLoading?{"aria-busy":!this.boilerplate||void 0,"aria-live":this.boilerplate?void 0:"polite","aria-label":this.boilerplate?void 0:this.$vuetify.lang.t(this.loadingText),role:this.boilerplate?void 0:"alert",...this.$attrs}:this.$attrs},classes(){return{"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile,...this.themeClasses,...this.elevationClasses}},isLoading(){return!("default"in this.$scopedSlots)||this.loading},rootTypes(){return{actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text",...this.types}}},methods:{genBone(e,t){return this.$createElement("div",{staticClass:`v-skeleton-loader__${e} v-skeleton-loader__bone`},t)},genBones(e){const[t,a]=e.split("@"),s=()=>this.genStructure(t);return Array.from({length:a}).map(s)},genStructure(e){let t=[];e=e||this.type||"";const a=this.rootTypes[e]||"";if(e===a);else{if(e.indexOf(",")>-1)return this.mapBones(e);if(e.indexOf("@")>-1)return this.genBones(e);a.indexOf(",")>-1?t=this.mapBones(a):a.indexOf("@")>-1?t=this.genBones(a):a&&t.push(this.genStructure(a))}return[this.genBone(e,t)]},genSkeleton(){const e=[];return this.isLoading?e.push(this.genStructure()):e.push(Object(d["s"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},e):e},mapBones(e){return e.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter(e){this.resetStyles(e),this.isLoading&&(e._initialStyle={display:e.style.display,transition:e.style.transition},e.style.setProperty("transition","none","important"))},onBeforeLeave(e){e.style.setProperty("display","none","important")},resetStyles(e){e._initialStyle&&(e.style.display=e._initialStyle.display||"",e.style.transition=e._initialStyle.transition,delete e._initialStyle)}},render(e){return e("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}}),R=a("71a3"),w=a("c671"),N=a("fe57"),O=a("aac8"),B=a("9a96"),j=(a("a732"),function(){var e,t,a,i,r,l,n=this,c=n._self._c;return c("div",[n.permissionCheckComplete&&n.accessDenied?c(b["a"],{staticClass:"mx-auto my-6 access-denied-card",attrs:{"max-width":"650",elevation:"8"}},[c(g,{staticClass:"banner-top",attrs:{dark:"",color:"error",icon:"mdi-alert-circle"}},[c("span",{staticClass:"text-h5 font-weight-bold"},[n._v("Access Denied")])]),c(_["b"],{staticClass:"pa-5 text-center"},[c(s["a"],{staticClass:"mb-4 access-icon",attrs:{size:"64",color:"error"}},[n._v("mdi-shield-lock")]),c("h2",{staticClass:"text-h5 mb-3 access-title"},[n._v(" You don't have permission to view this case file ")]),c("p",{staticClass:"subtitle-1 mb-4 access-message"},[n._v(" The case you're trying to access (ID: "+n._s(n.$route.params.id)+") may not exist or you don't have the necessary permissions to view it. ")]),c("p",{staticClass:"caption mb-6 grey--text access-hint"},[n._v(" If you believe this is an error, please contact your system administrator. ")]),c("div",{staticClass:"text-center"},[c(v["a"],{staticClass:"px-7 return-button",attrs:{color:"primary","x-large":"",rounded:"",elevation:"2"},on:{click:function(e){return n.$router.push("/home")}}},[c(s["a"],{attrs:{left:""}},[n._v("mdi-home")]),c("span",{staticClass:"button-text"},[n._v("Return to Home")])],1)],1)],1)],1):n.loading?c(I,{staticClass:"mx-auto my-4",attrs:{type:"card, article, actions"}}):!n.permissionCheckComplete||n.accessDenied||n.loading?n._e():c("div",[n.caseState.casefile.id&&n.fileaccess?c(k["a"],{staticClass:"header-section px-6 py-4",attrs:{dark:""}},[c(A["a"],{attrs:{align:"center"}},[c(D["a"],{attrs:{cols:"12",sm:"8"}},[c("div",{staticClass:"d-flex flex-wrap align-center"},[c("h2",{staticClass:"text-h5 font-weight-bold mb-0 text-break"},[n._v(" AA/"+n._s((null===(e=n.filterDept(n.caseState.casefile.refType)[0])||void 0===e?void 0:e.name)||"")+n._s(n.filterSubDept(n.caseState.casefile.subRefType)[0]?"/"+n.filterSubDept(n.caseState.casefile.subRefType)[0].subCode:"")+"/"+n._s(n.caseState.casefile.id)+"/"+n._s(n.yearOnly(n.caseState.casefile.createdAt))+n._s(null!==(t=n.filterBranches(n.caseState.casefile.branch)[0])&&void 0!==t&&t.brCode?"/"+n.filterBranches(n.caseState.casefile.branch)[0].brCode:"")+" ")]),c(S["a"],{staticClass:"status-chip ml-3",attrs:{small:"",color:n.getStatusColorClass}},[c("span",{staticClass:"status-text"},[n._v(" "+n._s((null===(a=n.filterStages(n.caseState.casefile.fileStatus)[0])||void 0===a?void 0:a.name)||"N/A")+" ")])])],1),c("div",{staticClass:"text-subtitle-1 mt-1 opacity-medium text-break"},[n._v(" "+n._s((null===(i=n.filterIns(n.caseState.casefile.insurer)[0])||void 0===i?void 0:i.name)||"N/A")+" "),c("span",{staticClass:"mx-2"},[n._v("•")]),n._v(" "+n._s(null===(r=n.caseState.casefile.vehicleNo)||void 0===r?void 0:r.toUpperCase())+" ")])]),c(D["a"],{staticClass:"text-right d-flex align-center justify-end flex-wrap",attrs:{cols:"12",sm:"4"}},[c("TransferCase",{staticClass:"mr-3",attrs:{approvingManager:n.approvingManager,casefile:n.caseState.casefile,refType:n.refType,subRefTypes:n.subRefTypes,insurer:n.insurer,branches:n.branches,members:n.members,states:n.states,regions:n.regions}}),c("TransferAdj",{staticClass:"mr-3",attrs:{casefile:n.caseState.casefile,refType:n.refType,branches:n.branches,subRefTypes:n.subRefTypes,insurer:n.insurer,management:n.management,states:n.states,regions:n.regions,handlers:n.handlers,members:n.members,adjusters:n.adjusters}}),c("TransferClerk",{staticClass:"mr-3",attrs:{branches:n.branches,management:n.management,insurer:n.insurer,refType:n.refType,subRefTypes:n.subRefTypes,members:n.members,handlers:n.handlers,states:n.states,regions:n.regions,clerks:n.clerks}}),c("CancelCase",{staticClass:"mr-3",attrs:{casefile:n.caseState.casefile,approvingManager:n.approvingManager,refType:n.refType,branches:n.branches,subRefTypes:n.subRefTypes,insurer:n.insurer,management:n.management}}),c("EditCase",{staticClass:"mr-3",attrs:{casefile:n.caseState.casefile,management:n.management,refType:n.refType,branches:n.branches,subRefTypes:n.subRefTypes,handlers:n.handlers,states:n.states,regions:n.regions,stages:n.stages,insurer:n.insurer}}),n.dateDiff?c(S["a"],{staticClass:"purple lighten-3 mr-3",attrs:{outlined:"",small:""}},[n._v(" "+n._s(n.dateDiff(n.moment(n.caseState.casefile.dateOfAssign).format(),n.moment().format()))+" Day(s) ")]):n._e(),c("acknowledgement",{staticClass:"mr-3",attrs:{casefile:n.caseState.casefile,refType:n.refType,subRefTypes:n.subRefTypes,insurer:n.insurer,branches:n.branches,states:n.states}}),c("flag",{staticClass:"d-inline-block flag-icon",attrs:{casefile:n.caseState.casefile}})],1)],1)],1):n._e(),c(y["a"],{staticClass:"pa-0",attrs:{fluid:""}},[n.caseState.casefile.id&&n.fileaccess?c("div",[c(b["a"],{staticClass:"workflow-actions ma-4",attrs:{flat:""}},[c(_["c"],{staticClass:"workflow-title d-flex align-center pb-4"},[c(s["a"],{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[n._v("mdi-ray-start-arrow")]),c("span",{staticClass:"title-text"},[n._v("Available Actions")])],1),c(_["b"],{staticClass:"action-buttons pa-6"},[c(A["a"],{attrs:{justify:"center",align:"start"}},[n.hasAvailableActions.showApplyDoc?c("ApplyDoc",{ref:"applyDoc",staticClass:"action-wrapper",attrs:{casefile:n.caseState.casefile,refType:n.refType,branches:n.branches,subRefTypes:n.subRefTypes,insurer:n.insurer,management:n.management}}):n._e(),n.hasAvailableActions.showAssignBranch?c("AssignBranch",{ref:"assignBranch",staticClass:"action-wrapper",attrs:{casefile:n.caseState.casefile,refType:n.refType,branches:n.branches,subRefTypes:n.subRefTypes,insurer:n.insurer,management:n.management,states:n.states,regions:n.regions,handlers:n.handlers,members:n.members}}):n._e(),n.hasAvailableActions.showBranchAccept?c("BranchAccept",{ref:"branchAccept",staticClass:"action-wrapper",attrs:{casefile:n.caseState.casefile,refType:n.refType,branches:n.branches,subRefTypes:n.subRefTypes,insurer:n.insurer,management:n.management,states:n.states,regions:n.regions,handlers:n.handlers,members:n.members,adjusters:n.adjusters}}):n._e(),n.hasAvailableActions.showAcceptAssignment?c("AcceptAssignment",{ref:"acceptAssignment",staticClass:"action-wrapper",attrs:{casefile:n.caseState.casefile,refType:n.refType,branches:n.branches,subRefTypes:n.subRefTypes,insurer:n.insurer,members:n.members,handlers:n.handlers,states:n.states},on:{accepted:n.refreshList}}):n._e(),n.hasAvailableActions.showCompleteInvestigation?c("CompleteInvestigation",{ref:"completeInvestigation",staticClass:"action-wrapper",attrs:{casefile:n.caseState.casefile,claims:n.claims,refType:n.refType,branches:n.branches,branch:n.branch,subRefTypes:n.subRefTypes,insurer:n.insurer,clerks:n.clerks,members:n.members,documents:n.documents},on:{"refresh-documents":n.preloadDocuments,"refresh-casefile":n.refreshList}}):n._e(),n.hasAvailableActions.showAssignEditor?c("AssignEditor",{ref:"assignEditor",staticClass:"action-wrapper",attrs:{casefile:n.caseState.casefile,branches:n.branches,branch:n.branch,management:n.management,editors:n.editors,refType:n.refType,subRefTypes:n.subRefTypes,insurer:n.insurer,members:n.members}}):n._e(),n.hasAvailableActions.showAcceptEditing?c("AcceptEditing",{ref:"acceptEditing",staticClass:"action-wrapper",attrs:{casefile:n.caseState.casefile}}):n._e(),n.hasAvailableActions.showCompleteEditing?c("CompleteEditing",{ref:"completeEditing",staticClass:"action-wrapper",attrs:{casefile:n.caseState.casefile,refType:n.refType,branches:n.branches,branch:n.branch,subRefTypes:n.subRefTypes,insurer:n.insurer,clerks:n.clerks,members:n.members}}):n._e(),n.hasAvailableActions.showHoldApproval?c("HoldApproval",{ref:"holdApproval",staticClass:"action-wrapper",attrs:{approvingManager:n.approvingManager}}):n._e(),n.hasAvailableActions.showApprovalReport?c("ApprovalReport",{ref:"approvalReport",staticClass:"action-wrapper",attrs:{holdingManager:n.holdingManager}}):n._e(),n.hasAvailableActions.showReInvestigate?c("ReInvestigate",{ref:"reInvestigate",staticClass:"action-wrapper",attrs:{holdingManager:n.holdingManager}}):n._e(),n.hasAvailableActions.showReEdit?c("ReEdit",{ref:"reEdit",staticClass:"action-wrapper",attrs:{holdingManager:n.holdingManager}}):n._e(),n.hasAvailableActions.showAssignClerk?c("AssignClerk",{ref:"assignClerk",staticClass:"action-wrapper",attrs:{casefile:n.caseState.casefile,branches:n.branches,branch:n.branch,refType:n.refType,subRefTypes:n.subRefTypes,insurer:n.insurer,members:n.members,management:n.management,clerks:n.clerks,documents:n.documents},on:{"refresh-documents":n.preloadDocuments}}):n._e(),n.hasAvailableActions.showAcceptFormatting?c("AcceptFormatting",{ref:"acceptFormatting",staticClass:"action-wrapper",attrs:{casefile:n.caseState.casefile}}):n._e(),n.hasAvailableActions.showCompleteFormatting?c("CompleteFormatting",{ref:"completeFormatting",staticClass:"action-wrapper",attrs:{casefile:n.caseState.casefile}}):n._e(),n.hasAvailableActions.showInvoising?c("Invoising",{ref:"invoising",staticClass:"action-wrapper",attrs:{management:n.management}}):n._e(),n.hasAvailableActions.showDispatch?c("Dispatch",{ref:"dispatch",staticClass:"action-wrapper",attrs:{management:n.management}}):n._e(),n.hasAvailableActions.showDoneDispatch?c("DoneDispatch",{ref:"doneDispatch",staticClass:"action-wrapper",attrs:{management:n.management}}):n._e(),n.hasAvailableActions.showClose?c("Close",{ref:"close",staticClass:"action-wrapper",attrs:{management:n.management}}):n._e(),Object.values(n.hasAvailableActions).some(e=>e)?n._e():c(D["a"],{attrs:{cols:"12"}},[c("div",{staticClass:"no-actions text-center pa-6"},[c(s["a"],{attrs:{size:"48",color:"grey lighten-1"}},[n._v("mdi-timer-sand")]),c("h3",{staticClass:"mt-4 grey--text text--darken-1"},[n._v(" Awaiting Next Action ")]),c("p",{staticClass:"subtitle-1 grey--text"},[n._v(" Current Stage: "+n._s((null===(l=n.filterStages(n.caseState.casefile.fileStatus)[0])||void 0===l?void 0:l.name)||"N/A")+" ")])],1)])],1)],1)],1),c(A["a"],[c(N["a"],{staticClass:"mb-5",attrs:{grow:""},model:{value:n.tab,callback:function(e){n.tab=e},expression:"tab"}},[c(B["a"],{staticStyle:{height:"5px"},attrs:{color:"green"}}),c(R["a"],[n._v("Details")]),c(R["a"],[n._v(" Documents "),n.documentsLoading?[c(x["a"],{staticClass:"ml-2",attrs:{indeterminate:"",size:"16",width:"2",color:"success"}})]:c(h,{attrs:{content:n.documentCount||"0",color:"success","offset-x":"5","offset-y":"1"}})],2),c(R["a"],[n._v(" Comments "),n.commentsLoading?[c(x["a"],{staticClass:"ml-2",attrs:{indeterminate:"",size:"16",width:"2",color:"warning"}})]:c(h,{attrs:{content:n.commentCount||"0",color:"warning","offset-x":"5","offset-y":"1"}})],2),c(R["a"],[n._v(" History "),n.historyLoading?[c(x["a"],{staticClass:"ml-2",attrs:{indeterminate:"",size:"16",width:"2",color:"info"}})]:c(h,{attrs:{content:n.historyTabCount||"0",color:"info","offset-x":"5","offset-y":"1"}})],2),c(R["a"],[n._v("Audit")]),c(R["a"],[n._v("Claims")])],1)],1),c(O["a"],{staticClass:"mt-1",model:{value:n.tab,callback:function(e){n.tab=e},expression:"tab"}},[c(w["a"],[c("DetailTab",{attrs:{adjusters:n.adjusters,members:n.members,editors:n.editors,clerks:n.clerks,branches:n.branches,insurer:n.insurer,handlers:n.handlers,refType:n.refType,subRefTypes:n.subRefTypes,stages:n.stages,states:n.states}})],1),c(w["a"],[c("Documents",{attrs:{casefile:n.caseState.casefile,preloadedDocs:n.documents,loading:n.documentsLoading},on:{"document-uploaded":n.handleDocumentUploaded}})],1),c(w["a"],[c("comments",{attrs:{casefile:n.caseState.casefile,preloadedComments:n.comments,loading:n.commentsLoading},on:{"comment-added":n.handleCommentAdded,"comment-deleted":n.handleCommentDeleted}})],1),c(w["a"],[c("History",{ref:"history",attrs:{branches:n.branches,refType:n.refType,subRefTypes:n.subRefTypes,stages:n.stages,members:n.members,insurer:n.insurer,states:n.states,handlers:n.handlers,preloadedHistory:n.caseHistory,loading:n.historyLoading},on:{"history-count-updated":n.handleHistoryCountUpdated}})],1),c(w["a"],[c("Audit",{attrs:{members:n.members}})],1),c(w["a"],[c("Claims",{attrs:{branches:n.branches,refType:n.refType,subRefTypes:n.subRefTypes,members:n.members}})],1)],1),c(A["a"],[c(D["a"],{attrs:{cols:"12"}},[c(A["a"],{staticClass:"mt-2",attrs:{"no-gutters":""}},[c(D["a"],{attrs:{cols:"12",justify:"center",align:"center"}})],1)],1)],1)],1):n._e()])],1)],1)}),$=[],F=(a("910d"),a("169a")),P=a("ce7e"),L=a("ce87"),M=a("3a2f"),U=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.acceptEditingDisabled},on:{click:function(t){return e.acceptEditing()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-account-search")]),t("span",{staticClass:"action-text"},[e._v("ACCEPT EDITING")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ACCEPT EDITING")])]),t(F["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogAcceptEditing,callback:function(t){e.dialogAcceptEditing=t},expression:"dialogAcceptEditing"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("ACCEPT EDITING")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(_["c"],[e._v("I ACCEPT")]),t(P["a"]),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeAcceptEditingDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:e.compAcceptEditing}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},H=[],G=a("f0cc"),Y=a("c1df"),V=a.n(Y),K=a("2f62"),J={name:"acceptEditing",props:[],components:{},data(){return{dialogAcceptEditing:!1}},computed:{acceptEditingDisabled(){return!("EDAC"==this.caseState.casefile.fileStatus&&this.caseState.casefile.editor==this.$store.state.auth.user.id)},...Object(K["c"])(["caseState"])},watch:{acceptEditing(e){e||this.closeAcceptEditingDialog()}},methods:{acceptEditing(){this.dialogAcceptEditing=!0},compAcceptEditing(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="EDI",this.caseState.casefile.dateStartEdi=V()().format()).then(e=>{this.closeAcceptEditingDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeAcceptEditingDialog()},closeAcceptEditingDialog(){this.dialogAcceptEditing=!1,this.$nextTick(()=>{})}}},z=J,q=a("2877"),W=Object(q["a"])(z,U,H,!1,null,null,null),X=W.exports,Z=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.acceptFormattingDisabled},on:{click:function(t){return e.acceptFormatting()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-account-search")]),t("span",{staticClass:"action-text"},[e._v("ACCEPT FORMATTING")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ACCEPT FORMATTING")])]),t(F["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogAcceptFormatting,callback:function(t){e.dialogAcceptFormatting=t},expression:"dialogAcceptFormatting"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("ACCEPT FORMATTING")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(_["c"],[e._v("I ACCEPT")]),t(P["a"]),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeAcceptFormattingDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:e.compAcceptFormatting}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},Q=[],ee={name:"acceptFormatting",props:[],components:{},data(){return{dialogAcceptFormatting:!1}},computed:{acceptFormattingDisabled(){return!("CLERK"==this.caseState.casefile.fileStatus&&this.caseState.casefile.clerkInCharge==this.$store.state.auth.user.id)},...Object(K["c"])(["caseState"])},watch:{acceptFormatting(e){e||this.closeAcceptFormattingDialog()}},methods:{acceptFormatting(){this.dialogAcceptFormatting=!0},compAcceptFormatting(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="FOIN",this.caseState.casefile.dateStartFormatting=V()().format()).then(e=>{this.closeAcceptFormattingDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeAcceptFormattingDialog()},closeAcceptFormattingDialog(){this.dialogAcceptFormatting=!1,this.$nextTick(()=>{})}}},te=ee,ae=Object(q["a"])(te,Z,Q,!1,null,null,null),se=ae.exports,ie=a("5246"),re=a("2fa4"),le=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"primary mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.applyDocDisabled},on:{click:function(t){return e.applyDoc()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-file-document-multiple")]),t("span",{staticClass:"action-text"},[e._v("APPLY DOCUMENT")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("APPLY DOCUMENT")])]),t(F["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogApplyDoc,callback:function(t){e.dialogApplyDoc=t},expression:"dialogApplyDoc"}},[t(b["a"],{staticClass:"text-center"},[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[e._v("APPLY DOCUMENTS")]),t(_["b"],{staticClass:"mt-3 pa-0"},[e._v(" CASEFILE NUMBER: AA"),e._l(e.filterDept(e.caseState.casefile.refType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.name)),e._l(e.filterSubDept(e.caseState.casefile.subRefType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.subCode))])}))],2)})),e._v("/"+e._s(e.caseState.casefile.id)+"/"+e._s(e.yearOnly(e.caseState.casefile.createdAt))),e._l(e.filterBranches(e.caseState.casefile.branch),(function(a){return t("span",{key:a.id},[e._v("/"+e._s(a.brCode)+" ")])}))],2),t(P["a"]),t(_["a"],[t(re["a"]),t(v["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:function(t){e.dialogApplyDoc=!1}}},[e._v("Cancel")]),t(v["a"],{staticClass:"success",attrs:{small:"",tile:""},on:{click:e.setPendingDoc}},[e._v("OK")]),t(re["a"])],1)],1)],1)],1)},ne=[],ce={name:"applyDoc",props:["management","refType","subRefTypes","branches"],components:{},data(){return{dialogApplyDoc:!1}},computed:{applyDocDisabled(){return!("NEW"==this.caseState.casefile.fileStatus&&this.management)},...Object(K["c"])(["caseState"])},watch:{applyDoc(e){e||this.closeApplyDoc()}},methods:{moment:function(e){return V()(e)},yearOnly(e){return V()(e).format("YY")},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},applyDoc(){this.dialogApplyDoc=!0},setPendingDoc(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PEND",this.caseState.casefile.applyDocBy=this.$store.state.auth.user.id,this.caseState.casefile.applyDocDate=V()().format()).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeApplyDoc()},closeApplyDoc(){this.dialogApplyDoc=!1,this.$nextTick(()=>{})}},mounted(){}},oe=ce,de=Object(q["a"])(oe,le,ne,!1,null,null,null),he=de.exports,me=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.approvalReportDisabled},on:{click:function(t){return e.approvalReport()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-tag-check")]),t("span",{staticClass:"action-text"},[e._v("APPROVE REPORT")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("APPROVE REPORT")])]),t(F["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogApprovalReport,callback:function(t){e.dialogApprovalReport=t},expression:"dialogApprovalReport"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("APPROVE REPORT")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%",tile:""}},[t(_["c"],[e._v("I APPROVE")]),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeApprovalReportDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"success mt-3",attrs:{tile:"",small:""},on:{click:e.compApprovalReport}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},ue=[],fe={name:"approvalReport",props:["holdingManager"],components:{},data(){return{dialogApprovalReport:!1}},computed:{approvalReportDisabled(){return!("HOLD"==this.caseState.casefile.fileStatus&&this.holdingManager)},...Object(K["c"])(["caseState"])},watch:{approvalReport(e){e||this.closeApprovalReportDialog()}},methods:{approvalReport(){this.dialogApprovalReport=!0},compApprovalReport(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PFORM",this.caseState.casefile.dateOfApproval=V()().format()).then(e=>{this.closeApprovalReportDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeApprovalReportDialog()},closeApprovalReportDialog(){this.dialogApprovalReport=!1,this.$nextTick(()=>{})}}},pe=fe,Ce=Object(q["a"])(pe,me,ue,!1,null,null,null),ge=Ce.exports,ve=a("c6a6"),be=a("2e4b"),_e=a("e449"),Se=a("b974"),De=a("8654"),ye=a("a844"),xe=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.newPendDisabled},on:{click:function(t){return e.assignBranch()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-file-cabinet")]),t("span",{staticClass:"action-text"},[e._v("ASSIGN BRANCH")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ASSIGN BRANCH")])]),t(F["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogAssignBranch,callback:function(t){e.dialogAssignBranch=t},expression:"dialogAssignBranch"}},[e.editedCasefile?[t(b["a"],[t(_["c"],[t("span",{staticClass:"text-h5"},[e._v("ASSIGN BRANCH")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(b["a"],{attrs:{width:"100%"}},[t(_["c"],[e._v("Department")]),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedRefType,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select Department","persistent-hint":"",label:"Department"},on:{change:e.handleRefTypeChange},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Department ")]},proxy:!0}],null,!1,895171366),model:{value:e.editedCasefile.refType,callback:function(t){e.$set(e.editedCasefile,"refType",t)},expression:"editedCasefile.refType"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedAvailableSubRefTypes,"item-text":"subCode","item-value":"id","no-data-text":"There is no file-Classification option for selected department above","menu-props":{maxHeight:"400"},label:"File-Classification",hint:"Select File-Classification","persistent-hint":""},model:{value:e.editedCasefile.subRefType,callback:function(t){e.$set(e.editedCasefile,"subRefType",t)},expression:"editedCasefile.subRefType"}})],1)],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedBranches,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile branch","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Branch ")]},proxy:!0}],null,!1,4056079958),model:{value:e.editedCasefile.branch,callback:function(t){e.$set(e.editedCasefile,"branch",t)},expression:"editedCasefile.branch"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(ve["a"],{attrs:{items:e.sortedInsurer,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile insurer","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurer ")]},proxy:!0}],null,!1,1715300934),model:{value:e.editedCasefile.insurer,callback:function(t){e.$set(e.editedCasefile,"insurer",t)},expression:"editedCasefile.insurer"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedHandlers,"item-text":"name","item-value":"id","no-data-text":"There is no handler option for selected insurer above","menu-props":{maxHeight:"400"},label:"Claim Handler",hint:"Select Handler","persistent-hint":""},model:{value:e.editedCasefile.handler,callback:function(t){e.$set(e.editedCasefile,"handler",t)},expression:"editedCasefile.handler"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(De["a"],{attrs:{"item-text":"Insurer's Reference",rules:[e=>!!e||"Insurers reference is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurers Reference ")]},proxy:!0}],null,!1,3049719038),model:{value:e.editedCasefile.claimNo,callback:function(t){e.$set(e.editedCasefile,"claimNo",t)},expression:"editedCasefile.claimNo"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(_e["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(De["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Assignment ")]},proxy:!0}],null,!0),model:{value:e.editedCasefile.dateOfAssign,callback:function(t){e.$set(e.editedCasefile,"dateOfAssign",t)},expression:"editedCasefile.dateOfAssign"}},"v-text-field",s,!1),a))]}}],null,!1,1513682418),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(be["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu=!1}},model:{value:e.editedCasefile.dateOfAssign,callback:function(t){e.$set(e.editedCasefile,"dateOfAssign",t)},expression:"editedCasefile.dateOfAssign"}})],1)],1)]],2),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(De["a"],{attrs:{rules:[e=>!!e||"Vehicle Number is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Vehicle Number ")]},proxy:!0}],null,!1,2036810265),model:{value:e.editedCasefile.vehicleNo,callback:function(t){e.$set(e.editedCasefile,"vehicleNo",t)},expression:"editedCasefile.vehicleNo"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(_e["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(De["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Loss ")]},proxy:!0}],null,!0),model:{value:e.editedCasefile.dateOfLoss,callback:function(t){e.$set(e.editedCasefile,"dateOfLoss",t)},expression:"editedCasefile.dateOfLoss"}},"v-text-field",s,!1),a))]}}],null,!1,2058680384),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[t(be["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu1=!1}},model:{value:e.editedCasefile.dateOfLoss,callback:function(t){e.$set(e.editedCasefile,"dateOfLoss",t)},expression:"editedCasefile.dateOfLoss"}})],1)],1)]],2),t(b["a"],{attrs:{width:"100%"}},[t(_["c"],[e._v("Place Of Loss")]),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedStates,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select State","persistent-hint":"",label:"State"},model:{value:e.editedCasefile.stateOfLoss,callback:function(t){e.$set(e.editedCasefile,"stateOfLoss",t)},expression:"editedCasefile.stateOfLoss"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedRegions,"item-text":"name","item-value":"name","no-data-text":"There is no district option for selected state above","menu-props":{maxHeight:"400"},label:"Area Of Loss",hint:"Select District","persistent-hint":""},model:{value:e.editedCasefile.placeOfLoss,callback:function(t){e.$set(e.editedCasefile,"placeOfLoss",t)},expression:"editedCasefile.placeOfLoss"}})],1)],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{label:"Insured Name"},model:{value:e.editedCasefile.insuredName,callback:function(t){e.$set(e.editedCasefile,"insuredName",t)},expression:"editedCasefile.insuredName"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(ye["a"],{attrs:{label:"Insurers Comment"},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurers Comment ")]},proxy:!0}],null,!1,2528526694),model:{value:e.editedCasefile.insComment,callback:function(t){e.$set(e.editedCasefile,"insComment",t)},expression:"editedCasefile.insComment"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(re["a"]),t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeAssignBranchDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:e.isAddFileButtonDisabled},on:{click:e.assignBranchSubmit}},[e._v("Submit")])],1)],1)],1)],1)],1)]:e._e()],2)],1)},Ae=[],ke=a("061e"),Te={name:"AssignBranch",props:["branches","branch","management","insurer","refType","subRefTypes","members","handlers","states","regions"],components:{},data(){return{dialogAssignBranch:!1,menu:!1,menu1:!1,editedCasefile:null}},computed:{...Object(K["c"])(["caseState"]),sortedRefType(){return this.refType.map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedAvailableSubRefTypes(){return this.editedCasefile&&this.editedCasefile.refType?this.subRefTypes.filter(e=>e.deptId===this.editedCasefile.refType).map(e=>({...e,subCode:e.subCode?e.subCode.trim().toUpperCase():""})).sort((e,t)=>e.subCode.localeCompare(t.subCode)):[]},sortedBranches(){return this.branches.map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedInsurer(){return this.insurer.map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedHandlers(){return this.editedCasefile&&this.editedCasefile.insurer?this.handlers.filter(e=>e.insId===this.editedCasefile.insurer).map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name)):[]},isAddFileButtonDisabled(){return!(this.editedCasefile.refType&&this.editedCasefile.branch&&this.editedCasefile.insurer&&this.editedCasefile.claimNo&&this.editedCasefile.vehicleNo&&this.editedCasefile.dateOfLoss&&this.editedCasefile.insComment)},computedDateFormattedMomentjs(){return this.date?V()(this.date).format("DD/MM/YY"):""},newPendDisabled(){return!(("NEW"==this.caseState.casefile.fileStatus||"PEND"==this.caseState.casefile.fileStatus)&&this.management)},availableSubRefTypes(){return[]},sortedStates(){return this.states.map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedRegions(){return this.editedCasefile&&this.editedCasefile.stateOfLoss?this.regions.filter(e=>e.branchId===this.editedCasefile.stateOfLoss).map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name)):[]}},watch:{assignBranch(e){e||this.closeAssignBranchDialog()}},methods:{filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},filterVehiclNo(e){return e?e.toLowerCase().replace(/\s/g,""):"TBA"},assignBranch(){this.editedCasefile=JSON.parse(JSON.stringify(this.caseState.casefile)),this.dialogAssignBranch=!0},assignBranchSubmit(){const e={...this.editedCasefile,vehicleNo:this.editedCasefile.vehicleNo?this.editedCasefile.vehicleNo.toLowerCase().replace(/\s/g,""):"",fileStatus:"BRAC",assignBranchBy:this.$store.state.auth.user.id,dateOfReg:V()().format()};G["a"].update(this.caseState.casefile.id,e).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.caseState.casefile=e,this.closeAssignBranchDialog()}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{const e=this.caseState.casefile.refType;var t={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:this.findUserEmail(this.filterPicID(e)),createdBy:this.$store.state.auth.user.id};ke["a"].assignBranch(t).then(e=>{this.closeAssignBranchDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.dataEmail=""}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeAssignBranchDialog()},closeAssignBranchDialog(){this.dialogAssignBranch=!1,this.$nextTick(()=>{})},handleRefTypeChange(){this.editedCasefile&&(this.editedCasefile.subRefType=null)}}},Ee=Te,Ie=Object(q["a"])(Ee,xe,Ae,!1,null,null,null),Re=Ie.exports,we=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.assignClerkDisabled},on:{click:function(t){return e.assignClerk()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-format-align-center")]),t("span",{staticClass:"action-text"},[e._v("ASSIGN CLERK FOR FORMATTING")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ASSIGN CLERK FOR FORMATTING")])]),e.assignClerkDisabled?t("div",{staticClass:"mt-2 text-center"},[t("small",{staticClass:"red--text text--lighten-3"},[e._v(" "+e._s(e.assignClerkDisabledMessage)+" ")])]):e._e(),t(F["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogAssignClerk,callback:function(t){e.dialogAssignClerk=t},expression:"dialogAssignClerk"}},[t(b["a"],{staticClass:"text-center"},[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("ASSIGN CLERK FOR FORMATTING")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedBranches,"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":""},model:{value:e.branch.brCode,callback:function(t){e.$set(e.branch,"brCode",t)},expression:"branch.brCode"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedClerksByBranch(e.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Clerk for the branch above","menu-props":{maxHeight:"400"},label:"BRANCH CLERK / BRANCH MANAGER / CLERK / MANAGER",hint:"Assign Clerk","persistent-hint":""},model:{value:e.currentClerk,callback:function(t){e.currentClerk=t},expression:"currentClerk"}})],1)],1)],1)],1),t(P["a"]),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeAssignClerkDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",disabled:e.isFileButtonDisabled,small:""},on:{click:e.compAssignClerk}},[e._v("Submit")])],1)],1)],1)],1)},Ne=[],Oe={name:"AssignClerk",props:["subRefTypes","branches","branch","insurer","refType","clerks","management","members","documents"],components:{},data(){return{dialogAssignClerk:!1,currentClerk:""}},computed:{...Object(K["c"])(["caseState"]),sortedBranches(){return this.branches.map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedClerksByBranch(){return e=>this.clerks.filter(t=>Array.isArray(t.branches)&&t.branches.some(t=>t.brCode===e)).map(e=>({...e,username:e.username?e.username.trim().toUpperCase():""})).sort((e,t)=>e.username.localeCompare(t.username))},assignClerkDisabled(){return!(("PFORM"==this.caseState.casefile.fileStatus||"PEDI"==this.caseState.casefile.fileStatus)&&this.management)},assignClerkDisabledMessage(){return"PFORM"!=this.caseState.casefile.fileStatus&&"PEDI"!=this.caseState.casefile.fileStatus?"Case is not in formatting stage":this.management?"":"You do not have permission to assign clerk"},isFileButtonDisabled(){return!(this.branch.brCode&&this.currentClerk)}},watch:{assignClerk(e){e||this.closeAssignClerkDialog()},documents:{immediate:!0,deep:!0,handler(){this.$forceUpdate()}}},methods:{filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},filterClerkByBranch(e){return this.clerks.filter(t=>t.branches.some(t=>t.brCode===e))},assignClerk(){this.dialogAssignClerk=!0},compAssignClerk(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.clerkInCharge=this.currentClerk,this.caseState.casefile.fileStatus="CLERK",this.caseState.casefile.dateAssignFormatting=V()().format(),this.caseState.casefile.assignClerkBy=this.$store.state.auth.user.id).then(e=>{this.closeAssignClerkDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).then(()=>{var e={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:this.findUserEmail(this.currentClerk),createdBy:this.$store.state.auth.user.id};ke["a"].assignClerk(e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}),this.dataEmail=""}).catch(e=>{console.log(e)}),this.closeAssignClerkDialog()},closeAssignClerkDialog(){this.dialogAssignClerk=!1,this.$nextTick(()=>{})}}},Be=Oe,je=(a("e25a"),Object(q["a"])(Be,we,Ne,!1,null,"72067c98",null)),$e=je.exports,Fe=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"mr-1",staticStyle:{"background-color":"#a5d6a7",color:"#000"},attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.assignEditorDisabled},on:{click:function(t){return e.assignEditor()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],{staticStyle:{color:"#000"}},[e._v("mdi-account-edit-outline")]),t("span",{staticClass:"action-text",staticStyle:{color:"#000"}},[e._v("ASSIGN EDITOR")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ASSIGN EDITOR")])]),t(F["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogAssignEditor,callback:function(t){e.dialogAssignEditor=t},expression:"dialogAssignEditor"}},[e.editedCasefile?[t(b["a"],{staticClass:"text-center"},[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("ASSIGN EDITOR")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedBranches,"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":""},model:{value:e.branch.brCode,callback:function(t){e.$set(e.branch,"brCode",t)},expression:"branch.brCode"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedEditorsByBranch(e.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Editor for the branch above","menu-props":{maxHeight:"400"},label:"EDITOR/ BRANCH CLERK / BRANCH MANAGER / CLERK / MANAGER",hint:"Assign Editor","persistent-hint":""},model:{value:e.editedCasefile.editor,callback:function(t){e.$set(e.editedCasefile,"editor",t)},expression:"editedCasefile.editor"}})],1)],1)],1)],1),t(P["a"]),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:"",disabled:e.isSubmitting},on:{click:e.closeAssignEditorDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{disabled:e.isAddFileButtonDisabled||e.isSubmitting,tile:"",small:""},on:{click:e.compAssignEditor}},[e._v("Submit")])],1)],1)]:e._e()],2)],1)},Pe=[],Le=(a("f665"),{name:"AssignEditor",props:["branches","editors","management","insurer","refType","subRefTypes","members"],components:{},data(){return{dialogAssignEditor:!1,branch:{name:"",brCode:""},editedCasefile:null,isSubmitting:!1}},computed:{...Object(K["c"])(["caseState"]),sortedBranches(){return this.branches.map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedEditorsByBranch(){return e=>this.editors.filter(t=>Array.isArray(t.branches)&&t.branches.some(t=>t.brCode===e)).map(e=>({...e,username:e.username?e.username.trim().toUpperCase():""})).sort((e,t)=>e.username.localeCompare(t.username))},assignEditorDisabled(){return!("PEDI"==this.caseState.casefile.fileStatus&&this.management)},isAddFileButtonDisabled(){return!(this.branch.brCode&&this.editedCasefile&&this.editedCasefile.editor)}},watch:{assignEditor(e){e||this.closeAssignEditorDialog()}},methods:{filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},findBrcode(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t.map(e=>e.brCode)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},assignEditor(){if(this.editedCasefile=JSON.parse(JSON.stringify(this.caseState.casefile)),this.caseState.casefile.branch){const e=this.branches.find(e=>e.id===this.caseState.casefile.branch);this.branch=e?{name:e.name,brCode:e.brCode}:{name:"",brCode:""}}else this.branch={name:"",brCode:""};this.dialogAssignEditor=!0},compAssignEditor(){if(!this.editedCasefile)return;this.isSubmitting=!0;const e={...this.editedCasefile,editor:this.editedCasefile.editor,fileStatus:"EDAC",dateOfEdi:V()().format(),assignEdiBy:this.$store.state.auth.user.id};G["a"].update(this.caseState.casefile.id,e).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.caseState.casefile={...this.caseState.casefile,...e,editor:e.editor||null},this.closeAssignEditorDialog()}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{const t=this.filterDept(this.caseState.casefile.refType)[0]||{},a=this.filterSubDept(this.caseState.casefile.subRefType)[0]||{},s=this.filterBranches(this.caseState.casefile.branch)[0]||{},i=this.filterIns(this.caseState.casefile.insurer)[0]||{},r=this.findUserEmail(e.editor);var l={id:this.caseState.casefile.id,refType:t.description||"",refTypeCode:t.name||"",subRefType:a.subCodeDesc||"",subRefCode:a.subCode||"",branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:s.brCode||"",insurer:i.name||"",vehicleNo:(this.caseState.casefile.vehicleNo||"").toLowerCase().replace(/\s/g,""),recipient:r,createdBy:this.$store.state.auth.user.id};ke["a"].editorAccept(l).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}),this.dataEmail=""}).catch(e=>{console.log(e)}).finally(()=>{this.isSubmitting=!1})},closeAssignEditorDialog(){this.dialogAssignEditor=!1,this.editedCasefile=null,this.branch={name:"",brCode:""}}}}),Me=Le,Ue=Object(q["a"])(Me,Fe,Pe,!1,null,null,null),He=Ue.exports,Ge=(a("0160"),Object(o["a"])(r["a"]).extend({name:"v-timeline",provide(){return{timeline:this}},props:{alignTop:Boolean,dense:Boolean,reverse:Boolean},computed:{classes(){return{"v-timeline--align-top":this.alignTop,"v-timeline--dense":this.dense,"v-timeline--reverse":this.reverse,...this.themeClasses}}},render(e){return e("div",{staticClass:"v-timeline",class:this.classes},Object(d["s"])(this))}}));const Ye=Object(o["a"])(i["a"],r["a"]);var Ve=Ye.extend().extend({name:"v-timeline-item",inject:["timeline"],props:{color:{type:String,default:"primary"},fillDot:Boolean,hideDot:Boolean,icon:String,iconColor:String,large:Boolean,left:Boolean,right:Boolean,small:Boolean},computed:{hasIcon(){return!!this.icon||!!this.$slots.icon}},methods:{genBody(){return this.$createElement("div",{staticClass:"v-timeline-item__body"},Object(d["s"])(this))},genIcon(){return Object(d["s"])(this,"icon")||this.$createElement(f["a"],{props:{color:this.iconColor,dark:!this.theme.isDark,small:this.small}},this.icon)},genInnerDot(){const e=this.setBackgroundColor(this.color);return this.$createElement("div",{staticClass:"v-timeline-item__inner-dot",...e},[this.hasIcon&&this.genIcon()])},genDot(){return this.$createElement("div",{staticClass:"v-timeline-item__dot",class:{"v-timeline-item__dot--small":this.small,"v-timeline-item__dot--large":this.large}},[this.genInnerDot()])},genDivider(){const e=[];return this.hideDot||e.push(this.genDot()),this.$createElement("div",{staticClass:"v-timeline-item__divider"},e)},genOpposite(){return this.$createElement("div",{staticClass:"v-timeline-item__opposite"},Object(d["s"])(this,"opposite"))}},render(e){const t=[this.genBody(),this.genDivider()];return this.$slots.opposite&&t.push(this.genOpposite()),e("div",{staticClass:"v-timeline-item",class:{"v-timeline-item--fill-dot":this.fillDot,"v-timeline-item--before":this.timeline.reverse?this.right:this.left,"v-timeline-item--after":this.timeline.reverse?this.left:this.right,...this.themeClasses}},t)}}),Ke=function(){var e=this,t=e._self._c;return t("div",[t(_["c"],{staticClass:"pb-0"},[e._v("CASE AUDIT")]),t(P["a"]),t(y["a"],{staticStyle:{width:"700px"},attrs:{fluid:""}},[t(Ge,{attrs:{dense:e.$vuetify.breakpoint.smAndDown}},[t(Ve,{staticClass:"white--text mb-6",attrs:{"fill-dot":"",color:"success",large:""},scopedSlots:e._u([{key:"icon",fn:function(){return[t("span",[e._v("DAYS")])]},proxy:!0}])}),e.caseState.casefile.createdAt?t(Ve,[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.createdAt))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" CASEFILE CREATED ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" PENDING DOCUMENT APPLICATION / BRANCH ASSIGNING ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.createdBy))+" ")])],1)],1):e._e(),e.caseState.casefile.applyDocDate?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.createdAt).format(),e.moment(e.caseState.casefile.applyDocDate).format()))+" ")]):e._e()]},proxy:!0}],null,!1,1081402888)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.applyDocDate))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" DOCUMENTS APPLIED ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" PENDING BRANCH ASSIGNING ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.applyDocBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateOfReg?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.createdAt).format(),e.moment(e.caseState.casefile.dateOfReg).format()))+" ")]):e._e()]},proxy:!0}],null,!1,4224438349)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateOfReg))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" ASSIGNED TO BRANCH ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" PENDING BRANCH ACCEPTANCE ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.assignBranchBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateOfAdj?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateOfReg).format(),e.moment(e.caseState.casefile.dateOfAdj).format()))+" ")]):e._e()]},proxy:!0}],null,!1,1873036266)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateOfAdj))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" BRANCH ACCEPTED ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" ADJUSTER ASSIGNED ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.assignAdjBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateStartInv?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateOfAdj).format(),e.moment(e.caseState.casefile.dateStartInv).format()))+" ")]):e._e()]},proxy:!0}],null,!1,318801186)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateStartInv))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" ADJUSTER ACCEPTED ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" STARTED INVESTIGATION ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.adjuster))+" ")])],1)],1):e._e(),e.caseState.casefile.dateEndInv?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateStartInv).format(),e.moment(e.caseState.casefile.dateEndInv).format()))+" ")]):e._e()]},proxy:!0}],null,!1,1822802010)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateEndInv))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" INVESTIGATION COMPLETE ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" REPORT SUBMITTED ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.adjuster))+" ")])],1)],1):e._e(),e.caseState.casefile.dateOfEdi?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateEndInv).format(),e.moment(e.caseState.casefile.dateOfEdi).format()))+" ")]):e._e()]},proxy:!0}],null,!1,1969449226)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateOfEdi))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" EDITOR ASSIGNED ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" PENDING EDITING ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.assignEdiBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateStartEdi?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateOfEdi).format(),e.moment(e.caseState.casefile.dateStartEdi).format()))+" ")]):e._e()]},proxy:!0}],null,!1,2475003964)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateStartEdi))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" EDITOR ACCEPTED ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" EDITING ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.editor))+" ")])],1)],1):e._e(),e.caseState.casefile.dateEndEdi?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateStartEdi).format(),e.moment(e.caseState.casefile.dateEndEdi).format()))+" ")]):e._e()]},proxy:!0}],null,!1,2282619354)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateEndEdi))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" EDITING COMPLETE ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" REPORT SUBMITTED ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.editor))+" ")])],1)],1):e._e(),e.caseState.casefile.dateOfApproval?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateEndEdi).format(),e.moment(e.caseState.casefile.dateOfApproval).format()))+" ")]):e._e()]},proxy:!0}],null,!1,1312873564)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateOfApproval))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" REPORT APPROVED ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" PENDING FORMATTING ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.approvedBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateAssignFormatting?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateOfApproval).format(),e.moment(e.caseState.casefile.dateAssignFormatting).format()))+" ")]):e._e()]},proxy:!0}],null,!1,287509389)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateAssignFormatting))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" CLERK ASSIGNED ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" PENDING ACCEPTANCE ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.assignClerkBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateStartFormatting?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateAssignFormatting).format(),e.moment(e.caseState.casefile.dateStartFormatting).format()))+" ")]):e._e()]},proxy:!0}],null,!1,4041730132)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateStartFormatting))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" CLERK ACCEPTED ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" FORMATTING ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.clerkInCharge))+" ")])],1)],1):e._e(),e.caseState.casefile.dateEndFormatting?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateStartFormatting).format(),e.moment(e.caseState.casefile.dateEndFormatting).format()))+" ")]):e._e()]},proxy:!0}],null,!1,2677481882)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateEndFormatting))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" FORMATTING COMPLETE ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" REPORT SUBMITTED ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.clerkInCharge))+" ")])],1)],1):e._e(),e.caseState.casefile.dateFinal?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateEndFormatting).format(),e.moment(e.caseState.casefile.dateFinal).format()))+" ")]):e._e()]},proxy:!0}],null,!1,2137556161)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateFinal))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" INVOISING & FINALISATION ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" PENDING DISPATCH / CLOSURE ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.finalBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateDispatch?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateFinal).format(),e.moment(e.caseState.casefile.dateDispatch).format()))+" ")]):e._e()]},proxy:!0}],null,!1,671269065)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateDispatch))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" DISPATCH INITIATED ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" PENDING DISPATCH ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.dispatchBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateClosed?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.dateFinal).format(),e.moment(e.caseState.casefile.dateClosed).format()))+" ")]):e._e()]},proxy:!0}],null,!1,3788649547)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateClosed))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 pb-0 text-start font-weight-black"},[e._v(" CLOSED ")]),t(_["b"],{staticClass:"caption text-start py-0"},[e._v(" FILE CLOSED ")]),t(_["b"],{staticClass:"caption text-start pt-0"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.closedBy))+" ")])],1)],1):e._e(),e.caseState.casefile.dateOfCancel?t(Ve,{scopedSlots:e._u([{key:"icon",fn:function(){return[e.dateDiff?t("span",{staticClass:"white--text font-italic font-weight-black"},[e._v(e._s(e.dateDiff(e.moment(e.caseState.casefile.createdAt).format(),e.moment(e.caseState.casefile.dateOfCancel).format()))+" ")]):e._e()]},proxy:!0}],null,!1,2883963995)},[t("span",{attrs:{slot:"opposite"},slot:"opposite"},[e._v(" "+e._s(e.formatDate(new Date(e.caseState.casefile.dateOfCancel))))]),t(b["a"],{staticClass:"elevation-2"},[t(_["b"],{staticClass:"text-h6 text-start font-weight-black"},[e._v(" CANCELLED ")]),t(_["b"],{staticClass:"caption text-start"},[e._v(" FILE CANCELLED ")]),t(_["b"],{staticClass:"caption text-start"},[e._v(" - "+e._s(e.getFilteredUserEmail(e.caseState.casefile.cancelBy))+" ")])],1)],1):e._e()],1)],1)],1)},Je=[],ze={name:"audit",props:["members"],data:()=>({events:[],input:null,nonce:0}),computed:{...Object(K["c"])(["caseState"]),timeline(){return this.events.slice().reverse()}},methods:{moment:function(e){return V()(e)},dateDiff(e,t){let a=V()(e),s=V()(t),i=V.a.duration(s.diff(a));return Math.round(i.asDays())},formatDate:function(e){return e?V()(e).format("DD/MM/YYYY"):""},filterUser(e){if(!e||!this.members)return[{email:"N/A"}];const t=this.members.filter(t=>t.id===e);return t.length?t:[{email:"N/A"}]},getFilteredUserEmail(e){if(!e||!this.members)return"N/A";const t=this.members.find(t=>t.id===e);return t?t.email:"N/A"}}},qe=ze,We=Object(q["a"])(qe,Ke,Je,!1,null,null,null),Xe=We.exports,Ze=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.assignAdjDisabled},on:{click:function(t){return e.assignAdj()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-account-plus-outline")]),t("span",{staticClass:"action-text"},[e._v("ACCEPT CASE & ASSIGN ADJUSTER")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ACCEPT CASE & ASSIGN ADJUSTER")])]),t(F["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogAdj,callback:function(t){e.dialogAdj=t},expression:"dialogAdj"}},[e.editedCasefile?[t(b["a"],{staticClass:"text-center"},[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("ACCEPT CASE & ASSIGN ADJUSTER")])]),t(_["b"],{staticClass:"mt-3 pa-0"},[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(_["b"],{staticClass:"mt-3 pa-0"},[e._v(" CHOOSE BRANCH FOLLOWED BY ADJUSTER ")])],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedBranches,"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":"",clearable:""},model:{value:e.branch.brCode,callback:function(t){e.$set(e.branch,"brCode",t)},expression:"branch.brCode"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedAdjustersByBranch(e.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Adjuster for the branch above","menu-props":{maxHeight:"400"},label:"ADJUSTERS",hint:"Assign Adjuster","persistent-hint":"",clearable:""},model:{value:e.editedCasefile.adjuster,callback:function(t){e.$set(e.editedCasefile,"adjuster",t)},expression:"editedCasefile.adjuster"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(re["a"]),t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",small:"",dark:""},on:{click:e.closeAdj}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:e.assignAdjRule},on:{click:e.saveAdjuster}},[e._v("Submit")])],1)],1)],1)],1)],1)]:e._e()],2)],1)},Qe=[],et={name:"branchAccept",props:["branches","management","insurer","refType","subRefTypes","members","handlers","states","regions","adjusters"],components:{},data(){return{dialogAdj:!1,menu:!1,menu1:!1,branch:{name:"",brCode:""},editedCasefile:null}},computed:{...Object(K["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},assignAdjRule(){return!(this.branch.brCode&&this.editedCasefile&&this.editedCasefile.adjuster)},computedDateFormattedMomentjs(){return this.date?V()(this.date).format("DD/MM/YY"):""},assignAdjDisabled(){return!("BRAC"==this.caseState.casefile.fileStatus&&this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK"))},sortedBranches(){return[...this.branches].map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedAdjustersByBranch(){return e=>this.adjusters.filter(t=>Array.isArray(t.branches)&&t.branches.some(t=>t.brCode===e)).map(e=>({...e,username:e.username?e.username.trim().toUpperCase():""})).sort((e,t)=>e.username.localeCompare(t.username))}},watch:{assignAdj(e){e||this.closeAdj()}},methods:{currentUserBranch(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(e=>e.id===this.caseState.casefile.branch)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findAdjEmail(e){const t=this.adjusters.filter(t=>t.id===e);return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},filterAdjByBranch(e){return this.adjusters.filter(t=>t.branches.some(t=>t.brCode===e))},assignAdj(){if(this.editedCasefile=JSON.parse(JSON.stringify(this.caseState.casefile)),this.caseState.casefile.branch){const e=this.branches.find(e=>e.id===this.caseState.casefile.branch);this.branch=e?{name:e.name,brCode:e.brCode}:{name:"",brCode:""}}else this.branch={name:"",brCode:""};this.dialogAdj=!0},saveAdjuster(){const e={...this.editedCasefile,fileStatus:"ADAC",dateOfAdj:V()().format(),assignAdjBy:this.$store.state.auth.user.id};G["a"].update(this.caseState.casefile.id,e).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.caseState.casefile=e,this.closeAdj()}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{const t=e.adjuster;var a={id:e.id,refType:this.filterDept(e.refType)[0].description,refTypeCode:this.filterDept(e.refType)[0].name,subRefType:this.filterSubDept(e.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(e.subRefType)[0].subCode,branch:this.filterBranchName(e.branch),branchCode:this.filterBranches(e.branch)[0].brCode,insurer:this.filterIns(e.insurer)[0].name,vehicleNo:e.vehicleNo,recipient:this.findAdjEmail(t),createdBy:this.$store.state.auth.user.id};ke["a"].assignAdj(a).then(e=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.dataEmail=""}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeAdj()},closeAdj(){this.dialogAdj=!1,this.editedCasefile=null,this.branch={name:"",brCode:""},this.$nextTick(()=>{})}}},tt=et,at=Object(q["a"])(tt,Ze,Qe,!1,null,null,null),st=at.exports,it=a("fde1"),rt=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t("span",e._g({},a),[t(v["a"],e._b({staticClass:"mx-1",attrs:{fab:"","x-small":"",color:"red lighten-2",dark:"",disabled:!e.isRealManager||e.isCaseCancelled},on:{click:e.showCancelCaseDialog}},"v-btn",i,!1),[t(s["a"],{attrs:{dark:""}},[e._v("mdi-file-document-remove-outline")])],1)],1)]}}])},[t("span",[e._v("Cancel Case")])]),t(F["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogCancelCase,callback:function(t){e.dialogCancelCase=t},expression:"dialogCancelCase"}},[t(b["a"],{staticClass:"text-center"},[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[e._v("CANCEL ASSIGNMENT?")]),t(_["b"],{staticClass:"mt-3 pa-0"},[e._v(" CASEFILE NUMBER: AA"),e._l(e.filterDept(e.caseState.casefile.refType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.name)),e._l(e.filtersubRefType(e.caseState.casefile.subRefType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.subCode))])}))],2)})),e._v("/"+e._s(e.caseState.casefile.id)+"/"+e._s(e.yearOnly(e.caseState.casefile.createdAt))),e._l(e.filterBranches(e.caseState.casefile.branch),(function(a){return t("span",{key:a.id},[e._v("/"+e._s(a.brCode)+" ")])}))],2),t(D["a"],{attrs:{cols:"12"}},[t(ye["a"],{staticClass:"subtitle-1",attrs:{solo:"",dense:"",placeholder:"Reason"},model:{value:e.commentData.comment,callback:function(t){e.$set(e.commentData,"comment",t)},expression:"commentData.comment"}})],1),t(P["a"]),t(_["a"],[t(re["a"]),t(v["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:e.closeCancelCase}},[e._v("No")]),t(v["a"],{staticClass:"error",attrs:{small:"",tile:"",disabled:e.isComment},on:{click:e.cancelCaseConfirm}},[e._v("Yes")]),t(re["a"])],1)],1)],1)],1)},lt=[],nt=a("e4ba"),ct={name:"cancelCase",props:{approvingManager:Boolean,casefile:Object,refType:Array,subRefTypes:Array,insurer:Array,branches:Array,management:Boolean},components:{},data(){return{dialogCancelCase:!1,commentData:{id:null,caseId:null,comment:"",createdBy:""}}},computed:{isComment(){return!this.commentData.comment},isRealManager(){return this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")},isCaseCancelled(){return"CANC"===this.caseState.casefile.fileStatus||"CLO"===this.caseState.casefile.fileStatus},...Object(K["c"])(["caseState"])},watch:{cancelCase(e){e||this.closeCancelCase()}},methods:{moment:function(e){return V()(e)},yearOnly(e){return V()(e).format("YY")},filterDept(e){return this.refType.filter(t=>t.id===e)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},showCancelCaseDialog(){this.dialogCancelCase=!0},cancelCase(){this.dialogCancelCase=!0},cancelCaseConfirm(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="CANC",this.caseState.casefile.dateOfCancel=V()().format(),this.caseState.casefile.cancelBy=this.$store.state.auth.user.id).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)});var e={caseId:this.caseState.casefile.id,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};this.commentData.comment&&setTimeout(()=>{nt["a"].create(e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e||toString()})})},2500),this.closeCancelCase()},closeCancelCase(){this.dialogCancelCase=!1,this.$nextTick(()=>{})}}},ot=ct,dt=Object(q["a"])(ot,rt,lt,!1,null,null,null),ht=dt.exports,mt=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"primary mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.closeDisabled},on:{click:function(t){return e.completeClose()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-check-all")]),t("span",{staticClass:"action-text"},[e._v("CLOSE CASE")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("CLOSE CASE")])]),t(F["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogCompleteClose,callback:function(t){e.dialogCompleteClose=t},expression:"dialogCompleteClose"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("CLOSE CASE")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(_["c"],[e._v("Closing case")]),t(P["a"]),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",disabled:e.isFileButtonDisabled,small:""},on:{click:e.compCloseSubmit}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},ut=[],ft={name:"dispatch",props:["management"],components:{},data(){return{dialogCompleteClose:!1}},computed:{closeDisabled(){return!("DISP"==this.caseState.casefile.fileStatus&&this.management)},...Object(K["c"])(["caseState"]),isFileButtonDisabled(){return!this.management}},watch:{completeClose(e){e||this.closeDialog()}},methods:{completeClose(){this.dialogCompleteClose=!0},compCloseSubmit(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="CLO",this.caseState.casefile.dateClosed=V()().format(),this.caseState.casefile.closedBy=this.$store.state.auth.user.id).then(e=>{this.closeDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeDialog()},closeDialog(){this.dialogCompleteClose=!1,this.$nextTick(()=>{})}}},pt=ft,Ct=Object(q["a"])(pt,mt,ut,!1,null,null,null),gt=Ct.exports,vt=function(){var e=this,t=e._self._c;return t("div",[t(b["a"],{attrs:{flat:"",id:"comments"}},[t(_["c"],{staticClass:"pb-0"},[e._v("COMMENTS")]),t(P["a"]),t(F["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(b["a"],[t(_["c"],{staticClass:"text-h5"},[e._v("Are you sure you want to delete the comment?")]),t(_["a"],[t(re["a"]),t(v["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),t(v["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),t(re["a"])],1)],1)],1),t("div",{staticClass:"d-flex ml-4"},[t("p",[e._v("Comment ("+e._s(e.filterComment(e.comments).length)+")")])]),e._l(e.filterComment(e.comments),(function(a){return t("div",{key:a.id},[t("div",{staticClass:"d-flex mt-2 ml-4"},[t("p",[e._v(e._s(a.comment))])]),t("div",{staticClass:"d-flex caption ml-4 mt-0"},[e._l(e.filterUser(a.createdBy),(function(a){return t("td",{key:a.id,staticClass:"text-left"},[t("strong",[e._v(" "+e._s(a.email))]),e._v(" • ")])})),t("td",[e._v(e._s(e.formatDate(a.createdAt)))]),t("td",[e.management?t(v["a"],{staticClass:"ml-2",attrs:{tile:"","x-small":"",dark:"",color:"red",plain:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v("Delete")]):e._e()],1)],2),t("div",{staticClass:"d-flex ml-4"}),t(P["a"])],1)})),t("div",{staticClass:"d-flex ml-4"},[t(_["b"],{staticClass:"font-weight-black"},[e._v("Leave a comment")])],1),t("div",{staticClass:"d-flex ml-4"},[t(ye["a"],{attrs:{clearable:"",counter:"","auto-grow":"",solo:"",required:"",placeholder:"type in your comment","background-color":"grey lighten-5"},model:{value:e.editedItem.comment,callback:function(t){e.$set(e.editedItem,"comment",t)},expression:"editedItem.comment"}})],1),t(v["a"],{staticClass:"primary d-flex ml-4",attrs:{tile:"","x-small":"",disabled:e.isAddButtonDisabled},on:{click:e.save}},[e._v("Submit")])],2)],1)},bt=[],_t=a("9df5"),St={name:"comments",props:{casefile:{type:Object,required:!0},preloadedComments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},data(){return{dialogDelete:!1,members:[],management:!1,defaultItem:{id:null,caseId:null,comment:"",createdBy:""},editedIndex:-1,editedItem:{id:null,caseId:null,comment:"",createdBy:""},comments:this.preloadedComments}},computed:{isAddButtonDisabled(){return!this.editedItem.comment}},watch:{dialogDelete(e){e||this.closeDelete()},preloadedComments:{immediate:!0,handler(e){e.length>0&&(this.comments=e)}}},methods:{formatDate:function(e){return V()(e).format("DD/MM/YYYY, h:mm:ss a")},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},filterComment(){return this.comments.filter(e=>e.caseId===this.casefile.id)},filterUser(e){return this.members.filter(t=>t.id===e)},retrieveComments(){nt["a"].getAll().then(e=>{this.comments=e.data.filter(e=>e.caseId===this.casefile.id)}).catch(e=>{console.log(e),this.comments=[]})},retrieveUser(){_t["a"].getAll().then(e=>{this.members=e.data}).catch(e=>{console.log(e)})},refreshList(){this.retrieveComments()},deleteItem(e){this.editedIndex=this.comments.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm(){nt["a"].delete(this.editedItem.id).then(e=>{this.comments=this.comments.filter(e=>e.id!==this.editedItem.id),this.$emit("comment-deleted",this.editedItem.id),this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)}),this.closeDelete()},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1)nt["a"].update(this.editedItem.id,this.editedItem).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)});else{var e={caseId:this.casefile.id,comment:this.editedItem.comment,createdBy:this.$store.state.auth.user.id};nt["a"].create(e).then(e=>{const t=e.data;this.comments=[...this.comments,t],this.editedItem.comment="",this.$emit("comment-added",t),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})})}}},mounted(){this.retrieveComments(),this.checkManagement(),this.retrieveUser()}},Dt=St,yt=Object(q["a"])(Dt,vt,bt,!1,null,null,null),xt=yt.exports,At=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.completeEditingDisabled},on:{click:function(t){return e.completeEdi()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-alarm-check")]),t("span",{staticClass:"action-text"},[e._v("COMPLETE EDITING")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("COMPLETE EDITING")])]),t(F["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogCompleteEdi,callback:function(t){e.dialogCompleteEdi=t},expression:"dialogCompleteEdi"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("COMPLETE EDITING")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(_["c"],[e._v("I have completed editing the case report")]),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeCompleteEdiDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:e.compEditing}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},kt=[],Tt={name:"compEditing",props:["branches","insurer","refType","subRefTypes","clerks","members"],components:{},data(){return{dialogCompleteEdi:!1}},computed:{completeEditingDisabled(){return!("EDI"==this.caseState.casefile.fileStatus&&this.caseState.casefile.editor==this.$store.state.auth.user.id)},...Object(K["c"])(["caseState"])},watch:{completeEdi(e){e||this.closeCompleteEdiDialog()}},methods:{filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},findBrcode(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t.map(e=>e.brCode)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterManagerkByBranch(e){const t=this.clerks.filter(t=>t.branches.some(t=>t.brCode==e)&&t.roles.some(e=>"manager"===e.roleCode||"branchmanager"===e.roleCode)&&t.active),a=t.map(e=>e.email);return a},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},completeEdi(){this.dialogCompleteEdi=!0},compEditing(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PAPP",this.caseState.casefile.dateEndEdi=V()().format()).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).then(()=>{const e=this.caseState.casefile.branch,t=this.filterManagerkByBranch(this.findBrcode(e));var a={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:t,createdBy:this.$store.state.auth.user.id};ke["a"].managerApproval(a).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}),this.dataEmail=""}).catch(e=>{console.log(e)}),this.closeCompleteEdiDialog()},closeCompleteEdiDialog(){this.dialogCompleteEdi=!1,this.$nextTick(()=>{})}}},Et=Tt,It=Object(q["a"])(Et,At,kt,!1,null,null,null),Rt=It.exports,wt=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.completeFormattingDisabled},on:{click:function(t){return e.completeFormatting()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-format-align-top")]),t("span",{staticClass:"action-text"},[e._v("COMPLETE FORMATTING")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("COMPLETE FORMATTING")])]),t(F["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogCompleteFormatting,callback:function(t){e.dialogCompleteFormatting=t},expression:"dialogCompleteFormatting"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("COMPLETE FORMATTING")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(_["c"],[e._v("I have completed formatting the case report.")]),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeCompleteFormattingDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:e.compFormatting}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},Nt=[],Ot={name:"compFormatting",props:[""],components:{},data(){return{dialogCompleteFormatting:!1}},computed:{completeFormattingDisabled(){return!("FOIN"==this.caseState.casefile.fileStatus&&this.caseState.casefile.clerkInCharge==this.$store.state.auth.user.id)},...Object(K["c"])(["caseState"])},watch:{completeFormatting(e){e||this.closeCompleteFormattingDialog()}},methods:{completeFormatting(){this.dialogCompleteFormatting=!0},compFormatting(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="INFI",this.caseState.casefile.dateEndFormatting=V()().format()).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}),this.closeCompleteFormattingDialog()},closeCompleteFormattingDialog(){this.dialogCompleteFormatting=!1,this.$nextTick(()=>{})}}},Bt=Ot,jt=Object(q["a"])(Bt,wt,Nt,!1,null,null,null),$t=jt.exports,Ft=a("4bd4"),Pt=a("a797"),Lt=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"d-flex flex-column"},[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:!1},on:{click:e.openDialog}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-account-arrow-right-outline")]),t("span",{staticClass:"action-text"},[e._v("COMPLETE INVESTIGATION")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v(e._s(e.tooltipMessage))])])],1),t(F["a"],{attrs:{"max-width":"600px",persistent:""},model:{value:e.dialogCompleteInv,callback:function(t){e.dialogCompleteInv=t},expression:"dialogCompleteInv"}},[e.editedCasefile?[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("Complete Investigation & Submit Claims")])]),t(_["b"],[t(Ft["a"],{ref:"claimForm",attrs:{"lazy-validation":""}},[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t("div",{staticClass:"mb-2 font-weight-bold"},[e._v(" Please enter your claim amounts (MYR). Use "),t("strong",[e._v("0.00")]),e._v(" if not applicable. ")])]),e._l(e.claimFields,(function(a){return t(D["a"],{key:a.key,attrs:{cols:"12",sm:"6"}},[t(De["a"],{attrs:{label:a.label,type:"number",min:"0",step:"0.01",prefix:"MYR",rules:[e=>null!==e&&""!==e&&!isNaN(e)&&e>=0||"Enter a valid amount"],value:e.formatAmount(e.claim[a.key]),"persistent-hint":"",dense:"",disabled:e.isSubmitting},model:{value:e.claim[a.key],callback:function(t){e.$set(e.claim,a.key,e._n(t))},expression:"claim[field.key]"}})],1)})),t(D["a"],{attrs:{cols:"12"}},[t(P["a"],{staticClass:"my-2"})],1),t(D["a"],{attrs:{cols:"12"}},[t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:"",disabled:e.isSubmitting},on:{click:e.closeCompleteInvDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:!e.isFormValid||e.isSubmitting},on:{click:e.submitClaims}},[e._v(" Submit ")])],1)],2),t(Pt["a"],{attrs:{value:e.isSubmitting,opacity:"0.7"}},[t("div",{staticClass:"d-flex flex-column align-center justify-center"},[t(x["a"],{attrs:{indeterminate:"",color:"primary",size:"40"}}),t("div",{staticClass:"mt-3 font-weight-bold"},[e._v(" Submitting, please wait... ")])],1)])],1)],1)],1)],1)]:e._e()],2),t(F["a"],{attrs:{"max-width":"400px"},model:{value:e.confirmZeroDialog,callback:function(t){e.confirmZeroDialog=t},expression:"confirmZeroDialog"}},[t(b["a"],[t(_["c"],{staticClass:"headline"},[e._v("Confirm Submission")]),t(_["b"],[e._v(" You are submitting "),t("strong",[e._v("0.00")]),e._v(" for all claim categories."),t("br"),e._v(" Are you sure you want to proceed? ")]),t(_["a"],[t(re["a"]),t(v["a"],{attrs:{color:"error",text:""},on:{click:function(t){e.confirmZeroDialog=!1}}},[e._v("Cancel")]),t(v["a"],{attrs:{color:"success",text:""},on:{click:function(t){return e.submitClaims(!0)}}},[e._v("Yes, Submit")])],1)],1)],1)],1)},Mt=[],Ut=(a("d866"),a("7d54"),a("20dd")),Ht={name:"compInvestigation",props:["claims","branches","insurer","refType","subRefTypes","clerks","members","documents"],data(){return{dialogCompleteInv:!1,confirmZeroDialog:!1,editedCasefile:null,isSubmitting:!1,claim:{travMileage:0,additional:0,sdAndStamps:0,medicalReport:0,policeDoc:0,jpjDoc:0,misc:0,typing:0},claimFields:[{key:"travMileage",label:"Travelling / Mileage"},{key:"additional",label:"Additional"},{key:"sdAndStamps",label:"SD & Stamps"},{key:"medicalReport",label:"Medical Report"},{key:"policeDoc",label:"Police Document"},{key:"jpjDoc",label:"JPJ Document"},{key:"misc",label:"Miscellaneous"},{key:"typing",label:"Typing"}]}},computed:{...Object(K["c"])(["caseState"]),tooltipMessage(){return"INVE"!==this.caseState.casefile.fileStatus?"Case is not in investigation stage":this.caseState.casefile.adjuster!==this.$store.state.auth.user.id?"You are not assigned as the adjuster":"COMPLETE INVESTIGATION"},isFormValid(){return this.claimFields.every(e=>null!==this.claim[e.key]&&""!==this.claim[e.key]&&!isNaN(this.claim[e.key])&&Number(this.claim[e.key])>=0)},allClaimsZero(){return this.claimFields.every(e=>0===Number(this.claim[e.key]))}},methods:{formatAmount(e){return Number(e).toFixed(2)},openDialog(){this.editedCasefile=JSON.parse(JSON.stringify(this.caseState.casefile)),this.claimFields.forEach(e=>{this.claim[e.key]=0}),this.dialogCompleteInv=!0},closeCompleteInvDialog(){this.dialogCompleteInv=!1,this.editedCasefile=null},submitClaims(e=!1){if(!this.editedCasefile)return void this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:"Casefile data is missing. Please try again."});if(this.allClaimsZero&&!e)return void(this.confirmZeroDialog=!0);this.isSubmitting=!0;const t={...this.editedCasefile,fileStatus:"PEDI",dateEndInv:V()().format()};G["a"].update(this.editedCasefile.id,t).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString(),timeout:2e3})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{var e={caseId:this.editedCasefile.id,adjId:this.$store.state.auth.user.id,travMileage:this.formatAmount(this.claim.travMileage),additional:this.formatAmount(this.claim.additional),sdAndStamps:this.formatAmount(this.claim.sdAndStamps),medicalReport:this.formatAmount(this.claim.medicalReport),policeDoc:this.formatAmount(this.claim.policeDoc),jpjDoc:this.formatAmount(this.claim.jpjDoc),misc:this.formatAmount(this.claim.misc),typing:this.formatAmount(this.claim.typing)};Ut["a"].create(e).then(e=>{this.claims.id=e.data.id,this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString(),timeout:4e3})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{const e=this.caseState.casefile.branch,t=this.filterManagerkByBranch(this.findBrcode(e)),a=this.caseState.casefile.refType,s=this.findUserEmail(this.filterPicID(a));var i={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,vehicleNo:this.caseState.casefile.vehicleNo.toLowerCase().replace(/\s/g,""),recipient:t+","+s,createdBy:this.$store.state.auth.user.id};ke["a"].assignEditor(i).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString(),timeout:6e3})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{this.confirmZeroDialog=!1,this.isSubmitting=!1,this.closeCompleteInvDialog(),this.$emit("refresh-casefile")}).catch(e=>{console.log(e),this.confirmZeroDialog=!1,this.isSubmitting=!1,this.closeCompleteInvDialog()})}).catch(e=>{console.log(e),this.confirmZeroDialog=!1,this.isSubmitting=!1,this.closeCompleteInvDialog()})})},filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},findBrcode(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t.map(e=>e.brCode)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterManagerkByBranch(e){const t=this.clerks.filter(t=>t.branches.some(t=>t.brCode==e)&&t.roles.some(e=>"manager"===e.roleCode||"branchmanager"===e.roleCode)&&t.active),a=t.map(e=>e.email);return a},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},findUserEmail(e){const t=this.members.filter(t=>t.id===e&&t.active);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},moment:function(e){return V()(e)},filterHandler(e){return this.handlers.filter(t=>t.id===e)}}},Gt=Ht,Yt=(a("eac8"),Object(q["a"])(Gt,Lt,Mt,!1,null,"2d4e6530",null)),Vt=Yt.exports,Kt=a("cb28"),Jt=a("4e82"),zt=a("3206"),qt=Object(o["a"])(Object(Jt["a"])("expansionPanels","v-expansion-panel","v-expansion-panels"),Object(zt["b"])("expansionPanel",!0)).extend({name:"v-expansion-panel",props:{disabled:Boolean,readonly:Boolean},data(){return{content:null,header:null,nextIsActive:!1}},computed:{classes(){return{"v-expansion-panel--active":this.isActive,"v-expansion-panel--next-active":this.nextIsActive,"v-expansion-panel--disabled":this.isDisabled,...this.groupClasses}},isDisabled(){return this.expansionPanels.disabled||this.disabled},isReadonly(){return this.expansionPanels.readonly||this.readonly}},methods:{registerContent(e){this.content=e},unregisterContent(){this.content=null},registerHeader(e){this.header=e,e.$on("click",this.onClick)},unregisterHeader(){this.header=null},onClick(e){e.detail&&this.header.$el.blur(),this.$emit("click",e),this.isReadonly||this.isDisabled||this.toggle()},toggle(){this.$nextTick(()=>this.$emit("change"))}},render(e){return e("div",{staticClass:"v-expansion-panel",class:this.classes,attrs:{"aria-expanded":String(this.isActive)}},Object(d["s"])(this))}}),Wt=a("9d65");const Xt=Object(o["a"])(Wt["a"],i["a"],Object(zt["a"])("expansionPanel","v-expansion-panel-content","v-expansion-panel"));var Zt=Xt.extend().extend({name:"v-expansion-panel-content",data:()=>({isActive:!1}),computed:{parentIsActive(){return this.expansionPanel.isActive}},watch:{parentIsActive:{immediate:!0,handler(e,t){e&&(this.isBooted=!0),null==t?this.isActive=e:this.$nextTick(()=>this.isActive=e)}}},created(){this.expansionPanel.registerContent(this)},beforeDestroy(){this.expansionPanel.unregisterContent()},render(e){return e(p["a"],this.showLazyContent(()=>[e("div",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-content",directives:[{name:"show",value:this.isActive}]}),[e("div",{class:"v-expansion-panel-content__wrap"},Object(d["s"])(this,"default",{open:this.isActive}))])]))}}),Qt=a("5607");const ea=Object(o["a"])(i["a"],Object(zt["a"])("expansionPanel","v-expansion-panel-header","v-expansion-panel"));var ta=ea.extend().extend({name:"v-expansion-panel-header",directives:{ripple:Qt["a"]},props:{disableIconRotate:Boolean,expandIcon:{type:String,default:"$expand"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1}},data:()=>({hasMousedown:!1}),computed:{classes(){return{"v-expansion-panel-header--active":this.isActive,"v-expansion-panel-header--mousedown":this.hasMousedown}},isActive(){return this.expansionPanel.isActive},isDisabled(){return this.expansionPanel.isDisabled},isReadonly(){return this.expansionPanel.isReadonly}},created(){this.expansionPanel.registerHeader(this)},beforeDestroy(){this.expansionPanel.unregisterHeader()},methods:{onClick(e){this.$emit("click",e)},genIcon(){const e=Object(d["s"])(this,"actions",{open:this.isActive})||[this.$createElement(f["a"],this.expandIcon)];return this.$createElement(p["d"],[this.$createElement("div",{staticClass:"v-expansion-panel-header__icon",class:{"v-expansion-panel-header__icon--disable-rotate":this.disableIconRotate},directives:[{name:"show",value:!this.isDisabled}]},e)])}},render(e){return e("button",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-header",class:this.classes,attrs:{tabindex:this.isDisabled?-1:null,type:"button","aria-expanded":this.isActive},directives:[{name:"ripple",value:this.ripple}],on:{...this.$listeners,click:this.onClick,mousedown:()=>this.hasMousedown=!0,mouseup:()=>this.hasMousedown=!1}}),[Object(d["s"])(this,"default",{open:this.isActive},!0),this.hideActions||this.genIcon()])}}),aa=(a("210b"),a("604c")),sa=a("d9bd"),ia=aa["a"].extend({name:"v-expansion-panels",provide(){return{expansionPanels:this}},props:{accordion:Boolean,disabled:Boolean,flat:Boolean,hover:Boolean,focusable:Boolean,inset:Boolean,popout:Boolean,readonly:Boolean,tile:Boolean},computed:{classes(){return{...aa["a"].options.computed.classes.call(this),"v-expansion-panels":!0,"v-expansion-panels--accordion":this.accordion,"v-expansion-panels--flat":this.flat,"v-expansion-panels--hover":this.hover,"v-expansion-panels--focusable":this.focusable,"v-expansion-panels--inset":this.inset,"v-expansion-panels--popout":this.popout,"v-expansion-panels--tile":this.tile}}},created(){this.$attrs.hasOwnProperty("expand")&&Object(sa["a"])("expand","multiple",this),Array.isArray(this.value)&&this.value.length>0&&"boolean"===typeof this.value[0]&&Object(sa["a"])(':value="[true, false, true]"',':value="[0, 2]"',this)},methods:{updateItem(e,t){const a=this.getValue(e,t),s=this.getValue(e,t+1);e.isActive=this.toggleMethod(a),e.nextIsActive=this.toggleMethod(s)}}}),ra=a("8860"),la=a("da13"),na=a("5d23"),ca=a("34c3"),oa=function(){var e,t,a,i,r,l,n,c,o,d,h,m,u,f,p,C,g,S=this,y=S._self._c;return y("div",{staticClass:"detail-tab"},[y(A["a"],{staticClass:"mb-6"},[y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card",class:S.getStatusColor},[y(_["b"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[S._v("mdi-file-document-outline")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[S._v("Status")]),y("div",{staticClass:"text-h6 white--text"},[S._v(" "+S._s((null===(e=S.filterStages(S.caseState.casefile.fileStatus)[0])||void 0===e?void 0:e.name)||"N/A")+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card primary"},[y(_["b"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[S._v("mdi-office-building")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[S._v("Branch")]),y("div",{staticClass:"text-h6 white--text"},[S._v(" "+S._s(S.filterBranchName(S.caseState.casefile.branch))+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card secondary"},[y(_["b"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[S._v("mdi-account-tie")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[S._v("Adjuster")]),y("div",{staticClass:"text-h6 white--text"},[S._v(" "+S._s((null===(t=S.filterAdj(S.caseState.casefile.adjuster)[0])||void 0===t?void 0:t.username)||"To be assigned")+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card info"},[y(_["b"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[S._v("mdi-pencil")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[S._v("Editor")]),y("div",{staticClass:"text-h6 white--text"},[S._v(" "+S._s((null===(a=S.filterEditor(S.caseState.casefile.editor)[0])||void 0===a?void 0:a.username)||"To be assigned")+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card success"},[y(_["b"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[S._v("mdi-check-decagram")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[S._v("Approver")]),y("div",{staticClass:"text-h6 white--text"},[S._v(" "+S._s((null===(i=S.filterApprover(S.caseState.casefile.approvedBy)[0])||void 0===i?void 0:i.username)||"To be assigned")+" ")])])],1)],1)],1),y(D["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[y(b["a"],{staticClass:"status-card deep-purple"},[y(_["b"],{staticClass:"d-flex align-center"},[y(s["a"],{staticClass:"mr-4",attrs:{size:"48",color:"white"}},[S._v("mdi-format-align-justify")]),y("div",[y("div",{staticClass:"text-overline mb-1"},[S._v("Clerk")]),y("div",{staticClass:"text-h6 white--text"},[S._v(" "+S._s((null===(r=S.filterClerk(S.caseState.casefile.clerkInCharge)[0])||void 0===r?void 0:r.username)||"To be assigned")+" ")])])],1)],1)],1)],1),y(ia,{staticClass:"detail-panels",attrs:{accordion:"",flat:"",hover:"",multiple:""}},[y(qt,[y(ta,[y("div",{staticClass:"d-flex align-center justify-space-between w-100"},[y(s["a"],{staticClass:"mr-2",attrs:{color:"primary",size:"24"}},[S._v("mdi-file-document-outline")]),y("span",{staticClass:"panel-title"},[S._v("CASE INFORMATION")])],1)]),y(Zt,[y(A["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ra["a"],{attrs:{dense:""}},[y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-car")])],1),y(na["a"],[y(na["b"],[S._v("Vehicle No.")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(null===(l=S.caseState.casefile.vehicleNo)||void 0===l?void 0:l.toUpperCase())+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-file-document")])],1),y(na["a"],[y(na["b"],[S._v("Our Ref.")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" AA/"+S._s((null===(n=S.filterDept(S.caseState.casefile.refType)[0])||void 0===n?void 0:n.name)||"")+S._s(S.filterSubDept(S.caseState.casefile.subRefType)[0]?"/"+S.filterSubDept(S.caseState.casefile.subRefType)[0].subCode:"")+"/"+S._s(S.caseState.casefile.id)+"/"+S._s(S.yearOnly(S.caseState.casefile.createdAt))+S._s(null!==(c=S.filterBranches(S.caseState.casefile.branch)[0])&&void 0!==c&&c.brCode?"/"+S.filterBranches(S.caseState.casefile.branch)[0].brCode:"")+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-calendar")])],1),y(na["a"],[y(na["b"],[S._v("Date of Loss")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.formatDate(S.caseState.casefile.dateOfLoss))+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-map-marker")])],1),y(na["a"],[y(na["b"],[S._v("Place of Loss")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.caseState.casefile.placeOfLoss)+", "+S._s(null===(o=S.filterStates(S.caseState.casefile.stateOfLoss)[0])||void 0===o?void 0:o.name)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ra["a"],{attrs:{dense:""}},[y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-file-document-outline")])],1),y(na["a"],[y(na["b"],[S._v("Claim Type")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s((null===(d=S.filterDept(S.caseState.casefile.refType)[0])||void 0===d?void 0:d.name)||"N/A")+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-calendar-check")])],1),y(na["a"],[y(na["b"],[S._v("Assignment Date")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.formatDate(S.caseState.casefile.dateOfAssign))+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-calendar-clock")])],1),y(na["a"],[y(na["b"],[S._v("Acknowledgement Date")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.formatDate(S.caseState.casefile.createdAt))+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-account")])],1),y(na["a"],[y(na["b"],[S._v("Case Creator")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s((null===(h=S.filterUser(S.caseState.casefile.createdBy)[0])||void 0===h?void 0:h.username)||"N/A")+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-domain")])],1),y(na["a"],[y(na["b"],[S._v("Creator Branch")]),y(na["c"],{staticClass:"font-weight-medium"},S._l(S.filterUser(S.caseState.casefile.createdBy),(function(e){return y("span",{key:e.id},S._l(e.branches,(function(e,t){return y("span",{key:t},[S._v(S._s(e.name))])})),0)})),0)],1)],1)],1)],1)],1)],1)],1),y(qt,[y(ta,[y("div",{staticClass:"d-flex align-center justify-space-between w-100"},[y(s["a"],{staticClass:"mr-2",attrs:{color:"primary",size:"24"}},[S._v("mdi-account")]),y("span",{staticClass:"panel-title"},[S._v("INSURED DETAILS")])],1)]),y(Zt,[y(A["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ra["a"],{attrs:{dense:""}},[y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-account")])],1),y(na["a"],[y(na["b"],[S._v("Insured Name")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.caseState.casefile.insuredName)+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-card-account-details")])],1),y(na["a"],[y(na["b"],[S._v("NRIC")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.caseState.casefile.insuredIC)+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-phone")])],1),y(na["a"],[y(na["b"],[S._v("Tel")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.caseState.casefile.insuredTel)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ra["a"],{attrs:{dense:""}},[y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-email")])],1),y(na["a"],[y(na["b"],[S._v("Email")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.caseState.casefile.insuredEmail)+" ")])],1)],1)],1)],1)],1)],1)],1),y(qt,[y(ta,[y("div",{staticClass:"d-flex align-center justify-space-between w-100"},[y(s["a"],{staticClass:"mr-2",attrs:{color:"primary",size:"24"}},[S._v("mdi-car-back")]),y("span",{staticClass:"panel-title"},[S._v("INSURED DRIVER DETAILS")])],1)]),y(Zt,[y(A["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ra["a"],{attrs:{dense:""}},[y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-account")])],1),y(na["a"],[y(na["b"],[S._v("Driver Name")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.caseState.casefile.insuredDriverName)+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-card-account-details")])],1),y(na["a"],[y(na["b"],[S._v("NRIC")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.caseState.casefile.insuredDriverIc)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ra["a"],{attrs:{dense:""}},[y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-phone")])],1),y(na["a"],[y(na["b"],[S._v("Tel")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.caseState.casefile.insuredDriverTel)+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-email")])],1),y(na["a"],[y(na["b"],[S._v("Email")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.caseState.casefile.insuredDriverEmail)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12"}},[y(P["a"],{staticClass:"my-4"}),y("div",{staticClass:"text-subtitle-2 mb-3"},[S._v("Police Report Information")]),y(A["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"4"}},[y(ra["a"],{attrs:{dense:""}},[y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-file-document-outline")])],1),y(na["a"],[y(na["b"],[S._v("Report No.")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.caseState.casefile.policeReportNo)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"4"}},[y(ra["a"],{attrs:{dense:""}},[y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-calendar")])],1),y(na["a"],[y(na["b"],[S._v("Date")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.formatDate(S.caseState.casefile.policeReportDate))+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"4"}},[y(ra["a"],{attrs:{dense:""}},[y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-clock-outline")])],1),y(na["a"],[y(na["b"],[S._v("Time")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.formatTime(S.caseState.casefile.policeReportDate))+" ")])],1)],1)],1)],1)],1)],1)],1)],1)],1),y(qt,[y(ta,[y("div",{staticClass:"d-flex align-center justify-space-between w-100"},[y(s["a"],{staticClass:"mr-2",attrs:{color:"primary",size:"24"}},[S._v("mdi-shield-check")]),y("span",{staticClass:"panel-title"},[S._v("INSURER DETAILS")])],1)]),y(Zt,[y(A["a"],{attrs:{dense:""}},[y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ra["a"],{attrs:{dense:""}},[y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-office-building")])],1),y(na["a"],[y(na["b"],[S._v("Insurer")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(null===(m=S.filterIns(S.caseState.casefile.insurer)[0])||void 0===m?void 0:m.name)+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-numeric")])],1),y(na["a"],[y(na["b"],[S._v("Claim No.")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.caseState.casefile.claimNo)+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-file-document")])],1),y(na["a"],[y(na["b"],[S._v("Policy/Cover No")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.caseState.casefile.policyNo)+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-calendar-range")])],1),y(na["a"],[y(na["b"],[S._v("Coverage")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(S.formatDate(S.caseState.casefile.coverFrom))+" - "+S._s(S.formatDate(S.caseState.casefile.coverTo))+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12",md:"6"}},[y(ra["a"],{attrs:{dense:""}},[y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-account-tie")])],1),y(na["a"],[y(na["b"],[S._v("Claims Handler")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(null===(u=S.filterHandler(S.caseState.casefile.handler)[0])||void 0===u?void 0:u.name)+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-phone")])],1),y(na["a"],[y(na["b"],[S._v("Tel")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(null===(f=S.filterHandler(S.caseState.casefile.handler)[0])||void 0===f?void 0:f.offTel)+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-cellphone")])],1),y(na["a"],[y(na["b"],[S._v("Mobile")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(null===(p=S.filterHandler(S.caseState.casefile.handler)[0])||void 0===p?void 0:p.mobile)+" ")])],1)],1),y(la["a"],{attrs:{"two-line":""}},[y(ca["a"],[y(s["a"],[S._v("mdi-email")])],1),y(na["a"],[y(na["b"],[S._v("Email")]),y(na["c"],{staticClass:"font-weight-medium"},[S._v(" "+S._s(null===(C=S.filterHandler(S.caseState.casefile.handler)[0])||void 0===C?void 0:C.email)+" ")])],1)],1)],1)],1),y(D["a"],{attrs:{cols:"12"}},[y(P["a"],{staticClass:"my-4"}),y(la["a"],[y(ca["a"],{staticClass:"align-self-start mt-2"},[y(s["a"],[S._v("mdi-comment-text")])],1),y(na["a"],[y(na["b"],[S._v("Insurer's Remarks")]),y(na["c"],{staticClass:"font-weight-medium"},[y("div",{staticClass:"remarks-container"},[y("div",{class:["remarks-text",{"remarks-collapsed":!S.showFullRemarks}]},[S._v(" "+S._s(S.caseState.casefile.insComment)+" ")]),(null===(g=S.caseState.casefile.insComment)||void 0===g?void 0:g.length)>150?y(v["a"],{staticClass:"px-0 mt-1",attrs:{text:"",small:"",color:"primary"},on:{click:function(e){S.showFullRemarks=!S.showFullRemarks}}},[S._v(" "+S._s(S.showFullRemarks?"Show Less":"Show More")+" ")]):S._e()],1)])],1)],1)],1)],1)],1)],1)],1)],1)},da=[],ha={name:"detailTab",props:["adjusters","editors","clerks","branches","insurer","handlers","refType","subRefTypes","members","stages","states"],components:{},data(){return{showFullRemarks:!1}},computed:{...Object(K["c"])(["caseState"]),getStatusColor(){const e=this.caseState.casefile.fileStatus,t={NEW:"success",PEND:"warning",INVE:"info",COMP:"error"};return t[e]||"grey"}},watch:{},methods:{moment:function(e){return V()(e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},yearOnly(e){return V()(e).format("YY")},filterStages(e){return this.stages.filter(t=>t.stageCode===e)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterAdj(e){return this.adjusters.filter(t=>t.id===e)},filterEditor(e){return this.editors.filter(t=>t.id===e)},filterApprover(e){return this.members.filter(t=>t.id===e)},filterClerk(e){return this.clerks.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterStates(e){return this.states.filter(t=>t.id===e)},filterHandler(e){return this.handlers.filter(t=>t.id===e)},filterUser(e){return this.members.filter(t=>t.id===e)},formatDate:function(e){return e?V()(e).format("DD/MM/YYYY"):""},formatTime:function(e){return e?V()(e).format("h:mm:ss a"):""},dateDiff(e,t){let a=V()(e),s=V()(t),i=V.a.duration(s.diff(a));return Math.round(i.asDays())},refreshList(){},filterBranchName(e){if(!e)return"To be assigned";const t=this.branches.find(t=>t.id===e);return t?t.name:"Unknown Branch"}},mounted(){}},ma=ha,ua=(a("4adb"),Object(q["a"])(ma,oa,da,!1,null,"24cb662a",null)),fa=ua.exports,pa=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.dispatchDisabled},on:{click:function(t){return e.completeDispatch()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-truck")]),t("span",{staticClass:"action-text"},[e._v("DISPATCH")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("DISPATCH")])]),t(F["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogCompleteDispatch,callback:function(t){e.dialogCompleteDispatch=t},expression:"dialogCompleteDispatch"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("DISPATCH")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(_["c"],[e._v("This client requires physical report along with attachments.")]),t(P["a"]),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeDispatchDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",disabled:e.isFileButtonDisabled,small:""},on:{click:e.compDispatchSubmit}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},Ca=[],ga={name:"dispatch",props:["management"],components:{},data(){return{dialogCompleteDispatch:!1}},computed:{dispatchDisabled(){return!("DISP"==this.caseState.casefile.fileStatus&&this.management)},...Object(K["c"])(["caseState"]),isFileButtonDisabled(){return!this.management}},watch:{completeDispatch(e){e||this.closeDispatchDialog()}},methods:{completeDispatch(){this.dialogCompleteDispatch=!0},compDispatchSubmit(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PDISP",this.caseState.casefile.dateDispatch=V()().format(),this.caseState.casefile.dispatchBy=this.$store.state.auth.user.id).then(e=>{this.closeDispatchDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeDispatchDialog()},closeDispatchDialog(){this.dialogCompleteDispatch=!1,this.$nextTick(()=>{})}}},va=ga,ba=Object(q["a"])(va,pa,Ca,!1,null,null,null),_a=ba.exports,Sa=a("0798"),Da=a("8212"),ya=a("8e36"),xa=a("1f4f"),Aa=function(){var e=this,t=e._self._c;return t("div",[t(_["c"],{staticClass:"pb-0 text-h4 font-weight-bold",staticStyle:{"letter-spacing":"1px"}},[t(s["a"],{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-file-document-multiple")]),e._v(" DOCUMENTS ")],1),t(P["a"]),t(b["a"],{staticClass:"mt-3 pa-4 rounded-xl elevation-2",staticStyle:{background:"#f5f7fa"},attrs:{flat:"",id:"uploadedDocuments"}},[t(F["a"],{attrs:{"max-width":"420px",transition:"dialog-bottom-transition"},model:{value:e.dialogDeleteDoc,callback:function(t){e.dialogDeleteDoc=t},expression:"dialogDeleteDoc"}},[t(b["a"],{staticClass:"rounded-xl pa-4",staticStyle:{background:"#fff"}},[t(_["c"],{staticClass:"justify-center"},[t(Da["a"],{staticClass:"mb-2",attrs:{size:"48",color:"red lighten-4"}},[t(s["a"],{attrs:{color:"red darken-2",size:"32"}},[e._v("mdi-alert-circle-outline")])],1)],1),t(_["c"],{staticClass:"text-h5 font-weight-bold justify-center",staticStyle:{color:"#d32f2f"}},[e._v(" Confirm Delete ")]),t(_["b"],[t(A["a"],[t(D["a"],{staticClass:"d-flex align-center",attrs:{cols:"12"}},[t(s["a"],{staticClass:"mr-2",attrs:{color:"grey"}},[e._v("mdi-file")]),t("span",[t("strong",[e._v("File Name:")]),e._v(" "+e._s(e.editedItem.name))])],1),t(D["a"],{staticClass:"d-flex align-center",attrs:{cols:"12"}},[t(s["a"],{staticClass:"mr-2",attrs:{color:"grey"}},[e._v("mdi-tag")]),t("span",[t("strong",[e._v("File Type:")]),e._v(" "+e._s(e.editedItem.Type))])],1),t(D["a"],{staticClass:"d-flex align-center",attrs:{cols:"12"}},[t(s["a"],{staticClass:"mr-2",attrs:{color:"grey"}},[e._v("mdi-comment-text")]),t("span",[t("strong",[e._v("File Remark:")]),e._v(" "+e._s(e.editedItem.Remark))])],1)],1)],1),t(_["a"],{staticClass:"justify-center mt-2"},[t(v["a"],{staticClass:"rounded-pill px-6",attrs:{color:"grey lighten-2"},on:{click:e.closeDeleteDoc}},[t(s["a"],{attrs:{left:""}},[e._v("mdi-close")]),e._v(" Cancel ")],1),t(v["a"],{staticClass:"rounded-pill px-6 ml-2 white--text",attrs:{color:"red darken-2"},on:{click:e.deleteItemConfirm}},[t(s["a"],{attrs:{left:""}},[e._v("mdi-trash-can-outline")]),e._v(" Delete ")],1)],1)],1)],1),t(F["a"],{attrs:{"max-width":"540px",transition:"dialog-bottom-transition"},model:{value:e.dialogUploadDoc,callback:function(t){e.dialogUploadDoc=t},expression:"dialogUploadDoc"}},[t(b["a"],{staticClass:"rounded-xl pa-4",staticStyle:{background:"#fff"}},[t(_["c"],{staticClass:"justify-center"},[t(Da["a"],{attrs:{size:"48",color:"primary lighten-4"}},[t(s["a"],{attrs:{color:"primary",size:"32"}},[e._v("mdi-cloud-upload")])],1)],1),t(_["c"],{staticClass:"justify-center text-h5 font-weight-bold",staticStyle:{color:"#1976d2"}},[e._v(" "+e._s(e.dialogTitle)+" ")]),t(_["b"],[t("div",{staticClass:"upload-drop-area",on:{dragover:function(e){e.preventDefault()},drop:function(t){return t.preventDefault(),e.selectFile(t.dataTransfer.files[0])},click:e.triggerFileInput}},[t(s["a"],{attrs:{color:"primary",size:"48"}},[e._v("mdi-cloud-upload")]),e.currentFile?t("div",{staticClass:"mt-2 d-flex align-center justify-center"},[t(s["a"],{attrs:{color:"success",size:"32"}},[e._v("mdi-file-check")]),t("span",{staticClass:"ml-2 font-weight-medium"},[e._v(e._s(e.currentFile.name))])],1):t("div",{staticClass:"mt-2",staticStyle:{color:"#1976d2"}},[t("strong",[e._v("Drag & Drop or Click to Select Document")])]),t("input",{key:e.fileInputKey,ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*,.pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"},on:{change:e.onFileInputChange}})],1),e.currentFile&&e.currentFile.size>=4e6?t(Sa["a"],{staticClass:"mt-2",attrs:{type:"error",dense:""}},[e._v(" File size should be less than 4 MB! ")]):e._e(),t(Se["a"],{staticClass:"mt-4 mb-2",attrs:{suffix:"required",placeholder:"Select A Type",items:e.selectTypes,clearable:""},model:{value:e.uploads.Type,callback:function(t){e.$set(e.uploads,"Type",t)},expression:"uploads.Type"}}),t(De["a"],{staticClass:"mb-2",attrs:{label:"Document Remark",clearable:""},model:{value:e.uploads.Remark,callback:function(t){e.$set(e.uploads,"Remark",t)},expression:"uploads.Remark"}}),e.progress>0&&e.progress<100?t(ya["a"],{staticClass:"mb-2",attrs:{value:e.progress,color:"primary",height:"6",rounded:""}}):e._e(),t("div",{staticClass:"d-flex justify-end"},[t(v["a"],{staticClass:"rounded-pill",attrs:{small:"",outlined:"",color:"grey"},on:{click:e.closeUploadDialog}},[t(s["a"],{attrs:{left:""}},[e._v("mdi-close")]),e._v(" Cancel ")],1),t(v["a"],{staticClass:"rounded-pill ml-2",attrs:{small:"",color:"primary",disabled:!e.currentFile||!e.uploads.Type},on:{click:function(t){return e.uploadDocConfirm(e.currentStageId)}}},[t(s["a"],{attrs:{left:""}},[e._v("mdi-cloud-upload")]),e._v(" Submit ")],1)],1)],1)],1)],1),e._l(e.docSections,(function(a){return t("div",{key:a.id,staticClass:"mb-6 rounded-xl pa-4 elevation-1",class:a.bg},[t(A["a"],[t(D["a"],{staticClass:"d-flex align-center",attrs:{cols:"6"}},[t(Da["a"],{staticClass:"mr-2",attrs:{size:"36",color:a.avatarColor}},[t(s["a"],{attrs:{color:a.iconColor}},[e._v(e._s(a.icon))])],1),t(_["c"],{staticClass:"justify-center text-h6 font-weight-bold",staticStyle:{"letter-spacing":"1px"}},[e._v(" "+e._s(a.title)+" ")])],1),t(D["a"],{staticClass:"d-flex justify-end align-center",attrs:{cols:"6"}},[e.shouldShowUploadButton(a.id)?t(v["a"],{staticClass:"my-2 rounded-pill",attrs:{outlined:"",color:"primary"},on:{click:function(t){return e.openUploadDialog(a.id)}}},[t(s["a"],{attrs:{left:""}},[e._v("mdi-upload")]),e._v(" Upload ")],1):e._e()],1)],1),a.filterFn(e.documents,e.casefile).length>0?t(b["a"],{staticClass:"rounded-xl elevation-0 mt-2"},[t(xa["a"],{attrs:{dense:""}},[t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("File")]),t("th",{staticClass:"text-left"},[e._v("Type")]),t("th",{staticClass:"text-left"},[e._v("Remark")]),t("th",{staticClass:"text-left"},[e._v("Uploaded By")]),t("th",{staticClass:"text-left"},[e._v("Uploaded At")]),t("th",{staticClass:"text-left"})])]),t("tbody",e._l(a.filterFn(e.documents,e.casefile),(function(a){return t("tr",{key:a.id,staticClass:"doc-row"},[t("td",{staticClass:"text-left"},[t(v["a"],{staticClass:"rounded-pill",attrs:{outlined:"","x-small":"",block:"",color:"primary"},on:{click:function(t){return e.onClick(a.name)}}},[t(s["a"],{attrs:{left:"",small:""}},[e._v("mdi-file-download")]),e._v(" "+e._s(a.name)+" ")],1)],1),t("td",{staticClass:"text-left"},[t(S["a"],{staticClass:"font-weight-bold",attrs:{small:"",color:"primary lighten-4","text-color":"primary"}},[e._v(" "+e._s(a.Type)+" ")])],1),t("td",{staticClass:"text-left"},[e._v(e._s(a.Remark))]),e._l(e.filterUser(a.createdBy),(function(a){return t("td",{key:a.id,staticClass:"text-left"},[t(Da["a"],{staticClass:"mr-1",attrs:{size:"24",color:"grey lighten-2"}},[t(s["a"],{attrs:{small:"",color:"grey"}},[e._v("mdi-account")])],1),e._v(" "+e._s(a.username)+" ")],1)})),t("td",{staticClass:"text-left"},[e._v(e._s(e.formatDate(a.createdAt)))]),t("td",{staticClass:"text-left"},[t(M["a"],{attrs:{bottom:"",transition:"fab-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:r}){return[e.management?t(s["a"],e._g(e._b({staticClass:"doc-delete-icon",attrs:{small:"",color:"red darken-1"},on:{click:function(t){return e.deleteDoc(a)}}},"v-icon",r,!1),i),[e._v(" mdi-trash-can-outline ")]):e._e()]}}],null,!0)},[t("span",[e._v("Delete")])])],1)],2)})),0)])],1):t(Sa["a"],{staticClass:"mt-2",attrs:{type:"info",border:"left",color:"primary",dense:""}},[e._v(" No documents uploaded yet. ")])],1)}))],2)],1)},ka=[],Ta=(a("88a7"),a("271a"),a("5494"),a("3c98")),Ea=a("7e1b"),Ia=a("bc3a"),Ra=a.n(Ia),wa=a("6736"),Na={name:"documents",props:{casefile:{type:Object,required:!0},preloadedDocs:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},data(){return{currentFile:void 0,progress:0,message:"",management:!1,fileInfos:[],rules:[e=>!e||e.size<4e6||"File size should be less than 4 MB!"],documents:this.preloadedDocs,editedIndex:-1,editedItem:{id:null,caseId:null,docStageId:null,name:"",Type:"",Remark:"",createdBy:null},members:[],selectTypes:["Adjuster Report","Court Documents","Cover Note / Policy","Employment letters","Insurers Instruction","JPJ Report","Medical Report","Other Claim Documents","Police Documents (Full Set)","Police Out-Come","Police Reports","Solicitors Instruction","Statutory Declaration"],uploads:{id:null,caseId:"",name:"",Type:"",Remark:"",createdBy:""},dialogUploadDoc:!1,currentStageId:null,dialogTitle:"",dialogDeleteDoc:!1,dialogDeleteDoc1:!1,dialogDeleteDoc2:!1,dialogDeleteDoc3:!1,UploadAccess:!1,adjUploadAccess:!1,ediUploadAccess:!1,fileInputKey:0,docSections:[{id:1,title:"INITIAL DOCUMENT(S)",bg:"red lighten-5",icon:"mdi-file-document-outline",iconColor:"red darken-2",avatarColor:"red lighten-4",filterFn:function(e,t){return e.filter(e=>e.caseId===t.id&&1===e.docStageId)}},{id:2,title:"ADJUSTER'S REPORT(S)",bg:"orange lighten-5",icon:"mdi-account-tie",iconColor:"orange darken-2",avatarColor:"orange lighten-4",filterFn:function(e,t){return e.filter(e=>e.caseId===t.id&&2===e.docStageId)}},{id:3,title:"EDITED REPORT(S)",bg:"yellow lighten-5",icon:"mdi-pencil",iconColor:"yellow darken-2",avatarColor:"yellow lighten-4",filterFn:function(e,t){return e.filter(e=>e.caseId===t.id&&3===e.docStageId)}},{id:4,title:"FINAL REPORT(S)",bg:"green lighten-5",icon:"mdi-file-check-outline",iconColor:"green darken-2",avatarColor:"green lighten-4",filterFn:function(e,t){return e.filter(e=>e.caseId===t.id&&4===e.docStageId)}}]}},computed:{isUploadDocDisabled(){return!this.uploads.Type}},watch:{preloadedDocs:{immediate:!0,handler(e){e.length>0&&(this.documents=e)}},uploadDoc(e){e||this.closeUploadDoc()},uploadDoc1(e){e||this.closeUploadDoc1()},uploadDoc2(e){e||this.closeUploadDoc2()},uploadDoc3(e){e||this.closeUploadDoc3()},deleteDoc(e){e||this.closeDeleteDoc()}},methods:{checkUploadAccess(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER"))&&(this.UploadAccess=!0)},checkAdjUploadAccess(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("ADJUSTER"))&&(this.adjUploadAccess=!0)},checkEdiUploadAccess(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("EDITOR"))&&(this.ediUploadAccess=!0)},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},onClick(e){Ra()({url:`${wa["a"].docsURL}/${e}`,method:"GET",responseType:"blob"}).then(t=>{var a=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=a;var i=e.substr(e.lastIndexOf(".")+1),r=this.casefile.vehicleNo.toUpperCase();s.setAttribute("download",r+"_"+this.casefile.id+"."+i),document.body.appendChild(s),s.click()})},moment:function(e){return V()(e)},formatDate:function(e){return V()(e).format("DD/MM/YYYY, h:mm:ss a")},refreshList(){this.retrieveDocs()},filterCaseFile(){return this.casefile.filter(e=>e.id===this.casefile.id)},filterCase(){return this.documents.filter(e=>e.caseId===this.casefile.id&&1===e.docStageId)},filterCase1(){return this.documents.filter(e=>e.caseId===this.casefile.id&&2===e.docStageId)},filterCase2(){return this.documents.filter(e=>e.caseId===this.casefile.id&&3===e.docStageId)},filterCase3(){return this.documents.filter(e=>e.caseId===this.casefile.id&&4===e.docStageId)},filterUser(e){return this.members.filter(t=>t.id===e)},selectFile(e){this.currentFile=e},onFileInputChange(e){const t=e.target.files;t&&t.length>0&&this.selectFile(t[0])},retrieveDocs(){Ta["a"].getAll().then(e=>{this.documents=e.data}).catch(e=>{console.log(e)})},retrieveUser(){_t["a"].getAll().then(e=>{this.members=e.data}).catch(e=>{console.log(e)})},deleteDoc(e){this.editedItem=Object.assign({},e),this.dialogDeleteDoc=!0},closeDeleteDoc(){this.dialogDeleteDoc=!1,this.$nextTick(()=>{})},closeDeleteDoc1(){this.dialogDeleteDoc1=!1,this.$nextTick(()=>{})},closeDeleteDoc2(){this.dialogDeleteDoc2=!1,this.$nextTick(()=>{})},closeDeleteDoc3(){this.dialogDeleteDoc3=!1,this.$nextTick(()=>{})},deleteItemConfirm(){Ta["a"].delete(this.editedItem.id,this.editedItem.name).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e&&e.data&&e.data.message||toString()}),this.refreshList(),this.$emit("document-uploaded")}).catch(e=>{console.log(e)}),this.closeDeleteDoc()},triggerFileInput(){this.$refs.fileInput.value=null,this.$refs.fileInput.click()},openUploadDialog(e){switch(this.currentStageId=e,this.dialogUploadDoc=!0,this.currentFile=void 0,this.fileInputKey++,e){case 1:this.dialogTitle="UPLOAD INITIAL DOCUMENT";break;case 2:this.dialogTitle="UPLOAD ADJUSTER'S REPORT";break;case 3:this.dialogTitle="UPLOAD EDITED REPORT";break;case 4:this.dialogTitle="UPLOAD FINAL REPORT";break}},shouldShowUploadButton(e){switch(e){case 1:return this.UploadAccess;case 2:return this.adjUploadAccess;case 3:return this.ediUploadAccess;case 4:return this.UploadAccess;default:return!1}},closeUploadDialog(){this.dialogUploadDoc=!1,this.currentStageId=null,this.currentFile=void 0,this.fileInputKey++,this.$nextTick(()=>{})},uploadDocConfirm(e){if(!this.currentFile)return void this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:"Please select a file!"});const t=new FormData;t.append("file",this.currentFile),t.append("caseId",this.casefile.id),t.append("stageId",e),t.append("userId",this.$store.state.auth.user.id),t.append("type",this.uploads.Type),t.append("remark",this.uploads.Remark),this.message="",Ea["a"].upload(t,e=>{this.progress=Math.round(100*e.loaded/e.total)}).then(t=>{const a=t.data.name,s={caseId:this.casefile.id,docStageId:e,name:a,Type:this.uploads.Type,Remark:this.uploads.Remark,createdBy:this.$store.state.auth.user.id};return this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),Ta["a"].create(s)}).then(e=>{this.closeUploadDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),this.uploads.Type="",this.uploads.Remark="",this.refreshList(),this.currentFile=void 0,this.$emit("document-uploaded")}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})})}},mounted(){this.retrieveDocs(),this.retrieveUser(),this.checkManagement(),this.checkUploadAccess(),this.checkAdjUploadAccess(),this.checkEdiUploadAccess()}},Oa=Na,Ba=(a("ee93"),Object(q["a"])(Oa,Aa,ka,!1,null,"33c0b069",null)),ja=Ba.exports,$a=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.doneDispatchDisabled},on:{click:function(t){return e.completeDoneDispatch()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-truck-check")]),t("span",{staticClass:"action-text"},[e._v("DONE DISPATCH")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("DONE DISPATCH")])]),t(F["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogCompleteDoneDispatch,callback:function(t){e.dialogCompleteDoneDispatch=t},expression:"dialogCompleteDoneDispatch"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("DONE DISPATCH")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(_["c"],[e._v("The physical report along with attachments are dispatched.")]),t(P["a"]),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeDoneDispatchDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{disabled:e.isFileButtonDisabled,tile:"",small:""},on:{click:e.compDoneDispatchSubmit}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},Fa=[],Pa={name:"dispatch",props:["management"],components:{},data(){return{dialogCompleteDoneDispatch:!1}},computed:{doneDispatchDisabled(){return!("PDISP"==this.caseState.casefile.fileStatus&&this.management)},...Object(K["c"])(["caseState"]),isFileButtonDisabled(){return!this.management}},watch:{completeDoneDispatch(e){e||this.closeDoneDispatchDialog()}},methods:{completeDoneDispatch(){this.dialogCompleteDoneDispatch=!0},compDoneDispatchSubmit(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="CLO",this.caseState.casefile.dateClosed=V()().format(),this.caseState.casefile.closedBy=this.$store.state.auth.user.id).then(e=>{this.closeDoneDispatchDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeDoneDispatchDialog()},closeDoneDispatchDialog(){this.dialogCompleteDoneDispatch=!1,this.$nextTick(()=>{})}}},La=Pa,Ma=Object(q["a"])(La,$a,Fa,!1,null,null,null),Ua=Ma.exports,Ha=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[e.management&&"CANC"!==e.caseState.casefile.fileStatus&&"CLO"!==e.caseState.casefile.fileStatus?t(v["a"],e._g({staticClass:"mr-1",attrs:{outlined:"",fab:"","x-small":""},on:{click:function(t){return e.editCase()}}},{...a}),[t(s["a"],[e._v("mdi-pencil")])],1):e._e()]}}])},[t("span",[e._v("EDIT FILE")])]),t(F["a"],{attrs:{"max-width":"600px",persistent:""},model:{value:e.dialogEditCase,callback:function(t){e.dialogEditCase=t},expression:"dialogEditCase"}},[e.editedCasefile?[t(b["a"],{attrs:{tile:""}},[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("EDIT CASEFILE")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(N["a"],{staticClass:"mb-2",attrs:{dark:"","show-arrows":"","background-color":"teal darken-3"},model:{value:e.editTab,callback:function(t){e.editTab=t},expression:"editTab"}},[t(B["a"],{attrs:{color:"teal lighten-3"}}),t(R["a"],[e._v("General")]),t(R["a"],[e._v("Insured")]),t(R["a"],[e._v("Driver")]),t(R["a"],[e._v("Insurer")]),t(R["a"],[e._v("Solicitor")]),t(R["a"],[e._v("Claimant")])],1)],1),t(A["a"],[t(O["a"],{staticClass:"mt-1",model:{value:e.editTab,callback:function(t){e.editTab=t},expression:"editTab"}},[t(w["a"],[t(A["a"],{staticClass:"ma-1"},[t(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(_["c"],[e._v("Department")]),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",items:e.sortedRefType,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select Department","persistent-hint":"",label:"Department"},on:{change:e.handleRefTypeChange},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Department ")]},proxy:!0}],null,!1,895171366),model:{value:e.editedCasefile.refType,callback:function(t){e.$set(e.editedCasefile,"refType",t)},expression:"editedCasefile.refType"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",items:e.sortedAvailableSubRefTypes,"item-text":"subCode","item-value":"id","no-data-text":"There is no file-Classification option for selected department above","menu-props":{maxHeight:"400"},label:"File-Classification",hint:"Select File-Classification","persistent-hint":""},model:{value:e.editedCasefile.subRefType,callback:function(t){e.$set(e.editedCasefile,"subRefType",t)},expression:"editedCasefile.subRefType"}})],1)],1)],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",items:e.sortedBranches,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile branch","persistent-hint":"",label:"Branch"},model:{value:e.editedCasefile.branch,callback:function(t){e.$set(e.editedCasefile,"branch",t)},expression:"editedCasefile.branch"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(ve["a"],{attrs:{dense:"",items:e.sortedInsurer,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile insurer","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurer ")]},proxy:!0}],null,!1,1715300934),model:{value:e.editedCasefile.insurer,callback:function(t){e.$set(e.editedCasefile,"insurer",t)},expression:"editedCasefile.insurer"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",items:e.sortedHandlers,"item-text":"name","item-value":"id","no-data-text":"There is no handler option for selected insurer above","menu-props":{maxHeight:"400"},label:"Claim Handler",hint:"Select Handler","persistent-hint":""},model:{value:e.editedCasefile.handler,callback:function(t){e.$set(e.editedCasefile,"handler",t)},expression:"editedCasefile.handler"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"","item-text":"Insurer's Reference",label:"Insurers Reference Number",rules:[e=>!!e||"Insurers reference is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurers Reference ")]},proxy:!0}],null,!1,3049719038),model:{value:e.editedCasefile.claimNo,callback:function(t){e.$set(e.editedCasefile,"claimNo",t)},expression:"editedCasefile.claimNo"}})],1),t(D["a"],{attrs:{cols:"12"}},[[t("div",[t(_e["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(De["a"],e._g(e._b({attrs:{"persistent-hint":"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Assignment ")]},proxy:!0}],null,!0),model:{value:e.ComputedDateOfAssignEdit,callback:function(t){e.ComputedDateOfAssignEdit=t},expression:"ComputedDateOfAssignEdit"}},"v-text-field",s,!1),a))]}}],null,!1,2302965805),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[t(be["a"],{on:{change:function(t){e.menu2=!1}},model:{value:e.editedCasefile.dateOfAssign,callback:function(t){e.$set(e.editedCasefile,"dateOfAssign",t)},expression:"editedCasefile.dateOfAssign"}})],1)],1)]],2),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Vehicle Number",hint:"Vehicle Number"},model:{value:e.editedCasefile.vehicleNo,callback:function(t){e.$set(e.editedCasefile,"vehicleNo",t)},expression:"editedCasefile.vehicleNo"}})],1),t(D["a"],{attrs:{cols:"12"}},[[t("div",[t(_e["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(De["a"],e._g(e._b({attrs:{"prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Loss ")]},proxy:!0}],null,!0),model:{value:e.ComputedDateOfLossEdit,callback:function(t){e.ComputedDateOfLossEdit=t},expression:"ComputedDateOfLossEdit"}},"v-text-field",s,!1),a))]}}],null,!1,2131274106),model:{value:e.menu3,callback:function(t){e.menu3=t},expression:"menu3"}},[t(be["a"],{on:{change:function(t){e.menu3=!1}},model:{value:e.editedCasefile.dateOfLoss,callback:function(t){e.$set(e.editedCasefile,"dateOfLoss",t)},expression:"editedCasefile.dateOfLoss"}})],1)],1)]],2),t(b["a"],{attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(_["c"],[e._v("Place Of Loss")]),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",items:e.sortedStates,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Select State","persistent-hint":"",label:"State"},model:{value:e.editedCasefile.stateOfLoss,callback:function(t){e.$set(e.editedCasefile,"stateOfLoss",t)},expression:"editedCasefile.stateOfLoss"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{dense:"",items:e.sortedRegions,"item-text":"name","item-value":"name","no-data-text":"There is no district option for selected state above","menu-props":{maxHeight:"400"},label:"Area Of Loss",hint:"Select District","persistent-hint":""},model:{value:e.editedCasefile.placeOfLoss,callback:function(t){e.$set(e.editedCasefile,"placeOfLoss",t)},expression:"editedCasefile.placeOfLoss"}})],1)],1)],1)],1)],1),t(w["a"],[t(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(_["c"],[e._v("Insured Details")]),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Insured Name"},model:{value:e.editedCasefile.insuredName,callback:function(t){e.$set(e.editedCasefile,"insuredName",t)},expression:"editedCasefile.insuredName"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Insured IC"},model:{value:e.editedCasefile.insuredIC,callback:function(t){e.$set(e.editedCasefile,"insuredIC",t)},expression:"editedCasefile.insuredIC"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Insured Tel"},model:{value:e.editedCasefile.insuredTel,callback:function(t){e.$set(e.editedCasefile,"insuredTel",t)},expression:"editedCasefile.insuredTel"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Insured Email"},model:{value:e.editedCasefile.insuredEmail,callback:function(t){e.$set(e.editedCasefile,"insuredEmail",t)},expression:"editedCasefile.insuredEmail"}})],1)],1)],1)],1),t(w["a"],[t(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(_["c"],[e._v("Insured Driver Details")]),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Insured Driver Name"},model:{value:e.editedCasefile.insuredDriverName,callback:function(t){e.$set(e.editedCasefile,"insuredDriverName",t)},expression:"editedCasefile.insuredDriverName"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Insured Driver IC"},model:{value:e.editedCasefile.insuredDriverIc,callback:function(t){e.$set(e.editedCasefile,"insuredDriverIc",t)},expression:"editedCasefile.insuredDriverIc"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Insured Driver Tel"},model:{value:e.editedCasefile.insuredDriverTel,callback:function(t){e.$set(e.editedCasefile,"insuredDriverTel",t)},expression:"editedCasefile.insuredDriverTel"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Insured Driver Email"},model:{value:e.editedCasefile.insuredDriverEmail,callback:function(t){e.$set(e.editedCasefile,"insuredDriverEmail",t)},expression:"editedCasefile.insuredDriverEmail"}})],1)],1)],1)],1),t(w["a"],[t(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(_["c"],[e._v("Insurer Details")]),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Police Report Number"},model:{value:e.editedCasefile.policeReportNo,callback:function(t){e.$set(e.editedCasefile,"policeReportNo",t)},expression:"editedCasefile.policeReportNo"}})],1),t(D["a"],{attrs:{cols:"12"}},[[t("div",[t(_e["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(De["a"],e._g(e._b({attrs:{"persistent-hint":"","prepend-icon":"mdi-calendar",readonly:"",label:"Police Report Date"},on:{"click:clear":function(t){e.date=null}},model:{value:e.ComputedDateOfPoliceRepotDate,callback:function(t){e.ComputedDateOfPoliceRepotDate=t},expression:"ComputedDateOfPoliceRepotDate"}},"v-text-field",s,!1),a))]}}],null,!1,235770260),model:{value:e.menu4,callback:function(t){e.menu4=t},expression:"menu4"}},[t(be["a"],{on:{change:function(t){e.menu4=!1}},model:{value:e.editedCasefile.policeReportDate,callback:function(t){e.$set(e.editedCasefile,"policeReportDate",t)},expression:"editedCasefile.policeReportDate"}})],1)],1)]],2),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Policy Number"},model:{value:e.editedCasefile.policyNo,callback:function(t){e.$set(e.editedCasefile,"policyNo",t)},expression:"editedCasefile.policyNo"}})],1),t(D["a"],{attrs:{cols:"12"}},[[t("div",[t(_e["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(De["a"],e._g(e._b({attrs:{"persistent-hint":"","prepend-icon":"mdi-calendar",readonly:"",label:"Policy Cover From"},on:{"click:clear":function(t){e.date=null}},model:{value:e.ComputedDateOfCoverFrom,callback:function(t){e.ComputedDateOfCoverFrom=t},expression:"ComputedDateOfCoverFrom"}},"v-text-field",s,!1),a))]}}],null,!1,840629798),model:{value:e.menu5,callback:function(t){e.menu5=t},expression:"menu5"}},[t(be["a"],{on:{change:function(t){e.menu5=!1}},model:{value:e.editedCasefile.coverFrom,callback:function(t){e.$set(e.editedCasefile,"coverFrom",t)},expression:"editedCasefile.coverFrom"}})],1)],1)]],2),t(D["a"],{attrs:{cols:"12"}},[[t("div",[t(_e["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(De["a"],e._g(e._b({attrs:{"persistent-hint":"","prepend-icon":"mdi-calendar",readonly:"",label:"Policy Cover To"},on:{"click:clear":function(t){e.date=null}},model:{value:e.ComputedDateOfCoverTo,callback:function(t){e.ComputedDateOfCoverTo=t},expression:"ComputedDateOfCoverTo"}},"v-text-field",s,!1),a))]}}],null,!1,616076390),model:{value:e.menu6,callback:function(t){e.menu6=t},expression:"menu6"}},[t(be["a"],{on:{change:function(t){e.menu6=!1}},model:{value:e.editedCasefile.coverTo,callback:function(t){e.$set(e.editedCasefile,"coverTo",t)},expression:"editedCasefile.coverTo"}})],1)],1)]],2),t(D["a"],{attrs:{cols:"12"}},[t(ye["a"],{attrs:{label:"Insurers Comment"},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Insurers Comment ")]},proxy:!0}],null,!1,2528526694),model:{value:e.editedCasefile.insComment,callback:function(t){e.$set(e.editedCasefile,"insComment",t)},expression:"editedCasefile.insComment"}})],1)],1)],1)],1),t(w["a"],[t(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(_["c"],[e._v("Insured Solicitor Details")]),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Insured Solicitor Name"},model:{value:e.editedCasefile.solicitorName,callback:function(t){e.$set(e.editedCasefile,"solicitorName",t)},expression:"editedCasefile.solicitorName"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Insured Solicitor Tel"},model:{value:e.editedCasefile.solicitorTel,callback:function(t){e.$set(e.editedCasefile,"solicitorTel",t)},expression:"editedCasefile.solicitorTel"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Insured Solicitor Email"},model:{value:e.editedCasefile.solicitorEmail,callback:function(t){e.$set(e.editedCasefile,"solicitorEmail",t)},expression:"editedCasefile.solicitorEmail"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Attending Counsel"},model:{value:e.editedCasefile.counselName,callback:function(t){e.$set(e.editedCasefile,"counselName",t)},expression:"editedCasefile.counselName"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Counsel Tel"},model:{value:e.editedCasefile.counselTel,callback:function(t){e.$set(e.editedCasefile,"counselTel",t)},expression:"editedCasefile.counselTel"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Counsel Email"},model:{value:e.editedCasefile.counselEmail,callback:function(t){e.$set(e.editedCasefile,"counselEmail",t)},expression:"editedCasefile.counselEmail"}})],1)],1)],1)],1),t(w["a"],[t(b["a"],{staticClass:"ma-1",attrs:{tile:""}},[t(A["a"],{staticClass:"ma-1"},[t(_["c"],[e._v("Third Party Claimant Details")]),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Third Party Claimant Name"},model:{value:e.editedCasefile.thirdPartyClaimantName,callback:function(t){e.$set(e.editedCasefile,"thirdPartyClaimantName",t)},expression:"editedCasefile.thirdPartyClaimantName"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Third Party Claimant IC"},model:{value:e.editedCasefile.thirdPartyClaimantIc,callback:function(t){e.$set(e.editedCasefile,"thirdPartyClaimantIc",t)},expression:"editedCasefile.thirdPartyClaimantIc"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Third Party Claimant Tel"},model:{value:e.editedCasefile.thirdPartyClaimantTel,callback:function(t){e.$set(e.editedCasefile,"thirdPartyClaimantTel",t)},expression:"editedCasefile.thirdPartyClaimantTel"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Third Party Claimant Email"},model:{value:e.editedCasefile.thirdPartyClaimantEmail,callback:function(t){e.$set(e.editedCasefile,"thirdPartyClaimantEmail",t)},expression:"editedCasefile.thirdPartyClaimantEmail"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Third Party Claimant Vehicle Number"},model:{value:e.editedCasefile.thirdPartyClaimantVehicleNo,callback:function(t){e.$set(e.editedCasefile,"thirdPartyClaimantVehicleNo",t)},expression:"editedCasefile.thirdPartyClaimantVehicleNo"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Third Party Claimant Vehicle Model"},model:{value:e.editedCasefile.thirdPartyClaimantVehicleModel,callback:function(t){e.$set(e.editedCasefile,"thirdPartyClaimantVehicleModel",t)},expression:"\n                            editedCasefile.thirdPartyClaimantVehicleModel\n                          "}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Third Party Claimant Solicitor"},model:{value:e.editedCasefile.thirdPartyClaimantSolicitor,callback:function(t){e.$set(e.editedCasefile,"thirdPartyClaimantSolicitor",t)},expression:"editedCasefile.thirdPartyClaimantSolicitor"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(De["a"],{attrs:{dense:"",label:"Third Party Claimant Solicitor Email"},model:{value:e.editedCasefile.thirdPartyClaimantSolicitorEmail,callback:function(t){e.$set(e.editedCasefile,"thirdPartyClaimantSolicitorEmail",t)},expression:"\n                            editedCasefile.thirdPartyClaimantSolicitorEmail\n                          "}})],1)],1)],1)],1)],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(re["a"]),t(v["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeEditCase}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"success mt-3",attrs:{disabled:e.isEditFileButtonDisabled,small:"",tile:""},on:{click:e.editCasefile}},[e._v("Submit")])],1)],1)],1)],1)],1)]:e._e()],2)],1)},Ga=[],Ya={name:"editCase",props:["management","refType","subRefTypes","branches","insurer","handlers","states","regions","stages"],components:{},data(){return{dialogEditCase:!1,menu2:!1,menu3:!1,menu4:!1,menu5:!1,menu6:!1,editTab:null,editedCasefile:null}},computed:{...Object(K["c"])(["caseState"]),ComputedDateOfAssignEdit(){var e;return this.formatDateMethod(null===(e=this.editedCasefile)||void 0===e?void 0:e.dateOfAssign)},ComputedDateOfLossEdit(){var e;return this.formatDateMethod(null===(e=this.editedCasefile)||void 0===e?void 0:e.dateOfLoss)},ComputedDateOfPoliceRepotDate(){var e;return this.formatDateMethod(null===(e=this.editedCasefile)||void 0===e?void 0:e.policeReportDate)},ComputedDateOfCoverFrom(){var e;return this.formatDateMethod(null===(e=this.editedCasefile)||void 0===e?void 0:e.coverFrom)},ComputedDateOfCoverTo(){var e;return this.formatDateMethod(null===(e=this.editedCasefile)||void 0===e?void 0:e.coverTo)},isEditFileButtonDisabled(){return!(this.editedCasefile&&this.editedCasefile.refType&&this.editedCasefile.insurer&&this.editedCasefile.claimNo&&this.editedCasefile.dateOfAssign&&this.editedCasefile.dateOfLoss)},sortedRefType(){return this.refType.map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedAvailableSubRefTypes(){return this.editedCasefile&&this.editedCasefile.refType?this.subRefTypes.filter(e=>e.deptId===this.editedCasefile.refType).map(e=>({...e,subCode:e.subCode?e.subCode.trim().toUpperCase():""})).sort((e,t)=>e.subCode.localeCompare(t.subCode)):[]},sortedBranches(){return this.branches.map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedInsurer(){return this.insurer.map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedHandlers(){return this.editedCasefile&&this.editedCasefile.insurer?this.handlers.filter(e=>e.insId===this.editedCasefile.insurer).map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name)):[]},sortedStates(){return this.states.map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedRegions(){return this.editedCasefile&&this.editedCasefile.stateOfLoss?this.regions.filter(e=>e.branchId===this.editedCasefile.stateOfLoss).map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name)):[]}},watch:{editCase(e){e||this.closeEditCase()}},methods:{moment:function(e){return V()(e)},formatDateMethod(e){return e?V()(e).format("DD/MM/YYYY"):null},yearOnly(e){return V()(e).format("YY")},filterDept(e){return this.refType.filter(t=>t.id===e)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},editCase(){this.editedCasefile=JSON.parse(JSON.stringify(this.caseState.casefile)),this.dialogEditCase=!0},editCasefile(){if(!this.editedCasefile)return;const e={...this.editedCasefile,vehicleNo:this.editedCasefile.vehicleNo?this.editedCasefile.vehicleNo.toLowerCase().replace(/\s/g,""):""};G["a"].update(this.editedCasefile.id,e).then(t=>{this.closeEditCase(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.caseState.casefile=e}).catch(e=>{console.log(e)}),this.closeEditCase()},closeEditCase(){this.dialogEditCase=!1,this.editedCasefile=null,this.$nextTick(()=>{})},handleRefTypeChange(){this.editedCasefile&&(this.editedCasefile.subRefType=null)}}},Va=Ya,Ka=Object(q["a"])(Va,Ha,Ga,!1,null,null,null),Ja=Ka.exports,za=a("8643"),qa=function(){var e=this,t=e._self._c;return t("div",[t(b["a"],{staticClass:"history-container",attrs:{flat:""}},[t(_["c"],{staticClass:"d-flex align-center pb-2"},[t(s["a"],{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[e._v("mdi-history")]),t("span",{staticClass:"text-h6"},[e._v(" Vehicle History "),e.caseState.casefile&&e.caseState.casefile.vehicleNo?t("span",{staticClass:"ml-2 grey--text text--darken-2"},[e._v(" ("+e._s(e.caseState.casefile.vehicleNo.toUpperCase())+") ")]):e._e()]),t(re["a"]),!e.isVehicleNoTbaOrNone&&e.cases.length>1?t(S["a"],{staticClass:"font-weight-medium",attrs:{color:"orange",small:""}},[e._v(" "+e._s(e.cases.length-1)+" Previous Cases ")]):e._e()],1),t(P["a"]),e.isVehicleNoTbaOrNone?[t(_["b"],{staticClass:"text-center pa-8"},[t(s["a"],{attrs:{size:"64",color:"grey lighten-1"}},[e._v("mdi-car-off")]),t("h3",{staticClass:"mt-4 grey--text text--darken-1"},[e._v(" No Previous Cases Found ")]),t("p",{staticClass:"subtitle-1 grey--text"},[e._v(" This is the first case for this vehicle ")])],1)]:[e.loading?t("div",{staticClass:"pa-4"},e._l(3,(function(e){return t(I,{key:e,staticClass:"mb-4",attrs:{type:"list-item-two-line"}})})),1):!e.cases.length||e.cases.length<=1?t(_["b"],{staticClass:"text-center pa-8"},[t(s["a"],{attrs:{size:"64",color:"grey lighten-1"}},[e._v("mdi-car-off")]),t("h3",{staticClass:"mt-4 grey--text text--darken-1"},[e._v(" No Previous Cases Found ")]),t("p",{staticClass:"subtitle-1 grey--text"},[e._v(" This is the first case for this vehicle ")])],1):t(_["b"],{staticClass:"pa-4"},[t(A["a"],e._l(e.filteredCases,(function(a){return t(D["a"],{key:a.id,attrs:{cols:"12",sm:"6",md:"4"}},[t(b["a"],{staticClass:"history-card",attrs:{outlined:"",hover:""},on:{click:function(t){return e.showDetail(a)}}},[t(_["b"],[t("div",{staticClass:"d-flex align-center mb-2"},[t(s["a"],{staticClass:"mr-2",attrs:{color:"primary",small:""}},[e._v("mdi-file-document-outline")]),t("span",{staticClass:"text-subtitle-2"},[e._v("AA/"+e._s(e.getRefNumber(a)))])],1),t("div",{staticClass:"d-flex align-center"},[t(s["a"],{staticClass:"mr-2",attrs:{small:"",color:"grey"}},[e._v("mdi-calendar")]),t("span",{staticClass:"caption grey--text"},[e._v(e._s(e.formatDate(a.createdAt)))])],1),t(S["a"],{staticClass:"mt-2",attrs:{"x-small":"",color:e.getStatusColor(a.fileStatus),"text-color":"white"}},[e._v(" "+e._s(e.getStatusText(a.fileStatus))+" ")])],1)],1)],1)})),1)],1)]],2),t(F["a"],{attrs:{width:"700"},model:{value:e.dialogDetail,callback:function(t){e.dialogDetail=t},expression:"dialogDetail"}},[t(b["a"],[t(_["a"],[t(re["a"]),t(v["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogDetail=!1}}},[e._v(" Close ")])],1),t(_["c"],[t(re["a"]),t("span",{staticClass:"caption text-decoration-overline"},[e._v("Details of AA/"),e._l(e.filterDept(e.caseDetail.refType),(function(a,s){return t("span",{key:s},[e._v(e._s(a.name)+" "),e._l(e.filterSubDept(e.caseDetail.subRefType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.subCode))])}))],2)})),e._v("/"+e._s(e.caseDetail.id)+"/"+e._s(e.yearOnly(e.caseDetail.createdAt))+"/"),e._l(e.filterBranches(e.caseDetail.branch),(function(a){return t("span",{key:a.id},[e._v(e._s(a.brCode)+" ")])}))],2)],1),t(xa["a"],{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-center font-weight-black"},[e._v("Name")]),t("th",{staticClass:"text-left font-weight-black"},[e._v("Description")])])]),t("tbody",[e.caseDetail.fileStatus?t("tr",[t("td",{staticClass:"text-center"},[e._v("Status")]),e._l(e.filterStages(e.caseDetail.fileStatus),(function(a){return t("td",{key:a.id,staticClass:"text-left font-italic font-weight-black"},[e._v(" "+e._s(a.name)+" ")])}))],2):e._e(),e.caseDetail.createdAt?t("tr",[t("td",{staticClass:"text-center"},[e._v("Created On:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.createdAt))+" ")])]):e._e(),e.caseDetail.createdAt?t("tr",[t("td",{staticClass:"text-center"},[e._v("Created By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.createdBy))+" ")])]):e._e(),e.caseDetail.transferDate?t("tr",[t("td",{staticClass:"text-center"},[e._v("Transfer Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.transferDate))+" ")])]):e._e(),e.caseDetail.transferDate?t("tr",[t("td",{staticClass:"text-center"},[e._v("Transfered By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.transferBy))+" ")])]):e._e(),e.caseDetail.dateOfCancel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Cancellation Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfCancel))+" ")])]):e._e(),e.caseDetail.dateOfCancel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Cancellation By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.cancelBy))+" ")])]):e._e(),e.caseDetail.caseFrom?t("tr",[t("td",{staticClass:"text-center"},[e._v("Type")]),t("td",{staticClass:"text-left font-italic"},[e._v(e._s(e.caseDetail.caseFrom))])]):e._e(),e.caseDetail.refType?t("tr",[t("td",{staticClass:"text-center"},[e._v("Department")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterDept(e.caseDetail.refType)[0].name)+", ("+e._s(e.filterDept(e.caseDetail.refType)[0].description)+") ")])]):e._e(),e.caseDetail.subRefType?t("tr",[t("td",{staticClass:"text-center"},[e._v("File Classification")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterSubDept(e.caseDetail.subRefType)[0].subCode)+" ")])]):e._e(),e.caseDetail.branch?t("tr",[t("td",{staticClass:"text-center"},[e._v("Branch")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterBranches(e.caseDetail.branch)[0].brCode)+", ("+e._s(e.filterBranches(e.caseDetail.branch)[0].name)+") ")])]):e._e(),e.caseDetail.insurer?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insurer")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterIns(e.caseDetail.insurer)[0].name)+" ")])]):e._e(),e.caseDetail.handler?t("tr",[t("td",{staticClass:"text-center"},[e._v("Handler")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterHandler(e.caseDetail.handler)[0].name)+", ("+e._s(e.filterHandler(e.caseDetail.handler)[0].email)+") ")])]):e._e(),e.caseDetail.adjuster?t("tr",[t("td",{staticClass:"text-center"},[e._v("Adjuster")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.adjuster))+" ")])]):e._e(),e.caseDetail.editor?t("tr",[t("td",{staticClass:"text-center"},[e._v("Editor")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.editor))+" ")])]):e._e(),e.caseDetail.clerkInCharge?t("tr",[t("td",{staticClass:"text-center"},[e._v("Clerk In Charge")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.clerkInCharge))+" ")])]):e._e(),e.caseDetail.claimNo?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insurer's Ref No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(e._s(e.caseDetail.claimNo))])]):e._e(),e.caseDetail.vehicleNo?t("tr",[t("td",{staticClass:"text-center"},[e._v("Vehicle No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.vehicleNo.toUpperCase())+" ")])]):e._e(),e.caseDetail.dateOfAssign?t("tr",[t("td",{staticClass:"text-center"},[e._v("Date Of Assignment")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfAssign))+" ")])]):e._e(),e.caseDetail.dateOfLoss?t("tr",[t("td",{staticClass:"text-center"},[e._v("Date Of Loss")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfLoss))+" ")])]):e._e(),e.caseDetail.stateOfLoss?t("tr",[t("td",{staticClass:"text-center"},[e._v("State Of Loss")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterStates(e.caseDetail.stateOfLoss)[0].stCode)+", ("+e._s(e.filterStates(e.caseDetail.stateOfLoss)[0].name)+") ")])]):e._e(),e.caseDetail.placeOfLoss?t("tr",[t("td",{staticClass:"text-center"},[e._v("Place Of Loss")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.placeOfLoss)+" ")])]):e._e(),e.caseDetail.insuredName?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured Name")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insuredName)+" ")])]):e._e(),e.caseDetail.insuredIC?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured IC No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insuredIC)+" ")])]):e._e(),e.caseDetail.InsuredTel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured Tel. No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.InsuredTel)+" ")])]):e._e(),e.caseDetail.insuredEmail?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured Email")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insuredEmail)+" ")])]):e._e(),e.caseDetail.insuredDriverName?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured Driver Name")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insuredDriverName)+" ")])]):e._e(),e.caseDetail.insuredDriverIc?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured Driver IC No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insuredDriverIc)+" ")])]):e._e(),e.caseDetail.insuredDriverEmail?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insured Driver Email")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insuredDriverEmail)+" ")])]):e._e(),e.caseDetail.policeReportNo?t("tr",[t("td",{staticClass:"text-center"},[e._v("Police Report No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.policeReportNo)+" ")])]):e._e(),e.caseDetail.policeReportDate?t("tr",[t("td",{staticClass:"text-center"},[e._v("Police Report Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.policeReportDate)+" ")])]):e._e(),e.caseDetail.policyNo?t("tr",[t("td",{staticClass:"text-center"},[e._v("Policy Number")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.policyNo)+" ")])]):e._e(),e.caseDetail.coverFrom||e.caseDetail.coverTo?t("tr",[t("td",{staticClass:"text-center"},[e._v("Cover Period")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.coverFrom))+" - "+e._s(e.formatDate(e.caseDetail.coverTo))+" ")])]):e._e(),e.caseDetail.insComment?t("tr",[t("td",{staticClass:"text-center"},[e._v("Insurer's Comment")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.insComment)+" ")])]):e._e(),e.caseDetail.solicitorName?t("tr",[t("td",{staticClass:"text-center"},[e._v("Solicitor Name")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.solicitorName)+" ")])]):e._e(),e.caseDetail.solicitorTel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Solicitor Tel.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.solicitorTel)+" ")])]):e._e(),e.caseDetail.solicitorEmail?t("tr",[t("td",{staticClass:"text-center"},[e._v("Solicitor Email")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.solicitorEmail)+" ")])]):e._e(),e.caseDetail.counselName?t("tr",[t("td",{staticClass:"text-center"},[e._v("Counsel Name")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.counselName)+" ")])]):e._e(),e.caseDetail.counselTel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Counsel Tel")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.counselTel)+" ")])]):e._e(),e.caseDetail.counselEmail?t("tr",[t("td",{staticClass:"text-center"},[e._v("Counsel Email")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.counselEmail)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantName?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant Name")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantName)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantIc?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant IC No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantIc)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantTel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant Tel No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantTel)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantEmail?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant Email")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantEmail)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantVehicleNo?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant Vehicle No.")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantVehicleNo)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantVehicleModel?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant Vehicle Model")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantVehicleModel)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantVehicleSolicitor?t("tr",[t("td",{staticClass:"text-center"},[e._v("Third Party Claimant Solicitor")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantVehicleSolicitor)+" ")])]):e._e(),e.caseDetail.thirdPartyClaimantVehicleSolicitorEmail?t("tr",[t("td",{staticClass:"text-center"},[e._v(" Third Party Claimant Solicitor Email ")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.thirdPartyClaimantVehicleSolicitorEmail)+" ")])]):e._e(),e.caseDetail.applyDocDate?t("tr",[t("td",{staticClass:"text-center"},[e._v("Document Application Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.applyDocDate))+" ")])]):e._e(),e.caseDetail.applyDocDate?t("tr",[t("td",{staticClass:"text-center"},[e._v("Document Application By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.applyDocBy))+" ")])]):e._e(),e.caseDetail.dateOfReg?t("tr",[t("td",{staticClass:"text-center"},[e._v("Branch Assigning Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfReg))+" ")])]):e._e(),e.caseDetail.dateOfReg?t("tr",[t("td",{staticClass:"text-center"},[e._v("Branch Assigned By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.assignBranchBy))+" ")])]):e._e(),e.caseDetail.dateOfAdj?t("tr",[t("td",{staticClass:"text-center"},[e._v("Adjuster Assigning Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfAdj))+" ")])]):e._e(),e.caseDetail.dateOfAdj?t("tr",[t("td",{staticClass:"text-center"},[e._v("Adjuster Assigning By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.assignAdjBy))+" ")])]):e._e(),e.caseDetail.dateStartInv?t("tr",[t("td",{staticClass:"text-center"},[e._v("Start Investigation Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateStartInv))+" ")])]):e._e(),e.caseDetail.dateEndInv?t("tr",[t("td",{staticClass:"text-center"},[e._v("Complete Investigation Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateEndInv))+" ")])]):e._e(),e.caseDetail.dateOfEdi?t("tr",[t("td",{staticClass:"text-center"},[e._v("Editor Assigned Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfEdi))+" ")])]):e._e(),e.caseDetail.dateOfEdi?t("tr",[t("td",{staticClass:"text-center"},[e._v("Editor Assigned By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.assignEdiBy))+" ")])]):e._e(),e.caseDetail.dateStartEdi?t("tr",[t("td",{staticClass:"text-center"},[e._v("Start Editing Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateStartEdi))+" ")])]):e._e(),e.caseDetail.dateEndEdi?t("tr",[t("td",{staticClass:"text-center"},[e._v("Complete Editing Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateEndEdi))+" ")])]):e._e(),e.caseDetail.dateOfApproval?t("tr",[t("td",{staticClass:"text-center"},[e._v("Approval Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateOfApproval))+" ")])]):e._e(),e.caseDetail.dateOfApproval?t("tr",[t("td",{staticClass:"text-center"},[e._v("Approval By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.approvedBy))+" ")])]):e._e(),e.caseDetail.dateAssignFormatting?t("tr",[t("td",{staticClass:"text-center"},[e._v("Clerk Assigned Date(Formatting)")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateAssignFormatting))+" ")])]):e._e(),e.caseDetail.dateAssignFormatting?t("tr",[t("td",{staticClass:"text-center"},[e._v("Clerk Assigned (Formatting) By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.assignClerkBy))+" ")])]):e._e(),e.caseDetail.dateStartFormatting?t("tr",[t("td",{staticClass:"text-center"},[e._v("Start Formatting Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateStartFormatting))+" ")])]):e._e(),e.caseDetail.dateEndFormatting?t("tr",[t("td",{staticClass:"text-center"},[e._v("Complete Formatting Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateEndFormatting))+" ")])]):e._e(),e.caseDetail.dateFinal?t("tr",[t("td",{staticClass:"text-center"},[e._v("Invoising & Finalisation Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateFinal))+" ")])]):e._e(),e.caseDetail.dateFinal?t("tr",[t("td",{staticClass:"text-center"},[e._v("Invoising & Finalisation By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.finalBy))+" ")])]):e._e(),e.caseDetail.dateFinal?t("tr",[t("td",{staticClass:"text-center"},[e._v("Invoice Nombor")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.invNo)+" ")])]):e._e(),e.caseDetail.dateFinal?t("tr",[t("td",{staticClass:"text-center"},[e._v("Invoice Fee Note")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.caseDetail.invFeeNote)+" ")])]):e._e(),e.caseDetail.dateFinal?t("tr",[t("td",{staticClass:"text-center"},[e._v("Invoice Total")]),t("td",{staticClass:"text-left font-italic"},[e._v(" RM "+e._s(e.caseDetail.invTotal)+" ")])]):e._e(),e.caseDetail.dateDispatch?t("tr",[t("td",{staticClass:"text-center"},[e._v("Dispatch Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateDispatch))+" ")])]):e._e(),e.caseDetail.dateDispatch?t("tr",[t("td",{staticClass:"text-center"},[e._v("Dispatch By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.dispatchBy))+" ")])]):e._e(),e.caseDetail.dateClosed?t("tr",[t("td",{staticClass:"text-center"},[e._v("Closed Date")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.formatDate(e.caseDetail.dateClosed))+" ")])]):e._e(),e.caseDetail.dateClosed?t("tr",[t("td",{staticClass:"text-center"},[e._v("Closed By:")]),t("td",{staticClass:"text-left font-italic"},[e._v(" "+e._s(e.filterUser(e.caseDetail.closedBy))+" ")])]):e._e()])]},proxy:!0}])}),t(_["a"],[t(re["a"]),t(v["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogDetail=!1}}},[e._v(" Close ")])],1)],1)],1)],1)},Wa=[],Xa={name:"history",props:{branches:{type:Array,required:!0},states:{type:Array,required:!0},insurer:{type:Array,required:!0},handlers:{type:Array,required:!0},refType:{type:Array,required:!0},subRefTypes:{type:Array,required:!0},members:{type:Array,required:!0},stages:{type:Array,required:!0},preloadedHistory:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},data:()=>({cases:[],dialogDetail:!1,caseDetail:"",caseHistory:[]}),computed:{...Object(K["c"])(["caseState"]),filteredCases(){if(this.isVehicleNoTbaOrNone)return this.$emit("history-count-updated",0),[];const e=this.cases.filter(e=>e.id!==this.caseState.casefile.id).sort((e,t)=>V()(t.createdAt)-V()(e.createdAt));return this.$emit("history-count-updated",e.length),e},isVehicleNoTbaOrNone(){var e;const t=null===(e=this.caseState.casefile)||void 0===e?void 0:e.vehicleNo;if(!t)return!0;const a=String(t).trim().toUpperCase();return"TBA"===a||"NONE"===a}},methods:{formatDate:function(e){return e?V()(e).format("DD/MM/YYYY"):""},showDetail(e){this.caseDetail=Object.assign({},e),this.dialogDetail=!0},yearOnly(e){return V()(e).format("YY")},filterCase(e){return this.cases.filter(t=>t.id===e)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterStates(e){return this.states.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterStages(e){return this.stages.filter(t=>t.stageCode===e)},filterUser(e){const t=this.members.filter(t=>t.id===e);let a=t.map(e=>e.username+", "+e.email);return a[0]},filterHandler(e){return this.handlers.filter(t=>t.id===e)},showFileStatus(e){const t=this.stages.filter(t=>t.stageCode===e);let a=t.map(e=>e.name);return a},retrieveCases(){if(this.preloadedHistory&&this.preloadedHistory.length>0)return this.cases=[...this.preloadedHistory],void this.$emit("history-count-updated",this.filteredCases.length);let e=this.caseState.casefile.vehicleNo;if(!e||["TBA","NONE"].includes(String(e).trim().toUpperCase()))return this.cases=[],void this.$emit("history-count-updated",0);G["a"].getAll().then(t=>{this.cases=t.data.filter(t=>t.vehicleNo===e),this.$emit("history-count-updated",this.filteredCases.length)}).catch(e=>{console.log(e),this.$emit("history-count-updated",0)})},getRefNumber(e){var t,a,s;const i=(null===(t=this.filterDept(e.refType)[0])||void 0===t?void 0:t.name)||"",r=(null===(a=this.filterSubDept(e.subRefType)[0])||void 0===a?void 0:a.subCode)||"",l=(null===(s=this.filterBranches(e.branch)[0])||void 0===s?void 0:s.brCode)||"";return`${i}${r?"/"+r:""}/${e.id}/${this.yearOnly(e.createdAt)}${l?"/"+l:""}`},getStatusColor(e){const t={NEW:"success",PEND:"warning",INVE:"info",COMP:"error",CLOSED:"grey"};return t[e]||"grey"},getStatusText(e){const t=this.filterStages(e)[0];return t?t.name:e}},watch:{preloadedHistory:{immediate:!0,handler(e){e&&e.length>0&&(this.cases=[...e],this.$emit("history-count-updated",this.filteredCases.length))}}},mounted(){this.retrieveCases()}},Za=Xa,Qa=(a("aa13"),Object(q["a"])(Za,qa,Wa,!1,null,"3e875f22",null)),es=Qa.exports,ts=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.holdApprovalDisabled},on:{click:function(t){return e.holdApproval()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-account-convert-outline")]),t("span",{staticClass:"action-text"},[e._v("HOLD APPROVAL")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("HOLD APPROVAL")])]),t(F["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogHoldApproval,callback:function(t){e.dialogHoldApproval=t},expression:"dialogHoldApproval"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("HOLD APPROVAL")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(_["c"],[e._v("I accept this file.")]),t(P["a"]),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeHoldApprovalDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:""},on:{click:e.compHoldApproval}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},as=[],ss={name:"holdApproval",props:["approvingManager"],components:{},data(){return{dialogHoldApproval:!1}},computed:{holdApprovalDisabled(){return!("PAPP"==this.caseState.casefile.fileStatus&&this.approvingManager)},...Object(K["c"])(["caseState"])},watch:{holdApproval(e){e||this.closeHoldApprovalDialog()}},methods:{holdApproval(){this.dialogHoldApproval=!0},compHoldApproval(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="HOLD",this.caseState.casefile.approvedBy=this.$store.state.auth.user.id).then(e=>{this.closeHoldApprovalDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.closeHoldApprovalDialog()},closeHoldApprovalDialog(){this.dialogHoldApproval=!1,this.$nextTick(()=>{})}}},is=ss,rs=Object(q["a"])(is,ts,as,!1,null,null,null),ls=rs.exports,ns=a("5632"),cs=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.invoisingDisabled},on:{click:function(t){return e.completeInvoising()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-currency-usd")]),t("span",{staticClass:"action-text"},[e._v("INVOISING & FINALISATION")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("INVOISING & FINALISATION")])]),t(F["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogCompleteInvoising,callback:function(t){e.dialogCompleteInvoising=t},expression:"dialogCompleteInvoising"}},[t(b["a"],{staticClass:"text-center"},[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("INVOISING & FINALISATION")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[[t("div",[t(_e["a"],{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(De["a"],e._g(e._b({attrs:{value:e.computedDateFormattedMomentjs,clearable:"","prepend-icon":"mdi-calendar",readonly:""},on:{"click:clear":function(t){e.date=null}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Date Of Invoising ")]},proxy:!0}],null,!0),model:{value:e.invoice.date,callback:function(t){e.$set(e.invoice,"date",t)},expression:"invoice.date"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(be["a"],{attrs:{value:e.computedDateFormattedMomentjs},on:{change:function(t){e.menu=!1}},model:{value:e.invoice.date,callback:function(t){e.$set(e.invoice,"date",t)},expression:"invoice.date"}})],1)],1)]],2),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(De["a"],{attrs:{rules:[e=>!!e||"Invoice Number is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Invoice Number ")]},proxy:!0}]),model:{value:e.invoice.number,callback:function(t){e.$set(e.invoice,"number",t)},expression:"invoice.number"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(De["a"],{attrs:{dense:"",type:"number",prefix:"RM",rules:[e=>!!e||"Fee Note is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Fee Note ")]},proxy:!0}]),model:{value:e.invoice.fee,callback:function(t){e.$set(e.invoice,"fee",e._n(t))},expression:"invoice.fee"}})],1),t(D["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(De["a"],{attrs:{dense:"",type:"number",prefix:"RM",rules:[e=>!!e||"Total Invoice Amount is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Total Invoice Amount ")]},proxy:!0}]),model:{value:e.invoice.total,callback:function(t){e.$set(e.invoice,"total",e._n(t))},expression:"invoice.total"}})],1),t(P["a"]),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeCompleteInvDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",disabled:e.isFileButtonDisabled,small:""},on:{click:e.compInvoisingDone}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},os=[],ds={name:"Invoising",props:["management"],components:{},data(){return{menu:!1,dialogCompleteInvoising:!1,rules:[e=>!!e||"This field is required. Only Numbers accepted"],invoice:{date:"",number:"",fee:"",total:""}}},computed:{computedDateFormattedMomentjs(){return this.date?V()(this.date).format("DD/MM/YY"):""},invoisingDisabled(){return!("INFI"==this.caseState.casefile.fileStatus&&this.management)},...Object(K["c"])(["caseState"]),isFileButtonDisabled(){return!(this.invoice.date&&this.invoice.number&&this.invoice.fee&&this.invoice.total)}},watch:{completeInvoising(e){e||this.closeCompleteInvDialog()}},methods:{filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},moment:function(e){return V()(e)},filterHandler(e){return this.handlers.filter(t=>t.id===e)},completeInvoising(){this.dialogCompleteInvoising=!0},compInvoisingDone(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.dateFinal=this.invoice.date,this.caseState.casefile.invNo=this.invoice.number,this.caseState.casefile.invFeeNote=this.invoice.fee,this.caseState.casefile.invTotal=this.invoice.total,this.caseState.casefile.fileStatus="DISP",this.caseState.casefile.dateFinal=V()().format(),this.caseState.casefile.finalBy=this.$store.state.auth.user.id).then(e=>{this.closeCompleteInvDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)});var e={caseId:this.caseState.casefile.id,isApproved:0};setTimeout(()=>{Ut["a"].updateAll(e.caseId,e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e||toString()})})},2500),this.closeCompleteInvDialog()},closeCompleteInvDialog(){this.dialogCompleteInvoising=!1,this.$nextTick(()=>{})}}},hs=ds,ms=Object(q["a"])(hs,cs,os,!1,null,null,null),us=ms.exports,fs=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"warning mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.reEditDisabled},on:{click:function(t){return e.reEdit()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-pencil-off")]),t("span",{staticClass:"action-text"},[e._v("RE-EDIT CASE")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("RE-EDIT CASE")])]),t(F["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogReInvestigate,callback:function(t){e.dialogReInvestigate=t},expression:"dialogReInvestigate"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("RE-EDIT CASE")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(_["c"],[e._v("I advice to re-edit the case.")]),t(P["a"],{attrs:{inset:""}}),t(D["a"],{attrs:{cols:"12"}},[t(ye["a"],{attrs:{"item-text":"Add a remark",label:"Case remark",rules:[e=>!!e||"Remark is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Remark ")]},proxy:!0}]),model:{value:e.commentData.comment,callback:function(t){e.$set(e.commentData,"comment",t)},expression:"commentData.comment"}})],1),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeReEditDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"success mt-3",attrs:{disabled:e.isFileButtonDisabled,small:"",tile:""},on:{click:e.compApprovalReport}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},ps=[],Cs={name:"reEdit",props:["holdingManager"],components:{},data(){return{dialogReInvestigate:!1,commentData:{id:null,caseId:null,comment:null,createdBy:""}}},computed:{reEditDisabled(){return!("HOLD"==this.caseState.casefile.fileStatus&&this.holdingManager)},...Object(K["c"])(["caseState"]),isFileButtonDisabled(){return!this.commentData.comment}},watch:{reEdit(e){e||this.closeReEditDialog()}},methods:{reEdit(){this.dialogReInvestigate=!0},compApprovalReport(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="PEDI").then(e=>{this.closeReEditDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).then(()=>{var e={caseId:this.caseState.casefile.id,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};nt["a"].create(e).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e||toString()})})}).catch(e=>{console.log(e)}),this.closeReEditDialog()},closeReEditDialog(){this.dialogReInvestigate=!1,this.$nextTick(()=>{})}}},gs=Cs,vs=Object(q["a"])(gs,fs,ps,!1,null,null,null),bs=vs.exports,_s=a("02ba"),Ss=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"error mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.reInvestigateDisabled},on:{click:function(t){return e.reInvestigate()}}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-steering-off")]),t("span",{staticClass:"action-text"},[e._v("RE-INVESTIGATE CASE")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("RE-INVESTIGATE CASE")])]),t(F["a"],{attrs:{persistent:"","max-width":"750px"},model:{value:e.dialogReInvestigate,callback:function(t){e.dialogReInvestigate=t},expression:"dialogReInvestigate"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("RE-INVESTIGATE CASE")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(b["a"],{staticClass:"mt-3 mb-3 text-start",attrs:{width:"100%"}},[t(_["c"],[e._v("I advice to re-investigate the case.")]),t(P["a"],{attrs:{inset:""}}),t(D["a"],{attrs:{cols:"12"}},[t(ye["a"],{attrs:{"item-text":"Add a remark",label:"Case remark",rules:[e=>!!e||"Remark is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Remark ")]},proxy:!0}]),model:{value:e.commentData.comment,callback:function(t){e.$set(e.commentData,"comment",t)},expression:"commentData.comment"}})],1),t(_["a"],[t(v["a"],{staticClass:"mt-3 mr-2",attrs:{outlined:"",small:"",tile:""},on:{click:e.closeReInvestigateDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"success mt-3",attrs:{disabled:e.isFileButtonDisabled,small:"",tile:""},on:{click:e.compApprovalReport}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)},Ds=[],ys={name:"reInvestigate",props:["holdingManager"],components:{},data(){return{dialogReInvestigate:!1,commentData:{id:null,caseId:null,comment:null,createdBy:""}}},computed:{reInvestigateDisabled(){return!("HOLD"==this.caseState.casefile.fileStatus&&this.holdingManager)},...Object(K["c"])(["caseState"]),isFileButtonDisabled(){return!this.commentData.comment}},watch:{reInvestigate(e){e||this.closeReInvestigateDialog()}},methods:{reInvestigate(){this.dialogReInvestigate=!0},compApprovalReport(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="BRAC").then(e=>{this.closeReInvestigateDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).then(()=>{var e={caseId:this.caseState.casefile.id,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};nt["a"].create(e).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e||toString()})})}).catch(e=>{console.log(e)}),this.closeReInvestigateDialog()},closeReInvestigateDialog(){this.dialogReInvestigate=!1,this.$nextTick(()=>{})}}},xs=ys,As=Object(q["a"])(xs,Ss,Ds,!1,null,null,null),ks=As.exports,Ts=a("d14b"),Es=a("304b"),Is=a("f983"),Rs=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{disabled:e.assignAdjDisabled,fab:"","x-small":""},on:{click:function(t){return e.transferAdj()}}},{...a}),[t(s["a"],[e._v("mdi-transit-transfer")])],1)]}}])},[t("span",[e._v("TRANSFER ADJUSTER")])]),t(F["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogAdj,callback:function(t){e.dialogAdj=t},expression:"dialogAdj"}},[e.editedCasefile?[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("TRANSFER ADJUSTER")])]),t(_["b"],{staticClass:"mt-3 pa-0"},[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(_["c"],{staticClass:"error"},[e._v(" BY TRANSFERING THE CASE TO ANOTHER ADJUSTER, PLEASE ACCEPT THAT ALL PREVIOUS ADJUSTERS RELATED LOGS WILL BE DELETED! ")]),t(_["b"],{staticClass:"mt-3 pa-0"},[e._v(" CHOOSE BRANCH FOLLOWED BY ADJUSTER ")])],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedBranches,"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":"",clearable:""},model:{value:e.branch.brCode,callback:function(t){e.$set(e.branch,"brCode",t)},expression:"branch.brCode"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedAdjustersByBranch(e.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Adjuster for the branch above","menu-props":{maxHeight:"400"},label:"ADJUSTERS",hint:"Assign Adjuster","persistent-hint":"",clearable:""},model:{value:e.editedCasefile.adjuster,callback:function(t){e.$set(e.editedCasefile,"adjuster",t)},expression:"editedCasefile.adjuster"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(re["a"]),t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",small:"",dark:""},on:{click:e.closeAdj}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:e.assignAdjRule},on:{click:e.saveAdjuster}},[e._v("Submit")])],1)],1)],1)],1)],1)]:e._e()],2)],1)},ws=[],Ns={name:"branchAccept",props:["branches","management","insurer","refType","subRefTypes","members","handlers","states","regions","adjusters"],components:{},data(){return{dialogAdj:!1,menu:!1,menu1:!1,branch:{name:"",brCode:""},editedCasefile:null}},computed:{...Object(K["c"])(["caseState"]),isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},assignAdjRule(){return!(this.branch.brCode&&this.editedCasefile&&this.editedCasefile.adjuster)},computedDateFormattedMomentjs(){return this.date?V()(this.date).format("DD/MM/YY"):""},assignAdjDisabled(){return"NEW"==this.caseState.casefile.fileStatus||"PEND"==this.caseState.casefile.fileStatus||"BRAC"==this.caseState.casefile.fileStatus||"CANC"==this.caseState.casefile.fileStatus||"CLO"==this.caseState.casefile.fileStatus||!this.management},sortedBranches(){return[...this.branches].map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedAdjustersByBranch(){return e=>this.adjusters.filter(t=>Array.isArray(t.branches)&&t.branches.some(t=>t.brCode===e)).map(e=>({...e,username:e.username?e.username.trim().toUpperCase():""})).sort((e,t)=>e.username.localeCompare(t.username))}},watch:{transferAdj(e){e||this.closeAdj()}},methods:{currentUserBranch(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(e=>e.id===this.caseState.casefile.branch)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findAdjEmail(e){const t=this.adjusters.filter(t=>t.id===e);return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},filterAdjByBranch(e){return this.adjusters.filter(t=>t.branches.some(t=>t.brCode===e))},transferAdj(){if(this.editedCasefile=JSON.parse(JSON.stringify(this.caseState.casefile)),this.caseState.casefile.branch){const e=this.branches.find(e=>e.id===this.caseState.casefile.branch);this.branch=e?{name:e.name,brCode:e.brCode}:{name:"",brCode:""}}else this.branch={name:"",brCode:""};this.dialogAdj=!0},saveAdjuster(){if(!this.editedCasefile)return;const e={...this.editedCasefile,dateOfAdj:V()().format(),assignAdjBy:this.$store.state.auth.user.id};G["a"].update(this.editedCasefile.id,e).then(t=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.caseState.casefile=e}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{const t=e.adjuster;var a={id:e.id,refType:this.filterDept(e.refType)[0].description,refTypeCode:this.filterDept(e.refType)[0].name,subRefType:this.filterSubDept(e.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(e.subRefType)[0].subCode,branch:this.filterBranchName(e.branch),branchCode:this.filterBranches(e.branch)[0].brCode,insurer:this.filterIns(e.insurer)[0].name,recipient:this.findAdjEmail(t),createdBy:this.$store.state.auth.user.id};ke["a"].assignAdj(a).then(e=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.dataEmail=""}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeAdj()},closeAdj(){this.dialogAdj=!1,this.editedCasefile=null,this.branch={name:"",brCode:""},this.$nextTick(()=>{})}}},Os=Ns,Bs=Object(q["a"])(Os,Rs,ws,!1,null,null,null),js=Bs.exports,$s=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t("span",e._g({},a),[t(v["a"],e._b({staticClass:"mx-1",attrs:{fab:"","x-small":"",color:"blue lighten-2",dark:"",disabled:!e.isRealManager||e.isCaseCancelled},on:{click:e.showTransferCaseDialog}},"v-btn",i,!1),[t(s["a"],{attrs:{dark:""}},[e._v("mdi-file-move-outline")])],1)],1)]}}])},[t("span",[e._v("Transfer Case")])]),t(F["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogTransferBranch,callback:function(t){e.dialogTransferBranch=t},expression:"dialogTransferBranch"}},[e.editedCasefile?[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("TRANSFER BRANCH")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedBranches,"item-text":"name","item-value":"id","menu-props":{maxHeight:"400"},hint:"Set the casefile branch","persistent-hint":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Branch ")]},proxy:!0}],null,!1,4056079958),model:{value:e.editedCasefile.branch,callback:function(t){e.$set(e.editedCasefile,"branch",t)},expression:"editedCasefile.branch"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(re["a"]),t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",dark:"",small:""},on:{click:e.closeTransferBranchDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:e.isAddFileButtonDisabled},on:{click:e.transferBranchSubmit}},[e._v("Submit")])],1)],1)],1)],1)],1)]:e._e()],2)],1)},Fs=[],Ps={name:"transferBranch",props:{approvingManager:Boolean,casefile:Object,refType:Array,subRefTypes:Array,insurer:Array,branches:Array,members:Array,states:Array,regions:Array},data(){return{dialogTransferBranch:!1,menu:!1,menu1:!1,editedCasefile:null}},computed:{...Object(K["c"])(["caseState"]),isAddFileButtonDisabled(){return!this.editedCasefile||!this.editedCasefile.branch},isRealManager(){return this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")},isCaseCancelled(){return"CANC"===this.caseState.casefile.fileStatus||"CLO"===this.caseState.casefile.fileStatus},computedDateFormattedMomentjs(){return this.date?V()(this.date).format("DD/MM/YY"):""},sortedBranches(){return this.branches.map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))}},watch:{transferBranch(e){e||this.closeTransferBranchDialog()}},methods:{filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},showTransferCaseDialog(){this.editedCasefile=JSON.parse(JSON.stringify(this.caseState.casefile)),this.dialogTransferBranch=!0},transferBranch(){this.showTransferCaseDialog()},transferBranchSubmit(){if(!this.editedCasefile)return;const e=this.editedCasefile.refType;var t={id:this.editedCasefile.id,refType:this.filterDept(this.editedCasefile.refType)[0].description,refTypeCode:this.filterDept(this.editedCasefile.refType)[0].name,subRefType:this.filterSubDept(this.editedCasefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.editedCasefile.subRefType)[0].subCode,branch:this.filterBranchName(this.editedCasefile.branch),branchCode:this.filterBranches(this.editedCasefile.branch)[0].brCode,insurer:this.filterIns(this.editedCasefile.insurer)[0].name,recipient:this.findUserEmail(this.filterPicID(e)),createdBy:this.$store.state.auth.user.id};const a={...this.editedCasefile,vehicleNo:this.editedCasefile.vehicleNo?this.editedCasefile.vehicleNo.toLowerCase().replace(/\s/g,""):"",fileStatus:"BRAC",assignBranchBy:this.$store.state.auth.user.id,dateOfReg:V()().format()};G["a"].update(this.editedCasefile.id,a).then(()=>{ke["a"].assignBranch(t).then(e=>{this.closeTransferBranchDialog(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.caseState.casefile=a,this.dataEmail=""}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeTransferBranchDialog()},closeTransferBranchDialog(){this.dialogTransferBranch=!1,this.editedCasefile=null,this.$nextTick(()=>{})}}},Ls=Ps,Ms=Object(q["a"])(Ls,$s,Fs,!1,null,null,null),Us=Ms.exports,Hs=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(v["a"],e._g({staticClass:"warning mr-1",attrs:{disabled:e.assignClerkDisabled,fab:"","x-small":""},on:{click:function(t){return e.transferClerk()}}},{...a}),[t(s["a"],[e._v("mdi-account-switch")])],1)]}}])},[t("span",[e._v("TRANSFER CLERK")])]),t(F["a"],{attrs:{"max-width":"750px"},model:{value:e.dialogTransferClerk,callback:function(t){e.dialogTransferClerk=t},expression:"dialogTransferClerk"}},[e.editedCasefile?[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("TRANSFER CLERK")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedBranches,"item-text":"name","item-value":"brCode","menu-props":{maxHeight:"400"},label:"BRANCH",hint:"Select Branch","persistent-hint":"",clearable:""},model:{value:e.branch.brCode,callback:function(t){e.$set(e.branch,"brCode",t)},expression:"branch.brCode"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.sortedClerksByBranch(e.branch.brCode),"item-text":"username","item-value":"id","no-data-text":"There is no Clerk for the branch above","menu-props":{maxHeight:"400"},label:"CLERK",hint:"Assign Clerk","persistent-hint":"",clearable:""},model:{value:e.editedCasefile.clerkInCharge,callback:function(t){e.$set(e.editedCasefile,"clerkInCharge",t)},expression:"editedCasefile.clerkInCharge"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(re["a"]),t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",small:"",dark:""},on:{click:e.closeTransferClerkDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 success",attrs:{tile:"",small:"",disabled:e.isAddFileButtonDisabled},on:{click:e.transferClerkSubmit}},[e._v("Submit")])],1)],1)],1)],1)],1)]:e._e()],2)],1)},Gs=[],Ys={name:"branchAccept",props:["branches","management","insurer","refType","subRefTypes","members","handlers","states","regions","adjusters","clerks"],components:{},data(){return{dialogTransferClerk:!1,menu:!1,menu1:!1,branch:{name:"",brCode:""},editedCasefile:null}},computed:{...Object(K["c"])(["caseState"]),isAddFileButtonDisabled(){return!this.editedCasefile||!this.editedCasefile.clerkInCharge||!this.branch.brCode},sortedBranches(){return this.branches.map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""})).sort((e,t)=>e.name.localeCompare(t.name))},sortedClerksByBranch(){return e=>this.clerks.filter(t=>Array.isArray(t.branches)&&t.branches.some(t=>t.brCode===e)).map(e=>({...e,username:e.username?e.username.trim().toUpperCase():""})).sort((e,t)=>e.username.localeCompare(t.username))},assignAdjRule(){return!(this.branch.brCode&&this.caseState.casefile.adjuster)},assignClerkRule(){return!(this.branch.brCode&&this.caseState.casefile.clerkInCharge)},computedDateFormattedMomentjs(){return this.date?V()(this.date).format("DD/MM/YY"):""},assignClerkDisabled(){return"NEW"==this.caseState.casefile.fileStatus||"PEND"==this.caseState.casefile.fileStatus||"BRAC"==this.caseState.casefile.fileStatus||"ADAC"==this.caseState.casefile.fileStatus||"INVE"==this.caseState.casefile.fileStatus||"PEDI"==this.caseState.casefile.fileStatus||"EDAC"==this.caseState.casefile.fileStatus||"EDI"==this.caseState.casefile.fileStatus||"PAPP"==this.caseState.casefile.fileStatus||"HOLD"==this.caseState.casefile.fileStatus||"PFORM"==this.caseState.casefile.fileStatus||"CANC"==this.caseState.casefile.fileStatus||"CLO"==this.caseState.casefile.fileStatus||!this.management}},watch:{transferAdj(e){e||this.closeAdj()},transferClerk(e){e||this.closeClerk()}},methods:{currentUserBranch(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(e=>e.id===this.caseState.casefile.branch)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},findAdjEmail(e){const t=this.adjusters.filter(t=>t.id===e);return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},findClerkEmail(e){const t=this.clerks.filter(t=>t.id===e);return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},filterAdjByBranch(e){return this.adjusters.filter(t=>t.branches.some(t=>t.brCode===e))},filterClerkByBranch(e){return this.clerks.filter(t=>t.branches.some(t=>t.brCode===e))},transferAdj(){this.dialogAdj=!0},transferClerk(){if(this.editedCasefile=JSON.parse(JSON.stringify(this.caseState.casefile)),this.caseState.casefile.branch){const e=this.branches.find(e=>e.id===this.caseState.casefile.branch);this.branch=e?{name:e.name,brCode:e.brCode}:{name:"",brCode:""}}else this.branch={name:"",brCode:""};this.dialogTransferClerk=!0},saveAdjuster(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.dateOfAdj=V()().format(),this.caseState.casefile.assignAdjBy=this.$store.state.auth.user.id).then(e=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{const e=this.caseState.casefile.adjuster;var t={id:this.caseState.casefile.id,refType:this.filterDept(this.caseState.casefile.refType)[0].description,refTypeCode:this.filterDept(this.caseState.casefile.refType)[0].name,subRefType:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.caseState.casefile.subRefType)[0].subCode,branch:this.filterBranchName(this.caseState.casefile.branch),branchCode:this.filterBranches(this.caseState.casefile.branch)[0].brCode,insurer:this.filterIns(this.caseState.casefile.insurer)[0].name,recipient:this.findAdjEmail(e),createdBy:this.$store.state.auth.user.id};ke["a"].assignAdj(t).then(e=>{this.closeAdj(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.dataEmail=""}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeAdj()},transferClerkSubmit(){if(!this.editedCasefile)return;const e={...this.editedCasefile,clerkInCharge:this.editedCasefile.clerkInCharge,fileStatus:"CLERK",dateAssignFormatting:(new Date).toISOString(),assignClerkBy:this.$store.state.auth.user.id};G["a"].update(this.editedCasefile.id,e).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.caseState.casefile=e,this.closeTransferClerkDialog()}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}).then(()=>{var e={id:this.editedCasefile.id,refType:this.filterDept(this.editedCasefile.refType)[0].description,refTypeCode:this.filterDept(this.editedCasefile.refType)[0].name,subRefType:this.filterSubDept(this.editedCasefile.subRefType)[0].subCodeDesc,subRefCode:this.filterSubDept(this.editedCasefile.subRefType)[0].subCode,branch:this.filterBranchName(this.editedCasefile.branch),branchCode:this.filterBranches(this.editedCasefile.branch)[0].brCode,insurer:this.filterIns(this.editedCasefile.insurer)[0].name,recipient:this.findUserEmail(this.editedCasefile.clerkInCharge),createdBy:this.$store.state.auth.user.id};ke["a"].assignClerk(e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:e&&e.data&&e.data.message||toString()})}).catch(e=>{console.log(e)}),this.dataEmail=""}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,text:e.response&&e.response.data&&e.response.data.message||e.message||toString()})}),this.closeTransferClerkDialog()},closeAdj(){this.dialogAdj=!1,this.$nextTick(()=>{})},closeTransferClerkDialog(){this.dialogTransferClerk=!1,this.editedCasefile=null,this.branch={name:"",brCode:""},this.$nextTick(()=>{})}}},Vs=Ys,Ks=Object(q["a"])(Vs,Hs,Gs,!1,null,null,null),Js=Ks.exports,zs=function(){var e=this,t=e._self._c;return t(F["a"],{attrs:{width:"800px"},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:i}){return[t(v["a"],e._g({attrs:{small:"",icon:""}},{...i,...a}),[1===e.casefile.flag?t(s["a"],{attrs:{color:"green lighten-1"}},[e._v(" mdi-shield-check ")]):e._e(),2===e.casefile.flag?t(s["a"],{attrs:{color:"orange lighten-1"}},[e._v(" mdi-shield-half-full ")]):e._e(),3===e.casefile.flag?t(s["a"],{attrs:{color:"red darken-5"}},[e._v(" mdi-shield-alert-outline ")]):e._e()],1)]}}],null,!0)},[1===e.casefile.flag?t("span",[e._v("GENUINE")]):e._e(),2===e.casefile.flag?t("span",[e._v("SUSPECTED FRAUD")]):e._e(),3===e.casefile.flag?t("span",[e._v("FRAUD")]):e._e()])]}}]),model:{value:e.flag,callback:function(t){e.flag=t},expression:"flag"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[t("span",{staticClass:"text-h5"},[e._v("CHANGE CASE STATUS")])]),t(_["b"],[t(y["a"],[t(A["a"],[t(D["a"],{attrs:{cols:"12"}},[t(Se["a"],{attrs:{items:e.SelectOptions,"item-text":"name","item-value":"value","menu-props":{maxHeight:"400"},label:"Status",hint:"Select Status","persistent-hint":""},model:{value:e.SelectOptions.value,callback:function(t){e.$set(e.SelectOptions,"value",t)},expression:"SelectOptions.value"}})],1),t(D["a"],{attrs:{cols:"12"}},[t(ye["a"],{attrs:{"item-text":"Add a remark",label:"Case remark",rules:[e=>!!e||"Remark is required"]},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{staticClass:"red--text"},[t("strong",[e._v("* ")])]),e._v("Remark ")]},proxy:!0}]),model:{value:e.commentData.comment,callback:function(t){e.$set(e.commentData,"comment",t)},expression:"commentData.comment"}})],1),t(P["a"]),t(_["a"],[t(v["a"],{attrs:{tile:"",small:"",outlined:""},on:{click:e.closeFlag}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"primary",attrs:{disabled:e.setFlagRule,tile:"",small:""},on:{click:e.setFlag}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)},qs=[],Ws={name:"flag",props:["casefile"],components:{},data(){return{flag:null,message:"",SelectOptions:[{name:"Genuine",value:1},{name:"Suspected Fraud",value:2},{name:"Fraud",value:3}],commentData:{id:null,caseId:null,comment:"",createdBy:""}}},computed:{setFlagRule(){return!(this.SelectOptions.value&&this.commentData.comment)}},watch:{flag(e){e||this.closeFlag()}},methods:{closeFlag(){this.flag=null,this.$nextTick(()=>{this.SelectOptions.value="",this.commentData.comment=""})},setFlag(){this.message="";var e={flag:this.SelectOptions.value};G["a"].update(this.casefile.id,e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()})}).then(()=>{var e={caseId:this.casefile.id,comment:this.commentData.comment,createdBy:this.$store.state.auth.user.id};nt["a"].create(e).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:e&&e.data&&e.data.message||toString()}),this.closeFlag(),this.$router.push("/home")}).catch(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:e||toString()})})}).catch(()=>{this.message="Could not update the status!"})}}},Xs=Ws,Zs=Object(q["a"])(Xs,zs,qs,!1,null,"c3d64826",null),Qs=Zs.exports,ei=a("8fea"),ti=function(){var e=this,t=e._self._c;return t("div",[t(_["c"],{staticClass:"pb-0"},[e._v("CLAIM DETAILS")]),t(P["a"]),t(ei["a"],{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{dense:"",headers:e.headers,items:e.claims},on:{"click:row":t=>e.showItem(t)},scopedSlots:e._u([{key:"top",fn:function(){return[t(F["a"],{attrs:{"max-width":"500px",persistent:""},model:{value:e.approveDialog,callback:function(t){e.approveDialog=t},expression:"approveDialog"}},[t(b["a"],[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[e._v("Claim Details")]),t(_["b"],[t(y["a"],[t(Ft["a"],{attrs:{disabled:!1===e.management}},[t(A["a"],[t(D["a"],{staticClass:"display-3 text-start font-weight-bold",attrs:{cols:"12"}},[e._v(" MYR "+e._s(e.newTotal)+" ")])],1),t(A["a"],{attrs:{"no-gutters":""}},[t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("Travelling ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.travMileage)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("Additional ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.additional)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("SD & Stamps ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.sdAndStamps)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("Medical Reprot ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.medicalReport)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("Police Document ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.policeDoc)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("JPJ Document ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.jpjDoc)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("Miscellaneous ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.misc)+" ")]),t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"6"}},[e._v("Typing ")]),t(D["a"],{staticClass:"subtitle-1 text-center",attrs:{cols:"6"}},[e._v(e._s(e.selectedClaim.typing)+" ")]),e.selectedClaim.isApprovedComment?t(D["a"],{staticClass:"subtitle-1 text-start",attrs:{cols:"12"}},[e._v("Comment: "+e._s(e.selectedClaim.isApprovedComment)+" ")]):e._e(),t(_["a"],[t(v["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:e.closeApproveDialog}},[e._v("CLOSE")])],1)],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.numbering",fn:function(t){return[e._v(" "+e._s(t.index+1)+" ")]}},{key:"item.caseId",fn:function({item:a}){return[t("tr",{staticClass:"d-flex"},[e._v(" AA "),e._l(e.filterDept(e.caseState.casefile.refType),(function(s,i){return t("div",{key:i},[e._v(" /"+e._s(s.name)),e._l(e.filterSubDept(e.caseState.casefile.subRefType),(function(a,s){return t("span",{key:s},[e._v("/"+e._s(a.subCode))])})),t("span",[e._v("/"+e._s(a.caseId)+"/"+e._s(e.yearOnly(e.caseState.casefile.createdAt)))]),e._l(e.filterBranches(e.caseState.casefile.branch),(function(a){return t("span",{key:a.id},[e._v("/"+e._s(a.brCode))])}))],2)}))],2)]}},{key:"item.adjId",fn:function({item:a}){return e._l(e.filterUser(a.adjId),(function(a){return t("div",{key:a.id},[e._v(" "+e._s(a.username)+" ")])}))}},{key:"item.sumAll",fn:function({item:a}){return[t("span",[e._v("MYR "+e._s(e.total(a.id)))])]}},{key:"item.createdAt",fn:function({item:t}){return[e._v(" "+e._s(e.formatDate(t.createdAt))+" ")]}},{key:"item.isApproved",fn:function({item:t}){return[e._v(" "+e._s(e.getClaimStatus(t.isApproved))+" ")]}}],null,!0)})],1)},ai=[],si=(a("13d5"),a("9485"),{name:"detailClaims",props:["branches","members","refType","subRefTypes"],data:()=>({management:!1,dialog:!1,dialogDelete:!1,approveDialog:!1,claims:[],selectedClaim:[],search:""}),components:{},computed:{...Object(K["c"])(["caseState"]),headers(){return[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"AASB REFERENCE",align:"start",sortable:!0,value:"caseId"},{text:"ADJUSTER",align:"start",sortable:!1,value:"adjId"},{text:"SUBMITTED ON",align:"start",sortable:!1,value:"createdAt"},{text:"CLAIMS TOTAL",align:"start",sortable:!0,value:"sumAll"},{text:"STATUS",align:"start",sortable:!0,value:"isApproved"}]},newTotal(){const e=1*this.selectedClaim.travMileage+1*this.selectedClaim.additional+1*this.selectedClaim.sdAndStamps+1*this.selectedClaim.medicalReport+1*this.selectedClaim.policeDoc+1*this.selectedClaim.jpjDoc+1*this.selectedClaim.misc+1*this.selectedClaim.typing;return e.toFixed(2)}},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()}},methods:{getClaimStatus(e){return null==e?"PENDING":0==e?"NEW":1==e?"QUERY":2==e?"APPROVED":""},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER"))&&(this.management=!0)},total(e){const t=this.claims.filter(t=>t.id===e),a=t.reduce((e,t)=>e+1*t.travMileage+1*t.additional+1*t.sdAndStamps+1*t.medicalReport+1*t.policeDoc+1*t.jpjDoc+1*t.misc+1*t.typing,0);return a.toFixed(2)},formatDate(e){return V()(e).format("DD/MM/YYYY LT")},yearOnly(e){return V()(e).format("YY")},filterDept(e){return this.refType.filter(t=>t.id===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},filterUser(e){return this.members.filter(t=>t.id===e)},retrieveClaims(){Ut["a"].getAll().then(e=>{this.claims=e.data.filter(e=>e.caseId===this.caseState.casefile.id)}).catch(e=>{console.log(e)})},refreshList(){},showItem(e){this.selectedClaim=Object.assign({},e),this.approveDialog=!0},closeApproveDialog(){this.selectedClaim=Object.assign({}),this.approveDialog=!1}},mounted(){this.checkManagement(),this.retrieveClaims()}}),ii=si,ri=Object(q["a"])(ii,ti,ai,!1,null,null,null),li=ri.exports,ni=function(){var e=this,t=e._self._c;return t("div",[t(M["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(L["a"],{scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(v["a"],e._g({staticClass:"success mr-1",attrs:{block:"",height:"80",elevation:i?8:2,disabled:e.acceptAssignmentDisabled},on:{click:e.openDialog}},{...a}),[t("div",{staticClass:"d-flex flex-column align-center"},[t(s["a"],[e._v("mdi-account-check")]),t("span",{staticClass:"action-text"},[e._v("Accept Assignment")])],1)])]}}],null,!0)})]}}])},[t("span",[e._v("ACCEPT ASSIGNMENT")])]),t(F["a"],{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e.editedCasefile?[t(b["a"],{staticClass:"text-center"},[t(_["c"],{staticClass:"justify-center text-h5 grey lighten-2"},[e._v(" ACCEPT ASSIGNMENT? ")]),t(_["b"],{staticClass:"mt-3 pa-0"},[e._v(" CASEFILE NUMBER: AA "),e.filteredDept.length?t("span",[e._v(" /"+e._s(e.filteredDept[0].name)+" "),e.filteredSubRefTypes.length?t("span",[e._v(" /"+e._s(e.filteredSubRefTypes[0].subCode)+" ")]):e._e()]):e._e(),e._v(" /"+e._s(e.editedCasefile.id)+"/"+e._s(e.yearOnly(e.editedCasefile.createdAt))+" "),e.filteredBranch.length?t("span",[e._v(" /"+e._s(e.filteredBranch[0].brCode)+" ")]):e._e()]),t(P["a"]),t(_["a"],[t(re["a"]),t(v["a"],{staticClass:"mt-3 mr-2 error",attrs:{tile:"",small:"",dark:""},on:{click:e.closeDialog}},[e._v(" Cancel ")]),t(v["a"],{staticClass:"mt-3 mr-2 success",attrs:{tile:"",small:""},on:{click:e.acceptAssignment}},[e._v(" OK ")]),t(re["a"])],1)],1)]:e._e()],2)],1)},ci=[],oi={name:"acceptAssignment",props:{casefile:{type:Object,required:!0},refType:Array,branches:Array,subRefTypes:Array,insurer:Array,members:Array,handlers:Array,states:Array},data(){return{dialog:!1,editedCasefile:null}},computed:{acceptAssignmentDisabled(){return!("ADAC"===this.casefile.fileStatus&&this.casefile.adjuster===this.$store.state.auth.user.id)},filteredDept(){return this.refType.filter(e=>{var t;return e.id===(null===(t=this.editedCasefile)||void 0===t?void 0:t.refType)}).map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""}))},filteredSubRefTypes(){return this.subRefTypes.filter(e=>{var t;return e.id===(null===(t=this.editedCasefile)||void 0===t?void 0:t.subRefType)}).map(e=>({...e,subCode:e.subCode?e.subCode.trim().toUpperCase():""}))},filteredBranch(){return this.branches.filter(e=>{var t;return e.id===(null===(t=this.editedCasefile)||void 0===t?void 0:t.branch)}).map(e=>({...e,name:e.name?e.name.trim().toUpperCase():""}))}},methods:{openDialog(){this.editedCasefile=JSON.parse(JSON.stringify(this.casefile)),this.dialog=!0},closeDialog(){this.dialog=!1,this.editedCasefile=null},acceptAssignment(){const e={...this.editedCasefile,fileStatus:"INVE",dateStartInv:V()().format()};G["a"].update(this.editedCasefile.id,e).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"green",text:t&&t.data&&t.data.message||toString()}),Object.assign(this.casefile,e),this.$emit("accepted")}).catch(e=>{console.log(e)}),this.closeDialog()},yearOnly(e){return V()(e).format("YY")}}},di=oi,hi=(a("adfd"),Object(q["a"])(di,ni,ci,!1,null,"4033f406",null)),mi=hi.exports,ui={name:"vuexFile",components:{Acknowledgement:ie["a"],Documents:ja,Comments:xt,Flag:Qs,ApplyDoc:he,AssignBranch:Re,BranchAccept:st,CompleteInvestigation:Vt,AssignEditor:He,AcceptEditing:X,CompleteEditing:Rt,CancelCase:ht,TransferCase:Us,TransferAdj:js,TransferClerk:Js,EditCase:Ja,HoldApproval:ls,ApprovalReport:ge,ReInvestigate:ks,ReEdit:bs,AssignClerk:$e,AcceptFormatting:se,CompleteFormatting:$t,Invoising:us,Dispatch:_a,DoneDispatch:Ua,Close:gt,Audit:Xe,DetailTab:fa,History:es,Claims:li,AcceptAssignment:mi},data(){return{overlay:!0,tab:null,fileaccess:!1,management:!1,newCase:!1,claims:[],stages:[],adjusters:[],editors:[],clerks:[],members:[],branches:[],regions:[],refType:[],subRefTypes:[],insurer:[],handlers:[],branch:{name:"",brCode:""},states:[],dialogAcceptCase:!1,acknowledgement:!1,menu:!1,menu1:!1,documents:[],documentsLoading:!1,documentCount:0,comments:[],commentsLoading:!1,commentCount:0,accessDenied:!1,loading:!0,permissionCheckComplete:!1,caseHistory:[],historyLoading:!1}},computed:{...Object(K["c"])(["caseState"]),holdingManager(){return this.caseState.casefile.approvedBy===this.$store.state.auth.user.id},getStatusColorClass(){const e=this.caseState.casefile.fileStatus,t={NEW:"success",PEND:"warning",INVE:"info",COMP:"error"};return t[e]||"grey"},newPendDisabled(){return!(("NEW"==this.caseState.casefile.fileStatus||"PEND"==this.caseState.casefile.fileStatus)&&this.management)},acceptAssignmentDisabled(){return!("ADAC"==this.caseState.casefile.fileStatus&&this.caseState.casefile.adjuster==this.$store.state.auth.user.id)},isAddFileButtonDisabled(){return!(this.caseState.casefile.refType&&this.caseState.casefile.branch&&this.caseState.casefile.insurer&&this.caseState.casefile.claimNo&&this.caseState.casefile.vehicleNo&&this.caseState.casefile.dateOfLoss&&this.caseState.casefile.insComment)},computedDateFormattedMomentjs(){return this.date?V()(this.date).format("DD/MM/YY"):""},hasAvailableActions(){const e=this.caseState.casefile.fileStatus,t=this.caseState.casefile.adjuster===this.$store.state.auth.user.id,a=this.caseState.casefile.editor===this.$store.state.auth.user.id,s=this.caseState.casefile.clerkInCharge===this.$store.state.auth.user.id;return{showApplyDoc:"NEW"===e&&this.management,showAssignBranch:("NEW"===e||"PEND"===e)&&this.management,showBranchAccept:"BRAC"===e&&this.management,showAcceptAssignment:"ADAC"===e&&t,showCompleteInvestigation:"INVE"===e&&t,showAssignEditor:("PEDI"===e||"REIN"===e)&&this.management,showAcceptEditing:"EDAC"===e&&a,showCompleteEditing:"EDI"===e&&a,showHoldApproval:"PAPP"===e&&this.approvingManager,showApprovalReport:"HOLD"===e&&this.holdingManager,showReInvestigate:"HOLD"===e&&this.holdingManager,showReEdit:"HOLD"===e&&this.holdingManager,showAssignClerk:("PFORM"===e||"PEDI"===e)&&this.management,showAcceptFormatting:"CLERK"===e&&s,showCompleteFormatting:"FOIN"===e&&s,showInvoising:"INFI"===e&&this.management,showDispatch:"DISP"===e&&this.management,showDoneDispatch:"PDISP"===e&&this.management,showClose:"DISP"===e&&this.management}},approvingManager(){return this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")},historyTabCount(){var e;const t=null===(e=this.caseState.casefile)||void 0===e?void 0:e.vehicleNo;if(!t)return 0;const a=String(t).trim().toUpperCase();return"TBA"===a||"NONE"===a?0:this.historyCount}},watch:{acceptCase(e){e||this.closeAcceptCase()},"caseState.casefile":{immediate:!0,handler(e,t){(!t||e&&t&&e.id!==t.id)&&(this.preloadDocuments(),this.preloadComments())},deep:!0}},methods:{moment:function(e){return V()(e)},yearOnly(e){return V()(e).format("YY")},filterRegions(e){return this.regions.filter(t=>t.branchId===e)},filtersubRefType(e){return this.subRefTypes.filter(t=>t.deptId===e)},filterSubDept(e){return this.subRefTypes.filter(t=>t.id===e)},filterAdjByBranch(e){return this.adjusters.filter(t=>t.branches.some(t=>t.brCode===e))},filterClerkByBranch(e){return this.clerks.filter(t=>t.branches.some(t=>t.brCode===e))},findClerkByBranch(e){const t=this.clerks.filter(t=>t.branches.some(t=>t.brCode===e));return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},findAdjByBranch(e){const t=this.adjusters.filter(t=>t.branches.some(t=>t.brCode===e));return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},findAdjEmail(e){const t=this.adjusters.filter(t=>t.id===e);return t.map(e=>e.email)||"sys.admin@associatedadjusters.com"},filterStages(e){return this.stages.filter(t=>t.stageCode===e)},filterDept(e){return this.refType.filter(t=>t.id===e)},filterIns(e){return this.insurer.filter(t=>t.id===e)},filterBranchName(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].name},filterPicID(e){if(!e)return"TBA";const t=this.refType.filter(t=>t.id===e);return t[0].picID},filterAdj(e){return this.adjusters.filter(t=>t.id===e)},filterEditor(e){return this.editors.filter(t=>t.id===e)},filterrecipient(e){return e?this.clerks.filter(t=>t.id===e):"TBA"},filterApprover(e){return this.members.filter(t=>t.id===e)},filterClerk(e){return this.clerks.filter(t=>t.id===e)},filterBranches(e){return this.branches.filter(t=>t.id===e)},findBrcode(e){if(!e)return"TBA";const t=this.branches.filter(t=>t.id===e);return t[0].brCode},filterStates(e){return this.states.filter(t=>t.id===e)},filterHandler(e){return this.handlers.filter(t=>t.insId===e)},filterUser(e){return this.members.filter(t=>t.id===e)},findUserEmail(e){const t=this.members.filter(t=>t.id===e);return t[0]?t[0].email:"sys.admin@associatedadjusters.com"},currentUserBranch(){return this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("CLERK")?this.branches:this.branches.filter(e=>e.id===this.caseState.casefile.branch)},checkManagement(){(this.$store.state.auth.user.roles.includes("ADMIN")||this.$store.state.auth.user.roles.includes("MANAGER")||this.$store.state.auth.user.roles.includes("BRANCHMANAGER")||this.$store.state.auth.user.roles.includes("BRANCHCLERK")||this.$store.state.auth.user.roles.includes("CLERK"))&&(this.management=!0)},formatDate:function(e){return e?V()(e).format("DD/MM/YYYY"):""},formatTime:function(e){return V()(e).format("h:mm:ss a")},dateDiff(e,t){let a=V()(e),s=V()(t),i=V.a.duration(s.diff(a));return Math.floor(i.asDays())},refreshList(){this.retrieveAdjusters(),this.retrieveEditors(),this.retrieveClerks(),this.retrieveUsers(),this.retrieveBranches(),this.retrieveStates(),this.retrieveCasefiles(this.$route.params.id)},retrieveClaims(){Ut["a"].getAll().then(e=>{this.claims=e.data}).catch(e=>{console.log(e)})},retrieveDept(){Kt["a"].getAll().then(e=>{this.refType=e.data}).catch(e=>{console.log(e)})},retrieveSubRefType(){Is["a"].getAll().then(e=>{this.subRefTypes=e.data}).catch(e=>{console.log(e)})},retrieveIns(){ns["a"].getAll().then(e=>{this.insurer=e.data}).catch(e=>{console.log(e)})},retrieveHandler(){za["a"].getAll().then(e=>{this.handlers=e.data}).catch(e=>{console.log(e)})},retrieveStages(){Ts["a"].getAll().then(e=>{this.stages=e.data}).catch(e=>{console.log(e)})},retrieveAdjusters(){_t["a"].getAll().then(e=>{this.adjusters=e.data.filter(e=>e.roles.some(e=>"adjuster"===e.roleCode)&&e.active)}).catch(e=>{console.log(e)})},retrieveEditors(){_t["a"].getAll().then(e=>{this.editors=e.data.filter(e=>e.roles.some(e=>"editor"===e.roleCode||"manager"===e.roleCode||"branchmanager"===e.roleCode)&&e.active)}).catch(e=>{console.log(e)})},retrieveClerks(){_t["a"].getAll().then(e=>{this.clerks=e.data.filter(e=>e.roles.some(e=>"clerk"===e.roleCode||"manager"===e.roleCode||"branchclerk"===e.roleCode||"branchmanager"===e.roleCode)&&e.active)}).catch(e=>{console.log(e)})},retrieveUsers(){_t["a"].getAll().then(e=>{this.members=e.data.filter(e=>e.active)}).catch(e=>{console.log(e)})},retrieveBranches(){it["a"].getAll().then(e=>{this.branches=e.data}).catch(e=>{console.log(e)})},retrieveStates(){Es["a"].getAll().then(e=>{this.states=e.data.map(this.getDisplayStates)}).catch(e=>{console.log(e)})},getDisplayStates(e){return{id:e.id,name:e.name.length>30?e.name.substr(0,30)+"...":e.name,stCode:e.stCode.length>30?e.stCode.substr(0,30)+"...":e.stCode}},retrieveRegions(){_s["a"].getAll().then(e=>{this.regions=e.data}).catch(e=>{console.log(e)})},async retrieveCasefiles(e){this.loading=!0,this.permissionCheckComplete=!1,this.accessDenied=!1;try{const t=await G["a"].get(e),a=t.data;await Promise.all([this.ensureDeptLoaded(),this.ensureBranchesLoaded()]).then(()=>{this.checkCasefileAccess(a)?(this.caseState.casefile=a,this.checkFileaccess(),this.preloadHistory):this.accessDenied=!0,this.permissionCheckComplete=!0,this.loading=!1}).catch(()=>{this.accessDenied=!0,this.permissionCheckComplete=!0,this.loading=!1})}catch(t){console.log(t),this.accessDenied=!0,this.permissionCheckComplete=!0,this.loading=!1,this.$store.dispatch("alerts/setAlert",{text:"Error loading case file data",type:"error"})}},ensureDeptLoaded(){return this.refType&&this.refType.length>0?Promise.resolve():new Promise((e,t)=>{Kt["a"].getAll().then(t=>{this.refType=t.data,e()}).catch(e=>{console.log("Error loading departments:",e),t(e)})})},ensureBranchesLoaded(){return this.branches&&this.branches.length>0?Promise.resolve():new Promise((e,t)=>{it["a"].getAll().then(t=>{this.branches=t.data,e()}).catch(e=>{console.log("Error loading branches:",e),t(e)})})},checkCasefileAccess(e){if(!e)return!1;const t=this.$store.state.auth.user;return!!t&&(!(!t.roles||!(t.roles.includes("ADMIN")||t.roles.includes("MANAGER")||t.roles.includes("CLERK")))||(!!(t.roles&&t.roles.includes("BRANCHMANAGER")&&t.branches&&Array.isArray(t.branches)&&t.branches.includes(e.branch)&&t.dept&&Array.isArray(t.dept)&&t.dept.includes(e.refType))||(!!(t.roles&&t.roles.includes("BRANCHCLERK")&&t.branches&&Array.isArray(t.branches)&&t.branches.includes(e.branch)&&t.dept&&Array.isArray(t.dept)&&t.dept.includes(e.refType))||(e.adjuster===t.id||(e.editor===t.id||e.clerkInCharge===t.id)))))},checkFileaccess(){this.fileaccess=!0},applyDoc(){this.dialogApplyDoc=!0},acceptCase(){this.dialogAcceptCase=!0},acceptCaseConfirm(){G["a"].update(this.caseState.casefile.id,this.caseState.casefile,this.caseState.casefile.fileStatus="INVE",this.caseState.casefile.dateStartInv=V()().format()).then(e=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"green",text:e&&e.data&&e.data.message||toString()}),this.refreshList()}).catch(e=>{console.log(e)}),this.closeAcceptCase()},closeAcceptCase(){this.dialogAcceptCase=!1,this.$nextTick(()=>{})},async preloadDocuments(){if(this.caseState.casefile.id){this.documentsLoading=!0;try{const e=await Ta["a"].getAll();this.documents=e.data.filter(e=>e.caseId===this.caseState.casefile.id),this.documentCount=this.documents.length}catch(e){console.log(e),this.documents=[],this.documentCount=0}finally{this.documentsLoading=!1}}},async preloadComments(){if(this.caseState.casefile.id){this.commentsLoading=!0;try{const e=await nt["a"].getAll();this.comments=e.data.filter(e=>e.caseId===this.caseState.casefile.id),this.commentCount=this.comments.length}catch(e){console.log(e),this.comments=[],this.commentCount=0}finally{this.commentsLoading=!1}}},async preloadHistory(){if(this.caseState.casefile.vehicleNo){this.historyLoading=!0;try{await Promise.all([G["a"].getAll(),new Promise(e=>setTimeout(e,500))]).then(([e])=>{this.caseHistory=e.data.filter(e=>e.vehicleNo===this.caseState.casefile.vehicleNo);const t=this.caseHistory.filter(e=>e.id!==this.caseState.casefile.id).length;this.historyCount=t})}catch(e){console.error("Error loading history:",e),this.caseHistory=[],this.historyCount=0}finally{this.historyLoading=!1}}},fetchCommentCount(){this.caseState.casefile.id&&nt["a"].getAll().then(e=>{const t=e.data.filter(e=>e.caseId===this.caseState.casefile.id);this.commentCount=t.length}).catch(e=>{console.log(e),this.commentCount=0})},handleCommentAdded(e){this.comments=[...this.comments,e],this.commentCount=this.comments.length,this.preloadComments()},handleCommentDeleted(e){this.comments=this.comments.filter(t=>t.id!==e),this.commentCount=this.comments.length,this.preloadComments()},handleHistoryCountUpdated(e){this.historyCount=e},handleDocumentUploaded(){this.preloadDocuments()}},mounted(){this.overlay=!1;const e=Promise.all([this.retrieveClaims(),this.retrieveAdjusters(),this.retrieveEditors(),this.retrieveClerks(),this.retrieveUsers(),this.retrieveBranches(),this.retrieveStates(),this.retrieveRegions(),this.retrieveDept(),this.retrieveSubRefType(),this.retrieveIns(),this.retrieveHandler(),this.retrieveStages()]),t=this.$store.dispatch("casefiles/fetchPaginatedPermitted",{page:1,pageSize:1,filters:{id:this.$route.params.id}});Promise.all([e,t]).then(()=>{const e=this.$store.getters.getPaginatedPermitted[0];e?(this.caseState.casefile=e,this.checkFileaccess(),this.preloadDocuments(),this.preloadComments(),this.preloadHistory()):this.accessDenied=!0,this.permissionCheckComplete=!0,this.loading=!1,this.checkManagement(),this.fetchCommentCount()}).catch(e=>{console.error("Error loading initial data:",e),this.loading=!1,this.accessDenied=!0,this.$store.dispatch("alerts/setAlert",{text:"Error loading initial data",type:"error"})})}},fi=ui,pi=(a("a864"),Object(q["a"])(fi,j,$,!1,null,"b21d8936",null));t["default"]=pi.exports},c671:function(e,t,a){"use strict";var s=a("9d65"),i=a("4e82"),r=a("c3f0"),l=a("80d2"),n=a("58df");const c=Object(n["a"])(s["a"],Object(i["a"])("windowGroup","v-window-item","v-window"));var o=c.extend().extend().extend({name:"v-window-item",directives:{Touch:r["a"]},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data(){return{isActive:!1,inTransition:!1}},computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return Object(l["s"])(this)},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=Object(l["h"])(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(e){this.inTransition&&this.$nextTick(()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=Object(l["h"])(e.clientHeight))})}},render(e){return e("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent(()=>[this.genWindowItem()]))}});t["a"]=o.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const e=o.options.methods.genWindowItem.call(this);return e.data.domProps=e.data.domProps||{},e.data.domProps.id=this.id||this.value,e}}})},e25a:function(e,t,a){"use strict";a("5e55")},e4ba:function(e,t,a){"use strict";var s=a("c427");class i{getAll(){return s["a"].get("/comments")}get(e){return s["a"].get("/comments/"+e)}create(e){return s["a"].post("/comments",e)}update(e,t){return s["a"].put("/comments/"+e,t)}delete(e){return s["a"].delete("/comments/"+e)}deleteAll(){return s["a"].delete("/comments")}}t["a"]=new i},eac8:function(e,t,a){"use strict";a("5894")},ee93:function(e,t,a){"use strict";a("0094")},f1b7:function(e,t,a){},ff44:function(e,t,a){}}]);
//# sourceMappingURL=chunk-240e766e.e912fee6.js.map