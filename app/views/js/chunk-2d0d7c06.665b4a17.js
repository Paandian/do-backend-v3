(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7c06"],{"77c3":function(t,e,a){"use strict";a.r(e);var s=a("8336"),i=a("b0af"),d=a("99d9"),r=a("62ad"),l=a("a523"),n=a("8fea"),o=a("169a"),c=a("ce7e"),m=a("132d"),u=a("0fd9"),h=a("b974"),p=a("2fa4"),I=a("8654"),f=a("71d9"),b=a("3a2f"),g=function(){var t=this,e=t._self._c;return e(l["a"],{attrs:{fluid:""}},[e("div",[e(n["a"],{staticClass:"elevation-1",attrs:{dense:"",headers:t.headers,items:t.tatcharts,search:t.search,"footer-props":{showFirstLastPage:!0,"items-per-page-options":[10,20,30,40,50,100,-1]},"items-per-page":50},scopedSlots:t._u([{key:"top",fn:function(){return[e(f["a"],{attrs:{flat:""}},[e(o["a"],{attrs:{"max-width":"500px",persistent:""},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(b["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:d}){return[e(s["a"],t._g(t._b({attrs:{fab:"",small:"",color:"primary",dark:""}},"v-btn",i,!1),{...d,...a}),[e(m["a"],[t._v("mdi-plus")])],1)]}}],null,!0)},[e("span",[t._v("ADD TAT")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(i["a"],{attrs:{tile:""}},[e(d["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[e("span",[t._v(t._s(t.formTitle))])]),e(d["c"],[e(l["a"],[e(u["a"],[e(r["a"],{attrs:{cols:"12"}},[e(h["a"],{attrs:{items:t.insurer,"item-text":"name","item-value":"id",label:"Insurer"},model:{value:t.editedItem.insId,callback:function(e){t.$set(t.editedItem,"insId",e)},expression:"editedItem.insId"}})],1),e(r["a"],{attrs:{cols:"12"}},[e(h["a"],{attrs:{items:t.department,"item-text":"name","item-value":"id",label:"Department"},model:{value:t.editedItem.deptId,callback:function(e){t.$set(t.editedItem,"deptId",e)},expression:"editedItem.deptId"}})],1),e(r["a"],{attrs:{cols:"12"}},[e(h["a"],{attrs:{items:t.filterSubDeptByDept(t.editedItem.deptId),"item-text":"subCode","item-value":"id",label:"Sub-Department"},model:{value:t.editedItem.subDeptId,callback:function(e){t.$set(t.editedItem,"subDeptId",e)},expression:"editedItem.subDeptId"}})],1),e(r["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(I["a"],{attrs:{label:"TAT ALERT"},model:{value:t.editedItem.tatAlert,callback:function(e){t.$set(t.editedItem,"tatAlert",e)},expression:"editedItem.tatAlert"}})],1),e(r["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(I["a"],{attrs:{label:"TAT MAX"},model:{value:t.editedItem.tatMax,callback:function(e){t.$set(t.editedItem,"tatMax",e)},expression:"editedItem.tatMax"}})],1)],1)],1)],1),e(d["a"],[e(p["a"]),e(s["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:t.close}},[t._v(" Cancel ")]),e(s["a"],{staticClass:"success",attrs:{disabled:t.isAddButtonDisabled,small:"",tile:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),e(c["a"],{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e(o["a"],{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(i["a"],[e(d["d"],{staticClass:"justify-center text-h5 grey lighten-2"},[t._v("Confirm delete? ")]),e(d["a"],[e(p["a"]),e(s["a"],{attrs:{outlined:"",small:"",tile:""},on:{click:t.closeDelete}},[t._v("No")]),e(s["a"],{staticClass:"error",attrs:{small:"",tile:""},on:{click:t.deleteItemConfirm}},[t._v("Yes")]),e(p["a"])],1)],1)],1),e(p["a"]),e(I["a"],{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.numbering",fn:function(e){return[t._v(" "+t._s(e.index+1)+" ")]}},{key:"item.insId",fn:function({item:a}){return t._l(t.filterIns(a.insId),(function(a){return e("span",t._b({key:a.id},"span",a.item,!1),[t._v(" "+t._s(a.name)+" ")])}))}},{key:"item.subDeptId",fn:function({item:a}){return t._l(t.filterSubDept(a.subDeptId),(function(a){return e("span",t._b({key:a.id},"span",a.item,!1),[t._v(" ("+t._s(t.filterDept(a.deptId)[0].name)+") "+t._s(a.subCode)+" ")])}))}},{key:"item.actions",fn:function({item:a}){return[e(b["a"],{attrs:{left:"",transition:"fab-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(m["a"],t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},"v-icon",i,!1),s),[t._v(" mdi-pencil ")])]}}],null,!0)},[e("span",[t._v(" edit")])]),e(b["a"],{attrs:{right:"",transition:"fab-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(m["a"],t._g(t._b({attrs:{small:"",color:"red darken-1"},on:{click:function(e){return t.deleteItem(a)}}},"v-icon",i,!1),s),[t._v(" mdi-delete ")])]}}],null,!0)},[e("span",[t._v(" delete")])])]}}],null,!0)})],1)])},v=[],x=(a("e9f5"),a("910d"),a("0cbf")),D=a("cb28"),_=a("f983"),k=a("5632"),A={name:"tatcharts",data:()=>({dialog:!1,dialogDelete:!1,tatcharts:[],insurer:[],department:[],subDept:[],search:"",defaultItem:{id:null,insId:"",deptId:"",tatAlert:"",tatMax:""},editedIndex:-1,editedItem:{id:null,insId:"",deptId:"",subDeptId:"",tatAlert:"",tatMax:""},headers:[{text:"NO.",align:"start",sortable:!1,value:"numbering"},{text:"INSURER",align:"start",sortable:!0,value:"insId"},{text:"SUB-DEPARTMENT",align:"start",sortable:!0,value:"subDeptId"},{text:"TAT ALERT(Days)",align:"center",value:"tatAlert",sortable:!0},{text:"TAT MAX(Days)",align:"center",value:"tatMax",sortable:!0},{text:"ACTIONS",align:"center",value:"actions",sortable:!1}]}),computed:{formTitle(){return-1===this.editedIndex?"Add TAT":"Update TAT"},isAddButtonDisabled(){return!(this.editedItem.insId&&this.editedItem.deptId&&this.editedItem.subDeptId&&this.editedItem.tatAlert&&this.editedItem.tatMax)}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},methods:{filterSubDeptByDept(t){return this.subDept.filter(e=>e.deptId===t)},filterIns(t){return this.insurer.filter(e=>e.id===t)},filterDept(t){return this.department.filter(e=>e.id===t)},filterSubDept(t){return this.subDept.filter(e=>e.id===t)},retrieveTatCharts(){x["a"].getAll().then(t=>{this.tatcharts=t.data}).catch(t=>{console.log(t)})},retrieveInss(){k["a"].getAll().then(t=>{this.insurer=t.data.sort((t,e)=>t.name.localeCompare(e.name))}).catch(t=>{console.log(t)})},retrieveDepts(){D["a"].getAll().then(t=>{this.department=t.data.sort((t,e)=>t.name.localeCompare(e.name))}).catch(t=>{console.log(t)})},retrieveSubDepts(){_["a"].getAll().then(t=>{this.subDept=t.data}).catch(t=>{console.log(t)})},refreshList(){this.retrieveTatCharts(),this.retrieveInss(),this.retrieveDepts(),this.retrieveSubDepts()},editItem(t){this.editedIndex=this.tatcharts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.tatcharts.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){x["a"].delete(this.editedItem.id).then(t=>{this.$store.dispatch("setSnackbar",{showing:!0,color:"error",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)}),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1)x["a"].update(this.editedItem.id,this.editedItem).then(t=>{this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"warning",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{console.log(t)});else{var t={insId:this.editedItem.insId,subDeptId:this.editedItem.subDeptId,tatAlert:this.editedItem.tatAlert,tatMax:this.editedItem.tatMax};x["a"].create(t).then(t=>{this.editedItem.id=t.data.id,this.close(),this.$store.dispatch("setSnackbar",{showing:!0,color:"success",text:t&&t.data&&t.data.message||toString()}),this.refreshList()}).catch(t=>{this.$store.dispatch("setSnackbar",{showing:!0,text:t.response&&t.response.data&&t.response.data.message||t.message||toString()})})}this.close()}},mounted(){this.retrieveTatCharts(),this.retrieveInss(),this.retrieveDepts(),this.retrieveSubDepts()}},S=A,T=a("2877"),y=Object(T["a"])(S,g,v,!1,null,null,null);e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d0d7c06.665b4a17.js.map