(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4fb7"],{"3cc4":function(e,t,s){"use strict";s.r(t);var a=s("0798"),l=s("8336"),n=s("b0af"),i=s("62ad"),c=s("2e4b"),o=s("ce7e"),r=s("132d"),d=s("e449"),u=s("0fd9"),m=s("b974"),p=s("8654"),h=function(){var e=this,t=e._self._c;return t(n["a"],{staticClass:"pa-4"},[t("h2",[e._v("Full Assignment Compliance Ratio Table")]),t(u["a"],{attrs:{dense:""}},[t(i["a"],{attrs:{cols:"12",md:"3"}},[t(m["a"],{attrs:{items:e.insurers,"item-text":"name","item-value":"id",label:"Insurer",dense:"",required:""},model:{value:e.selectedInsurer,callback:function(t){e.selectedInsurer=t},expression:"selectedInsurer"}})],1),t(i["a"],{attrs:{cols:"12",md:"3"}},[t(m["a"],{attrs:{items:e.departments,"item-text":"name","item-value":"id",label:"Department",dense:"",required:""},model:{value:e.selectedDept,callback:function(t){e.selectedDept=t},expression:"selectedDept"}})],1),t(i["a"],{attrs:{cols:"12",md:"3"}},[t(m["a"],{attrs:{items:e.fileClasses,label:"File Classification",dense:""},model:{value:e.selectedClass,callback:function(t){e.selectedClass=t},expression:"selectedClass"}})],1),t(i["a"],{attrs:{cols:"12",md:"3"}},[t(d["a"],{attrs:{"close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(p["a"],e._g(e._b({attrs:{label:"Month","prepend-icon":"mdi-calendar",readonly:"",dense:"",required:""},model:{value:e.selectedMonth,callback:function(t){e.selectedMonth=t},expression:"selectedMonth"}},"v-text-field",a,!1),s))]}}]),model:{value:e.menuMonth,callback:function(t){e.menuMonth=t},expression:"menuMonth"}},[t(c["a"],{attrs:{type:"month"},on:{change:function(t){e.menuMonth=!1}},model:{value:e.selectedMonth,callback:function(t){e.selectedMonth=t},expression:"selectedMonth"}})],1)],1)],1),t(o["a"],{staticClass:"my-4"}),t(l["a"],{staticClass:"mt-2",attrs:{color:"success",disabled:!e.selectedInsurer||!e.selectedDept||!e.selectedMonth,loading:e.exporting},on:{click:e.exportExcel}},[t(r["a"],{attrs:{left:""}},[e._v("mdi-file-excel")]),e._v(" Export Compliance Table ")],1),t(a["a"],{staticClass:"mt-4",attrs:{type:"info",outlined:""}},[e._v(" ðŸš§ This feature generates a styled Excel sheet. Table preview coming soon! ")])],1)},f=[],b=(s("e9f5"),s("ab43"),s("88a7"),s("271a"),s("5494"),s("c1df")),C=s.n(b),x=s("bc3a"),v=s.n(x),M=s("6736"),g=s("5632"),w=s("cb28"),y={name:"ComplianceTable",data(){return{selectedInsurer:null,selectedDept:null,selectedClass:"all",selectedMonth:null,menuMonth:!1,insurers:[],departments:[],fileClasses:[],classificationOptions:[],exporting:!1}},mounted(){this.loadInsurers(),this.loadDepartments()},watch:{selectedDept(e){this.loadClassifications(e),this.selectedClass="all"},classificationOptions:{handler(e){this.fileClasses=e.map(e=>({text:e.subCode||e.name,value:e.id}))},immediate:!0}},methods:{async loadInsurers(){try{const e=await g["a"].getAll();this.insurers=e.data||[]}catch(e){this.insurers=[]}},async loadDepartments(){try{const e=await w["a"].getAll();this.departments=e.data||[]}catch(e){this.departments=[]}},async loadClassifications(e){if(!e||"all"===e)return void(this.classificationOptions=[{id:"all",subCode:"All Classifications"}]);const t=await v.a.get(`${M["a"].baseURL}/subDepts?deptId=${e}`);this.classificationOptions=[{id:"all",subCode:"All Classifications"},...t.data.sort((e,t)=>e.subCode.localeCompare(t.subCode))]},async exportExcel(){this.exporting=!0;try{const e={insurerId:this.selectedInsurer,deptId:this.selectedDept,fileClass:this.selectedClass,month:C()(this.selectedMonth).format("YYYY-MM")},t=M["a"].baseURL+"/compliance/compliance-table/export?"+new URLSearchParams(e).toString();window.open(t,"_blank")}catch(e){this.$emit("error",e.message||"Failed to export Excel")}finally{this.exporting=!1}}}},k=y,I=s("2877"),D=Object(I["a"])(k,h,f,!1,null,null,null);t["default"]=D.exports}}]);
//# sourceMappingURL=chunk-2d0c4fb7.160955b9.js.map