(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22ccd1"],{f57c:function(t,e,a){"use strict";a.r(e);var o=a("0798"),s=a("8336"),n=a("b0af"),r=a("62ad"),l=a("2e4b"),i=a("ce7e"),c=a("132d"),d=a("e449"),p=a("0fd9"),h=a("1f4f"),m=a("8654"),u=function(){var t=this,e=t._self._c;return e(n["a"],{staticClass:"pa-4"},[e("h2",[t._v("Compliance Ratio (By Insurer)")]),e(p["a"],{attrs:{dense:""}},[e(r["a"],{attrs:{cols:"12",md:"4"}},[e(d["a"],{attrs:{"close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:o}){return[e(m["a"],t._g(t._b({attrs:{label:"Month","prepend-icon":"mdi-calendar",readonly:"",dense:"",required:""},model:{value:t.selectedMonth,callback:function(e){t.selectedMonth=e},expression:"selectedMonth"}},"v-text-field",o,!1),a))]}}]),model:{value:t.menuMonth,callback:function(e){t.menuMonth=e},expression:"menuMonth"}},[e(l["a"],{attrs:{type:"month"},on:{change:function(e){t.menuMonth=!1}},model:{value:t.selectedMonth,callback:function(e){t.selectedMonth=e},expression:"selectedMonth"}})],1)],1),e(r["a"],{staticClass:"d-flex align-end",attrs:{cols:"12",md:"4"}},[e(s["a"],{attrs:{color:"primary",disabled:!t.selectedMonth},on:{click:t.generateReport}},[t._v(" Generate Report ")])],1)],1),e(i["a"],{staticClass:"my-4"}),t.reportData.length?e("div",[e(h["a"],[e("thead",[e("tr",[e("th",[t._v("Insurer")]),e("th",[t._v("Complied")]),e("th",[t._v("Not Complied")]),e("th",[t._v("Total")]),e("th",[t._v("Complied (%)")])])]),e("tbody",[t._l(t.reportData,(function(a){return e("tr",{key:a.insurer},[e("td",[t._v(t._s(a.insurer))]),e("td",[t._v(t._s(a.complied))]),e("td",[t._v(t._s(a.notComplied))]),e("td",[t._v(t._s(a.total))]),e("td",[t._v(t._s(a.percent))])])})),e("tr",[e("td",[e("strong",[t._v("Total")])]),e("td",[e("strong",[t._v(t._s(t.totals.complied))])]),e("td",[e("strong",[t._v(t._s(t.totals.notComplied))])]),e("td",[e("strong",[t._v(t._s(t.totals.total))])]),e("td",[e("strong",[t._v(" "+t._s(t.totals.total>0?(t.totals.complied/t.totals.total*100).toFixed(2):"0.00")+" ")])])])],2)]),e(s["a"],{staticClass:"mt-4",attrs:{color:"success",loading:t.exporting},on:{click:t.exportExcel}},[e(c["a"],{attrs:{left:""}},[t._v("mdi-file-excel")]),t._v(" Export to Excel ")],1)],1):t.noDataMessage?e(o["a"],{staticClass:"mt-4",attrs:{type:"warning",outlined:""}},[t._v(" "+t._s(t.noDataMessage)+" ")]):e(o["a"],{staticClass:"mt-4",attrs:{type:"info",outlined:""}},[t._v(' Please select month and click "Generate Report" to view data. ')])],1)},_=[],f=(a("e9f5"),a("7d54"),a("88a7"),a("271a"),a("5494"),a("bc3a")),M=a.n(f),v=a("c1df"),g=a.n(v),x=a("6736"),y={name:"ComplianceRatioInsurer",data(){return{selectedMonth:null,menuMonth:!1,reportData:[],totals:{complied:0,notComplied:0,total:0},exporting:!1,noDataMessage:""}},methods:{async generateReport(){this.reportData=[],this.totals={complied:0,notComplied:0,total:0},this.noDataMessage="";try{const t={month:g()(this.selectedMonth).format("YYYY-MM")},e=await M.a.get(x["a"].baseURL+"/compliance/ratio-insurer",{params:t});if(this.processReportData(e.data),!Array.isArray(e.data.reportData)||0===e.data.reportData.length){const t=g()(this.selectedMonth).format("MMMM YYYY");this.noDataMessage=`No compliance data found for ${t}.`}}catch(t){this.noDataMessage=t.message||"Failed to fetch report data. Please try again."}},processReportData(t){this.reportData=Array.isArray(t.reportData)?t.reportData:[];const e={complied:0,notComplied:0,total:0};this.reportData.forEach(t=>{e.complied+=t.complied,e.notComplied+=t.notComplied,e.total+=t.total}),this.totals=e},async exportExcel(){this.exporting=!0;try{const t={month:g()(this.selectedMonth).format("YYYY-MM")},e=x["a"].baseURL+"/compliance/ratio-insurer/export?"+new URLSearchParams(t).toString();window.open(e,"_blank")}catch(t){this.$emit("error",t.message||"Failed to export Excel")}finally{this.exporting=!1}}}},C=y,D=a("2877"),b=Object(D["a"])(C,u,_,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d22ccd1.fed2141a.js.map