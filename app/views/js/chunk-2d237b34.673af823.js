(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d237b34"],{fbdf:function(t,e,a){"use strict";a.r(e);var s=a("0798"),i=a("c6a6"),o=a("8336"),l=a("b0af"),n=a("62ad"),d=a("2e4b"),r=a("ce7e"),c=a("132d"),p=a("e449"),f=a("0fd9"),m=a("1f4f"),h=a("8654"),u=(a("e9f5"),a("f665"),function(){var t,e,a=this,u=a._self._c;return u(l["a"],{staticClass:"pa-4"},[u("h2",[a._v("Compliance Ratio (By Insurer & Department)")]),u(f["a"],{attrs:{dense:""}},[u(n["a"],{attrs:{cols:"12",md:"3"}},[u(i["a"],{attrs:{items:a.departments,"item-text":"name","item-value":"id",label:"Department",dense:"",required:""},model:{value:a.selectedDept,callback:function(t){a.selectedDept=t},expression:"selectedDept"}})],1),u(n["a"],{attrs:{cols:"12",md:"3"}},[u(i["a"],{attrs:{items:a.classificationOptions,"item-text":"subCode","item-value":"id",label:"File Classification",dense:"",disabled:!a.selectedDept,clearable:""},model:{value:a.selectedClassification,callback:function(t){a.selectedClassification=t},expression:"selectedClassification"}})],1),u(n["a"],{attrs:{cols:"12",md:"3"}},[u(p["a"],{attrs:{"close-on-content-click":!1},scopedSlots:a._u([{key:"activator",fn:function({on:t,attrs:e}){return[u(h["a"],a._g(a._b({attrs:{label:"Month","prepend-icon":"mdi-calendar",readonly:"",dense:"",required:""},model:{value:a.selectedMonth,callback:function(t){a.selectedMonth=t},expression:"selectedMonth"}},"v-text-field",e,!1),t))]}}]),model:{value:a.menuMonth,callback:function(t){a.menuMonth=t},expression:"menuMonth"}},[u(d["a"],{attrs:{type:"month"},on:{change:function(t){a.menuMonth=!1}},model:{value:a.selectedMonth,callback:function(t){a.selectedMonth=t},expression:"selectedMonth"}})],1)],1),u(n["a"],{staticClass:"d-flex align-end",attrs:{cols:"12",md:"3"}},[u(o["a"],{attrs:{color:"primary",disabled:!a.selectedDept||!a.selectedMonth},on:{click:a.generateReport}},[a._v(" Generate Report ")])],1)],1),u(r["a"],{staticClass:"my-4"}),a.tableRows.length?u("div",[u("div",{staticClass:"mb-2"},[u("div",{staticStyle:{background:"#92d050","font-family":"Tahoma","font-size":"1.1rem","font-weight":"bold","text-align":"center",padding:"8px","border-radius":"4px"}},[a._v(" COMPLIANCE SUMMARY "+a._s(a.monthTitle)+" ")]),u("div",{staticStyle:{background:"#ededed","font-family":"Tahoma","font-size":"0.95rem","text-align":"center",padding:"6px","border-radius":"4px"}},[a._v(" Assignment Ratio by Insurer, "),u("span",{staticStyle:{"font-weight":"bold"}},[a._v(" "+a._s("all"!==a.selectedDept&&a.selectedDept?(null===(t=a.departments.find(t=>t.id===a.selectedDept))||void 0===t?void 0:t.name)||"Department":"All Departments")+" ")]),a._v(" , "),u("span",{staticStyle:{"font-weight":"bold"}},[a._v(" "+a._s("all"!==a.selectedClassification&&a.selectedClassification?(null===(e=a.classificationOptions.find(t=>t.id===a.selectedClassification))||void 0===e?void 0:e.subCode)||"Classification":"All Classifications")+" ")])]),u("div",{staticStyle:{background:"#fffbe6",color:"#856404","font-family":"Tahoma","font-size":"0.95rem","text-align":"center",padding:"6px","border-radius":"4px","margin-top":"6px"}},[a._v(" For detailed breakdown by department and classification, please click "),u("strong",[a._v("Export to Excel")]),a._v(". ")]),u("div",{staticStyle:{background:"#e6f7ff",color:"#00529b","font-family":"Tahoma","font-size":"1.05rem","text-align":"center",padding:"8px","border-radius":"4px","margin-top":"10px","font-weight":"bold"}},[a._v(" OVERALL RATIO: "+a._s(a.totals.total>0?(a.totals.complied/a.totals.total*100).toFixed(2):"0.00")+"% ")])]),u(o["a"],{staticClass:"mb-4",attrs:{color:"success",loading:a.exporting},on:{click:a.exportExcel}},[u(c["a"],{attrs:{left:""}},[a._v("mdi-file-excel")]),a._v(" Export to Excel ")],1),u(m["a"],[u("thead",[u("tr",{staticStyle:{background:"#ededed"}},a._l(a.tableHeaders,(function(t){return u("th",{key:t,staticStyle:{"font-family":"Tahoma","font-size":"13px","font-weight":"bold","text-transform":"uppercase","text-align":"center",border:"1px solid #bbb"}},[a._v(" "+a._s(t)+" ")])})),0)]),u("tbody",a._l(a.tableRows,(function(t,e){return u("tr",{key:e,style:t.isSummary?"font-family:Tahoma;font-size:13px;font-weight:bold;background:#fff;border:1px solid #bbb;":"font-family:Tahoma;font-size:13px;background:#fff;border:1px solid #bbb;"},[u("td",{style:t.isSummary?"text-align:left;font-weight:bold;":"text-align:left;"},[a._v(" "+a._s(t.insurer)+" ")]),u("td",{staticStyle:{"text-align":"center","font-weight":"bold"}},[a._v(" "+a._s(t.complied)+" ")]),u("td",{staticStyle:{"text-align":"center","font-weight":"bold",color:"#f00"}},[a._v(" "+a._s(t.notComplied)+" ")]),u("td",{staticStyle:{"text-align":"center","font-weight":"bold"}},[a._v(" "+a._s(t.total)+" ")]),u("td",{staticStyle:{"text-align":"center","font-weight":"bold"}},[a._v(" "+a._s(t.percent)+" ")])])})),0)])],1):a.noDataMessage?u(s["a"],{staticClass:"mt-4",attrs:{type:"warning",outlined:""}},[a._v(" "+a._s(a.noDataMessage)+" ")]):u(s["a"],{staticClass:"mt-4",attrs:{type:"info",outlined:""}},[a._v(' Please select filters and click "Generate Report" to view data. ')])],1)}),b=[],g=(a("910d"),a("7d54"),a("ab43"),a("88a7"),a("271a"),a("5494"),a("bc3a")),x=a.n(g),y=a("c1df"),C=a.n(y),v=a("6736"),D={name:"ComplianceRatioInsurerDept",data(){return{selectedDept:null,selectedClassification:null,selectedMonth:null,menuMonth:!1,departments:[],classificationOptions:[],reportData:[],totals:{complied:0,notComplied:0,total:0},exporting:!1,noDataMessage:""}},watch:{selectedDept(t){this.loadClassifications(t)}},computed:{monthTitle(){if(!this.selectedMonth)return"";const t=this.selectedMonth,e="string"===typeof t?t:t.format("YYYY-MM"),a=new Date(e+"-01"),s=a.toLocaleString("default",{month:"long"}).toUpperCase(),i=a.getFullYear();return`${s} ${i}`},tableHeaders(){return["Insurer","Complied","Not Complied","Total","Complied (%)"]},tableRows(){return Array.isArray(this.reportData)&&0!==this.reportData.length?this.reportData.map(t=>({insurer:t.insurer,complied:t.complied,notComplied:t.notComplied,total:t.total,percent:t.percent,isSummary:!0})):[]}},methods:{async loadDepartments(){const t=await x.a.get(v["a"].baseURL+"/depts");this.departments=[{id:"all",name:"All Departments"},...t.data.sort((t,e)=>t.name.localeCompare(e.name))]},async loadClassifications(t){if(!t||"all"===t)return void(this.classificationOptions=[{id:"all",subCode:"All Classifications"}]);const e=await x.a.get(`${v["a"].baseURL}/subDepts?deptId=${t}`);this.classificationOptions=[{id:"all",subCode:"All Classifications"},...e.data.filter(e=>e.deptId===t).sort((t,e)=>t.subCode.localeCompare(e.subCode))]},async generateReport(){this.reportData=[],this.totals={complied:0,notComplied:0,total:0},this.noDataMessage="";try{const a={month:C()(this.selectedMonth).format("YYYY-MM"),deptId:this.selectedDept,classificationId:this.selectedClassification},s=await x.a.get(v["a"].baseURL+"/compliance/ratio-insurer-dept",{params:a});if(this.processReportData(s.data),!Array.isArray(s.data.reportData)||0===s.data.reportData.length){var t,e;const a=(null===(t=this.departments.find(t=>t.id===this.selectedDept))||void 0===t?void 0:t.name)||"selected department",s="all"===this.selectedClassification?"all classifications":(null===(e=this.classificationOptions.find(t=>t.id===this.selectedClassification))||void 0===e?void 0:e.subCode)||"selected classification",i=C()(this.selectedMonth).format("MMMM YYYY");this.noDataMessage=`No compliance data found for ${a} and ${s} in ${i}.`}}catch(a){this.noDataMessage=a.message||"Failed to fetch report data. Please try again."}},processReportData(t){this.reportData=Array.isArray(t.reportData)?t.reportData:[];const e={complied:0,notComplied:0,total:0};this.reportData.forEach(t=>{e.complied+=t.complied,e.notComplied+=t.notComplied,e.total+=t.total}),this.totals=e},async exportExcel(){this.exporting=!0;try{const t={month:C()(this.selectedMonth).format("YYYY-MM"),deptId:this.selectedDept,classificationId:this.selectedClassification},e=v["a"].baseURL+"/compliance/ratio-insurer-dept/export?"+new URLSearchParams(t).toString();window.open(e,"_blank")}catch(t){this.$emit("error",t.message||"Failed to export Excel")}finally{this.exporting=!1}}},mounted(){this.loadDepartments()}},_=D,M=a("2877"),w=Object(M["a"])(_,u,b,!1,null,null,null);e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-2d237b34.673af823.js.map