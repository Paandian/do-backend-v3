(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-096742b6"],{"1e5a":function(e,t,s){"use strict";var r=s("23e7"),a=s("9961"),n=s("dad2");r({target:"Set",proto:!0,real:!0,forced:!n("symmetricDifference")},{symmetricDifference:a})},"1e70":function(e,t,s){"use strict";var r=s("23e7"),a=s("a5f7"),n=s("dad2"),i=!n("difference",(function(e){return 0===e.size}));r({target:"Set",proto:!0,real:!0,forced:i},{difference:a})},"384f":function(e,t,s){"use strict";var r=s("e330"),a=s("5388"),n=s("cb27"),i=n.Set,c=n.proto,o=r(c.forEach),u=r(c.keys),l=u(new i).next;e.exports=function(e,t,s){return s?a({iterator:u(e),next:l},t):o(e,t)}},"395e":function(e,t,s){"use strict";var r=s("dc19"),a=s("cb27").has,n=s("8e16"),i=s("7f65"),c=s("5388"),o=s("2a62");e.exports=function(e){var t=r(this),s=i(e);if(n(t)<s.size)return!1;var u=s.getIterator();return!1!==c(u,(function(e){if(!a(t,e))return o(u,"normal",!1)}))}},5388:function(e,t,s){"use strict";var r=s("c65b");e.exports=function(e,t,s){var a,n,i=s?e:e.iterator,c=e.next;while(!(a=r(c,i)).done)if(n=t(a.value),void 0!==n)return n}},"68df":function(e,t,s){"use strict";var r=s("dc19"),a=s("8e16"),n=s("384f"),i=s("7f65");e.exports=function(e){var t=r(this),s=i(e);return!(a(t)>s.size)&&!1!==n(t,(function(e){if(!s.includes(e))return!1}),!0)}},"72c3":function(e,t,s){"use strict";var r=s("23e7"),a=s("e9bc"),n=s("dad2");r({target:"Set",proto:!0,real:!0,forced:!n("union")},{union:a})},"79a4":function(e,t,s){"use strict";var r=s("23e7"),a=s("d039"),n=s("953b"),i=s("dad2"),c=!i("intersection",(function(e){return 2===e.size&&e.has(1)&&e.has(2)}))||a((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));r({target:"Set",proto:!0,real:!0,forced:c},{intersection:n})},"7f65":function(e,t,s){"use strict";var r=s("59ed"),a=s("825a"),n=s("c65b"),i=s("5926"),c=s("46c4"),o="Invalid size",u=RangeError,l=TypeError,d=Math.max,f=function(e,t){this.set=e,this.size=d(t,0),this.has=r(e.has),this.keys=r(e.keys)};f.prototype={getIterator:function(){return c(a(n(this.keys,this.set)))},includes:function(e){return n(this.has,this.set,e)}},e.exports=function(e){a(e);var t=+e.size;if(t!==t)throw new l(o);var s=i(t);if(s<0)throw new u(o);return new f(e,s)}},"83b9e":function(e,t,s){"use strict";var r=s("cb27"),a=s("384f"),n=r.Set,i=r.add;e.exports=function(e){var t=new n;return a(e,(function(e){i(t,e)})),t}},"8b00":function(e,t,s){"use strict";var r=s("23e7"),a=s("68df"),n=s("dad2"),i=!n("isSubsetOf",(function(e){return e}));r({target:"Set",proto:!0,real:!0,forced:i},{isSubsetOf:a})},"8e16":function(e,t,s){"use strict";var r=s("7282"),a=s("cb27");e.exports=r(a.proto,"size","get")||function(e){return e.size}},"953b":function(e,t,s){"use strict";var r=s("dc19"),a=s("cb27"),n=s("8e16"),i=s("7f65"),c=s("384f"),o=s("5388"),u=a.Set,l=a.add,d=a.has;e.exports=function(e){var t=r(this),s=i(e),a=new u;return n(t)>s.size?o(s.getIterator(),(function(e){d(t,e)&&l(a,e)})):c(t,(function(e){s.includes(e)&&l(a,e)})),a}},9961:function(e,t,s){"use strict";var r=s("dc19"),a=s("cb27"),n=s("83b9e"),i=s("7f65"),c=s("5388"),o=a.add,u=a.has,l=a.remove;e.exports=function(e){var t=r(this),s=i(e).getIterator(),a=n(t);return c(s,(function(e){u(t,e)?l(a,e):o(a,e)})),a}},a4e7:function(e,t,s){"use strict";var r=s("23e7"),a=s("395e"),n=s("dad2"),i=!n("isSupersetOf",(function(e){return!e}));r({target:"Set",proto:!0,real:!0,forced:i},{isSupersetOf:a})},a5f7:function(e,t,s){"use strict";var r=s("dc19"),a=s("cb27"),n=s("83b9e"),i=s("8e16"),c=s("7f65"),o=s("384f"),u=s("5388"),l=a.has,d=a.remove;e.exports=function(e){var t=r(this),s=c(e),a=n(t);return i(t)<=s.size?o(t,(function(e){s.includes(e)&&d(a,e)})):u(s.getIterator(),(function(e){l(t,e)&&d(a,e)})),a}},b04f:function(e,t,s){"use strict";s("fd54")},b4bc:function(e,t,s){"use strict";var r=s("dc19"),a=s("cb27").has,n=s("8e16"),i=s("7f65"),c=s("384f"),o=s("5388"),u=s("2a62");e.exports=function(e){var t=r(this),s=i(e);if(n(t)<=s.size)return!1!==c(t,(function(e){if(s.includes(e))return!1}),!0);var l=s.getIterator();return!1!==o(l,(function(e){if(a(t,e))return u(l,"normal",!1)}))}},c1a1:function(e,t,s){"use strict";var r=s("23e7"),a=s("b4bc"),n=s("dad2"),i=!n("isDisjointFrom",(function(e){return!e}));r({target:"Set",proto:!0,real:!0,forced:i},{isDisjointFrom:a})},cb27:function(e,t,s){"use strict";var r=s("e330"),a=Set.prototype;e.exports={Set:Set,add:r(a.add),has:r(a.has),remove:r(a["delete"]),proto:a}},dad2:function(e,t,s){"use strict";var r=s("d066"),a=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},n=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};e.exports=function(e,t){var s=r("Set");try{(new s)[e](a(0));try{return(new s)[e](a(-1)),!1}catch(c){if(!t)return!0;try{return(new s)[e](n(-1/0)),!1}catch(o){var i=new s;return i.add(1),i.add(2),t(i[e](n(1/0)))}}}catch(o){return!1}}},dbea:function(e,t,s){"use strict";s.r(t);var r=s("0798"),a=s("8336"),n=s("b0af"),i=s("99d9"),c=s("cc20"),o=s("62ad"),u=s("a523"),l=s("8fea"),d=s("132d"),f=s("490a"),h=s("0fd9"),p=s("b974"),y=s("2db4"),m=s("2fa4"),g=s("8654"),b=function(){var e=this,t=e._self._c;return t(u["a"],{attrs:{fluid:""}},[t(n["a"],[t(i["d"],[t("span",{staticClass:"text-h5"},[e._v("My Tasks")]),t(m["a"]),t(g["a"],{staticClass:"mx-4",staticStyle:{"max-width":"300px"},attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",outlined:"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(a["a"],{attrs:{color:"primary",loading:e.loading},on:{click:e.refreshTasks}},[t(d["a"],{attrs:{left:""}},[e._v("mdi-refresh")]),e._v(" Refresh ")],1)],1),t(i["c"],[t(h["a"],[t(o["a"],{attrs:{cols:"12",sm:"6",md:"3"}},[t(p["a"],{attrs:{items:e.statusOptions,label:"Status",outlined:"",dense:"",clearable:"","hide-details":""},on:{change:e.applyFilters},model:{value:e.statusFilter,callback:function(t){e.statusFilter=t},expression:"statusFilter"}})],1),t(o["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[t(p["a"],{attrs:{items:e.sortOptions,label:"Sort By",outlined:"",dense:"","hide-details":""},on:{change:e.applyFilters},model:{value:e.sortBy,callback:function(t){e.sortBy=t},expression:"sortBy"}})],1),t(o["a"],{attrs:{cols:"12",sm:"6",md:"2"}},[t(p["a"],{attrs:{items:[{text:"Ascending",value:"asc"},{text:"Descending",value:"desc"}],label:"Order",outlined:"",dense:"","hide-details":""},on:{change:e.applyFilters},model:{value:e.sortDirection,callback:function(t){e.sortDirection=t},expression:"sortDirection"}})],1),t(o["a"],{attrs:{cols:"12",sm:"6",md:"1"}},[t(a["a"],{attrs:{color:"secondary",outlined:"",block:"",disabled:!e.hasActiveFilters},on:{click:e.resetFilters}},[e._v(" Reset ")])],1),e.canExpressAccept?t(o["a"],{attrs:{cols:"12",sm:"6",md:"3"}},[t(a["a"],{attrs:{color:"success",disabled:!e.canExpressAccept,outlined:"",block:""},on:{click:e.expressAcceptSelected}},[t(d["a"],{attrs:{left:""}},[e._v("mdi-checkbox-multiple-marked")]),e._v(" ACCEPT ADJUSTER ASSIGNMENT(S) ")],1)],1):e._e()],1),e.hasAdacFiles?t(r["a"],{staticClass:"mt-2 mb-0",attrs:{type:"info",outlined:"",dense:""}},[e._v(" You have "+e._s(e.adacCount)+" casefile(s) pending "),t("b",[e._v("ADJUSTER ACCEPTANCE")]),e._v(". Select one or more related files and click "),t("b",[e._v("ACCEPT ADJUSTER ASSIGNMENT(S)")]),e._v(" to accept them in bulk. ")]):e._e()],1),t(l["a"],{staticClass:"cursor-pointer",attrs:{headers:e.headers,items:e.filteredTasks,search:e.search,loading:e.loading,"items-per-page":10,"footer-props":{"items-per-page-options":[10,20,50,-1],"items-per-page-text":"Tasks per page"},"show-select":"","item-selectable":e.isSelectable},on:{"click:row":e.navigateToTask},scopedSlots:e._u([{key:"item.id",fn:function({item:s}){return[e._v(" AA"),e._l(e.filterDept(s.refType),(function(r,a){return t("span",{key:"dept-"+a},[e._v("/"+e._s(r.name||r.description)),e._l(e.filterSubDept(s.subRefType),(function(s,r){return t("span",{key:"sub-"+r},[e._v("/"+e._s(s.subCode))])}))],2)})),e._v("/"+e._s(s.id)+"/"+e._s(e.yearOnly(s.dateOfAssign))),e._l(e.filterBranches(s.branch),(function(s){return t("span",{key:"br-"+s.id},[e._v("/"+e._s(s.brCode))])}))]}},{key:"item.fileStatus",fn:function({item:s}){return[t(c["a"],{attrs:{small:"",color:e.getStatusColor(s.fileStatus),"text-color":"white"}},[e._v(" "+e._s(e.getStatusName(s.fileStatus))+" ")])]}},{key:"item.daysOpen",fn:function({item:s}){return[t(c["a"],{staticClass:"text-no-wrap",attrs:{small:"",color:e.getDaysColor(s.daysOpen),"text-color":"white"}},[e._v(" "+e._s(s.daysOpen)+" days ")])]}},{key:"item.insurerName",fn:function({item:s}){return[t("div",[e._v(e._s(e.getInsurerName(s.insurer)))])]}},{key:"no-data",fn:function(){return[t(r["a"],{staticClass:"text-center my-2",attrs:{type:"info",text:"",outlined:"",dense:""}},[t("div",{staticClass:"d-flex flex-column align-center py-4"},[t(d["a"],{staticClass:"mb-3",attrs:{"x-large":"",color:"grey lighten-1"}},[e._v(" mdi-check-all ")]),t("span",{staticClass:"text-h6 grey--text text--darken-1"},[e._v(" No tasks assigned to you ")]),t("span",{staticClass:"text-body-2 grey--text"},[e._v(" Tasks assigned to you will appear here ")])],1)])]},proxy:!0},{key:"no-results",fn:function(){return[t(r["a"],{staticClass:"my-2",attrs:{type:"info",text:"",outlined:"",dense:""}},[e._v(' No matching tasks found for "'+e._s(e.search)+'" ')])]},proxy:!0},{key:"loading",fn:function(){return[t("div",{staticClass:"d-flex justify-center align-center pa-4"},[t(f["a"],{attrs:{indeterminate:"",color:"primary"}}),t("span",{staticClass:"ml-4"},[e._v("Loading tasks...")])],1)]},proxy:!0}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),t(y["a"],{attrs:{color:e.snackbar.color,timeout:e.snackbar.timeout,bottom:"",rounded:"pill",elevation:"4","max-width":"400"},model:{value:e.snackbar.show,callback:function(t){e.$set(e.snackbar,"show",t)},expression:"snackbar.show"}},[t("div",{staticClass:"d-flex align-center px-2"},[t(d["a"],{attrs:{left:""}},[e._v(e._s(e.snackbar.icon))]),t("span",{staticClass:"font-weight-medium"},[e._v(e._s(e.snackbar.text))]),t(m["a"]),t(a["a"],{staticClass:"ml-2",attrs:{"x-small":"",fab:"",color:e.snackbar.actionColor||"white"},on:{click:function(t){e.snackbar.show=!1}}},[t(d["a"],{attrs:{color:"black"}},[e._v("mdi-close")])],1)],1)])],1)},v=[],k=(s("14d9"),s("e9f5"),s("d866"),s("910d"),s("f665"),s("ab43"),s("a732"),s("1e70"),s("79a4"),s("c1a1"),s("8b00"),s("a4e7"),s("1e5a"),s("72c3"),s("f0cc")),S=s("d14b"),x=s("5632"),w=s("cb28"),C=s("f983"),A=s("fde1"),T=s("c1df"),_=s.n(T),O={name:"MyTasks",data:()=>({loading:!1,tasks:[],search:"",statusFilter:null,sortBy:"daysOpen",sortDirection:"desc",stages:[],headers:[{text:"AASB REF",value:"id",width:"180px"},{text:"Status",value:"fileStatus",width:"120px"},{text:"Insurer",value:"insurerName",width:"180px"},{text:"Days Open",value:"daysOpen",width:"100px"}],statusOptions:[],sortOptions:[{text:"Days Open",value:"daysOpen"},{text:"Case ID",value:"id"},{text:"Status",value:"fileStatus"}],snackbar:{show:!1,text:"",color:"info",timeout:3e3,icon:"mdi-information",actionColor:"white"},insurers:[],refTypes:[],subRefTypes:[],branches:[],selected:[]}),computed:{currentUser(){return this.$store.state.auth.user||null},hasActiveFilters(){return this.statusFilter||this.search||"daysOpen"!==this.sortBy||"desc"!==this.sortDirection},filteredTasks(){let e=[...this.tasks];return this.statusFilter&&(e=e.filter(e=>e.fileStatus===this.statusFilter)),e.sort((e,t)=>{let s=0;switch(this.sortBy){case"daysOpen":s=e.daysOpen-t.daysOpen;break;case"id":s=(parseInt(e.id)||0)-(parseInt(t.id)||0)||e.id.localeCompare(t.id);break;case"fileStatus":s=(e.fileStatus||"").localeCompare(t.fileStatus||"");break;default:s=e.daysOpen-t.daysOpen}return"desc"===this.sortDirection?-s:s}),e},canExpressAccept(){return this.selected.length>0&&this.selected.every(e=>"ADAC"===e.fileStatus)},hasAdacFiles(){return this.filteredTasks.some(e=>"ADAC"===e.fileStatus)},adacCount(){return this.filteredTasks.filter(e=>"ADAC"===e.fileStatus).length}},async mounted(){this.loading=!0;try{await Promise.all([this.retrieveStages(),this.retrieveInsurers(),this.retrieveRefTypes(),this.retrieveSubRefTypes(),this.retrieveBranches()]),await this.refreshTasks()}catch(e){console.error("Error initializing tasks:",e),this.showSnackbar("Error loading tasks. Please try again later.","error")}finally{this.loading=!1}},methods:{async retrieveStages(){return this.safeDataFetch(S["a"].getAll(),"stages","stages")},async retrieveInsurers(){return this.safeDataFetch(x["a"].getAll(),"insurers","insurers")},async retrieveRefTypes(){return this.safeDataFetch(w["a"].getAll(),"reference types","refTypes")},async retrieveSubRefTypes(){return this.safeDataFetch(C["a"].getAll(),"sub reference types","subRefTypes")},async retrieveBranches(){return this.safeDataFetch(A["a"].getAll(),"branches","branches")},async safeDataFetch(e,t,s){try{const t=await e;return this[s]=t.data||[],t.data}catch(r){return console.error(`Error loading ${t}:`,r),this[s]=[],[]}},async refreshTasks(){this.loading=!0;try{const e=await k["a"].getAll(),t=e.data;if(!this.currentUser||!this.currentUser.id)return this.showSnackbar("User information not available","warning"),void(this.tasks=[]);const s=t.filter(e=>"CLO"!==e.fileStatus&&"CANC"!==e.fileStatus&&(e.adjuster===this.currentUser.id||e.editor===this.currentUser.id||e.clerkInCharge===this.currentUser.id)).map(e=>this.mapCaseToTask(e));this.tasks=s,this.updateStatusOptions(),this.showSnackbar(`Loaded ${s.length} tasks successfully`,"success")}catch(e){console.error("Error refreshing tasks:",e),this.showSnackbar("Error refreshing tasks","error")}finally{this.loading=!1}},mapCaseToTask(e){return{id:e.id,prefix:e.prefix||"AA",fileStatus:e.fileStatus||"NEW",daysOpen:this.calculateDaysOpen(e),refType:e.refType,subRefType:e.subRefType,branch:e.branch,dateOfAssign:e.dateOfAssign,insurerName:this.getInsurerName(e.insurer),insurer:e.insurer}},calculateDaysOpen(e){let t=[e.dateOfAssign,e.dateOfEdi,e.dateAssignFormatting].filter(Boolean),s=t.length?t.sort()[0]:null;return s?Math.max(0,_()().diff(_()(s),"days")):0},updateStatusOptions(){this.stages.length&&this.tasks.length&&(this.statusOptions=[...new Set(this.tasks.map(e=>e.fileStatus).filter(Boolean))].map(e=>{const t=this.stages.find(t=>t.stageCode===e);return{text:t?t.name:e,value:e}}))},getDaysColor(e){return e>30?"error":e>15?"warning":"success"},getStatusName(e){if(!this.stages.length)return e;const t=this.stages.find(t=>t.stageCode===e);return t?t.name:e},getStatusColor(e){const t={NEW:"blue",INVE:"orange",PEDI:"purple",REV:"indigo",RET:"deep-orange",CANC:"grey",CLO:"green"};return t[e]||"primary"},yearOnly(e){return e?_()(e).format("YYYY"):""},getInsurerName(e){if(!e||!this.insurers.length)return"Unknown";const t=this.insurers.find(t=>t.id===e);return t?t.name:e},filterDept(e){return e&&this.refTypes.length?this.refTypes.filter(t=>t.id===e):[]},filterSubDept(e){return e&&this.subRefTypes.length?this.subRefTypes.filter(t=>t.id===e):[]},filterBranches(e){return e&&this.branches.length?this.branches.filter(t=>t.id===e):[]},isSelectable(e){return"ADAC"===e.fileStatus},async expressAcceptSelected(){if(this.canExpressAccept){this.loading=!0;try{const e=this.selected.map(e=>k["a"].update(e.id,{...e,fileStatus:"INVE",dateStartInv:_()().format()}));await Promise.all(e),this.showSnackbar(`Accepted ${this.selected.length} assignment(s) successfully`,"success"),this.selected=[],await this.refreshTasks()}catch(e){this.showSnackbar("Error accepting assignments","error")}finally{this.loading=!1}}},applyFilters(){},showSnackbar(e,t="info"){let s="mdi-information",r="white";"error"===t?s="mdi-alert-circle":"success"===t?s="mdi-check-circle":"warning"===t&&(s="mdi-alert"),this.snackbar={show:!0,text:e,color:t,timeout:3e3,icon:s,actionColor:r}},navigateToTask(e){this.$router.push({name:"vuexFile",params:{id:e.id}})},resetFilters(){this.statusFilter=null,this.search="",this.sortBy="daysOpen",this.sortDirection="desc"}}},D=O,E=(s("b04f"),s("2877")),F=Object(E["a"])(D,b,v,!1,null,"23d42372",null);t["default"]=F.exports},dc19:function(e,t,s){"use strict";var r=s("cb27").has;e.exports=function(e){return r(e),e}},e9bc:function(e,t,s){"use strict";var r=s("dc19"),a=s("cb27").add,n=s("83b9e"),i=s("7f65"),c=s("5388");e.exports=function(e){var t=r(this),s=i(e).getIterator(),o=n(t);return c(s,(function(e){a(o,e)})),o}},fd54:function(e,t,s){}}]);
//# sourceMappingURL=chunk-096742b6.b589f91c.js.map